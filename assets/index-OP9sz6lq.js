function _mergeNamespaces(s,i){for(var n=0;n<i.length;n++){const a=i[n];if(typeof a!="string"&&!Array.isArray(a)){for(const d in a)if(d!=="default"&&!(d in s)){const y=Object.getOwnPropertyDescriptor(a,d);y&&Object.defineProperty(s,d,y.get?y:{enumerable:!0,get:()=>a[d]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))a(d);new MutationObserver(d=>{for(const y of d)if(y.type==="childList")for(const C of y.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&a(C)}).observe(document,{childList:!0,subtree:!0});function n(d){const y={};return d.integrity&&(y.integrity=d.integrity),d.referrerPolicy&&(y.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?y.credentials="include":d.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function a(d){if(d.ep)return;d.ep=!0;const y=n(d);fetch(d.href,y)}})();function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var s=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function n(a,d,y){var C=null;if(y!==void 0&&(C=""+y),d.key!==void 0&&(C=""+d.key),"key"in d){y={};for(var p in d)p!=="key"&&(y[p]=d[p])}else y=d;return d=y.ref,{$$typeof:s,type:a,key:C,ref:d!==void 0?d:null,props:y}}return reactJsxRuntime_production.Fragment=i,reactJsxRuntime_production.jsx=n,reactJsxRuntime_production.jsxs=n,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var s=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),C=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),R=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),w=Symbol.iterator;function T(F){return F===null||typeof F!="object"?null:(F=w&&F[w]||F["@@iterator"],typeof F=="function"?F:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,l={};function c(F,K,te){this.props=F,this.context=K,this.refs=l,this.updater=te||M}c.prototype.isReactComponent={},c.prototype.setState=function(F,K){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,K,"setState")},c.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function g(){}g.prototype=c.prototype;function v(F,K,te){this.props=F,this.context=K,this.refs=l,this.updater=te||M}var b=v.prototype=new g;b.constructor=v,h(b,c.prototype),b.isPureReactComponent=!0;var S=Array.isArray;function u(){}var m={H:null,A:null,T:null,S:null},_=Object.prototype.hasOwnProperty;function D(F,K,te){var re=te.ref;return{$$typeof:s,type:F,key:K,ref:re!==void 0?re:null,props:te}}function L(F,K){return D(F.type,K,F.props)}function P(F){return typeof F=="object"&&F!==null&&F.$$typeof===s}function N(F){var K={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(te){return K[te]})}var U=/\/+/g;function V(F,K){return typeof F=="object"&&F!==null&&F.key!=null?N(""+F.key):K.toString(36)}function W(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(u,u):(F.status="pending",F.then(function(K){F.status==="pending"&&(F.status="fulfilled",F.value=K)},function(K){F.status==="pending"&&(F.status="rejected",F.reason=K)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function G(F,K,te,re,le){var oe=typeof F;(oe==="undefined"||oe==="boolean")&&(F=null);var ue=!1;if(F===null)ue=!0;else switch(oe){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(F.$$typeof){case s:case i:ue=!0;break;case x:return ue=F._init,G(ue(F._payload),K,te,re,le)}}if(ue)return le=le(F),ue=re===""?"."+V(F,0):re,S(le)?(te="",ue!=null&&(te=ue.replace(U,"$&/")+"/"),G(le,K,te,"",function(Oe){return Oe})):le!=null&&(P(le)&&(le=L(le,te+(le.key==null||F&&F.key===le.key?"":(""+le.key).replace(U,"$&/")+"/")+ue)),K.push(le)),1;ue=0;var he=re===""?".":re+":";if(S(F))for(var ge=0;ge<F.length;ge++)re=F[ge],oe=he+V(re,ge),ue+=G(re,K,te,oe,le);else if(ge=T(F),typeof ge=="function")for(F=ge.call(F),ge=0;!(re=F.next()).done;)re=re.value,oe=he+V(re,ge++),ue+=G(re,K,te,oe,le);else if(oe==="object"){if(typeof F.then=="function")return G(W(F),K,te,re,le);throw K=String(F),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return ue}function H(F,K,te){if(F==null)return F;var re=[],le=0;return G(F,re,"","",function(oe){return K.call(te,oe,le++)}),re}function k(F){if(F._status===-1){var K=F._result;K=K(),K.then(function(te){(F._status===0||F._status===-1)&&(F._status=1,F._result=te)},function(te){(F._status===0||F._status===-1)&&(F._status=2,F._result=te)}),F._status===-1&&(F._status=0,F._result=K)}if(F._status===1)return F._result.default;throw F._result}var X=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},$={map:H,forEach:function(F,K,te){H(F,function(){K.apply(this,arguments)},te)},count:function(F){var K=0;return H(F,function(){K++}),K},toArray:function(F){return H(F,function(K){return K})||[]},only:function(F){if(!P(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return react_production.Activity=A,react_production.Children=$,react_production.Component=c,react_production.Fragment=n,react_production.Profiler=d,react_production.PureComponent=v,react_production.StrictMode=a,react_production.Suspense=E,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=m,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(F){return m.H.useMemoCache(F)}},react_production.cache=function(F){return function(){return F.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(F,K,te){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var re=h({},F.props),le=F.key;if(K!=null)for(oe in K.key!==void 0&&(le=""+K.key),K)!_.call(K,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&K.ref===void 0||(re[oe]=K[oe]);var oe=arguments.length-2;if(oe===1)re.children=te;else if(1<oe){for(var ue=Array(oe),he=0;he<oe;he++)ue[he]=arguments[he+2];re.children=ue}return D(F.type,le,re)},react_production.createContext=function(F){return F={$$typeof:C,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:y,_context:F},F},react_production.createElement=function(F,K,te){var re,le={},oe=null;if(K!=null)for(re in K.key!==void 0&&(oe=""+K.key),K)_.call(K,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(le[re]=K[re]);var ue=arguments.length-2;if(ue===1)le.children=te;else if(1<ue){for(var he=Array(ue),ge=0;ge<ue;ge++)he[ge]=arguments[ge+2];le.children=he}if(F&&F.defaultProps)for(re in ue=F.defaultProps,ue)le[re]===void 0&&(le[re]=ue[re]);return D(F,oe,le)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(F){return{$$typeof:p,render:F}},react_production.isValidElement=P,react_production.lazy=function(F){return{$$typeof:x,_payload:{_status:-1,_result:F},_init:k}},react_production.memo=function(F,K){return{$$typeof:R,type:F,compare:K===void 0?null:K}},react_production.startTransition=function(F){var K=m.T,te={};m.T=te;try{var re=F(),le=m.S;le!==null&&le(te,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(u,X)}catch(oe){X(oe)}finally{K!==null&&te.types!==null&&(K.types=te.types),m.T=K}},react_production.unstable_useCacheRefresh=function(){return m.H.useCacheRefresh()},react_production.use=function(F){return m.H.use(F)},react_production.useActionState=function(F,K,te){return m.H.useActionState(F,K,te)},react_production.useCallback=function(F,K){return m.H.useCallback(F,K)},react_production.useContext=function(F){return m.H.useContext(F)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(F,K){return m.H.useDeferredValue(F,K)},react_production.useEffect=function(F,K){return m.H.useEffect(F,K)},react_production.useEffectEvent=function(F){return m.H.useEffectEvent(F)},react_production.useId=function(){return m.H.useId()},react_production.useImperativeHandle=function(F,K,te){return m.H.useImperativeHandle(F,K,te)},react_production.useInsertionEffect=function(F,K){return m.H.useInsertionEffect(F,K)},react_production.useLayoutEffect=function(F,K){return m.H.useLayoutEffect(F,K)},react_production.useMemo=function(F,K){return m.H.useMemo(F,K)},react_production.useOptimistic=function(F,K){return m.H.useOptimistic(F,K)},react_production.useReducer=function(F,K,te){return m.H.useReducer(F,K,te)},react_production.useRef=function(F){return m.H.useRef(F)},react_production.useState=function(F){return m.H.useState(F)},react_production.useSyncExternalStore=function(F,K,te){return m.H.useSyncExternalStore(F,K,te)},react_production.useTransition=function(){return m.H.useTransition()},react_production.version="19.2.3",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(s){function i(G,H){var k=G.length;G.push(H);e:for(;0<k;){var X=k-1>>>1,$=G[X];if(0<d($,H))G[X]=H,G[k]=$,k=X;else break e}}function n(G){return G.length===0?null:G[0]}function a(G){if(G.length===0)return null;var H=G[0],k=G.pop();if(k!==H){G[0]=k;e:for(var X=0,$=G.length,F=$>>>1;X<F;){var K=2*(X+1)-1,te=G[K],re=K+1,le=G[re];if(0>d(te,k))re<$&&0>d(le,te)?(G[X]=le,G[re]=k,X=re):(G[X]=te,G[K]=k,X=K);else if(re<$&&0>d(le,k))G[X]=le,G[re]=k,X=re;else break e}}return H}function d(G,H){var k=G.sortIndex-H.sortIndex;return k!==0?k:G.id-H.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var y=performance;s.unstable_now=function(){return y.now()}}else{var C=Date,p=C.now();s.unstable_now=function(){return C.now()-p}}var E=[],R=[],x=1,A=null,w=3,T=!1,M=!1,h=!1,l=!1,c=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;function b(G){for(var H=n(R);H!==null;){if(H.callback===null)a(R);else if(H.startTime<=G)a(R),H.sortIndex=H.expirationTime,i(E,H);else break;H=n(R)}}function S(G){if(h=!1,b(G),!M)if(n(E)!==null)M=!0,u||(u=!0,N());else{var H=n(R);H!==null&&W(S,H.startTime-G)}}var u=!1,m=-1,_=5,D=-1;function L(){return l?!0:!(s.unstable_now()-D<_)}function P(){if(l=!1,u){var G=s.unstable_now();D=G;var H=!0;try{e:{M=!1,h&&(h=!1,g(m),m=-1),T=!0;var k=w;try{t:{for(b(G),A=n(E);A!==null&&!(A.expirationTime>G&&L());){var X=A.callback;if(typeof X=="function"){A.callback=null,w=A.priorityLevel;var $=X(A.expirationTime<=G);if(G=s.unstable_now(),typeof $=="function"){A.callback=$,b(G),H=!0;break t}A===n(E)&&a(E),b(G)}else a(E);A=n(E)}if(A!==null)H=!0;else{var F=n(R);F!==null&&W(S,F.startTime-G),H=!1}}break e}finally{A=null,w=k,T=!1}H=void 0}}finally{H?N():u=!1}}}var N;if(typeof v=="function")N=function(){v(P)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,V=U.port2;U.port1.onmessage=P,N=function(){V.postMessage(null)}}else N=function(){c(P,0)};function W(G,H){m=c(function(){G(s.unstable_now())},H)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(G){switch(w){case 1:case 2:case 3:var H=3;break;default:H=w}var k=w;w=H;try{return G()}finally{w=k}},s.unstable_requestPaint=function(){l=!0},s.unstable_runWithPriority=function(G,H){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var k=w;w=G;try{return H()}finally{w=k}},s.unstable_scheduleCallback=function(G,H,k){var X=s.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?X+k:X):k=X,G){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=k+$,G={id:x++,callback:H,priorityLevel:G,startTime:k,expirationTime:$,sortIndex:-1},k>X?(G.sortIndex=k,i(R,G),n(E)===null&&G===n(R)&&(h?(g(m),m=-1):h=!0,W(S,k-X))):(G.sortIndex=$,i(E,G),M||T||(M=!0,u||(u=!0,N()))),G},s.unstable_shouldYield=L,s.unstable_wrapCallback=function(G){var H=w;return function(){var k=w;w=H;try{return G.apply(this,arguments)}finally{w=k}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var s=requireReact();function i(E){var R="https://react.dev/errors/"+E;if(1<arguments.length){R+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)R+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+E+"; visit "+R+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(i(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},d=Symbol.for("react.portal");function y(E,R,x){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:A==null?null:""+A,children:E,containerInfo:R,implementation:x}}var C=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(E,R){if(E==="font")return"";if(typeof R=="string")return R==="use-credentials"?R:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,reactDom_production.createPortal=function(E,R){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!R||R.nodeType!==1&&R.nodeType!==9&&R.nodeType!==11)throw Error(i(299));return y(E,R,null,x)},reactDom_production.flushSync=function(E){var R=C.T,x=a.p;try{if(C.T=null,a.p=2,E)return E()}finally{C.T=R,a.p=x,a.d.f()}},reactDom_production.preconnect=function(E,R){typeof E=="string"&&(R?(R=R.crossOrigin,R=typeof R=="string"?R==="use-credentials"?R:"":void 0):R=null,a.d.C(E,R))},reactDom_production.prefetchDNS=function(E){typeof E=="string"&&a.d.D(E)},reactDom_production.preinit=function(E,R){if(typeof E=="string"&&R&&typeof R.as=="string"){var x=R.as,A=p(x,R.crossOrigin),w=typeof R.integrity=="string"?R.integrity:void 0,T=typeof R.fetchPriority=="string"?R.fetchPriority:void 0;x==="style"?a.d.S(E,typeof R.precedence=="string"?R.precedence:void 0,{crossOrigin:A,integrity:w,fetchPriority:T}):x==="script"&&a.d.X(E,{crossOrigin:A,integrity:w,fetchPriority:T,nonce:typeof R.nonce=="string"?R.nonce:void 0})}},reactDom_production.preinitModule=function(E,R){if(typeof E=="string")if(typeof R=="object"&&R!==null){if(R.as==null||R.as==="script"){var x=p(R.as,R.crossOrigin);a.d.M(E,{crossOrigin:x,integrity:typeof R.integrity=="string"?R.integrity:void 0,nonce:typeof R.nonce=="string"?R.nonce:void 0})}}else R==null&&a.d.M(E)},reactDom_production.preload=function(E,R){if(typeof E=="string"&&typeof R=="object"&&R!==null&&typeof R.as=="string"){var x=R.as,A=p(x,R.crossOrigin);a.d.L(E,x,{crossOrigin:A,integrity:typeof R.integrity=="string"?R.integrity:void 0,nonce:typeof R.nonce=="string"?R.nonce:void 0,type:typeof R.type=="string"?R.type:void 0,fetchPriority:typeof R.fetchPriority=="string"?R.fetchPriority:void 0,referrerPolicy:typeof R.referrerPolicy=="string"?R.referrerPolicy:void 0,imageSrcSet:typeof R.imageSrcSet=="string"?R.imageSrcSet:void 0,imageSizes:typeof R.imageSizes=="string"?R.imageSizes:void 0,media:typeof R.media=="string"?R.media:void 0})}},reactDom_production.preloadModule=function(E,R){if(typeof E=="string")if(R){var x=p(R.as,R.crossOrigin);a.d.m(E,{as:typeof R.as=="string"&&R.as!=="script"?R.as:void 0,crossOrigin:x,integrity:typeof R.integrity=="string"?R.integrity:void 0})}else a.d.m(E)},reactDom_production.requestFormReset=function(E){a.d.r(E)},reactDom_production.unstable_batchedUpdates=function(E,R){return E(R)},reactDom_production.useFormState=function(E,R,x){return C.H.useFormState(E,R,x)},reactDom_production.useFormStatus=function(){return C.H.useHostTransitionStatus()},reactDom_production.version="19.2.3",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(i){console.error(i)}}return s(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var s=requireScheduler(),i=requireReact(),n=requireReactDom();function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function y(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function C(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function E(e){if(y(e)!==e)throw Error(a(188))}function R(e){var t=e.alternate;if(!t){if(t=y(e),t===null)throw Error(a(188));return t!==e?null:e}for(var o=e,f=t;;){var z=o.return;if(z===null)break;var I=z.alternate;if(I===null){if(f=z.return,f!==null){o=f;continue}break}if(z.child===I.child){for(I=z.child;I;){if(I===o)return E(z),e;if(I===f)return E(z),t;I=I.sibling}throw Error(a(188))}if(o.return!==f.return)o=z,f=I;else{for(var Y=!1,ie=z.child;ie;){if(ie===o){Y=!0,o=z,f=I;break}if(ie===f){Y=!0,f=z,o=I;break}ie=ie.sibling}if(!Y){for(ie=I.child;ie;){if(ie===o){Y=!0,o=I,f=z;break}if(ie===f){Y=!0,f=I,o=z;break}ie=ie.sibling}if(!Y)throw Error(a(189))}}if(o.alternate!==f)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var A=Object.assign,w=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),v=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function N(e){return e===null||typeof e!="object"?null:(e=P&&e[P]||e["@@iterator"],typeof e=="function"?e:null)}var U=Symbol.for("react.client.reference");function V(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===U?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case h:return"Fragment";case c:return"Profiler";case l:return"StrictMode";case S:return"Suspense";case u:return"SuspenseList";case D:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case M:return"Portal";case v:return e.displayName||"Context";case g:return(e._context.displayName||"Context")+".Consumer";case b:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case m:return t=e.displayName||null,t!==null?t:V(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return V(e(t))}catch{}}return null}var W=Array.isArray,G=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k={pending:!1,data:null,method:null,action:null},X=[],$=-1;function F(e){return{current:e}}function K(e){0>$||(e.current=X[$],X[$]=null,$--)}function te(e,t){$++,X[$]=e.current,e.current=t}var re=F(null),le=F(null),oe=F(null),ue=F(null);function he(e,t){switch(te(oe,t),te(le,e),te(re,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Fh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Fh(t),e=Uh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}K(re),te(re,e)}function ge(){K(re),K(le),K(oe)}function Oe(e){e.memoizedState!==null&&te(ue,e);var t=re.current,o=Uh(t,e.type);t!==o&&(te(le,e),te(re,o))}function Le(e){le.current===e&&(K(re),K(le)),ue.current===e&&(K(ue),po._currentValue=k)}var $e,we;function ce(e){if($e===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);$e=t&&t[1]||"",we=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$e+e+we}var xe=!1;function Ne(e,t){if(!e||xe)return"";xe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(t){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(Ke){var We=Ke}Reflect.construct(e,[],tt)}else{try{tt.call()}catch(Ke){We=Ke}e.call(tt.prototype)}}else{try{throw Error()}catch(Ke){We=Ke}(tt=e())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(Ke){if(Ke&&We&&typeof Ke.stack=="string")return[Ke.stack,We.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var z=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");z&&z.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var I=f.DetermineComponentFrameRoot(),Y=I[0],ie=I[1];if(Y&&ie){var ye=Y.split(`
`),Ue=ie.split(`
`);for(z=f=0;f<ye.length&&!ye[f].includes("DetermineComponentFrameRoot");)f++;for(;z<Ue.length&&!Ue[z].includes("DetermineComponentFrameRoot");)z++;if(f===ye.length||z===Ue.length)for(f=ye.length-1,z=Ue.length-1;1<=f&&0<=z&&ye[f]!==Ue[z];)z--;for(;1<=f&&0<=z;f--,z--)if(ye[f]!==Ue[z]){if(f!==1||z!==1)do if(f--,z--,0>z||ye[f]!==Ue[z]){var Ye=`
`+ye[f].replace(" at new "," at ");return e.displayName&&Ye.includes("<anonymous>")&&(Ye=Ye.replace("<anonymous>",e.displayName)),Ye}while(1<=f&&0<=z);break}}}finally{xe=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?ce(o):""}function Xe(e,t){switch(e.tag){case 26:case 27:case 5:return ce(e.type);case 16:return ce("Lazy");case 13:return e.child!==t&&t!==null?ce("Suspense Fallback"):ce("Suspense");case 19:return ce("SuspenseList");case 0:case 15:return Ne(e.type,!1);case 11:return Ne(e.type.render,!1);case 1:return Ne(e.type,!0);case 31:return ce("Activity");default:return""}}function rt(e){try{var t="",o=null;do t+=Xe(e,o),o=e,e=e.return;while(e);return t}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var nt=Object.prototype.hasOwnProperty,et=s.unstable_scheduleCallback,Ze=s.unstable_cancelCallback,qe=s.unstable_shouldYield,Ve=s.unstable_requestPaint,Ge=s.unstable_now,at=s.unstable_getCurrentPriorityLevel,ot=s.unstable_ImmediatePriority,J=s.unstable_UserBlockingPriority,ne=s.unstable_NormalPriority,se=s.unstable_LowPriority,_e=s.unstable_IdlePriority,Se=s.log,Pe=s.unstable_setDisableYieldValue,Ie=null,Q=null;function me(e){if(typeof Se=="function"&&Pe(e),Q&&typeof Q.setStrictMode=="function")try{Q.setStrictMode(Ie,e)}catch{}}var be=Math.clz32?Math.clz32:ze,ke=Math.log,ve=Math.LN2;function ze(e){return e>>>=0,e===0?32:31-(ke(e)/ve|0)|0}var q=256,He=262144,Je=4194304;function j(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Me(e,t,o){var f=e.pendingLanes;if(f===0)return 0;var z=0,I=e.suspendedLanes,Y=e.pingedLanes;e=e.warmLanes;var ie=f&134217727;return ie!==0?(f=ie&~I,f!==0?z=j(f):(Y&=ie,Y!==0?z=j(Y):o||(o=ie&~e,o!==0&&(z=j(o))))):(ie=f&~I,ie!==0?z=j(ie):Y!==0?z=j(Y):o||(o=f&~e,o!==0&&(z=j(o)))),z===0?0:t!==0&&t!==z&&(t&I)===0&&(I=z&-z,o=t&-t,I>=o||I===32&&(o&4194048)!==0)?t:z}function Ae(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ee(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pe(){var e=Je;return Je<<=1,(Je&62914560)===0&&(Je=4194304),e}function De(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function lt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ct(e,t,o,f,z,I){var Y=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var ie=e.entanglements,ye=e.expirationTimes,Ue=e.hiddenUpdates;for(o=Y&~o;0<o;){var Ye=31-be(o),tt=1<<Ye;ie[Ye]=0,ye[Ye]=-1;var We=Ue[Ye];if(We!==null)for(Ue[Ye]=null,Ye=0;Ye<We.length;Ye++){var Ke=We[Ye];Ke!==null&&(Ke.lane&=-536870913)}o&=~tt}f!==0&&st(e,f,0),I!==0&&z===0&&e.tag!==0&&(e.suspendedLanes|=I&~(Y&~t))}function st(e,t,o){e.pendingLanes|=t,e.suspendedLanes&=~t;var f=31-be(t);e.entangledLanes|=t,e.entanglements[f]=e.entanglements[f]|1073741824|o&261930}function xt(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var f=31-be(o),z=1<<f;z&t|e[f]&t&&(e[f]|=t),o&=~z}}function Zt(e,t){var o=t&-t;return o=(o&42)!==0?1:St(o),(o&(e.suspendedLanes|t))!==0?0:o}function St(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function vt(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function yt(){var e=H.p;return e!==0?e:(e=window.event,e===void 0?32:od(e.type))}function Gt(e,t){var o=H.p;try{return H.p=e,t()}finally{H.p=o}}var Ct=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Ct,Qt="__reactProps$"+Ct,Bt="__reactContainer$"+Ct,zt="__reactEvents$"+Ct,qt="__reactListeners$"+Ct,Cn="__reactHandles$"+Ct,yn="__reactResources$"+Ct,Pn="__reactMarker$"+Ct;function Er(e){delete e[Lt],delete e[Qt],delete e[zt],delete e[qt],delete e[Cn]}function In(e){var t=e[Lt];if(t)return t;for(var o=e.parentNode;o;){if(t=o[Bt]||o[Lt]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=kh(e);e!==null;){if(o=e[Lt])return o;e=kh(e)}return t}e=o,o=e.parentNode}return null}function Gn(e){if(e=e[Lt]||e[Bt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function dr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(a(33))}function $n(e){var t=e[yn];return t||(t=e[yn]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function hn(e){e[Pn]=!0}var Wn=new Set,Hr={};function Xn(e,t){Vn(e,t),Vn(e+"Capture",t)}function Vn(e,t){for(Hr[e]=t,e=0;e<t.length;e++)Wn.add(t[e])}var si=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Di={},ft={};function sn(e){return nt.call(ft,e)?!0:nt.call(Di,e)?!1:si.test(e)?ft[e]=!0:(Di[e]=!0,!1)}function tn(e,t,o){if(sn(t))if(o===null)e.removeAttribute(t);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var f=t.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+o)}}function nr(e,t,o){if(o===null)e.removeAttribute(t);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+o)}}function _n(e,t,o,f){if(f===null)e.removeAttribute(o);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(t,o,""+f)}}function An(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lr(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Li(e,t,o){var f=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var z=f.get,I=f.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return z.call(this)},set:function(Y){o=""+Y,I.call(this,Y)}}),Object.defineProperty(e,t,{enumerable:f.enumerable}),{getValue:function(){return o},setValue:function(Y){o=""+Y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zr(e){if(!e._valueTracker){var t=Lr(e)?"checked":"value";e._valueTracker=Li(e,t,""+e[t])}}function kr(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),f="";return e&&(f=Lr(e)?e.checked?"true":"false":e.value),e=f,e!==o?(t.setValue(e),!0):!1}function ut(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Kt=/[\n"\\]/g;function $t(e){return e.replace(Kt,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Sr(e,t,o,f,z,I,Y,ie){e.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?e.type=Y:e.removeAttribute("type"),t!=null?Y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+An(t)):e.value!==""+An(t)&&(e.value=""+An(t)):Y!=="submit"&&Y!=="reset"||e.removeAttribute("value"),t!=null?mr(e,Y,An(t)):o!=null?mr(e,Y,An(o)):f!=null&&e.removeAttribute("value"),z==null&&I!=null&&(e.defaultChecked=!!I),z!=null&&(e.checked=z&&typeof z!="function"&&typeof z!="symbol"),ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?e.name=""+An(ie):e.removeAttribute("name")}function gr(e,t,o,f,z,I,Y,ie){if(I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(e.type=I),t!=null||o!=null){if(!(I!=="submit"&&I!=="reset"||t!=null)){zr(e);return}o=o!=null?""+An(o):"",t=t!=null?""+An(t):o,ie||t===e.value||(e.value=t),e.defaultValue=t}f=f??z,f=typeof f!="function"&&typeof f!="symbol"&&!!f,e.checked=ie?e.checked:!!f,e.defaultChecked=!!f,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(e.name=Y),zr(e)}function mr(e,t,o){t==="number"&&ut(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function Kr(e,t,o,f){if(e=e.options,t){t={};for(var z=0;z<o.length;z++)t["$"+o[z]]=!0;for(o=0;o<e.length;o++)z=t.hasOwnProperty("$"+e[o].value),e[o].selected!==z&&(e[o].selected=z),z&&f&&(e[o].defaultSelected=!0)}else{for(o=""+An(o),t=null,z=0;z<e.length;z++){if(e[z].value===o){e[z].selected=!0,f&&(e[z].defaultSelected=!0);return}t!==null||e[z].disabled||(t=e[z])}t!==null&&(t.selected=!0)}}function $r(e,t,o){if(t!=null&&(t=""+An(t),t!==e.value&&(e.value=t),o==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=o!=null?""+An(o):""}function xs(e,t,o,f){if(t==null){if(f!=null){if(o!=null)throw Error(a(92));if(W(f)){if(1<f.length)throw Error(a(93));f=f[0]}o=f}o==null&&(o=""),t=o}o=An(t),e.defaultValue=o,f=e.textContent,f===o&&f!==""&&f!==null&&(e.value=f),zr(e)}function Yn(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var Bl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fl(e,t,o){var f=t.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?f?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":f?e.setProperty(t,o):typeof o!="number"||o===0||Bl.has(t)?t==="float"?e.cssFloat=o:e[t]=(""+o).trim():e[t]=o+"px"}function Pr(e,t,o){if(t!=null&&typeof t!="object")throw Error(a(62));if(e=e.style,o!=null){for(var f in o)!o.hasOwnProperty(f)||t!=null&&t.hasOwnProperty(f)||(f.indexOf("--")===0?e.setProperty(f,""):f==="float"?e.cssFloat="":e[f]="");for(var z in t)f=t[z],t.hasOwnProperty(z)&&o[z]!==f&&Fl(e,z,f)}else for(var I in t)t.hasOwnProperty(I)&&Fl(e,I,t[I])}function Un(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xr(e){return Xt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function pr(){}var Ia=null;function Yr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var oi=null,Zr=null;function li(e){var t=Gn(e);if(t&&(e=t.stateNode)){var o=e[Qt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Sr(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+$t(""+t)+'"][type="radio"]'),t=0;t<o.length;t++){var f=o[t];if(f!==e&&f.form===e.form){var z=f[Qt]||null;if(!z)throw Error(a(90));Sr(f,z.value,z.defaultValue,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name)}}for(t=0;t<o.length;t++)f=o[t],f.form===e.form&&kr(f)}break e;case"textarea":$r(e,o.value,o.defaultValue);break e;case"select":t=o.value,t!=null&&Kr(e,!!o.multiple,t,!1)}}}var bs=!1;function xo(e,t,o){if(bs)return e(t,o);bs=!0;try{var f=e(t);return f}finally{if(bs=!1,(oi!==null||Zr!==null)&&(gl(),oi&&(t=oi,e=Zr,Zr=oi=null,li(t),e)))for(t=0;t<e.length;t++)li(e[t])}}function Hn(e,t){var o=e.stateNode;if(o===null)return null;var f=o[Qt]||null;if(f===null)return null;o=f[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(e=e.type,f=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!f;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(a(231,t,typeof o));return o}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Es=!1;if(Qn)try{var sa={};Object.defineProperty(sa,"passive",{get:function(){Es=!0}}),window.addEventListener("test",sa,sa),window.removeEventListener("test",sa,sa)}catch{Es=!1}var rr=null,Ba=null,oa=null;function bo(){if(oa)return oa;var e,t=Ba,o=t.length,f,z="value"in rr?rr.value:rr.textContent,I=z.length;for(e=0;e<o&&t[e]===z[e];e++);var Y=o-e;for(f=1;f<=Y&&t[o-f]===z[I-f];f++);return oa=z.slice(e,1<f?1-f:void 0)}function la(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fa(){return!0}function Eo(){return!1}function kn(e){function t(o,f,z,I,Y){this._reactName=o,this._targetInst=z,this.type=f,this.nativeEvent=I,this.target=Y,this.currentTarget=null;for(var ie in e)e.hasOwnProperty(ie)&&(o=e[ie],this[ie]=o?o(I):I[ie]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?Fa:Eo,this.isPropagationStopped=Eo,this}return A(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Fa)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Fa)},persist:function(){},isPersistent:Fa}),t}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ua=kn(ci),ca=A({},ci,{view:0,detail:0}),Ul=kn(ca),Ss,Cs,ua,Na=A({},ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ga,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ua&&(ua&&e.type==="mousemove"?(Ss=e.screenX-ua.screenX,Cs=e.screenY-ua.screenY):Cs=Ss=0,ua=e),Ss)},movementY:function(e){return"movementY"in e?e.movementY:Cs}}),So=kn(Na),Nl=A({},Na,{dataTransfer:0}),fa=kn(Nl),jl=A({},ca,{relatedTarget:0}),As=kn(jl),Gl=A({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),ja=kn(Gl),Co=A({},ci,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ha=kn(Co),Wl=A({},ci,{data:0}),Ao=kn(Wl),Vl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},da={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kl(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=da[e])?!!t[e]:!1}function Ga(){return kl}var Mo=A({},ca,{key:function(e){if(e.key){var t=Vl[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=la(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Hl[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ga,charCode:function(e){return e.type==="keypress"?la(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?la(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Kl=kn(Mo),$l=A({},Na,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),To=kn($l),Xl=A({},ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ga}),Wa=kn(Xl),Yl=A({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zl=kn(Yl),Ql=A({},Na,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ql=kn(Ql),ga=A({},ci,{newState:0,oldState:0}),Ms=kn(ga),Jl=[9,13,27,32],Ts=Qn&&"CompositionEvent"in window,ma=null;Qn&&"documentMode"in document&&(ma=document.documentMode);var ec=Qn&&"TextEvent"in window&&!ma,wo=Qn&&(!Ts||ma&&8<ma&&11>=ma),Oo=" ",Ro=!1;function pa(e,t){switch(e){case"keyup":return Jl.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Do(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zi=!1;function Pi(e,t){switch(e){case"compositionend":return Do(t);case"keypress":return t.which!==32?null:(Ro=!0,Oo);case"textInput":return e=t.data,e===Oo&&Ro?null:e;default:return null}}function Lo(e,t){if(zi)return e==="compositionend"||!Ts&&pa(e,t)?(e=bo(),oa=Ba=rr=null,zi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wo&&t.locale!=="ko"?null:t.data;default:return null}}var zo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ws(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zo[e.type]:t==="textarea"}function Va(e,t,o,f){oi?Zr?Zr.push(f):Zr=[f]:oi=f,t=bl(t,"onChange"),0<t.length&&(o=new Ua("onChange","change",null,o,f),e.push({event:o,listeners:t}))}var Ii=null,va=null;function tc(e){Dh(e,0)}function Ha(e){var t=dr(e);if(kr(t))return e}function Po(e,t){if(e==="change")return t}var nc=!1;if(Qn){var ui;if(Qn){var Os="oninput"in document;if(!Os){var Rs=document.createElement("div");Rs.setAttribute("oninput","return;"),Os=typeof Rs.oninput=="function"}ui=Os}else ui=!1;nc=ui&&(!document.documentMode||9<document.documentMode)}function Ds(){Ii&&(Ii.detachEvent("onpropertychange",Ls),va=Ii=null)}function Ls(e){if(e.propertyName==="value"&&Ha(va)){var t=[];Va(t,va,e,Yr(e)),xo(tc,t)}}function rc(e,t,o){e==="focusin"?(Ds(),Ii=t,va=o,Ii.attachEvent("onpropertychange",Ls)):e==="focusout"&&Ds()}function ka(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ha(va)}function fi(e,t){if(e==="click")return Ha(t)}function ic(e,t){if(e==="input"||e==="change")return Ha(t)}function ac(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mn=typeof Object.is=="function"?Object.is:ac;function Bi(e,t){if(mn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),f=Object.keys(t);if(o.length!==f.length)return!1;for(f=0;f<o.length;f++){var z=o[f];if(!nt.call(t,z)||!mn(e[z],t[z]))return!1}return!0}function zs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Io(e,t){var o=zs(e);e=0;for(var f;o;){if(o.nodeType===3){if(f=e+o.textContent.length,e<=t&&f>=t)return{node:o,offset:t-e};e=f}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=zs(o)}}function Ps(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ps(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ya(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ut(e.document);t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=ut(e.document)}return t}function Ka(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Bo=Qn&&"documentMode"in document&&11>=document.documentMode,hi=null,$a=null,Fi=null,Xa=!1;function Is(e,t,o){var f=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Xa||hi==null||hi!==ut(f)||(f=hi,"selectionStart"in f&&Ka(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Fi&&Bi(Fi,f)||(Fi=f,f=bl($a,"onSelect"),0<f.length&&(t=new Ua("onSelect","select",null,t,o),e.push({event:t,listeners:f}),t.target=hi)))}function Qr(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var di={animationend:Qr("Animation","AnimationEnd"),animationiteration:Qr("Animation","AnimationIteration"),animationstart:Qr("Animation","AnimationStart"),transitionrun:Qr("Transition","TransitionRun"),transitionstart:Qr("Transition","TransitionStart"),transitioncancel:Qr("Transition","TransitionCancel"),transitionend:Qr("Transition","TransitionEnd")},Ui={},Cr={};Qn&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);function Ir(e){if(Ui[e])return Ui[e];if(!di[e])return e;var t=di[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in Cr)return Ui[e]=t[o];return e}var Bs=Ir("animationend"),Ya=Ir("animationiteration"),Fs=Ir("animationstart"),Fo=Ir("transitionrun"),Uo=Ir("transitionstart"),No=Ir("transitioncancel"),_a=Ir("transitionend"),xa=new Map,Za="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Za.push("scrollEnd");function ir(e,t){xa.set(e,t),Xn(t,[e])}var ba=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},qn=[],gi=0,Ea=0;function Sa(){for(var e=gi,t=Ea=gi=0;t<e;){var o=qn[t];qn[t++]=null;var f=qn[t];qn[t++]=null;var z=qn[t];qn[t++]=null;var I=qn[t];if(qn[t++]=null,f!==null&&z!==null){var Y=f.pending;Y===null?z.next=z:(z.next=Y.next,Y.next=z),f.pending=z}I!==0&&Us(o,z,I)}}function Ca(e,t,o,f){qn[gi++]=e,qn[gi++]=t,qn[gi++]=o,qn[gi++]=f,Ea|=f,e.lanes|=f,e=e.alternate,e!==null&&(e.lanes|=f)}function on(e,t,o,f){return Ca(e,t,o,f),Qa(e)}function qr(e,t){return Ca(e,null,null,t),Qa(e)}function Us(e,t,o){e.lanes|=o;var f=e.alternate;f!==null&&(f.lanes|=o);for(var z=!1,I=e.return;I!==null;)I.childLanes|=o,f=I.alternate,f!==null&&(f.childLanes|=o),I.tag===22&&(e=I.stateNode,e===null||e._visibility&1||(z=!0)),e=I,I=I.return;return e.tag===3?(I=e.stateNode,z&&t!==null&&(z=31-be(o),e=I.hiddenUpdates,f=e[z],f===null?e[z]=[t]:f.push(t),t.lane=o|536870912),I):null}function Qa(e){if(50<lo)throw lo=0,Jc=null,Error(a(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ni={};function Ou(e,t,o,f){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(e,t,o,f){return new Ou(e,t,o,f)}function qa(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Br(e,t){var o=e.alternate;return o===null?(o=Jn(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function Jr(e,t){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,t=o.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Aa(e,t,o,f,z,I){var Y=0;if(f=e,typeof e=="function")qa(e)&&(Y=1);else if(typeof e=="string")Y=d0(e,o,re.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case D:return e=Jn(31,o,t,z),e.elementType=D,e.lanes=I,e;case h:return ei(o.children,z,I,t);case l:Y=8,z|=24;break;case c:return e=Jn(12,o,t,z|2),e.elementType=c,e.lanes=I,e;case S:return e=Jn(13,o,t,z),e.elementType=S,e.lanes=I,e;case u:return e=Jn(19,o,t,z),e.elementType=u,e.lanes=I,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case v:Y=10;break e;case g:Y=9;break e;case b:Y=11;break e;case m:Y=14;break e;case _:Y=16,f=null;break e}Y=29,o=Error(a(130,e===null?"null":typeof e,"")),f=null}return t=Jn(Y,o,t,z),t.elementType=e,t.type=f,t.lanes=I,t}function ei(e,t,o,f){return e=Jn(7,e,f,t),e.lanes=o,e}function Ja(e,t,o){return e=Jn(6,e,null,t),e.lanes=o,e}function Ns(e){var t=Jn(18,null,null,0);return t.stateNode=e,t}function js(e,t,o){return t=Jn(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Gs=new WeakMap;function Kn(e,t){if(typeof e=="object"&&e!==null){var o=Gs.get(e);return o!==void 0?o:(t={value:e,source:t,stack:rt(t)},Gs.set(e,t),t)}return{value:e,source:t,stack:rt(t)}}var ti=[],ji=0,Ma=null,Ta=0,ar=[],sr=0,ni=null,Ar=1,Mr="";function Fr(e,t){ti[ji++]=Ta,ti[ji++]=Ma,Ma=e,Ta=t}function jo(e,t,o){ar[sr++]=Ar,ar[sr++]=Mr,ar[sr++]=ni,ni=e;var f=Ar;e=Mr;var z=32-be(f)-1;f&=~(1<<z),o+=1;var I=32-be(t)+z;if(30<I){var Y=z-z%5;I=(f&(1<<Y)-1).toString(32),f>>=Y,z-=Y,Ar=1<<32-be(t)+z|o<<z|f,Mr=I+e}else Ar=1<<I|o<<z|f,Mr=e}function Ws(e){e.return!==null&&(Fr(e,1),jo(e,1,0))}function Vs(e){for(;e===Ma;)Ma=ti[--ji],ti[ji]=null,Ta=ti[--ji],ti[ji]=null;for(;e===ni;)ni=ar[--sr],ar[sr]=null,Mr=ar[--sr],ar[sr]=null,Ar=ar[--sr],ar[sr]=null}function Go(e,t){ar[sr++]=Ar,ar[sr++]=Mr,ar[sr++]=ni,Ar=t.id,Mr=t.overflow,ni=e}var Dn=null,dn=null,Ut=!1,Bn=null,or=!1,Hs=Error(a(519));function Ur(e){var t=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oa(Kn(t,e)),Hs}function Wo(e){var t=e.stateNode,o=e.type,f=e.memoizedProps;switch(t[Lt]=e,t[Qt]=f,o){case"dialog":jt("cancel",t),jt("close",t);break;case"iframe":case"object":case"embed":jt("load",t);break;case"video":case"audio":for(o=0;o<uo.length;o++)jt(uo[o],t);break;case"source":jt("error",t);break;case"img":case"image":case"link":jt("error",t),jt("load",t);break;case"details":jt("toggle",t);break;case"input":jt("invalid",t),gr(t,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":jt("invalid",t);break;case"textarea":jt("invalid",t),xs(t,f.value,f.defaultValue,f.children)}o=f.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||t.textContent===""+o||f.suppressHydrationWarning===!0||Ih(t.textContent,o)?(f.popover!=null&&(jt("beforetoggle",t),jt("toggle",t)),f.onScroll!=null&&jt("scroll",t),f.onScrollEnd!=null&&jt("scrollend",t),f.onClick!=null&&(t.onclick=pr),t=!0):t=!1,t||Ur(e,!0)}function Vo(e){for(Dn=e.return;Dn;)switch(Dn.tag){case 5:case 31:case 13:or=!1;return;case 27:case 3:or=!0;return;default:Dn=Dn.return}}function Tr(e){if(e!==Dn)return!1;if(!Ut)return Vo(e),Ut=!0,!1;var t=e.tag,o;if((o=t!==3&&t!==27)&&((o=t===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||gu(e.type,e.memoizedProps)),o=!o),o&&dn&&Ur(e),Vo(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));dn=Hh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));dn=Hh(e)}else t===27?(t=dn,ea(e.type)?(e=_u,_u=null,dn=e):dn=t):dn=Dn?Rr(e.stateNode.nextSibling):null;return!0}function Nr(){dn=Dn=null,Ut=!1}function wa(){var e=Bn;return e!==null&&(fr===null?fr=e:fr.push.apply(fr,e),Bn=null),e}function Oa(e){Bn===null?Bn=[e]:Bn.push(e)}var es=F(null),mi=null,er=null;function wr(e,t,o){te(es,t._currentValue),t._currentValue=o}function jr(e){e._currentValue=es.current,K(es)}function ks(e,t,o){for(;e!==null;){var f=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,f!==null&&(f.childLanes|=t)):f!==null&&(f.childLanes&t)!==t&&(f.childLanes|=t),e===o)break;e=e.return}}function Ks(e,t,o,f){var z=e.child;for(z!==null&&(z.return=e);z!==null;){var I=z.dependencies;if(I!==null){var Y=z.child;I=I.firstContext;e:for(;I!==null;){var ie=I;I=z;for(var ye=0;ye<t.length;ye++)if(ie.context===t[ye]){I.lanes|=o,ie=I.alternate,ie!==null&&(ie.lanes|=o),ks(I.return,o,e),f||(Y=null);break e}I=ie.next}}else if(z.tag===18){if(Y=z.return,Y===null)throw Error(a(341));Y.lanes|=o,I=Y.alternate,I!==null&&(I.lanes|=o),ks(Y,o,e),Y=null}else Y=z.child;if(Y!==null)Y.return=z;else for(Y=z;Y!==null;){if(Y===e){Y=null;break}if(z=Y.sibling,z!==null){z.return=Y.return,Y=z;break}Y=Y.return}z=Y}}function Gi(e,t,o,f){e=null;for(var z=t,I=!1;z!==null;){if(!I){if((z.flags&524288)!==0)I=!0;else if((z.flags&262144)!==0)break}if(z.tag===10){var Y=z.alternate;if(Y===null)throw Error(a(387));if(Y=Y.memoizedProps,Y!==null){var ie=z.type;mn(z.pendingProps.value,Y.value)||(e!==null?e.push(ie):e=[ie])}}else if(z===ue.current){if(Y=z.alternate,Y===null)throw Error(a(387));Y.memoizedState.memoizedState!==z.memoizedState.memoizedState&&(e!==null?e.push(po):e=[po])}z=z.return}e!==null&&Ks(t,e,o,f),t.flags|=262144}function ts(e){for(e=e.firstContext;e!==null;){if(!mn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function pi(e){mi=e,er=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ln(e){return Ho(mi,e)}function ns(e,t){return mi===null&&pi(e),Ho(e,t)}function Ho(e,t){var o=t._currentValue;if(t={context:t,memoizedValue:o,next:null},er===null){if(e===null)throw Error(a(308));er=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else er=er.next=t;return o}var sc=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(o,f){e.push(f)}};this.abort=function(){t.aborted=!0,e.forEach(function(o){return o()})}},oc=s.unstable_scheduleCallback,lc=s.unstable_NormalPriority,xn={$$typeof:v,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $s(){return{controller:new sc,data:new Map,refCount:0}}function Wi(e){e.refCount--,e.refCount===0&&oc(lc,function(){e.controller.abort()})}var Vi=null,rs=0,vi=0,yi=null;function ko(e,t){if(Vi===null){var o=Vi=[];rs=0,vi=au(),yi={status:"pending",value:void 0,then:function(f){o.push(f)}}}return rs++,t.then(Xs,Xs),t}function Xs(){if(--rs===0&&Vi!==null){yi!==null&&(yi.status="fulfilled");var e=Vi;Vi=null,vi=0,yi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ko(e,t){var o=[],f={status:"pending",value:null,reason:null,then:function(z){o.push(z)}};return e.then(function(){f.status="fulfilled",f.value=t;for(var z=0;z<o.length;z++)(0,o[z])(t)},function(z){for(f.status="rejected",f.reason=z,z=0;z<o.length;z++)(0,o[z])(void 0)}),f}var Ys=G.S;G.S=function(e,t){ah=Ge(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&ko(e,t),Ys!==null&&Ys(e,t)};var _i=F(null);function O(){var e=_i.current;return e!==null?e:gn.pooledCache}function Z(e,t){t===null?te(_i,_i.current):te(_i,t.pool)}function B(){var e=O();return e===null?null:{parent:xn._currentValue,pool:e}}var ae=Error(a(460)),de=Error(a(474)),fe=Error(a(542)),je={then:function(){}};function Te(e){return e=e.status,e==="fulfilled"||e==="rejected"}function gt(e,t,o){switch(o=e[o],o===void 0?e.push(t):o!==t&&(t.then(pr,pr),t=o),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,dt(e),e;default:if(typeof t.status=="string")t.then(pr,pr);else{if(e=gn,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=t,e.status="pending",e.then(function(f){if(t.status==="pending"){var z=t;z.status="fulfilled",z.value=f}},function(f){if(t.status==="pending"){var z=t;z.status="rejected",z.reason=f}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,dt(e),e}throw Fe=t,ae}}function Ee(e){try{var t=e._init;return t(e._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Fe=o,ae):o}}var Fe=null;function kt(){if(Fe===null)throw Error(a(459));var e=Fe;return Fe=null,e}function dt(e){if(e===ae||e===fe)throw Error(a(483))}var it=null,_t=0;function ln(e){var t=_t;return _t+=1,it===null&&(it=[]),gt(it,e,t)}function Pt(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Tt(e,t){throw t.$$typeof===w?Error(a(525)):(e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Yt(e){function t(Re,Ce){if(e){var Be=Re.deletions;Be===null?(Re.deletions=[Ce],Re.flags|=16):Be.push(Ce)}}function o(Re,Ce){if(!e)return null;for(;Ce!==null;)t(Re,Ce),Ce=Ce.sibling;return null}function f(Re){for(var Ce=new Map;Re!==null;)Re.key!==null?Ce.set(Re.key,Re):Ce.set(Re.index,Re),Re=Re.sibling;return Ce}function z(Re,Ce){return Re=Br(Re,Ce),Re.index=0,Re.sibling=null,Re}function I(Re,Ce,Be){return Re.index=Be,e?(Be=Re.alternate,Be!==null?(Be=Be.index,Be<Ce?(Re.flags|=67108866,Ce):Be):(Re.flags|=67108866,Ce)):(Re.flags|=1048576,Ce)}function Y(Re){return e&&Re.alternate===null&&(Re.flags|=67108866),Re}function ie(Re,Ce,Be,Qe){return Ce===null||Ce.tag!==6?(Ce=Ja(Be,Re.mode,Qe),Ce.return=Re,Ce):(Ce=z(Ce,Be),Ce.return=Re,Ce)}function ye(Re,Ce,Be,Qe){var bt=Be.type;return bt===h?Ye(Re,Ce,Be.props.children,Qe,Be.key):Ce!==null&&(Ce.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===_&&Ee(bt)===Ce.type)?(Ce=z(Ce,Be.props),Pt(Ce,Be),Ce.return=Re,Ce):(Ce=Aa(Be.type,Be.key,Be.props,null,Re.mode,Qe),Pt(Ce,Be),Ce.return=Re,Ce)}function Ue(Re,Ce,Be,Qe){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Be.containerInfo||Ce.stateNode.implementation!==Be.implementation?(Ce=js(Be,Re.mode,Qe),Ce.return=Re,Ce):(Ce=z(Ce,Be.children||[]),Ce.return=Re,Ce)}function Ye(Re,Ce,Be,Qe,bt){return Ce===null||Ce.tag!==7?(Ce=ei(Be,Re.mode,Qe,bt),Ce.return=Re,Ce):(Ce=z(Ce,Be),Ce.return=Re,Ce)}function tt(Re,Ce,Be){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Ce=Ja(""+Ce,Re.mode,Be),Ce.return=Re,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case T:return Be=Aa(Ce.type,Ce.key,Ce.props,null,Re.mode,Be),Pt(Be,Ce),Be.return=Re,Be;case M:return Ce=js(Ce,Re.mode,Be),Ce.return=Re,Ce;case _:return Ce=Ee(Ce),tt(Re,Ce,Be)}if(W(Ce)||N(Ce))return Ce=ei(Ce,Re.mode,Be,null),Ce.return=Re,Ce;if(typeof Ce.then=="function")return tt(Re,ln(Ce),Be);if(Ce.$$typeof===v)return tt(Re,ns(Re,Ce),Be);Tt(Re,Ce)}return null}function We(Re,Ce,Be,Qe){var bt=Ce!==null?Ce.key:null;if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return bt!==null?null:ie(Re,Ce,""+Be,Qe);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case T:return Be.key===bt?ye(Re,Ce,Be,Qe):null;case M:return Be.key===bt?Ue(Re,Ce,Be,Qe):null;case _:return Be=Ee(Be),We(Re,Ce,Be,Qe)}if(W(Be)||N(Be))return bt!==null?null:Ye(Re,Ce,Be,Qe,null);if(typeof Be.then=="function")return We(Re,Ce,ln(Be),Qe);if(Be.$$typeof===v)return We(Re,Ce,ns(Re,Be),Qe);Tt(Re,Be)}return null}function Ke(Re,Ce,Be,Qe,bt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Re=Re.get(Be)||null,ie(Ce,Re,""+Qe,bt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case T:return Re=Re.get(Qe.key===null?Be:Qe.key)||null,ye(Ce,Re,Qe,bt);case M:return Re=Re.get(Qe.key===null?Be:Qe.key)||null,Ue(Ce,Re,Qe,bt);case _:return Qe=Ee(Qe),Ke(Re,Ce,Be,Qe,bt)}if(W(Qe)||N(Qe))return Re=Re.get(Be)||null,Ye(Ce,Re,Qe,bt,null);if(typeof Qe.then=="function")return Ke(Re,Ce,Be,ln(Qe),bt);if(Qe.$$typeof===v)return Ke(Re,Ce,Be,ns(Ce,Qe),bt);Tt(Ce,Qe)}return null}function mt(Re,Ce,Be,Qe){for(var bt=null,Jt=null,pt=Ce,Dt=Ce=0,Ht=null;pt!==null&&Dt<Be.length;Dt++){pt.index>Dt?(Ht=pt,pt=null):Ht=pt.sibling;var en=We(Re,pt,Be[Dt],Qe);if(en===null){pt===null&&(pt=Ht);break}e&&pt&&en.alternate===null&&t(Re,pt),Ce=I(en,Ce,Dt),Jt===null?bt=en:Jt.sibling=en,Jt=en,pt=Ht}if(Dt===Be.length)return o(Re,pt),Ut&&Fr(Re,Dt),bt;if(pt===null){for(;Dt<Be.length;Dt++)pt=tt(Re,Be[Dt],Qe),pt!==null&&(Ce=I(pt,Ce,Dt),Jt===null?bt=pt:Jt.sibling=pt,Jt=pt);return Ut&&Fr(Re,Dt),bt}for(pt=f(pt);Dt<Be.length;Dt++)Ht=Ke(pt,Re,Dt,Be[Dt],Qe),Ht!==null&&(e&&Ht.alternate!==null&&pt.delete(Ht.key===null?Dt:Ht.key),Ce=I(Ht,Ce,Dt),Jt===null?bt=Ht:Jt.sibling=Ht,Jt=Ht);return e&&pt.forEach(function(aa){return t(Re,aa)}),Ut&&Fr(Re,Dt),bt}function At(Re,Ce,Be,Qe){if(Be==null)throw Error(a(151));for(var bt=null,Jt=null,pt=Ce,Dt=Ce=0,Ht=null,en=Be.next();pt!==null&&!en.done;Dt++,en=Be.next()){pt.index>Dt?(Ht=pt,pt=null):Ht=pt.sibling;var aa=We(Re,pt,en.value,Qe);if(aa===null){pt===null&&(pt=Ht);break}e&&pt&&aa.alternate===null&&t(Re,pt),Ce=I(aa,Ce,Dt),Jt===null?bt=aa:Jt.sibling=aa,Jt=aa,pt=Ht}if(en.done)return o(Re,pt),Ut&&Fr(Re,Dt),bt;if(pt===null){for(;!en.done;Dt++,en=Be.next())en=tt(Re,en.value,Qe),en!==null&&(Ce=I(en,Ce,Dt),Jt===null?bt=en:Jt.sibling=en,Jt=en);return Ut&&Fr(Re,Dt),bt}for(pt=f(pt);!en.done;Dt++,en=Be.next())en=Ke(pt,Re,Dt,en.value,Qe),en!==null&&(e&&en.alternate!==null&&pt.delete(en.key===null?Dt:en.key),Ce=I(en,Ce,Dt),Jt===null?bt=en:Jt.sibling=en,Jt=en);return e&&pt.forEach(function(C0){return t(Re,C0)}),Ut&&Fr(Re,Dt),bt}function fn(Re,Ce,Be,Qe){if(typeof Be=="object"&&Be!==null&&Be.type===h&&Be.key===null&&(Be=Be.props.children),typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case T:e:{for(var bt=Be.key;Ce!==null;){if(Ce.key===bt){if(bt=Be.type,bt===h){if(Ce.tag===7){o(Re,Ce.sibling),Qe=z(Ce,Be.props.children),Qe.return=Re,Re=Qe;break e}}else if(Ce.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===_&&Ee(bt)===Ce.type){o(Re,Ce.sibling),Qe=z(Ce,Be.props),Pt(Qe,Be),Qe.return=Re,Re=Qe;break e}o(Re,Ce);break}else t(Re,Ce);Ce=Ce.sibling}Be.type===h?(Qe=ei(Be.props.children,Re.mode,Qe,Be.key),Qe.return=Re,Re=Qe):(Qe=Aa(Be.type,Be.key,Be.props,null,Re.mode,Qe),Pt(Qe,Be),Qe.return=Re,Re=Qe)}return Y(Re);case M:e:{for(bt=Be.key;Ce!==null;){if(Ce.key===bt)if(Ce.tag===4&&Ce.stateNode.containerInfo===Be.containerInfo&&Ce.stateNode.implementation===Be.implementation){o(Re,Ce.sibling),Qe=z(Ce,Be.children||[]),Qe.return=Re,Re=Qe;break e}else{o(Re,Ce);break}else t(Re,Ce);Ce=Ce.sibling}Qe=js(Be,Re.mode,Qe),Qe.return=Re,Re=Qe}return Y(Re);case _:return Be=Ee(Be),fn(Re,Ce,Be,Qe)}if(W(Be))return mt(Re,Ce,Be,Qe);if(N(Be)){if(bt=N(Be),typeof bt!="function")throw Error(a(150));return Be=bt.call(Be),At(Re,Ce,Be,Qe)}if(typeof Be.then=="function")return fn(Re,Ce,ln(Be),Qe);if(Be.$$typeof===v)return fn(Re,Ce,ns(Re,Be),Qe);Tt(Re,Be)}return typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint"?(Be=""+Be,Ce!==null&&Ce.tag===6?(o(Re,Ce.sibling),Qe=z(Ce,Be),Qe.return=Re,Re=Qe):(o(Re,Ce),Qe=Ja(Be,Re.mode,Qe),Qe.return=Re,Re=Qe),Y(Re)):o(Re,Ce)}return function(Re,Ce,Be,Qe){try{_t=0;var bt=fn(Re,Ce,Be,Qe);return it=null,bt}catch(pt){if(pt===ae||pt===fe)throw pt;var Jt=Jn(29,pt,null,Re.mode);return Jt.lanes=Qe,Jt.return=Re,Jt}}}var wt=Yt(!0),ht=Yt(!1),It=!1;function bn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Et(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Wt(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ot(e,t,o){var f=e.updateQueue;if(f===null)return null;if(f=f.shared,(nn&2)!==0){var z=f.pending;return z===null?t.next=t:(t.next=z.next,z.next=t),f.pending=t,t=Qa(e),Us(e,null,o),t}return Ca(e,f,t,o),Qa(e)}function Mt(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194048)!==0)){var f=t.lanes;f&=e.pendingLanes,o|=f,t.lanes=o,xt(e,o)}}function Ft(e,t){var o=e.updateQueue,f=e.alternate;if(f!==null&&(f=f.updateQueue,o===f)){var z=null,I=null;if(o=o.firstBaseUpdate,o!==null){do{var Y={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};I===null?z=I=Y:I=I.next=Y,o=o.next}while(o!==null);I===null?z=I=t:I=I.next=t}else z=I=t;o={baseState:f.baseState,firstBaseUpdate:z,lastBaseUpdate:I,shared:f.shared,callbacks:f.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}var Gr=!1;function Hi(){if(Gr){var e=yi;if(e!==null)throw e}}function ri(e,t,o,f){Gr=!1;var z=e.updateQueue;It=!1;var I=z.firstBaseUpdate,Y=z.lastBaseUpdate,ie=z.shared.pending;if(ie!==null){z.shared.pending=null;var ye=ie,Ue=ye.next;ye.next=null,Y===null?I=Ue:Y.next=Ue,Y=ye;var Ye=e.alternate;Ye!==null&&(Ye=Ye.updateQueue,ie=Ye.lastBaseUpdate,ie!==Y&&(ie===null?Ye.firstBaseUpdate=Ue:ie.next=Ue,Ye.lastBaseUpdate=ye))}if(I!==null){var tt=z.baseState;Y=0,Ye=Ue=ye=null,ie=I;do{var We=ie.lane&-536870913,Ke=We!==ie.lane;if(Ke?(Vt&We)===We:(f&We)===We){We!==0&&We===vi&&(Gr=!0),Ye!==null&&(Ye=Ye.next={lane:0,tag:ie.tag,payload:ie.payload,callback:null,next:null});e:{var mt=e,At=ie;We=t;var fn=o;switch(At.tag){case 1:if(mt=At.payload,typeof mt=="function"){tt=mt.call(fn,tt,We);break e}tt=mt;break e;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=At.payload,We=typeof mt=="function"?mt.call(fn,tt,We):mt,We==null)break e;tt=A({},tt,We);break e;case 2:It=!0}}We=ie.callback,We!==null&&(e.flags|=64,Ke&&(e.flags|=8192),Ke=z.callbacks,Ke===null?z.callbacks=[We]:Ke.push(We))}else Ke={lane:We,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},Ye===null?(Ue=Ye=Ke,ye=tt):Ye=Ye.next=Ke,Y|=We;if(ie=ie.next,ie===null){if(ie=z.shared.pending,ie===null)break;Ke=ie,ie=Ke.next,Ke.next=null,z.lastBaseUpdate=Ke,z.shared.pending=null}}while(!0);Ye===null&&(ye=tt),z.baseState=ye,z.firstBaseUpdate=Ue,z.lastBaseUpdate=Ye,I===null&&(z.shared.lanes=0),Yi|=Y,e.lanes=Y,e.memoizedState=tt}}function Ra(e,t){if(typeof e!="function")throw Error(a(191,e));e.call(t)}function Ru(e,t){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)Ra(o[e],t)}var is=F(null),$o=F(0);function Du(e,t){e=wi,te($o,e),te(is,t),wi=e|t.baseLanes}function cc(){te($o,wi),te(is,is.current)}function uc(){wi=$o.current,K(is),K($o)}var vr=F(null),Or=null;function ki(e){var t=e.alternate;te(Mn,Mn.current&1),te(vr,e),Or===null&&(t===null||is.current!==null||t.memoizedState!==null)&&(Or=e)}function fc(e){te(Mn,Mn.current),te(vr,e),Or===null&&(Or=e)}function Lu(e){e.tag===22?(te(Mn,Mn.current),te(vr,e),Or===null&&(Or=e)):Ki()}function Ki(){te(Mn,Mn.current),te(vr,vr.current)}function yr(e){K(vr),Or===e&&(Or=null),K(Mn)}var Mn=F(0);function Xo(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||vu(o)||yu(o)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xi=0,Rt=null,cn=null,wn=null,Yo=!1,as=!1,Da=!1,Zo=0,Zs=0,ss=null,gd=0;function En(){throw Error(a(321))}function hc(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!mn(e[o],t[o]))return!1;return!0}function dc(e,t,o,f,z,I){return xi=I,Rt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,G.H=e===null||e.memoizedState===null?pf:wc,Da=!1,I=o(f,z),Da=!1,as&&(I=Pu(t,o,f,z)),zu(e),I}function zu(e){G.H=Js;var t=cn!==null&&cn.next!==null;if(xi=0,wn=cn=Rt=null,Yo=!1,Zs=0,ss=null,t)throw Error(a(300));e===null||On||(e=e.dependencies,e!==null&&ts(e)&&(On=!0))}function Pu(e,t,o,f){Rt=e;var z=0;do{if(as&&(ss=null),Zs=0,as=!1,25<=z)throw Error(a(301));if(z+=1,wn=cn=null,e.updateQueue!=null){var I=e.updateQueue;I.lastEffect=null,I.events=null,I.stores=null,I.memoCache!=null&&(I.memoCache.index=0)}G.H=vf,I=t(o,f)}while(as);return I}function md(){var e=G.H,t=e.useState()[0];return t=typeof t.then=="function"?Qs(t):t,e=e.useState()[0],(cn!==null?cn.memoizedState:null)!==e&&(Rt.flags|=1024),t}function gc(){var e=Zo!==0;return Zo=0,e}function mc(e,t,o){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o}function pc(e){if(Yo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Yo=!1}xi=0,wn=cn=Rt=null,as=!1,Zs=Zo=0,ss=null}function tr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?Rt.memoizedState=wn=e:wn=wn.next=e,wn}function Tn(){if(cn===null){var e=Rt.alternate;e=e!==null?e.memoizedState:null}else e=cn.next;var t=wn===null?Rt.memoizedState:wn.next;if(t!==null)wn=t,cn=e;else{if(e===null)throw Rt.alternate===null?Error(a(467)):Error(a(310));cn=e,e={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},wn===null?Rt.memoizedState=wn=e:wn=wn.next=e}return wn}function Qo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qs(e){var t=Zs;return Zs+=1,ss===null&&(ss=[]),e=gt(ss,e,t),t=Rt,(wn===null?t.memoizedState:wn.next)===null&&(t=t.alternate,G.H=t===null||t.memoizedState===null?pf:wc),e}function qo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Qs(e);if(e.$$typeof===v)return Ln(e)}throw Error(a(438,String(e)))}function vc(e){var t=null,o=Rt.updateQueue;if(o!==null&&(t=o.memoCache),t==null){var f=Rt.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(t={data:f.data.map(function(z){return z.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),o===null&&(o=Qo(),Rt.updateQueue=o),o.memoCache=t,o=t.data[t.index],o===void 0)for(o=t.data[t.index]=Array(e),f=0;f<e;f++)o[f]=L;return t.index++,o}function bi(e,t){return typeof t=="function"?t(e):t}function Jo(e){var t=Tn();return yc(t,cn,e)}function yc(e,t,o){var f=e.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=o;var z=e.baseQueue,I=f.pending;if(I!==null){if(z!==null){var Y=z.next;z.next=I.next,I.next=Y}t.baseQueue=z=I,f.pending=null}if(I=e.baseState,z===null)e.memoizedState=I;else{t=z.next;var ie=Y=null,ye=null,Ue=t,Ye=!1;do{var tt=Ue.lane&-536870913;if(tt!==Ue.lane?(Vt&tt)===tt:(xi&tt)===tt){var We=Ue.revertLane;if(We===0)ye!==null&&(ye=ye.next={lane:0,revertLane:0,gesture:null,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null}),tt===vi&&(Ye=!0);else if((xi&We)===We){Ue=Ue.next,We===vi&&(Ye=!0);continue}else tt={lane:0,revertLane:Ue.revertLane,gesture:null,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},ye===null?(ie=ye=tt,Y=I):ye=ye.next=tt,Rt.lanes|=We,Yi|=We;tt=Ue.action,Da&&o(I,tt),I=Ue.hasEagerState?Ue.eagerState:o(I,tt)}else We={lane:tt,revertLane:Ue.revertLane,gesture:Ue.gesture,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},ye===null?(ie=ye=We,Y=I):ye=ye.next=We,Rt.lanes|=tt,Yi|=tt;Ue=Ue.next}while(Ue!==null&&Ue!==t);if(ye===null?Y=I:ye.next=ie,!mn(I,e.memoizedState)&&(On=!0,Ye&&(o=yi,o!==null)))throw o;e.memoizedState=I,e.baseState=Y,e.baseQueue=ye,f.lastRenderedState=I}return z===null&&(f.lanes=0),[e.memoizedState,f.dispatch]}function _c(e){var t=Tn(),o=t.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=e;var f=o.dispatch,z=o.pending,I=t.memoizedState;if(z!==null){o.pending=null;var Y=z=z.next;do I=e(I,Y.action),Y=Y.next;while(Y!==z);mn(I,t.memoizedState)||(On=!0),t.memoizedState=I,t.baseQueue===null&&(t.baseState=I),o.lastRenderedState=I}return[I,f]}function Iu(e,t,o){var f=Rt,z=Tn(),I=Ut;if(I){if(o===void 0)throw Error(a(407));o=o()}else o=t();var Y=!mn((cn||z).memoizedState,o);if(Y&&(z.memoizedState=o,On=!0),z=z.queue,Ec(Uu.bind(null,f,z,e),[e]),z.getSnapshot!==t||Y||wn!==null&&wn.memoizedState.tag&1){if(f.flags|=2048,os(9,{destroy:void 0},Fu.bind(null,f,z,o,t),null),gn===null)throw Error(a(349));I||(xi&127)!==0||Bu(f,t,o)}return o}function Bu(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=Rt.updateQueue,t===null?(t=Qo(),Rt.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function Fu(e,t,o,f){t.value=o,t.getSnapshot=f,Nu(t)&&ju(e)}function Uu(e,t,o){return o(function(){Nu(t)&&ju(e)})}function Nu(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!mn(e,o)}catch{return!0}}function ju(e){var t=qr(e,2);t!==null&&hr(t,e,2)}function xc(e){var t=tr();if(typeof e=="function"){var o=e;if(e=o(),Da){me(!0);try{o()}finally{me(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t}function Gu(e,t,o,f){return e.baseState=o,yc(e,cn,typeof f=="function"?f:bi)}function pd(e,t,o,f,z){if(nl(e))throw Error(a(485));if(e=t.action,e!==null){var I={payload:z,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){I.listeners.push(Y)}};G.T!==null?o(!0):I.isTransition=!1,f(I),o=t.pending,o===null?(I.next=t.pending=I,Wu(t,I)):(I.next=o.next,t.pending=o.next=I)}}function Wu(e,t){var o=t.action,f=t.payload,z=e.state;if(t.isTransition){var I=G.T,Y={};G.T=Y;try{var ie=o(z,f),ye=G.S;ye!==null&&ye(Y,ie),Vu(e,t,ie)}catch(Ue){bc(e,t,Ue)}finally{I!==null&&Y.types!==null&&(I.types=Y.types),G.T=I}}else try{I=o(z,f),Vu(e,t,I)}catch(Ue){bc(e,t,Ue)}}function Vu(e,t,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(f){Hu(e,t,f)},function(f){return bc(e,t,f)}):Hu(e,t,o)}function Hu(e,t,o){t.status="fulfilled",t.value=o,ku(t),e.state=o,t=e.pending,t!==null&&(o=t.next,o===t?e.pending=null:(o=o.next,t.next=o,Wu(e,o)))}function bc(e,t,o){var f=e.pending;if(e.pending=null,f!==null){f=f.next;do t.status="rejected",t.reason=o,ku(t),t=t.next;while(t!==f)}e.action=null}function ku(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ku(e,t){return t}function $u(e,t){if(Ut){var o=gn.formState;if(o!==null){e:{var f=Rt;if(Ut){if(dn){t:{for(var z=dn,I=or;z.nodeType!==8;){if(!I){z=null;break t}if(z=Rr(z.nextSibling),z===null){z=null;break t}}I=z.data,z=I==="F!"||I==="F"?z:null}if(z){dn=Rr(z.nextSibling),f=z.data==="F!";break e}}Ur(f)}f=!1}f&&(t=o[0])}}return o=tr(),o.memoizedState=o.baseState=t,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ku,lastRenderedState:t},o.queue=f,o=df.bind(null,Rt,f),f.dispatch=o,f=xc(!1),I=Tc.bind(null,Rt,!1,f.queue),f=tr(),z={state:t,dispatch:null,action:e,pending:null},f.queue=z,o=pd.bind(null,Rt,z,I,o),z.dispatch=o,f.memoizedState=e,[t,o,!1]}function Xu(e){var t=Tn();return Yu(t,cn,e)}function Yu(e,t,o){if(t=yc(e,t,Ku)[0],e=Jo(bi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var f=Qs(t)}catch(Y){throw Y===ae?fe:Y}else f=t;t=Tn();var z=t.queue,I=z.dispatch;return o!==t.memoizedState&&(Rt.flags|=2048,os(9,{destroy:void 0},vd.bind(null,z,o),null)),[f,I,e]}function vd(e,t){e.action=t}function Zu(e){var t=Tn(),o=cn;if(o!==null)return Yu(t,o,e);Tn(),t=t.memoizedState,o=Tn();var f=o.queue.dispatch;return o.memoizedState=e,[t,f,!1]}function os(e,t,o,f){return e={tag:e,create:o,deps:f,inst:t,next:null},t=Rt.updateQueue,t===null&&(t=Qo(),Rt.updateQueue=t),o=t.lastEffect,o===null?t.lastEffect=e.next=e:(f=o.next,o.next=e,e.next=f,t.lastEffect=e),e}function Qu(){return Tn().memoizedState}function el(e,t,o,f){var z=tr();Rt.flags|=e,z.memoizedState=os(1|t,{destroy:void 0},o,f===void 0?null:f)}function tl(e,t,o,f){var z=Tn();f=f===void 0?null:f;var I=z.memoizedState.inst;cn!==null&&f!==null&&hc(f,cn.memoizedState.deps)?z.memoizedState=os(t,I,o,f):(Rt.flags|=e,z.memoizedState=os(1|t,I,o,f))}function qu(e,t){el(8390656,8,e,t)}function Ec(e,t){tl(2048,8,e,t)}function yd(e){Rt.flags|=4;var t=Rt.updateQueue;if(t===null)t=Qo(),Rt.updateQueue=t,t.events=[e];else{var o=t.events;o===null?t.events=[e]:o.push(e)}}function Ju(e){var t=Tn().memoizedState;return yd({ref:t,nextImpl:e}),function(){if((nn&2)!==0)throw Error(a(440));return t.impl.apply(void 0,arguments)}}function ef(e,t){return tl(4,2,e,t)}function tf(e,t){return tl(4,4,e,t)}function nf(e,t){if(typeof t=="function"){e=e();var o=t(e);return function(){typeof o=="function"?o():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rf(e,t,o){o=o!=null?o.concat([e]):null,tl(4,4,nf.bind(null,t,e),o)}function Sc(){}function af(e,t){var o=Tn();t=t===void 0?null:t;var f=o.memoizedState;return t!==null&&hc(t,f[1])?f[0]:(o.memoizedState=[e,t],e)}function sf(e,t){var o=Tn();t=t===void 0?null:t;var f=o.memoizedState;if(t!==null&&hc(t,f[1]))return f[0];if(f=e(),Da){me(!0);try{e()}finally{me(!1)}}return o.memoizedState=[f,t],f}function Cc(e,t,o){return o===void 0||(xi&1073741824)!==0&&(Vt&261930)===0?e.memoizedState=t:(e.memoizedState=o,e=oh(),Rt.lanes|=e,Yi|=e,o)}function of(e,t,o,f){return mn(o,t)?o:is.current!==null?(e=Cc(e,o,f),mn(e,t)||(On=!0),e):(xi&42)===0||(xi&1073741824)!==0&&(Vt&261930)===0?(On=!0,e.memoizedState=o):(e=oh(),Rt.lanes|=e,Yi|=e,t)}function lf(e,t,o,f,z){var I=H.p;H.p=I!==0&&8>I?I:8;var Y=G.T,ie={};G.T=ie,Tc(e,!1,t,o);try{var ye=z(),Ue=G.S;if(Ue!==null&&Ue(ie,ye),ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var Ye=Ko(ye,f);qs(e,t,Ye,br(e))}else qs(e,t,f,br(e))}catch(tt){qs(e,t,{then:function(){},status:"rejected",reason:tt},br())}finally{H.p=I,Y!==null&&ie.types!==null&&(Y.types=ie.types),G.T=Y}}function _d(){}function Ac(e,t,o,f){if(e.tag!==5)throw Error(a(476));var z=cf(e).queue;lf(e,z,t,k,o===null?_d:function(){return uf(e),o(f)})}function cf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:k,baseState:k,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:k},next:null};var o={};return t.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:o},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function uf(e){var t=cf(e);t.next===null&&(t=e.alternate.memoizedState),qs(e,t.next.queue,{},br())}function Mc(){return Ln(po)}function ff(){return Tn().memoizedState}function hf(){return Tn().memoizedState}function xd(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var o=br();e=Wt(o);var f=Ot(t,e,o);f!==null&&(hr(f,t,o),Mt(f,t,o)),t={cache:$s()},e.payload=t;return}t=t.return}}function bd(e,t,o){var f=br();o={lane:f,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},nl(e)?gf(t,o):(o=on(e,t,o,f),o!==null&&(hr(o,e,f),mf(o,t,f)))}function df(e,t,o){var f=br();qs(e,t,o,f)}function qs(e,t,o,f){var z={lane:f,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(nl(e))gf(t,z);else{var I=e.alternate;if(e.lanes===0&&(I===null||I.lanes===0)&&(I=t.lastRenderedReducer,I!==null))try{var Y=t.lastRenderedState,ie=I(Y,o);if(z.hasEagerState=!0,z.eagerState=ie,mn(ie,Y))return Ca(e,t,z,0),gn===null&&Sa(),!1}catch{}if(o=on(e,t,z,f),o!==null)return hr(o,e,f),mf(o,t,f),!0}return!1}function Tc(e,t,o,f){if(f={lane:2,revertLane:au(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},nl(e)){if(t)throw Error(a(479))}else t=on(e,o,f,2),t!==null&&hr(t,e,2)}function nl(e){var t=e.alternate;return e===Rt||t!==null&&t===Rt}function gf(e,t){as=Yo=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function mf(e,t,o){if((o&4194048)!==0){var f=t.lanes;f&=e.pendingLanes,o|=f,t.lanes=o,xt(e,o)}}var Js={readContext:Ln,use:qo,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En,useHostTransitionStatus:En,useFormState:En,useActionState:En,useOptimistic:En,useMemoCache:En,useCacheRefresh:En};Js.useEffectEvent=En;var pf={readContext:Ln,use:qo,useCallback:function(e,t){return tr().memoizedState=[e,t===void 0?null:t],e},useContext:Ln,useEffect:qu,useImperativeHandle:function(e,t,o){o=o!=null?o.concat([e]):null,el(4194308,4,nf.bind(null,t,e),o)},useLayoutEffect:function(e,t){return el(4194308,4,e,t)},useInsertionEffect:function(e,t){el(4,2,e,t)},useMemo:function(e,t){var o=tr();t=t===void 0?null:t;var f=e();if(Da){me(!0);try{e()}finally{me(!1)}}return o.memoizedState=[f,t],f},useReducer:function(e,t,o){var f=tr();if(o!==void 0){var z=o(t);if(Da){me(!0);try{o(t)}finally{me(!1)}}}else z=t;return f.memoizedState=f.baseState=z,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:z},f.queue=e,e=e.dispatch=bd.bind(null,Rt,e),[f.memoizedState,e]},useRef:function(e){var t=tr();return e={current:e},t.memoizedState=e},useState:function(e){e=xc(e);var t=e.queue,o=df.bind(null,Rt,t);return t.dispatch=o,[e.memoizedState,o]},useDebugValue:Sc,useDeferredValue:function(e,t){var o=tr();return Cc(o,e,t)},useTransition:function(){var e=xc(!1);return e=lf.bind(null,Rt,e.queue,!0,!1),tr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,o){var f=Rt,z=tr();if(Ut){if(o===void 0)throw Error(a(407));o=o()}else{if(o=t(),gn===null)throw Error(a(349));(Vt&127)!==0||Bu(f,t,o)}z.memoizedState=o;var I={value:o,getSnapshot:t};return z.queue=I,qu(Uu.bind(null,f,I,e),[e]),f.flags|=2048,os(9,{destroy:void 0},Fu.bind(null,f,I,o,t),null),o},useId:function(){var e=tr(),t=gn.identifierPrefix;if(Ut){var o=Mr,f=Ar;o=(f&~(1<<32-be(f)-1)).toString(32)+o,t="_"+t+"R_"+o,o=Zo++,0<o&&(t+="H"+o.toString(32)),t+="_"}else o=gd++,t="_"+t+"r_"+o.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Mc,useFormState:$u,useActionState:$u,useOptimistic:function(e){var t=tr();t.memoizedState=t.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=o,t=Tc.bind(null,Rt,!0,o),o.dispatch=t,[e,t]},useMemoCache:vc,useCacheRefresh:function(){return tr().memoizedState=xd.bind(null,Rt)},useEffectEvent:function(e){var t=tr(),o={impl:e};return t.memoizedState=o,function(){if((nn&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},wc={readContext:Ln,use:qo,useCallback:af,useContext:Ln,useEffect:Ec,useImperativeHandle:rf,useInsertionEffect:ef,useLayoutEffect:tf,useMemo:sf,useReducer:Jo,useRef:Qu,useState:function(){return Jo(bi)},useDebugValue:Sc,useDeferredValue:function(e,t){var o=Tn();return of(o,cn.memoizedState,e,t)},useTransition:function(){var e=Jo(bi)[0],t=Tn().memoizedState;return[typeof e=="boolean"?e:Qs(e),t]},useSyncExternalStore:Iu,useId:ff,useHostTransitionStatus:Mc,useFormState:Xu,useActionState:Xu,useOptimistic:function(e,t){var o=Tn();return Gu(o,cn,e,t)},useMemoCache:vc,useCacheRefresh:hf};wc.useEffectEvent=Ju;var vf={readContext:Ln,use:qo,useCallback:af,useContext:Ln,useEffect:Ec,useImperativeHandle:rf,useInsertionEffect:ef,useLayoutEffect:tf,useMemo:sf,useReducer:_c,useRef:Qu,useState:function(){return _c(bi)},useDebugValue:Sc,useDeferredValue:function(e,t){var o=Tn();return cn===null?Cc(o,e,t):of(o,cn.memoizedState,e,t)},useTransition:function(){var e=_c(bi)[0],t=Tn().memoizedState;return[typeof e=="boolean"?e:Qs(e),t]},useSyncExternalStore:Iu,useId:ff,useHostTransitionStatus:Mc,useFormState:Zu,useActionState:Zu,useOptimistic:function(e,t){var o=Tn();return cn!==null?Gu(o,cn,e,t):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:vc,useCacheRefresh:hf};vf.useEffectEvent=Ju;function Oc(e,t,o,f){t=e.memoizedState,o=o(f,t),o=o==null?t:A({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Rc={enqueueSetState:function(e,t,o){e=e._reactInternals;var f=br(),z=Wt(f);z.payload=t,o!=null&&(z.callback=o),t=Ot(e,z,f),t!==null&&(hr(t,e,f),Mt(t,e,f))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var f=br(),z=Wt(f);z.tag=1,z.payload=t,o!=null&&(z.callback=o),t=Ot(e,z,f),t!==null&&(hr(t,e,f),Mt(t,e,f))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=br(),f=Wt(o);f.tag=2,t!=null&&(f.callback=t),t=Ot(e,f,o),t!==null&&(hr(t,e,o),Mt(t,e,o))}};function yf(e,t,o,f,z,I,Y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(f,I,Y):t.prototype&&t.prototype.isPureReactComponent?!Bi(o,f)||!Bi(z,I):!0}function _f(e,t,o,f){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,f),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,f),t.state!==e&&Rc.enqueueReplaceState(t,t.state,null)}function La(e,t){var o=t;if("ref"in t){o={};for(var f in t)f!=="ref"&&(o[f]=t[f])}if(e=e.defaultProps){o===t&&(o=A({},o));for(var z in e)o[z]===void 0&&(o[z]=e[z])}return o}function xf(e){ba(e)}function bf(e){console.error(e)}function Ef(e){ba(e)}function rl(e,t){try{var o=e.onUncaughtError;o(t.value,{componentStack:t.stack})}catch(f){setTimeout(function(){throw f})}}function Sf(e,t,o){try{var f=e.onCaughtError;f(o.value,{componentStack:o.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(z){setTimeout(function(){throw z})}}function Dc(e,t,o){return o=Wt(o),o.tag=3,o.payload={element:null},o.callback=function(){rl(e,t)},o}function Cf(e){return e=Wt(e),e.tag=3,e}function Af(e,t,o,f){var z=o.type.getDerivedStateFromError;if(typeof z=="function"){var I=f.value;e.payload=function(){return z(I)},e.callback=function(){Sf(t,o,f)}}var Y=o.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(e.callback=function(){Sf(t,o,f),typeof z!="function"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var ie=f.stack;this.componentDidCatch(f.value,{componentStack:ie!==null?ie:""})})}function Ed(e,t,o,f,z){if(o.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(t=o.alternate,t!==null&&Gi(t,o,z,!0),o=vr.current,o!==null){switch(o.tag){case 31:case 13:return Or===null?ml():o.alternate===null&&Sn===0&&(Sn=3),o.flags&=-257,o.flags|=65536,o.lanes=z,f===je?o.flags|=16384:(t=o.updateQueue,t===null?o.updateQueue=new Set([f]):t.add(f),nu(e,f,z)),!1;case 22:return o.flags|=65536,f===je?o.flags|=16384:(t=o.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([f])},o.updateQueue=t):(o=t.retryQueue,o===null?t.retryQueue=new Set([f]):o.add(f)),nu(e,f,z)),!1}throw Error(a(435,o.tag))}return nu(e,f,z),ml(),!1}if(Ut)return t=vr.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=z,f!==Hs&&(e=Error(a(422),{cause:f}),Oa(Kn(e,o)))):(f!==Hs&&(t=Error(a(423),{cause:f}),Oa(Kn(t,o))),e=e.current.alternate,e.flags|=65536,z&=-z,e.lanes|=z,f=Kn(f,o),z=Dc(e.stateNode,f,z),Ft(e,z),Sn!==4&&(Sn=2)),!1;var I=Error(a(520),{cause:f});if(I=Kn(I,o),oo===null?oo=[I]:oo.push(I),Sn!==4&&(Sn=2),t===null)return!0;f=Kn(f,o),o=t;do{switch(o.tag){case 3:return o.flags|=65536,e=z&-z,o.lanes|=e,e=Dc(o.stateNode,f,e),Ft(o,e),!1;case 1:if(t=o.type,I=o.stateNode,(o.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Zi===null||!Zi.has(I))))return o.flags|=65536,z&=-z,o.lanes|=z,z=Cf(z),Af(z,e,o,f),Ft(o,z),!1}o=o.return}while(o!==null);return!1}var Lc=Error(a(461)),On=!1;function Nn(e,t,o,f){t.child=e===null?ht(t,null,o,f):wt(t,e.child,o,f)}function Mf(e,t,o,f,z){o=o.render;var I=t.ref;if("ref"in f){var Y={};for(var ie in f)ie!=="ref"&&(Y[ie]=f[ie])}else Y=f;return pi(t),f=dc(e,t,o,Y,I,z),ie=gc(),e!==null&&!On?(mc(e,t,z),Ei(e,t,z)):(Ut&&ie&&Ws(t),t.flags|=1,Nn(e,t,f,z),t.child)}function Tf(e,t,o,f,z){if(e===null){var I=o.type;return typeof I=="function"&&!qa(I)&&I.defaultProps===void 0&&o.compare===null?(t.tag=15,t.type=I,wf(e,t,I,f,z)):(e=Aa(o.type,null,f,t,t.mode,z),e.ref=t.ref,e.return=t,t.child=e)}if(I=e.child,!jc(e,z)){var Y=I.memoizedProps;if(o=o.compare,o=o!==null?o:Bi,o(Y,f)&&e.ref===t.ref)return Ei(e,t,z)}return t.flags|=1,e=Br(I,f),e.ref=t.ref,e.return=t,t.child=e}function wf(e,t,o,f,z){if(e!==null){var I=e.memoizedProps;if(Bi(I,f)&&e.ref===t.ref)if(On=!1,t.pendingProps=f=I,jc(e,z))(e.flags&131072)!==0&&(On=!0);else return t.lanes=e.lanes,Ei(e,t,z)}return zc(e,t,o,f,z)}function Of(e,t,o,f){var z=f.children,I=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((t.flags&128)!==0){if(I=I!==null?I.baseLanes|o:o,e!==null){for(f=t.child=e.child,z=0;f!==null;)z=z|f.lanes|f.childLanes,f=f.sibling;f=z&~I}else f=0,t.child=null;return Rf(e,t,I,o,f)}if((o&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Z(t,I!==null?I.cachePool:null),I!==null?Du(t,I):cc(),Lu(t);else return f=t.lanes=536870912,Rf(e,t,I!==null?I.baseLanes|o:o,o,f)}else I!==null?(Z(t,I.cachePool),Du(t,I),Ki(),t.memoizedState=null):(e!==null&&Z(t,null),cc(),Ki());return Nn(e,t,z,o),t.child}function eo(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Rf(e,t,o,f,z){var I=O();return I=I===null?null:{parent:xn._currentValue,pool:I},t.memoizedState={baseLanes:o,cachePool:I},e!==null&&Z(t,null),cc(),Lu(t),e!==null&&Gi(e,t,f,!0),t.childLanes=z,null}function il(e,t){return t=sl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Df(e,t,o){return wt(t,e.child,null,o),e=il(t,t.pendingProps),e.flags|=2,yr(t),t.memoizedState=null,e}function Sd(e,t,o){var f=t.pendingProps,z=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ut){if(f.mode==="hidden")return e=il(t,f),t.lanes=536870912,eo(null,e);if(fc(t),(e=dn)?(e=Vh(e,or),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ni!==null?{id:Ar,overflow:Mr}:null,retryLane:536870912,hydrationErrors:null},o=Ns(e),o.return=t,t.child=o,Dn=t,dn=null)):e=null,e===null)throw Ur(t);return t.lanes=536870912,null}return il(t,f)}var I=e.memoizedState;if(I!==null){var Y=I.dehydrated;if(fc(t),z)if(t.flags&256)t.flags&=-257,t=Df(e,t,o);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(a(558));else if(On||Gi(e,t,o,!1),z=(o&e.childLanes)!==0,On||z){if(f=gn,f!==null&&(Y=Zt(f,o),Y!==0&&Y!==I.retryLane))throw I.retryLane=Y,qr(e,Y),hr(f,e,Y),Lc;ml(),t=Df(e,t,o)}else e=I.treeContext,dn=Rr(Y.nextSibling),Dn=t,Ut=!0,Bn=null,or=!1,e!==null&&Go(t,e),t=il(t,f),t.flags|=4096;return t}return e=Br(e.child,{mode:f.mode,children:f.children}),e.ref=t.ref,t.child=e,e.return=t,e}function al(e,t){var o=t.ref;if(o===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(e===null||e.ref!==o)&&(t.flags|=4194816)}}function zc(e,t,o,f,z){return pi(t),o=dc(e,t,o,f,void 0,z),f=gc(),e!==null&&!On?(mc(e,t,z),Ei(e,t,z)):(Ut&&f&&Ws(t),t.flags|=1,Nn(e,t,o,z),t.child)}function Lf(e,t,o,f,z,I){return pi(t),t.updateQueue=null,o=Pu(t,f,o,z),zu(e),f=gc(),e!==null&&!On?(mc(e,t,I),Ei(e,t,I)):(Ut&&f&&Ws(t),t.flags|=1,Nn(e,t,o,I),t.child)}function zf(e,t,o,f,z){if(pi(t),t.stateNode===null){var I=Ni,Y=o.contextType;typeof Y=="object"&&Y!==null&&(I=Ln(Y)),I=new o(f,I),t.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,I.updater=Rc,t.stateNode=I,I._reactInternals=t,I=t.stateNode,I.props=f,I.state=t.memoizedState,I.refs={},bn(t),Y=o.contextType,I.context=typeof Y=="object"&&Y!==null?Ln(Y):Ni,I.state=t.memoizedState,Y=o.getDerivedStateFromProps,typeof Y=="function"&&(Oc(t,o,Y,f),I.state=t.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(Y=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),Y!==I.state&&Rc.enqueueReplaceState(I,I.state,null),ri(t,f,I,z),Hi(),I.state=t.memoizedState),typeof I.componentDidMount=="function"&&(t.flags|=4194308),f=!0}else if(e===null){I=t.stateNode;var ie=t.memoizedProps,ye=La(o,ie);I.props=ye;var Ue=I.context,Ye=o.contextType;Y=Ni,typeof Ye=="object"&&Ye!==null&&(Y=Ln(Ye));var tt=o.getDerivedStateFromProps;Ye=typeof tt=="function"||typeof I.getSnapshotBeforeUpdate=="function",ie=t.pendingProps!==ie,Ye||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(ie||Ue!==Y)&&_f(t,I,f,Y),It=!1;var We=t.memoizedState;I.state=We,ri(t,f,I,z),Hi(),Ue=t.memoizedState,ie||We!==Ue||It?(typeof tt=="function"&&(Oc(t,o,tt,f),Ue=t.memoizedState),(ye=It||yf(t,o,ye,f,We,Ue,Y))?(Ye||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(t.flags|=4194308)):(typeof I.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=f,t.memoizedState=Ue),I.props=f,I.state=Ue,I.context=Y,f=ye):(typeof I.componentDidMount=="function"&&(t.flags|=4194308),f=!1)}else{I=t.stateNode,Et(e,t),Y=t.memoizedProps,Ye=La(o,Y),I.props=Ye,tt=t.pendingProps,We=I.context,Ue=o.contextType,ye=Ni,typeof Ue=="object"&&Ue!==null&&(ye=Ln(Ue)),ie=o.getDerivedStateFromProps,(Ue=typeof ie=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(Y!==tt||We!==ye)&&_f(t,I,f,ye),It=!1,We=t.memoizedState,I.state=We,ri(t,f,I,z),Hi();var Ke=t.memoizedState;Y!==tt||We!==Ke||It||e!==null&&e.dependencies!==null&&ts(e.dependencies)?(typeof ie=="function"&&(Oc(t,o,ie,f),Ke=t.memoizedState),(Ye=It||yf(t,o,Ye,f,We,Ke,ye)||e!==null&&e.dependencies!==null&&ts(e.dependencies))?(Ue||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(f,Ke,ye),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(f,Ke,ye)),typeof I.componentDidUpdate=="function"&&(t.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof I.componentDidUpdate!="function"||Y===e.memoizedProps&&We===e.memoizedState||(t.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||Y===e.memoizedProps&&We===e.memoizedState||(t.flags|=1024),t.memoizedProps=f,t.memoizedState=Ke),I.props=f,I.state=Ke,I.context=ye,f=Ye):(typeof I.componentDidUpdate!="function"||Y===e.memoizedProps&&We===e.memoizedState||(t.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||Y===e.memoizedProps&&We===e.memoizedState||(t.flags|=1024),f=!1)}return I=f,al(e,t),f=(t.flags&128)!==0,I||f?(I=t.stateNode,o=f&&typeof o.getDerivedStateFromError!="function"?null:I.render(),t.flags|=1,e!==null&&f?(t.child=wt(t,e.child,null,z),t.child=wt(t,null,o,z)):Nn(e,t,o,z),t.memoizedState=I.state,e=t.child):e=Ei(e,t,z),e}function Pf(e,t,o,f){return Nr(),t.flags|=256,Nn(e,t,o,f),t.child}var Pc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ic(e){return{baseLanes:e,cachePool:B()}}function Bc(e,t,o){return e=e!==null?e.childLanes&~o:0,t&&(e|=xr),e}function If(e,t,o){var f=t.pendingProps,z=!1,I=(t.flags&128)!==0,Y;if((Y=I)||(Y=e!==null&&e.memoizedState===null?!1:(Mn.current&2)!==0),Y&&(z=!0,t.flags&=-129),Y=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ut){if(z?ki(t):Ki(),(e=dn)?(e=Vh(e,or),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ni!==null?{id:Ar,overflow:Mr}:null,retryLane:536870912,hydrationErrors:null},o=Ns(e),o.return=t,t.child=o,Dn=t,dn=null)):e=null,e===null)throw Ur(t);return yu(e)?t.lanes=32:t.lanes=536870912,null}var ie=f.children;return f=f.fallback,z?(Ki(),z=t.mode,ie=sl({mode:"hidden",children:ie},z),f=ei(f,z,o,null),ie.return=t,f.return=t,ie.sibling=f,t.child=ie,f=t.child,f.memoizedState=Ic(o),f.childLanes=Bc(e,Y,o),t.memoizedState=Pc,eo(null,f)):(ki(t),Fc(t,ie))}var ye=e.memoizedState;if(ye!==null&&(ie=ye.dehydrated,ie!==null)){if(I)t.flags&256?(ki(t),t.flags&=-257,t=Uc(e,t,o)):t.memoizedState!==null?(Ki(),t.child=e.child,t.flags|=128,t=null):(Ki(),ie=f.fallback,z=t.mode,f=sl({mode:"visible",children:f.children},z),ie=ei(ie,z,o,null),ie.flags|=2,f.return=t,ie.return=t,f.sibling=ie,t.child=f,wt(t,e.child,null,o),f=t.child,f.memoizedState=Ic(o),f.childLanes=Bc(e,Y,o),t.memoizedState=Pc,t=eo(null,f));else if(ki(t),yu(ie)){if(Y=ie.nextSibling&&ie.nextSibling.dataset,Y)var Ue=Y.dgst;Y=Ue,f=Error(a(419)),f.stack="",f.digest=Y,Oa({value:f,source:null,stack:null}),t=Uc(e,t,o)}else if(On||Gi(e,t,o,!1),Y=(o&e.childLanes)!==0,On||Y){if(Y=gn,Y!==null&&(f=Zt(Y,o),f!==0&&f!==ye.retryLane))throw ye.retryLane=f,qr(e,f),hr(Y,e,f),Lc;vu(ie)||ml(),t=Uc(e,t,o)}else vu(ie)?(t.flags|=192,t.child=e.child,t=null):(e=ye.treeContext,dn=Rr(ie.nextSibling),Dn=t,Ut=!0,Bn=null,or=!1,e!==null&&Go(t,e),t=Fc(t,f.children),t.flags|=4096);return t}return z?(Ki(),ie=f.fallback,z=t.mode,ye=e.child,Ue=ye.sibling,f=Br(ye,{mode:"hidden",children:f.children}),f.subtreeFlags=ye.subtreeFlags&65011712,Ue!==null?ie=Br(Ue,ie):(ie=ei(ie,z,o,null),ie.flags|=2),ie.return=t,f.return=t,f.sibling=ie,t.child=f,eo(null,f),f=t.child,ie=e.child.memoizedState,ie===null?ie=Ic(o):(z=ie.cachePool,z!==null?(ye=xn._currentValue,z=z.parent!==ye?{parent:ye,pool:ye}:z):z=B(),ie={baseLanes:ie.baseLanes|o,cachePool:z}),f.memoizedState=ie,f.childLanes=Bc(e,Y,o),t.memoizedState=Pc,eo(e.child,f)):(ki(t),o=e.child,e=o.sibling,o=Br(o,{mode:"visible",children:f.children}),o.return=t,o.sibling=null,e!==null&&(Y=t.deletions,Y===null?(t.deletions=[e],t.flags|=16):Y.push(e)),t.child=o,t.memoizedState=null,o)}function Fc(e,t){return t=sl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function sl(e,t){return e=Jn(22,e,null,t),e.lanes=0,e}function Uc(e,t,o){return wt(t,e.child,null,o),e=Fc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bf(e,t,o){e.lanes|=t;var f=e.alternate;f!==null&&(f.lanes|=t),ks(e.return,t,o)}function Nc(e,t,o,f,z,I){var Y=e.memoizedState;Y===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:f,tail:o,tailMode:z,treeForkCount:I}:(Y.isBackwards=t,Y.rendering=null,Y.renderingStartTime=0,Y.last=f,Y.tail=o,Y.tailMode=z,Y.treeForkCount=I)}function Ff(e,t,o){var f=t.pendingProps,z=f.revealOrder,I=f.tail;f=f.children;var Y=Mn.current,ie=(Y&2)!==0;if(ie?(Y=Y&1|2,t.flags|=128):Y&=1,te(Mn,Y),Nn(e,t,f,o),f=Ut?Ta:0,!ie&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bf(e,o,t);else if(e.tag===19)Bf(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(z){case"forwards":for(o=t.child,z=null;o!==null;)e=o.alternate,e!==null&&Xo(e)===null&&(z=o),o=o.sibling;o=z,o===null?(z=t.child,t.child=null):(z=o.sibling,o.sibling=null),Nc(t,!1,z,o,I,f);break;case"backwards":case"unstable_legacy-backwards":for(o=null,z=t.child,t.child=null;z!==null;){if(e=z.alternate,e!==null&&Xo(e)===null){t.child=z;break}e=z.sibling,z.sibling=o,o=z,z=e}Nc(t,!0,o,null,I,f);break;case"together":Nc(t,!1,null,null,void 0,f);break;default:t.memoizedState=null}return t.child}function Ei(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),Yi|=t.lanes,(o&t.childLanes)===0)if(e!==null){if(Gi(e,t,o,!1),(o&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,o=Br(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=Br(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function jc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ts(e)))}function Cd(e,t,o){switch(t.tag){case 3:he(t,t.stateNode.containerInfo),wr(t,xn,e.memoizedState.cache),Nr();break;case 27:case 5:Oe(t);break;case 4:he(t,t.stateNode.containerInfo);break;case 10:wr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,fc(t),null;break;case 13:var f=t.memoizedState;if(f!==null)return f.dehydrated!==null?(ki(t),t.flags|=128,null):(o&t.child.childLanes)!==0?If(e,t,o):(ki(t),e=Ei(e,t,o),e!==null?e.sibling:null);ki(t);break;case 19:var z=(e.flags&128)!==0;if(f=(o&t.childLanes)!==0,f||(Gi(e,t,o,!1),f=(o&t.childLanes)!==0),z){if(f)return Ff(e,t,o);t.flags|=128}if(z=t.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),te(Mn,Mn.current),f)break;return null;case 22:return t.lanes=0,Of(e,t,o,t.pendingProps);case 24:wr(t,xn,e.memoizedState.cache)}return Ei(e,t,o)}function Uf(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps)On=!0;else{if(!jc(e,o)&&(t.flags&128)===0)return On=!1,Cd(e,t,o);On=(e.flags&131072)!==0}else On=!1,Ut&&(t.flags&1048576)!==0&&jo(t,Ta,t.index);switch(t.lanes=0,t.tag){case 16:e:{var f=t.pendingProps;if(e=Ee(t.elementType),t.type=e,typeof e=="function")qa(e)?(f=La(e,f),t.tag=1,t=zf(null,t,e,f,o)):(t.tag=0,t=zc(null,t,e,f,o));else{if(e!=null){var z=e.$$typeof;if(z===b){t.tag=11,t=Mf(null,t,e,f,o);break e}else if(z===m){t.tag=14,t=Tf(null,t,e,f,o);break e}}throw t=V(e)||e,Error(a(306,t,""))}}return t;case 0:return zc(e,t,t.type,t.pendingProps,o);case 1:return f=t.type,z=La(f,t.pendingProps),zf(e,t,f,z,o);case 3:e:{if(he(t,t.stateNode.containerInfo),e===null)throw Error(a(387));f=t.pendingProps;var I=t.memoizedState;z=I.element,Et(e,t),ri(t,f,null,o);var Y=t.memoizedState;if(f=Y.cache,wr(t,xn,f),f!==I.cache&&Ks(t,[xn],o,!0),Hi(),f=Y.element,I.isDehydrated)if(I={element:f,isDehydrated:!1,cache:Y.cache},t.updateQueue.baseState=I,t.memoizedState=I,t.flags&256){t=Pf(e,t,f,o);break e}else if(f!==z){z=Kn(Error(a(424)),t),Oa(z),t=Pf(e,t,f,o);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(dn=Rr(e.firstChild),Dn=t,Ut=!0,Bn=null,or=!0,o=ht(t,null,f,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Nr(),f===z){t=Ei(e,t,o);break e}Nn(e,t,f,o)}t=t.child}return t;case 26:return al(e,t),e===null?(o=Yh(t.type,null,t.pendingProps,null))?t.memoizedState=o:Ut||(o=t.type,e=t.pendingProps,f=El(oe.current).createElement(o),f[Lt]=t,f[Qt]=e,jn(f,o,e),hn(f),t.stateNode=f):t.memoizedState=Yh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Oe(t),e===null&&Ut&&(f=t.stateNode=Kh(t.type,t.pendingProps,oe.current),Dn=t,or=!0,z=dn,ea(t.type)?(_u=z,dn=Rr(f.firstChild)):dn=z),Nn(e,t,t.pendingProps.children,o),al(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ut&&((z=f=dn)&&(f=e0(f,t.type,t.pendingProps,or),f!==null?(t.stateNode=f,Dn=t,dn=Rr(f.firstChild),or=!1,z=!0):z=!1),z||Ur(t)),Oe(t),z=t.type,I=t.pendingProps,Y=e!==null?e.memoizedProps:null,f=I.children,gu(z,I)?f=null:Y!==null&&gu(z,Y)&&(t.flags|=32),t.memoizedState!==null&&(z=dc(e,t,md,null,null,o),po._currentValue=z),al(e,t),Nn(e,t,f,o),t.child;case 6:return e===null&&Ut&&((e=o=dn)&&(o=t0(o,t.pendingProps,or),o!==null?(t.stateNode=o,Dn=t,dn=null,e=!0):e=!1),e||Ur(t)),null;case 13:return If(e,t,o);case 4:return he(t,t.stateNode.containerInfo),f=t.pendingProps,e===null?t.child=wt(t,null,f,o):Nn(e,t,f,o),t.child;case 11:return Mf(e,t,t.type,t.pendingProps,o);case 7:return Nn(e,t,t.pendingProps,o),t.child;case 8:return Nn(e,t,t.pendingProps.children,o),t.child;case 12:return Nn(e,t,t.pendingProps.children,o),t.child;case 10:return f=t.pendingProps,wr(t,t.type,f.value),Nn(e,t,f.children,o),t.child;case 9:return z=t.type._context,f=t.pendingProps.children,pi(t),z=Ln(z),f=f(z),t.flags|=1,Nn(e,t,f,o),t.child;case 14:return Tf(e,t,t.type,t.pendingProps,o);case 15:return wf(e,t,t.type,t.pendingProps,o);case 19:return Ff(e,t,o);case 31:return Sd(e,t,o);case 22:return Of(e,t,o,t.pendingProps);case 24:return pi(t),f=Ln(xn),e===null?(z=O(),z===null&&(z=gn,I=$s(),z.pooledCache=I,I.refCount++,I!==null&&(z.pooledCacheLanes|=o),z=I),t.memoizedState={parent:f,cache:z},bn(t),wr(t,xn,z)):((e.lanes&o)!==0&&(Et(e,t),ri(t,null,null,o),Hi()),z=e.memoizedState,I=t.memoizedState,z.parent!==f?(z={parent:f,cache:f},t.memoizedState=z,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=z),wr(t,xn,f)):(f=I.cache,wr(t,xn,f),f!==z.cache&&Ks(t,[xn],o,!0))),Nn(e,t,t.pendingProps.children,o),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Si(e){e.flags|=4}function Gc(e,t,o,f,z){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(z&335544128)===z)if(e.stateNode.complete)e.flags|=8192;else if(fh())e.flags|=8192;else throw Fe=je,de}else e.flags&=-16777217}function Nf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ed(t))if(fh())e.flags|=8192;else throw Fe=je,de}function ol(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?pe():536870912,e.lanes|=t,fs|=t)}function to(e,t){if(!Ut)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var f=null;o!==null;)o.alternate!==null&&(f=o),o=o.sibling;f===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:f.sibling=null}}function pn(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,f=0;if(t)for(var z=e.child;z!==null;)o|=z.lanes|z.childLanes,f|=z.subtreeFlags&65011712,f|=z.flags&65011712,z.return=e,z=z.sibling;else for(z=e.child;z!==null;)o|=z.lanes|z.childLanes,f|=z.subtreeFlags,f|=z.flags,z.return=e,z=z.sibling;return e.subtreeFlags|=f,e.childLanes=o,t}function Ad(e,t,o){var f=t.pendingProps;switch(Vs(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(t),null;case 1:return pn(t),null;case 3:return o=t.stateNode,f=null,e!==null&&(f=e.memoizedState.cache),t.memoizedState.cache!==f&&(t.flags|=2048),jr(xn),ge(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Tr(t)?Si(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,wa())),pn(t),null;case 26:var z=t.type,I=t.memoizedState;return e===null?(Si(t),I!==null?(pn(t),Nf(t,I)):(pn(t),Gc(t,z,null,f,o))):I?I!==e.memoizedState?(Si(t),pn(t),Nf(t,I)):(pn(t),t.flags&=-16777217):(e=e.memoizedProps,e!==f&&Si(t),pn(t),Gc(t,z,e,f,o)),null;case 27:if(Le(t),o=oe.current,z=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==f&&Si(t);else{if(!f){if(t.stateNode===null)throw Error(a(166));return pn(t),null}e=re.current,Tr(t)?Wo(t):(e=Kh(z,f,o),t.stateNode=e,Si(t))}return pn(t),null;case 5:if(Le(t),z=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==f&&Si(t);else{if(!f){if(t.stateNode===null)throw Error(a(166));return pn(t),null}if(I=re.current,Tr(t))Wo(t);else{var Y=El(oe.current);switch(I){case 1:I=Y.createElementNS("http://www.w3.org/2000/svg",z);break;case 2:I=Y.createElementNS("http://www.w3.org/1998/Math/MathML",z);break;default:switch(z){case"svg":I=Y.createElementNS("http://www.w3.org/2000/svg",z);break;case"math":I=Y.createElementNS("http://www.w3.org/1998/Math/MathML",z);break;case"script":I=Y.createElement("div"),I.innerHTML="<script><\/script>",I=I.removeChild(I.firstChild);break;case"select":I=typeof f.is=="string"?Y.createElement("select",{is:f.is}):Y.createElement("select"),f.multiple?I.multiple=!0:f.size&&(I.size=f.size);break;default:I=typeof f.is=="string"?Y.createElement(z,{is:f.is}):Y.createElement(z)}}I[Lt]=t,I[Qt]=f;e:for(Y=t.child;Y!==null;){if(Y.tag===5||Y.tag===6)I.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===t)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===t)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}t.stateNode=I;e:switch(jn(I,z,f),z){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Si(t)}}return pn(t),Gc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,o),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==f&&Si(t);else{if(typeof f!="string"&&t.stateNode===null)throw Error(a(166));if(e=oe.current,Tr(t)){if(e=t.stateNode,o=t.memoizedProps,f=null,z=Dn,z!==null)switch(z.tag){case 27:case 5:f=z.memoizedProps}e[Lt]=t,e=!!(e.nodeValue===o||f!==null&&f.suppressHydrationWarning===!0||Ih(e.nodeValue,o)),e||Ur(t,!0)}else e=El(e).createTextNode(f),e[Lt]=t,t.stateNode=e}return pn(t),null;case 31:if(o=t.memoizedState,e===null||e.memoizedState!==null){if(f=Tr(t),o!==null){if(e===null){if(!f)throw Error(a(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(557));e[Lt]=t}else Nr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;pn(t),e=!1}else o=wa(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),e=!0;if(!e)return t.flags&256?(yr(t),t):(yr(t),null);if((t.flags&128)!==0)throw Error(a(558))}return pn(t),null;case 13:if(f=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(z=Tr(t),f!==null&&f.dehydrated!==null){if(e===null){if(!z)throw Error(a(318));if(z=t.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(a(317));z[Lt]=t}else Nr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;pn(t),z=!1}else z=wa(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=z),z=!0;if(!z)return t.flags&256?(yr(t),t):(yr(t),null)}return yr(t),(t.flags&128)!==0?(t.lanes=o,t):(o=f!==null,e=e!==null&&e.memoizedState!==null,o&&(f=t.child,z=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(z=f.alternate.memoizedState.cachePool.pool),I=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(I=f.memoizedState.cachePool.pool),I!==z&&(f.flags|=2048)),o!==e&&o&&(t.child.flags|=8192),ol(t,t.updateQueue),pn(t),null);case 4:return ge(),e===null&&cu(t.stateNode.containerInfo),pn(t),null;case 10:return jr(t.type),pn(t),null;case 19:if(K(Mn),f=t.memoizedState,f===null)return pn(t),null;if(z=(t.flags&128)!==0,I=f.rendering,I===null)if(z)to(f,!1);else{if(Sn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(I=Xo(e),I!==null){for(t.flags|=128,to(f,!1),e=I.updateQueue,t.updateQueue=e,ol(t,e),t.subtreeFlags=0,e=o,o=t.child;o!==null;)Jr(o,e),o=o.sibling;return te(Mn,Mn.current&1|2),Ut&&Fr(t,f.treeForkCount),t.child}e=e.sibling}f.tail!==null&&Ge()>hl&&(t.flags|=128,z=!0,to(f,!1),t.lanes=4194304)}else{if(!z)if(e=Xo(I),e!==null){if(t.flags|=128,z=!0,e=e.updateQueue,t.updateQueue=e,ol(t,e),to(f,!0),f.tail===null&&f.tailMode==="hidden"&&!I.alternate&&!Ut)return pn(t),null}else 2*Ge()-f.renderingStartTime>hl&&o!==536870912&&(t.flags|=128,z=!0,to(f,!1),t.lanes=4194304);f.isBackwards?(I.sibling=t.child,t.child=I):(e=f.last,e!==null?e.sibling=I:t.child=I,f.last=I)}return f.tail!==null?(e=f.tail,f.rendering=e,f.tail=e.sibling,f.renderingStartTime=Ge(),e.sibling=null,o=Mn.current,te(Mn,z?o&1|2:o&1),Ut&&Fr(t,f.treeForkCount),e):(pn(t),null);case 22:case 23:return yr(t),uc(),f=t.memoizedState!==null,e!==null?e.memoizedState!==null!==f&&(t.flags|=8192):f&&(t.flags|=8192),f?(o&536870912)!==0&&(t.flags&128)===0&&(pn(t),t.subtreeFlags&6&&(t.flags|=8192)):pn(t),o=t.updateQueue,o!==null&&ol(t,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),f=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(f=t.memoizedState.cachePool.pool),f!==o&&(t.flags|=2048),e!==null&&K(_i),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),jr(xn),pn(t),null;case 25:return null;case 30:return null}throw Error(a(156,t.tag))}function Md(e,t){switch(Vs(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return jr(xn),ge(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Le(t),null;case 31:if(t.memoizedState!==null){if(yr(t),t.alternate===null)throw Error(a(340));Nr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(yr(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));Nr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return K(Mn),null;case 4:return ge(),null;case 10:return jr(t.type),null;case 22:case 23:return yr(t),uc(),e!==null&&K(_i),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return jr(xn),null;case 25:return null;default:return null}}function jf(e,t){switch(Vs(t),t.tag){case 3:jr(xn),ge();break;case 26:case 27:case 5:Le(t);break;case 4:ge();break;case 31:t.memoizedState!==null&&yr(t);break;case 13:yr(t);break;case 19:K(Mn);break;case 10:jr(t.type);break;case 22:case 23:yr(t),uc(),e!==null&&K(_i);break;case 24:jr(xn)}}function no(e,t){try{var o=t.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var z=f.next;o=z;do{if((o.tag&e)===e){f=void 0;var I=o.create,Y=o.inst;f=I(),Y.destroy=f}o=o.next}while(o!==z)}}catch(ie){an(t,t.return,ie)}}function $i(e,t,o){try{var f=t.updateQueue,z=f!==null?f.lastEffect:null;if(z!==null){var I=z.next;f=I;do{if((f.tag&e)===e){var Y=f.inst,ie=Y.destroy;if(ie!==void 0){Y.destroy=void 0,z=t;var ye=o,Ue=ie;try{Ue()}catch(Ye){an(z,ye,Ye)}}}f=f.next}while(f!==I)}}catch(Ye){an(t,t.return,Ye)}}function Gf(e){var t=e.updateQueue;if(t!==null){var o=e.stateNode;try{Ru(t,o)}catch(f){an(e,e.return,f)}}}function Wf(e,t,o){o.props=La(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(f){an(e,t,f)}}function ro(e,t){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var f=e.stateNode;break;case 30:f=e.stateNode;break;default:f=e.stateNode}typeof o=="function"?e.refCleanup=o(f):o.current=f}}catch(z){an(e,t,z)}}function ii(e,t){var o=e.ref,f=e.refCleanup;if(o!==null)if(typeof f=="function")try{f()}catch(z){an(e,t,z)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(z){an(e,t,z)}else o.current=null}function Vf(e){var t=e.type,o=e.memoizedProps,f=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":o.autoFocus&&f.focus();break e;case"img":o.src?f.src=o.src:o.srcSet&&(f.srcset=o.srcSet)}}catch(z){an(e,e.return,z)}}function Wc(e,t,o){try{var f=e.stateNode;Xd(f,e.type,o,t),f[Qt]=t}catch(z){an(e,e.return,z)}}function Hf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ea(e.type)||e.tag===4}function Vc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ea(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hc(e,t,o){var f=e.tag;if(f===5||f===6)e=e.stateNode,t?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,t):(t=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,t.appendChild(e),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=pr));else if(f!==4&&(f===27&&ea(e.type)&&(o=e.stateNode,t=null),e=e.child,e!==null))for(Hc(e,t,o),e=e.sibling;e!==null;)Hc(e,t,o),e=e.sibling}function ll(e,t,o){var f=e.tag;if(f===5||f===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(f!==4&&(f===27&&ea(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(ll(e,t,o),e=e.sibling;e!==null;)ll(e,t,o),e=e.sibling}function kf(e){var t=e.stateNode,o=e.memoizedProps;try{for(var f=e.type,z=t.attributes;z.length;)t.removeAttributeNode(z[0]);jn(t,f,o),t[Lt]=e,t[Qt]=o}catch(I){an(e,e.return,I)}}var Ci=!1,Rn=!1,kc=!1,Kf=typeof WeakSet=="function"?WeakSet:Set,Fn=null;function Td(e,t){if(e=e.containerInfo,hu=Ol,e=ya(e),Ka(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var f=o.getSelection&&o.getSelection();if(f&&f.rangeCount!==0){o=f.anchorNode;var z=f.anchorOffset,I=f.focusNode;f=f.focusOffset;try{o.nodeType,I.nodeType}catch{o=null;break e}var Y=0,ie=-1,ye=-1,Ue=0,Ye=0,tt=e,We=null;t:for(;;){for(var Ke;tt!==o||z!==0&&tt.nodeType!==3||(ie=Y+z),tt!==I||f!==0&&tt.nodeType!==3||(ye=Y+f),tt.nodeType===3&&(Y+=tt.nodeValue.length),(Ke=tt.firstChild)!==null;)We=tt,tt=Ke;for(;;){if(tt===e)break t;if(We===o&&++Ue===z&&(ie=Y),We===I&&++Ye===f&&(ye=Y),(Ke=tt.nextSibling)!==null)break;tt=We,We=tt.parentNode}tt=Ke}o=ie===-1||ye===-1?null:{start:ie,end:ye}}else o=null}o=o||{start:0,end:0}}else o=null;for(du={focusedElem:e,selectionRange:o},Ol=!1,Fn=t;Fn!==null;)if(t=Fn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Fn=e;else for(;Fn!==null;){switch(t=Fn,I=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(o=0;o<e.length;o++)z=e[o],z.ref.impl=z.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&I!==null){e=void 0,o=t,z=I.memoizedProps,I=I.memoizedState,f=o.stateNode;try{var mt=La(o.type,z);e=f.getSnapshotBeforeUpdate(mt,I),f.__reactInternalSnapshotBeforeUpdate=e}catch(At){an(o,o.return,At)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,o=e.nodeType,o===9)pu(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":pu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=t.sibling,e!==null){e.return=t.return,Fn=e;break}Fn=t.return}}function $f(e,t,o){var f=o.flags;switch(o.tag){case 0:case 11:case 15:Mi(e,o),f&4&&no(5,o);break;case 1:if(Mi(e,o),f&4)if(e=o.stateNode,t===null)try{e.componentDidMount()}catch(Y){an(o,o.return,Y)}else{var z=La(o.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(z,t,e.__reactInternalSnapshotBeforeUpdate)}catch(Y){an(o,o.return,Y)}}f&64&&Gf(o),f&512&&ro(o,o.return);break;case 3:if(Mi(e,o),f&64&&(e=o.updateQueue,e!==null)){if(t=null,o.child!==null)switch(o.child.tag){case 27:case 5:t=o.child.stateNode;break;case 1:t=o.child.stateNode}try{Ru(e,t)}catch(Y){an(o,o.return,Y)}}break;case 27:t===null&&f&4&&kf(o);case 26:case 5:Mi(e,o),t===null&&f&4&&Vf(o),f&512&&ro(o,o.return);break;case 12:Mi(e,o);break;case 31:Mi(e,o),f&4&&Zf(e,o);break;case 13:Mi(e,o),f&4&&Qf(e,o),f&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=Bd.bind(null,o),n0(e,o))));break;case 22:if(f=o.memoizedState!==null||Ci,!f){t=t!==null&&t.memoizedState!==null||Rn,z=Ci;var I=Rn;Ci=f,(Rn=t)&&!I?Ti(e,o,(o.subtreeFlags&8772)!==0):Mi(e,o),Ci=z,Rn=I}break;case 30:break;default:Mi(e,o)}}function Xf(e){var t=e.alternate;t!==null&&(e.alternate=null,Xf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Er(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var vn=null,lr=!1;function Ai(e,t,o){for(o=o.child;o!==null;)Yf(e,t,o),o=o.sibling}function Yf(e,t,o){if(Q&&typeof Q.onCommitFiberUnmount=="function")try{Q.onCommitFiberUnmount(Ie,o)}catch{}switch(o.tag){case 26:Rn||ii(o,t),Ai(e,t,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Rn||ii(o,t);var f=vn,z=lr;ea(o.type)&&(vn=o.stateNode,lr=!1),Ai(e,t,o),ho(o.stateNode),vn=f,lr=z;break;case 5:Rn||ii(o,t);case 6:if(f=vn,z=lr,vn=null,Ai(e,t,o),vn=f,lr=z,vn!==null)if(lr)try{(vn.nodeType===9?vn.body:vn.nodeName==="HTML"?vn.ownerDocument.body:vn).removeChild(o.stateNode)}catch(I){an(o,t,I)}else try{vn.removeChild(o.stateNode)}catch(I){an(o,t,I)}break;case 18:vn!==null&&(lr?(e=vn,Gh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),_s(e)):Gh(vn,o.stateNode));break;case 4:f=vn,z=lr,vn=o.stateNode.containerInfo,lr=!0,Ai(e,t,o),vn=f,lr=z;break;case 0:case 11:case 14:case 15:$i(2,o,t),Rn||$i(4,o,t),Ai(e,t,o);break;case 1:Rn||(ii(o,t),f=o.stateNode,typeof f.componentWillUnmount=="function"&&Wf(o,t,f)),Ai(e,t,o);break;case 21:Ai(e,t,o);break;case 22:Rn=(f=Rn)||o.memoizedState!==null,Ai(e,t,o),Rn=f;break;default:Ai(e,t,o)}}function Zf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{_s(e)}catch(o){an(t,t.return,o)}}}function Qf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{_s(e)}catch(o){an(t,t.return,o)}}function wd(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Kf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Kf),t;default:throw Error(a(435,e.tag))}}function cl(e,t){var o=wd(e);t.forEach(function(f){if(!o.has(f)){o.add(f);var z=Fd.bind(null,e,f);f.then(z,z)}})}function cr(e,t){var o=t.deletions;if(o!==null)for(var f=0;f<o.length;f++){var z=o[f],I=e,Y=t,ie=Y;e:for(;ie!==null;){switch(ie.tag){case 27:if(ea(ie.type)){vn=ie.stateNode,lr=!1;break e}break;case 5:vn=ie.stateNode,lr=!1;break e;case 3:case 4:vn=ie.stateNode.containerInfo,lr=!0;break e}ie=ie.return}if(vn===null)throw Error(a(160));Yf(I,Y,z),vn=null,lr=!1,I=z.alternate,I!==null&&(I.return=null),z.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)qf(t,e),t=t.sibling}var Wr=null;function qf(e,t){var o=e.alternate,f=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:cr(t,e),ur(e),f&4&&($i(3,e,e.return),no(3,e),$i(5,e,e.return));break;case 1:cr(t,e),ur(e),f&512&&(Rn||o===null||ii(o,o.return)),f&64&&Ci&&(e=e.updateQueue,e!==null&&(f=e.callbacks,f!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?f:o.concat(f))));break;case 26:var z=Wr;if(cr(t,e),ur(e),f&512&&(Rn||o===null||ii(o,o.return)),f&4){var I=o!==null?o.memoizedState:null;if(f=e.memoizedState,o===null)if(f===null)if(e.stateNode===null){e:{f=e.type,o=e.memoizedProps,z=z.ownerDocument||z;t:switch(f){case"title":I=z.getElementsByTagName("title")[0],(!I||I[Pn]||I[Lt]||I.namespaceURI==="http://www.w3.org/2000/svg"||I.hasAttribute("itemprop"))&&(I=z.createElement(f),z.head.insertBefore(I,z.querySelector("head > title"))),jn(I,f,o),I[Lt]=e,hn(I),f=I;break e;case"link":var Y=qh("link","href",z).get(f+(o.href||""));if(Y){for(var ie=0;ie<Y.length;ie++)if(I=Y[ie],I.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&I.getAttribute("rel")===(o.rel==null?null:o.rel)&&I.getAttribute("title")===(o.title==null?null:o.title)&&I.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){Y.splice(ie,1);break t}}I=z.createElement(f),jn(I,f,o),z.head.appendChild(I);break;case"meta":if(Y=qh("meta","content",z).get(f+(o.content||""))){for(ie=0;ie<Y.length;ie++)if(I=Y[ie],I.getAttribute("content")===(o.content==null?null:""+o.content)&&I.getAttribute("name")===(o.name==null?null:o.name)&&I.getAttribute("property")===(o.property==null?null:o.property)&&I.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&I.getAttribute("charset")===(o.charSet==null?null:o.charSet)){Y.splice(ie,1);break t}}I=z.createElement(f),jn(I,f,o),z.head.appendChild(I);break;default:throw Error(a(468,f))}I[Lt]=e,hn(I),f=I}e.stateNode=f}else Jh(z,e.type,e.stateNode);else e.stateNode=Qh(z,f,e.memoizedProps);else I!==f?(I===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):I.count--,f===null?Jh(z,e.type,e.stateNode):Qh(z,f,e.memoizedProps)):f===null&&e.stateNode!==null&&Wc(e,e.memoizedProps,o.memoizedProps)}break;case 27:cr(t,e),ur(e),f&512&&(Rn||o===null||ii(o,o.return)),o!==null&&f&4&&Wc(e,e.memoizedProps,o.memoizedProps);break;case 5:if(cr(t,e),ur(e),f&512&&(Rn||o===null||ii(o,o.return)),e.flags&32){z=e.stateNode;try{Yn(z,"")}catch(mt){an(e,e.return,mt)}}f&4&&e.stateNode!=null&&(z=e.memoizedProps,Wc(e,z,o!==null?o.memoizedProps:z)),f&1024&&(kc=!0);break;case 6:if(cr(t,e),ur(e),f&4){if(e.stateNode===null)throw Error(a(162));f=e.memoizedProps,o=e.stateNode;try{o.nodeValue=f}catch(mt){an(e,e.return,mt)}}break;case 3:if(Al=null,z=Wr,Wr=Sl(t.containerInfo),cr(t,e),Wr=z,ur(e),f&4&&o!==null&&o.memoizedState.isDehydrated)try{_s(t.containerInfo)}catch(mt){an(e,e.return,mt)}kc&&(kc=!1,Jf(e));break;case 4:f=Wr,Wr=Sl(e.stateNode.containerInfo),cr(t,e),ur(e),Wr=f;break;case 12:cr(t,e),ur(e);break;case 31:cr(t,e),ur(e),f&4&&(f=e.updateQueue,f!==null&&(e.updateQueue=null,cl(e,f)));break;case 13:cr(t,e),ur(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(fl=Ge()),f&4&&(f=e.updateQueue,f!==null&&(e.updateQueue=null,cl(e,f)));break;case 22:z=e.memoizedState!==null;var ye=o!==null&&o.memoizedState!==null,Ue=Ci,Ye=Rn;if(Ci=Ue||z,Rn=Ye||ye,cr(t,e),Rn=Ye,Ci=Ue,ur(e),f&8192)e:for(t=e.stateNode,t._visibility=z?t._visibility&-2:t._visibility|1,z&&(o===null||ye||Ci||Rn||za(e)),o=null,t=e;;){if(t.tag===5||t.tag===26){if(o===null){ye=o=t;try{if(I=ye.stateNode,z)Y=I.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{ie=ye.stateNode;var tt=ye.memoizedProps.style,We=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;ie.style.display=We==null||typeof We=="boolean"?"":(""+We).trim()}}catch(mt){an(ye,ye.return,mt)}}}else if(t.tag===6){if(o===null){ye=t;try{ye.stateNode.nodeValue=z?"":ye.memoizedProps}catch(mt){an(ye,ye.return,mt)}}}else if(t.tag===18){if(o===null){ye=t;try{var Ke=ye.stateNode;z?Wh(Ke,!0):Wh(ye.stateNode,!1)}catch(mt){an(ye,ye.return,mt)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;o===t&&(o=null),t=t.return}o===t&&(o=null),t.sibling.return=t.return,t=t.sibling}f&4&&(f=e.updateQueue,f!==null&&(o=f.retryQueue,o!==null&&(f.retryQueue=null,cl(e,o))));break;case 19:cr(t,e),ur(e),f&4&&(f=e.updateQueue,f!==null&&(e.updateQueue=null,cl(e,f)));break;case 30:break;case 21:break;default:cr(t,e),ur(e)}}function ur(e){var t=e.flags;if(t&2){try{for(var o,f=e.return;f!==null;){if(Hf(f)){o=f;break}f=f.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var z=o.stateNode,I=Vc(e);ll(e,I,z);break;case 5:var Y=o.stateNode;o.flags&32&&(Yn(Y,""),o.flags&=-33);var ie=Vc(e);ll(e,ie,Y);break;case 3:case 4:var ye=o.stateNode.containerInfo,Ue=Vc(e);Hc(e,Ue,ye);break;default:throw Error(a(161))}}catch(Ye){an(e,e.return,Ye)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Jf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Jf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Mi(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)$f(e,t.alternate,t),t=t.sibling}function za(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:$i(4,t,t.return),za(t);break;case 1:ii(t,t.return);var o=t.stateNode;typeof o.componentWillUnmount=="function"&&Wf(t,t.return,o),za(t);break;case 27:ho(t.stateNode);case 26:case 5:ii(t,t.return),za(t);break;case 22:t.memoizedState===null&&za(t);break;case 30:za(t);break;default:za(t)}e=e.sibling}}function Ti(e,t,o){for(o=o&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var f=t.alternate,z=e,I=t,Y=I.flags;switch(I.tag){case 0:case 11:case 15:Ti(z,I,o),no(4,I);break;case 1:if(Ti(z,I,o),f=I,z=f.stateNode,typeof z.componentDidMount=="function")try{z.componentDidMount()}catch(Ue){an(f,f.return,Ue)}if(f=I,z=f.updateQueue,z!==null){var ie=f.stateNode;try{var ye=z.shared.hiddenCallbacks;if(ye!==null)for(z.shared.hiddenCallbacks=null,z=0;z<ye.length;z++)Ra(ye[z],ie)}catch(Ue){an(f,f.return,Ue)}}o&&Y&64&&Gf(I),ro(I,I.return);break;case 27:kf(I);case 26:case 5:Ti(z,I,o),o&&f===null&&Y&4&&Vf(I),ro(I,I.return);break;case 12:Ti(z,I,o);break;case 31:Ti(z,I,o),o&&Y&4&&Zf(z,I);break;case 13:Ti(z,I,o),o&&Y&4&&Qf(z,I);break;case 22:I.memoizedState===null&&Ti(z,I,o),ro(I,I.return);break;case 30:break;default:Ti(z,I,o)}t=t.sibling}}function Kc(e,t){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&Wi(o))}function $c(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Wi(e))}function Vr(e,t,o,f){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)eh(e,t,o,f),t=t.sibling}function eh(e,t,o,f){var z=t.flags;switch(t.tag){case 0:case 11:case 15:Vr(e,t,o,f),z&2048&&no(9,t);break;case 1:Vr(e,t,o,f);break;case 3:Vr(e,t,o,f),z&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Wi(e)));break;case 12:if(z&2048){Vr(e,t,o,f),e=t.stateNode;try{var I=t.memoizedProps,Y=I.id,ie=I.onPostCommit;typeof ie=="function"&&ie(Y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(ye){an(t,t.return,ye)}}else Vr(e,t,o,f);break;case 31:Vr(e,t,o,f);break;case 13:Vr(e,t,o,f);break;case 23:break;case 22:I=t.stateNode,Y=t.alternate,t.memoizedState!==null?I._visibility&2?Vr(e,t,o,f):io(e,t):I._visibility&2?Vr(e,t,o,f):(I._visibility|=2,ls(e,t,o,f,(t.subtreeFlags&10256)!==0||!1)),z&2048&&Kc(Y,t);break;case 24:Vr(e,t,o,f),z&2048&&$c(t.alternate,t);break;default:Vr(e,t,o,f)}}function ls(e,t,o,f,z){for(z=z&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var I=e,Y=t,ie=o,ye=f,Ue=Y.flags;switch(Y.tag){case 0:case 11:case 15:ls(I,Y,ie,ye,z),no(8,Y);break;case 23:break;case 22:var Ye=Y.stateNode;Y.memoizedState!==null?Ye._visibility&2?ls(I,Y,ie,ye,z):io(I,Y):(Ye._visibility|=2,ls(I,Y,ie,ye,z)),z&&Ue&2048&&Kc(Y.alternate,Y);break;case 24:ls(I,Y,ie,ye,z),z&&Ue&2048&&$c(Y.alternate,Y);break;default:ls(I,Y,ie,ye,z)}t=t.sibling}}function io(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var o=e,f=t,z=f.flags;switch(f.tag){case 22:io(o,f),z&2048&&Kc(f.alternate,f);break;case 24:io(o,f),z&2048&&$c(f.alternate,f);break;default:io(o,f)}t=t.sibling}}var ao=8192;function cs(e,t,o){if(e.subtreeFlags&ao)for(e=e.child;e!==null;)th(e,t,o),e=e.sibling}function th(e,t,o){switch(e.tag){case 26:cs(e,t,o),e.flags&ao&&e.memoizedState!==null&&g0(o,Wr,e.memoizedState,e.memoizedProps);break;case 5:cs(e,t,o);break;case 3:case 4:var f=Wr;Wr=Sl(e.stateNode.containerInfo),cs(e,t,o),Wr=f;break;case 22:e.memoizedState===null&&(f=e.alternate,f!==null&&f.memoizedState!==null?(f=ao,ao=16777216,cs(e,t,o),ao=f):cs(e,t,o));break;default:cs(e,t,o)}}function nh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function so(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var o=0;o<t.length;o++){var f=t[o];Fn=f,ih(f,e)}nh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)rh(e),e=e.sibling}function rh(e){switch(e.tag){case 0:case 11:case 15:so(e),e.flags&2048&&$i(9,e,e.return);break;case 3:so(e);break;case 12:so(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ul(e)):so(e);break;default:so(e)}}function ul(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var o=0;o<t.length;o++){var f=t[o];Fn=f,ih(f,e)}nh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:$i(8,t,t.return),ul(t);break;case 22:o=t.stateNode,o._visibility&2&&(o._visibility&=-3,ul(t));break;default:ul(t)}e=e.sibling}}function ih(e,t){for(;Fn!==null;){var o=Fn;switch(o.tag){case 0:case 11:case 15:$i(8,o,t);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var f=o.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Wi(o.memoizedState.cache)}if(f=o.child,f!==null)f.return=o,Fn=f;else e:for(o=e;Fn!==null;){f=Fn;var z=f.sibling,I=f.return;if(Xf(f),f===o){Fn=null;break e}if(z!==null){z.return=I,Fn=z;break e}Fn=I}}}var Od={getCacheForType:function(e){var t=Ln(xn),o=t.data.get(e);return o===void 0&&(o=e(),t.data.set(e,o)),o},cacheSignal:function(){return Ln(xn).controller.signal}},Rd=typeof WeakMap=="function"?WeakMap:Map,nn=0,gn=null,Nt=null,Vt=0,rn=0,_r=null,Xi=!1,us=!1,Xc=!1,wi=0,Sn=0,Yi=0,Pa=0,Yc=0,xr=0,fs=0,oo=null,fr=null,Zc=!1,fl=0,ah=0,hl=1/0,dl=null,Zi=null,zn=0,Qi=null,hs=null,Oi=0,Qc=0,qc=null,sh=null,lo=0,Jc=null;function br(){return(nn&2)!==0&&Vt!==0?Vt&-Vt:G.T!==null?au():yt()}function oh(){if(xr===0)if((Vt&536870912)===0||Ut){var e=He;He<<=1,(He&3932160)===0&&(He=262144),xr=e}else xr=536870912;return e=vr.current,e!==null&&(e.flags|=32),xr}function hr(e,t,o){(e===gn&&(rn===2||rn===9)||e.cancelPendingCommit!==null)&&(ds(e,0),qi(e,Vt,xr,!1)),lt(e,o),((nn&2)===0||e!==gn)&&(e===gn&&((nn&2)===0&&(Pa|=o),Sn===4&&qi(e,Vt,xr,!1)),ai(e))}function lh(e,t,o){if((nn&6)!==0)throw Error(a(327));var f=!o&&(t&127)===0&&(t&e.expiredLanes)===0||Ae(e,t),z=f?zd(e,t):tu(e,t,!0),I=f;do{if(z===0){us&&!f&&qi(e,t,0,!1);break}else{if(o=e.current.alternate,I&&!Dd(o)){z=tu(e,t,!1),I=!1;continue}if(z===2){if(I=t,e.errorRecoveryDisabledLanes&I)var Y=0;else Y=e.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){t=Y;e:{var ie=e;z=oo;var ye=ie.current.memoizedState.isDehydrated;if(ye&&(ds(ie,Y).flags|=256),Y=tu(ie,Y,!1),Y!==2){if(Xc&&!ye){ie.errorRecoveryDisabledLanes|=I,Pa|=I,z=4;break e}I=fr,fr=z,I!==null&&(fr===null?fr=I:fr.push.apply(fr,I))}z=Y}if(I=!1,z!==2)continue}}if(z===1){ds(e,0),qi(e,t,0,!0);break}e:{switch(f=e,I=z,I){case 0:case 1:throw Error(a(345));case 4:if((t&4194048)!==t)break;case 6:qi(f,t,xr,!Xi);break e;case 2:fr=null;break;case 3:case 5:break;default:throw Error(a(329))}if((t&62914560)===t&&(z=fl+300-Ge(),10<z)){if(qi(f,t,xr,!Xi),Me(f,0,!0)!==0)break e;Oi=t,f.timeoutHandle=Nh(ch.bind(null,f,o,fr,dl,Zc,t,xr,Pa,fs,Xi,I,"Throttled",-0,0),z);break e}ch(f,o,fr,dl,Zc,t,xr,Pa,fs,Xi,I,null,-0,0)}}break}while(!0);ai(e)}function ch(e,t,o,f,z,I,Y,ie,ye,Ue,Ye,tt,We,Ke){if(e.timeoutHandle=-1,tt=t.subtreeFlags,tt&8192||(tt&16785408)===16785408){tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pr},th(t,I,tt);var mt=(I&62914560)===I?fl-Ge():(I&4194048)===I?ah-Ge():0;if(mt=m0(tt,mt),mt!==null){Oi=I,e.cancelPendingCommit=mt(vh.bind(null,e,t,I,o,f,z,Y,ie,ye,Ye,tt,null,We,Ke)),qi(e,I,Y,!Ue);return}}vh(e,t,I,o,f,z,Y,ie,ye)}function Dd(e){for(var t=e;;){var o=t.tag;if((o===0||o===11||o===15)&&t.flags&16384&&(o=t.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var f=0;f<o.length;f++){var z=o[f],I=z.getSnapshot;z=z.value;try{if(!mn(I(),z))return!1}catch{return!1}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qi(e,t,o,f){t&=~Yc,t&=~Pa,e.suspendedLanes|=t,e.pingedLanes&=~t,f&&(e.warmLanes|=t),f=e.expirationTimes;for(var z=t;0<z;){var I=31-be(z),Y=1<<I;f[I]=-1,z&=~Y}o!==0&&st(e,o,t)}function gl(){return(nn&6)===0?(co(0),!1):!0}function eu(){if(Nt!==null){if(rn===0)var e=Nt.return;else e=Nt,er=mi=null,pc(e),it=null,_t=0,e=Nt;for(;e!==null;)jf(e.alternate,e),e=e.return;Nt=null}}function ds(e,t){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,Qd(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),Oi=0,eu(),gn=e,Nt=o=Br(e.current,null),Vt=t,rn=0,_r=null,Xi=!1,us=Ae(e,t),Xc=!1,fs=xr=Yc=Pa=Yi=Sn=0,fr=oo=null,Zc=!1,(t&8)!==0&&(t|=t&32);var f=e.entangledLanes;if(f!==0)for(e=e.entanglements,f&=t;0<f;){var z=31-be(f),I=1<<z;t|=e[z],f&=~I}return wi=t,Sa(),o}function uh(e,t){Rt=null,G.H=Js,t===ae||t===fe?(t=kt(),rn=3):t===de?(t=kt(),rn=4):rn=t===Lc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,_r=t,Nt===null&&(Sn=1,rl(e,Kn(t,e.current)))}function fh(){var e=vr.current;return e===null?!0:(Vt&4194048)===Vt?Or===null:(Vt&62914560)===Vt||(Vt&536870912)!==0?e===Or:!1}function hh(){var e=G.H;return G.H=Js,e===null?Js:e}function dh(){var e=G.A;return G.A=Od,e}function ml(){Sn=4,Xi||(Vt&4194048)!==Vt&&vr.current!==null||(us=!0),(Yi&134217727)===0&&(Pa&134217727)===0||gn===null||qi(gn,Vt,xr,!1)}function tu(e,t,o){var f=nn;nn|=2;var z=hh(),I=dh();(gn!==e||Vt!==t)&&(dl=null,ds(e,t)),t=!1;var Y=Sn;e:do try{if(rn!==0&&Nt!==null){var ie=Nt,ye=_r;switch(rn){case 8:eu(),Y=6;break e;case 3:case 2:case 9:case 6:vr.current===null&&(t=!0);var Ue=rn;if(rn=0,_r=null,gs(e,ie,ye,Ue),o&&us){Y=0;break e}break;default:Ue=rn,rn=0,_r=null,gs(e,ie,ye,Ue)}}Ld(),Y=Sn;break}catch(Ye){uh(e,Ye)}while(!0);return t&&e.shellSuspendCounter++,er=mi=null,nn=f,G.H=z,G.A=I,Nt===null&&(gn=null,Vt=0,Sa()),Y}function Ld(){for(;Nt!==null;)gh(Nt)}function zd(e,t){var o=nn;nn|=2;var f=hh(),z=dh();gn!==e||Vt!==t?(dl=null,hl=Ge()+500,ds(e,t)):us=Ae(e,t);e:do try{if(rn!==0&&Nt!==null){t=Nt;var I=_r;t:switch(rn){case 1:rn=0,_r=null,gs(e,t,I,1);break;case 2:case 9:if(Te(I)){rn=0,_r=null,mh(t);break}t=function(){rn!==2&&rn!==9||gn!==e||(rn=7),ai(e)},I.then(t,t);break e;case 3:rn=7;break e;case 4:rn=5;break e;case 7:Te(I)?(rn=0,_r=null,mh(t)):(rn=0,_r=null,gs(e,t,I,7));break;case 5:var Y=null;switch(Nt.tag){case 26:Y=Nt.memoizedState;case 5:case 27:var ie=Nt;if(Y?ed(Y):ie.stateNode.complete){rn=0,_r=null;var ye=ie.sibling;if(ye!==null)Nt=ye;else{var Ue=ie.return;Ue!==null?(Nt=Ue,pl(Ue)):Nt=null}break t}}rn=0,_r=null,gs(e,t,I,5);break;case 6:rn=0,_r=null,gs(e,t,I,6);break;case 8:eu(),Sn=6;break e;default:throw Error(a(462))}}Pd();break}catch(Ye){uh(e,Ye)}while(!0);return er=mi=null,G.H=f,G.A=z,nn=o,Nt!==null?0:(gn=null,Vt=0,Sa(),Sn)}function Pd(){for(;Nt!==null&&!qe();)gh(Nt)}function gh(e){var t=Uf(e.alternate,e,wi);e.memoizedProps=e.pendingProps,t===null?pl(e):Nt=t}function mh(e){var t=e,o=t.alternate;switch(t.tag){case 15:case 0:t=Lf(o,t,t.pendingProps,t.type,void 0,Vt);break;case 11:t=Lf(o,t,t.pendingProps,t.type.render,t.ref,Vt);break;case 5:pc(t);default:jf(o,t),t=Nt=Jr(t,wi),t=Uf(o,t,wi)}e.memoizedProps=e.pendingProps,t===null?pl(e):Nt=t}function gs(e,t,o,f){er=mi=null,pc(t),it=null,_t=0;var z=t.return;try{if(Ed(e,z,t,o,Vt)){Sn=1,rl(e,Kn(o,e.current)),Nt=null;return}}catch(I){if(z!==null)throw Nt=z,I;Sn=1,rl(e,Kn(o,e.current)),Nt=null;return}t.flags&32768?(Ut||f===1?e=!0:us||(Vt&536870912)!==0?e=!1:(Xi=e=!0,(f===2||f===9||f===3||f===6)&&(f=vr.current,f!==null&&f.tag===13&&(f.flags|=16384))),ph(t,e)):pl(t)}function pl(e){var t=e;do{if((t.flags&32768)!==0){ph(t,Xi);return}e=t.return;var o=Ad(t.alternate,t,wi);if(o!==null){Nt=o;return}if(t=t.sibling,t!==null){Nt=t;return}Nt=t=e}while(t!==null);Sn===0&&(Sn=5)}function ph(e,t){do{var o=Md(e.alternate,e);if(o!==null){o.flags&=32767,Nt=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!t&&(e=e.sibling,e!==null)){Nt=e;return}Nt=e=o}while(e!==null);Sn=6,Nt=null}function vh(e,t,o,f,z,I,Y,ie,ye){e.cancelPendingCommit=null;do vl();while(zn!==0);if((nn&6)!==0)throw Error(a(327));if(t!==null){if(t===e.current)throw Error(a(177));if(I=t.lanes|t.childLanes,I|=Ea,ct(e,o,I,Y,ie,ye),e===gn&&(Nt=gn=null,Vt=0),hs=t,Qi=e,Oi=o,Qc=I,qc=z,sh=f,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ud(ne,function(){return Eh(),null})):(e.callbackNode=null,e.callbackPriority=0),f=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||f){f=G.T,G.T=null,z=H.p,H.p=2,Y=nn,nn|=4;try{Td(e,t,o)}finally{nn=Y,H.p=z,G.T=f}}zn=1,yh(),_h(),xh()}}function yh(){if(zn===1){zn=0;var e=Qi,t=hs,o=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||o){o=G.T,G.T=null;var f=H.p;H.p=2;var z=nn;nn|=4;try{qf(t,e);var I=du,Y=ya(e.containerInfo),ie=I.focusedElem,ye=I.selectionRange;if(Y!==ie&&ie&&ie.ownerDocument&&Ps(ie.ownerDocument.documentElement,ie)){if(ye!==null&&Ka(ie)){var Ue=ye.start,Ye=ye.end;if(Ye===void 0&&(Ye=Ue),"selectionStart"in ie)ie.selectionStart=Ue,ie.selectionEnd=Math.min(Ye,ie.value.length);else{var tt=ie.ownerDocument||document,We=tt&&tt.defaultView||window;if(We.getSelection){var Ke=We.getSelection(),mt=ie.textContent.length,At=Math.min(ye.start,mt),fn=ye.end===void 0?At:Math.min(ye.end,mt);!Ke.extend&&At>fn&&(Y=fn,fn=At,At=Y);var Re=Io(ie,At),Ce=Io(ie,fn);if(Re&&Ce&&(Ke.rangeCount!==1||Ke.anchorNode!==Re.node||Ke.anchorOffset!==Re.offset||Ke.focusNode!==Ce.node||Ke.focusOffset!==Ce.offset)){var Be=tt.createRange();Be.setStart(Re.node,Re.offset),Ke.removeAllRanges(),At>fn?(Ke.addRange(Be),Ke.extend(Ce.node,Ce.offset)):(Be.setEnd(Ce.node,Ce.offset),Ke.addRange(Be))}}}}for(tt=[],Ke=ie;Ke=Ke.parentNode;)Ke.nodeType===1&&tt.push({element:Ke,left:Ke.scrollLeft,top:Ke.scrollTop});for(typeof ie.focus=="function"&&ie.focus(),ie=0;ie<tt.length;ie++){var Qe=tt[ie];Qe.element.scrollLeft=Qe.left,Qe.element.scrollTop=Qe.top}}Ol=!!hu,du=hu=null}finally{nn=z,H.p=f,G.T=o}}e.current=t,zn=2}}function _h(){if(zn===2){zn=0;var e=Qi,t=hs,o=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||o){o=G.T,G.T=null;var f=H.p;H.p=2;var z=nn;nn|=4;try{$f(e,t.alternate,t)}finally{nn=z,H.p=f,G.T=o}}zn=3}}function xh(){if(zn===4||zn===3){zn=0,Ve();var e=Qi,t=hs,o=Oi,f=sh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?zn=5:(zn=0,hs=Qi=null,bh(e,e.pendingLanes));var z=e.pendingLanes;if(z===0&&(Zi=null),vt(o),t=t.stateNode,Q&&typeof Q.onCommitFiberRoot=="function")try{Q.onCommitFiberRoot(Ie,t,void 0,(t.current.flags&128)===128)}catch{}if(f!==null){t=G.T,z=H.p,H.p=2,G.T=null;try{for(var I=e.onRecoverableError,Y=0;Y<f.length;Y++){var ie=f[Y];I(ie.value,{componentStack:ie.stack})}}finally{G.T=t,H.p=z}}(Oi&3)!==0&&vl(),ai(e),z=e.pendingLanes,(o&261930)!==0&&(z&42)!==0?e===Jc?lo++:(lo=0,Jc=e):lo=0,co(0)}}function bh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Wi(t)))}function vl(){return yh(),_h(),xh(),Eh()}function Eh(){if(zn!==5)return!1;var e=Qi,t=Qc;Qc=0;var o=vt(Oi),f=G.T,z=H.p;try{H.p=32>o?32:o,G.T=null,o=qc,qc=null;var I=Qi,Y=Oi;if(zn=0,hs=Qi=null,Oi=0,(nn&6)!==0)throw Error(a(331));var ie=nn;if(nn|=4,rh(I.current),eh(I,I.current,Y,o),nn=ie,co(0,!1),Q&&typeof Q.onPostCommitFiberRoot=="function")try{Q.onPostCommitFiberRoot(Ie,I)}catch{}return!0}finally{H.p=z,G.T=f,bh(e,t)}}function Sh(e,t,o){t=Kn(o,t),t=Dc(e.stateNode,t,2),e=Ot(e,t,2),e!==null&&(lt(e,2),ai(e))}function an(e,t,o){if(e.tag===3)Sh(e,e,o);else for(;t!==null;){if(t.tag===3){Sh(t,e,o);break}else if(t.tag===1){var f=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Zi===null||!Zi.has(f))){e=Kn(o,e),o=Cf(2),f=Ot(t,o,2),f!==null&&(Af(o,f,t,e),lt(f,2),ai(f));break}}t=t.return}}function nu(e,t,o){var f=e.pingCache;if(f===null){f=e.pingCache=new Rd;var z=new Set;f.set(t,z)}else z=f.get(t),z===void 0&&(z=new Set,f.set(t,z));z.has(o)||(Xc=!0,z.add(o),e=Id.bind(null,e,t,o),t.then(e,e))}function Id(e,t,o){var f=e.pingCache;f!==null&&f.delete(t),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,gn===e&&(Vt&o)===o&&(Sn===4||Sn===3&&(Vt&62914560)===Vt&&300>Ge()-fl?(nn&2)===0&&ds(e,0):Yc|=o,fs===Vt&&(fs=0)),ai(e)}function Ch(e,t){t===0&&(t=pe()),e=qr(e,t),e!==null&&(lt(e,t),ai(e))}function Bd(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),Ch(e,o)}function Fd(e,t){var o=0;switch(e.tag){case 31:case 13:var f=e.stateNode,z=e.memoizedState;z!==null&&(o=z.retryLane);break;case 19:f=e.stateNode;break;case 22:f=e.stateNode._retryCache;break;default:throw Error(a(314))}f!==null&&f.delete(t),Ch(e,o)}function Ud(e,t){return et(e,t)}var yl=null,ms=null,ru=!1,_l=!1,iu=!1,Ji=0;function ai(e){e!==ms&&e.next===null&&(ms===null?yl=ms=e:ms=ms.next=e),_l=!0,ru||(ru=!0,jd())}function co(e,t){if(!iu&&_l){iu=!0;do for(var o=!1,f=yl;f!==null;){if(e!==0){var z=f.pendingLanes;if(z===0)var I=0;else{var Y=f.suspendedLanes,ie=f.pingedLanes;I=(1<<31-be(42|e)+1)-1,I&=z&~(Y&~ie),I=I&201326741?I&201326741|1:I?I|2:0}I!==0&&(o=!0,wh(f,I))}else I=Vt,I=Me(f,f===gn?I:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(I&3)===0||Ae(f,I)||(o=!0,wh(f,I));f=f.next}while(o);iu=!1}}function Nd(){Ah()}function Ah(){_l=ru=!1;var e=0;Ji!==0&&Zd()&&(e=Ji);for(var t=Ge(),o=null,f=yl;f!==null;){var z=f.next,I=Mh(f,t);I===0?(f.next=null,o===null?yl=z:o.next=z,z===null&&(ms=o)):(o=f,(e!==0||(I&3)!==0)&&(_l=!0)),f=z}zn!==0&&zn!==5||co(e),Ji!==0&&(Ji=0)}function Mh(e,t){for(var o=e.suspendedLanes,f=e.pingedLanes,z=e.expirationTimes,I=e.pendingLanes&-62914561;0<I;){var Y=31-be(I),ie=1<<Y,ye=z[Y];ye===-1?((ie&o)===0||(ie&f)!==0)&&(z[Y]=ee(ie,t)):ye<=t&&(e.expiredLanes|=ie),I&=~ie}if(t=gn,o=Vt,o=Me(e,e===t?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),f=e.callbackNode,o===0||e===t&&(rn===2||rn===9)||e.cancelPendingCommit!==null)return f!==null&&f!==null&&Ze(f),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||Ae(e,o)){if(t=o&-o,t===e.callbackPriority)return t;switch(f!==null&&Ze(f),vt(o)){case 2:case 8:o=J;break;case 32:o=ne;break;case 268435456:o=_e;break;default:o=ne}return f=Th.bind(null,e),o=et(o,f),e.callbackPriority=t,e.callbackNode=o,t}return f!==null&&f!==null&&Ze(f),e.callbackPriority=2,e.callbackNode=null,2}function Th(e,t){if(zn!==0&&zn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(vl()&&e.callbackNode!==o)return null;var f=Vt;return f=Me(e,e===gn?f:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),f===0?null:(lh(e,f,t),Mh(e,Ge()),e.callbackNode!=null&&e.callbackNode===o?Th.bind(null,e):null)}function wh(e,t){if(vl())return null;lh(e,t,!0)}function jd(){qd(function(){(nn&6)!==0?et(ot,Nd):Ah()})}function au(){if(Ji===0){var e=vi;e===0&&(e=q,q<<=1,(q&261888)===0&&(q=256)),Ji=e}return Ji}function Oh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Xr(""+e)}function Rh(e,t){var o=t.ownerDocument.createElement("input");return o.name=t.name,o.value=t.value,e.id&&o.setAttribute("form",e.id),t.parentNode.insertBefore(o,t),e=new FormData(e),o.parentNode.removeChild(o),e}function Gd(e,t,o,f,z){if(t==="submit"&&o&&o.stateNode===z){var I=Oh((z[Qt]||null).action),Y=f.submitter;Y&&(t=(t=Y[Qt]||null)?Oh(t.formAction):Y.getAttribute("formAction"),t!==null&&(I=t,Y=null));var ie=new Ua("action","action",null,f,z);e.push({event:ie,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Ji!==0){var ye=Y?Rh(z,Y):new FormData(z);Ac(o,{pending:!0,data:ye,method:z.method,action:I},null,ye)}}else typeof I=="function"&&(ie.preventDefault(),ye=Y?Rh(z,Y):new FormData(z),Ac(o,{pending:!0,data:ye,method:z.method,action:I},I,ye))},currentTarget:z}]})}}for(var su=0;su<Za.length;su++){var ou=Za[su],Wd=ou.toLowerCase(),Vd=ou[0].toUpperCase()+ou.slice(1);ir(Wd,"on"+Vd)}ir(Bs,"onAnimationEnd"),ir(Ya,"onAnimationIteration"),ir(Fs,"onAnimationStart"),ir("dblclick","onDoubleClick"),ir("focusin","onFocus"),ir("focusout","onBlur"),ir(Fo,"onTransitionRun"),ir(Uo,"onTransitionStart"),ir(No,"onTransitionCancel"),ir(_a,"onTransitionEnd"),Vn("onMouseEnter",["mouseout","mouseover"]),Vn("onMouseLeave",["mouseout","mouseover"]),Vn("onPointerEnter",["pointerout","pointerover"]),Vn("onPointerLeave",["pointerout","pointerover"]),Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uo));function Dh(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var f=e[o],z=f.event;f=f.listeners;e:{var I=void 0;if(t)for(var Y=f.length-1;0<=Y;Y--){var ie=f[Y],ye=ie.instance,Ue=ie.currentTarget;if(ie=ie.listener,ye!==I&&z.isPropagationStopped())break e;I=ie,z.currentTarget=Ue;try{I(z)}catch(Ye){ba(Ye)}z.currentTarget=null,I=ye}else for(Y=0;Y<f.length;Y++){if(ie=f[Y],ye=ie.instance,Ue=ie.currentTarget,ie=ie.listener,ye!==I&&z.isPropagationStopped())break e;I=ie,z.currentTarget=Ue;try{I(z)}catch(Ye){ba(Ye)}z.currentTarget=null,I=ye}}}}function jt(e,t){var o=t[zt];o===void 0&&(o=t[zt]=new Set);var f=e+"__bubble";o.has(f)||(Lh(t,e,2,!1),o.add(f))}function lu(e,t,o){var f=0;t&&(f|=4),Lh(o,e,f,t)}var xl="_reactListening"+Math.random().toString(36).slice(2);function cu(e){if(!e[xl]){e[xl]=!0,Wn.forEach(function(o){o!=="selectionchange"&&(Hd.has(o)||lu(o,!1,e),lu(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xl]||(t[xl]=!0,lu("selectionchange",!1,t))}}function Lh(e,t,o,f){switch(od(t)){case 2:var z=y0;break;case 8:z=_0;break;default:z=Cu}o=z.bind(null,t,o,e),z=void 0,!Es||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(z=!0),f?z!==void 0?e.addEventListener(t,o,{capture:!0,passive:z}):e.addEventListener(t,o,!0):z!==void 0?e.addEventListener(t,o,{passive:z}):e.addEventListener(t,o,!1)}function uu(e,t,o,f,z){var I=f;if((t&1)===0&&(t&2)===0&&f!==null)e:for(;;){if(f===null)return;var Y=f.tag;if(Y===3||Y===4){var ie=f.stateNode.containerInfo;if(ie===z)break;if(Y===4)for(Y=f.return;Y!==null;){var ye=Y.tag;if((ye===3||ye===4)&&Y.stateNode.containerInfo===z)return;Y=Y.return}for(;ie!==null;){if(Y=In(ie),Y===null)return;if(ye=Y.tag,ye===5||ye===6||ye===26||ye===27){f=I=Y;continue e}ie=ie.parentNode}}f=f.return}xo(function(){var Ue=I,Ye=Yr(o),tt=[];e:{var We=xa.get(e);if(We!==void 0){var Ke=Ua,mt=e;switch(e){case"keypress":if(la(o)===0)break e;case"keydown":case"keyup":Ke=Kl;break;case"focusin":mt="focus",Ke=As;break;case"focusout":mt="blur",Ke=As;break;case"beforeblur":case"afterblur":Ke=As;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ke=So;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ke=fa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ke=Wa;break;case Bs:case Ya:case Fs:Ke=ja;break;case _a:Ke=Zl;break;case"scroll":case"scrollend":Ke=Ul;break;case"wheel":Ke=ql;break;case"copy":case"cut":case"paste":Ke=ha;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ke=To;break;case"toggle":case"beforetoggle":Ke=Ms}var At=(t&4)!==0,fn=!At&&(e==="scroll"||e==="scrollend"),Re=At?We!==null?We+"Capture":null:We;At=[];for(var Ce=Ue,Be;Ce!==null;){var Qe=Ce;if(Be=Qe.stateNode,Qe=Qe.tag,Qe!==5&&Qe!==26&&Qe!==27||Be===null||Re===null||(Qe=Hn(Ce,Re),Qe!=null&&At.push(fo(Ce,Qe,Be))),fn)break;Ce=Ce.return}0<At.length&&(We=new Ke(We,mt,null,o,Ye),tt.push({event:We,listeners:At}))}}if((t&7)===0){e:{if(We=e==="mouseover"||e==="pointerover",Ke=e==="mouseout"||e==="pointerout",We&&o!==Ia&&(mt=o.relatedTarget||o.fromElement)&&(In(mt)||mt[Bt]))break e;if((Ke||We)&&(We=Ye.window===Ye?Ye:(We=Ye.ownerDocument)?We.defaultView||We.parentWindow:window,Ke?(mt=o.relatedTarget||o.toElement,Ke=Ue,mt=mt?In(mt):null,mt!==null&&(fn=y(mt),At=mt.tag,mt!==fn||At!==5&&At!==27&&At!==6)&&(mt=null)):(Ke=null,mt=Ue),Ke!==mt)){if(At=So,Qe="onMouseLeave",Re="onMouseEnter",Ce="mouse",(e==="pointerout"||e==="pointerover")&&(At=To,Qe="onPointerLeave",Re="onPointerEnter",Ce="pointer"),fn=Ke==null?We:dr(Ke),Be=mt==null?We:dr(mt),We=new At(Qe,Ce+"leave",Ke,o,Ye),We.target=fn,We.relatedTarget=Be,Qe=null,In(Ye)===Ue&&(At=new At(Re,Ce+"enter",mt,o,Ye),At.target=Be,At.relatedTarget=fn,Qe=At),fn=Qe,Ke&&mt)t:{for(At=kd,Re=Ke,Ce=mt,Be=0,Qe=Re;Qe;Qe=At(Qe))Be++;Qe=0;for(var bt=Ce;bt;bt=At(bt))Qe++;for(;0<Be-Qe;)Re=At(Re),Be--;for(;0<Qe-Be;)Ce=At(Ce),Qe--;for(;Be--;){if(Re===Ce||Ce!==null&&Re===Ce.alternate){At=Re;break t}Re=At(Re),Ce=At(Ce)}At=null}else At=null;Ke!==null&&zh(tt,We,Ke,At,!1),mt!==null&&fn!==null&&zh(tt,fn,mt,At,!0)}}e:{if(We=Ue?dr(Ue):window,Ke=We.nodeName&&We.nodeName.toLowerCase(),Ke==="select"||Ke==="input"&&We.type==="file")var Jt=Po;else if(ws(We))if(nc)Jt=ic;else{Jt=ka;var pt=rc}else Ke=We.nodeName,!Ke||Ke.toLowerCase()!=="input"||We.type!=="checkbox"&&We.type!=="radio"?Ue&&Un(Ue.elementType)&&(Jt=Po):Jt=fi;if(Jt&&(Jt=Jt(e,Ue))){Va(tt,Jt,o,Ye);break e}pt&&pt(e,We,Ue),e==="focusout"&&Ue&&We.type==="number"&&Ue.memoizedProps.value!=null&&mr(We,"number",We.value)}switch(pt=Ue?dr(Ue):window,e){case"focusin":(ws(pt)||pt.contentEditable==="true")&&(hi=pt,$a=Ue,Fi=null);break;case"focusout":Fi=$a=hi=null;break;case"mousedown":Xa=!0;break;case"contextmenu":case"mouseup":case"dragend":Xa=!1,Is(tt,o,Ye);break;case"selectionchange":if(Bo)break;case"keydown":case"keyup":Is(tt,o,Ye)}var Dt;if(Ts)e:{switch(e){case"compositionstart":var Ht="onCompositionStart";break e;case"compositionend":Ht="onCompositionEnd";break e;case"compositionupdate":Ht="onCompositionUpdate";break e}Ht=void 0}else zi?pa(e,o)&&(Ht="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(Ht="onCompositionStart");Ht&&(wo&&o.locale!=="ko"&&(zi||Ht!=="onCompositionStart"?Ht==="onCompositionEnd"&&zi&&(Dt=bo()):(rr=Ye,Ba="value"in rr?rr.value:rr.textContent,zi=!0)),pt=bl(Ue,Ht),0<pt.length&&(Ht=new Ao(Ht,e,null,o,Ye),tt.push({event:Ht,listeners:pt}),Dt?Ht.data=Dt:(Dt=Do(o),Dt!==null&&(Ht.data=Dt)))),(Dt=ec?Pi(e,o):Lo(e,o))&&(Ht=bl(Ue,"onBeforeInput"),0<Ht.length&&(pt=new Ao("onBeforeInput","beforeinput",null,o,Ye),tt.push({event:pt,listeners:Ht}),pt.data=Dt)),Gd(tt,e,Ue,o,Ye)}Dh(tt,t)})}function fo(e,t,o){return{instance:e,listener:t,currentTarget:o}}function bl(e,t){for(var o=t+"Capture",f=[];e!==null;){var z=e,I=z.stateNode;if(z=z.tag,z!==5&&z!==26&&z!==27||I===null||(z=Hn(e,o),z!=null&&f.unshift(fo(e,z,I)),z=Hn(e,t),z!=null&&f.push(fo(e,z,I))),e.tag===3)return f;e=e.return}return[]}function kd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function zh(e,t,o,f,z){for(var I=t._reactName,Y=[];o!==null&&o!==f;){var ie=o,ye=ie.alternate,Ue=ie.stateNode;if(ie=ie.tag,ye!==null&&ye===f)break;ie!==5&&ie!==26&&ie!==27||Ue===null||(ye=Ue,z?(Ue=Hn(o,I),Ue!=null&&Y.unshift(fo(o,Ue,ye))):z||(Ue=Hn(o,I),Ue!=null&&Y.push(fo(o,Ue,ye)))),o=o.return}Y.length!==0&&e.push({event:t,listeners:Y})}var Kd=/\r\n?/g,$d=/\u0000|\uFFFD/g;function Ph(e){return(typeof e=="string"?e:""+e).replace(Kd,`
`).replace($d,"")}function Ih(e,t){return t=Ph(t),Ph(e)===t}function un(e,t,o,f,z,I){switch(o){case"children":typeof f=="string"?t==="body"||t==="textarea"&&f===""||Yn(e,f):(typeof f=="number"||typeof f=="bigint")&&t!=="body"&&Yn(e,""+f);break;case"className":nr(e,"class",f);break;case"tabIndex":nr(e,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":nr(e,o,f);break;case"style":Pr(e,f,I);break;case"data":if(t!=="object"){nr(e,"data",f);break}case"src":case"href":if(f===""&&(t!=="a"||o!=="href")){e.removeAttribute(o);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){e.removeAttribute(o);break}f=Xr(""+f),e.setAttribute(o,f);break;case"action":case"formAction":if(typeof f=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof I=="function"&&(o==="formAction"?(t!=="input"&&un(e,t,"name",z.name,z,null),un(e,t,"formEncType",z.formEncType,z,null),un(e,t,"formMethod",z.formMethod,z,null),un(e,t,"formTarget",z.formTarget,z,null)):(un(e,t,"encType",z.encType,z,null),un(e,t,"method",z.method,z,null),un(e,t,"target",z.target,z,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){e.removeAttribute(o);break}f=Xr(""+f),e.setAttribute(o,f);break;case"onClick":f!=null&&(e.onclick=pr);break;case"onScroll":f!=null&&jt("scroll",e);break;case"onScrollEnd":f!=null&&jt("scrollend",e);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(a(61));if(o=f.__html,o!=null){if(z.children!=null)throw Error(a(60));e.innerHTML=o}}break;case"multiple":e.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":e.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){e.removeAttribute("xlink:href");break}o=Xr(""+f),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?e.setAttribute(o,""+f):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":f===!0?e.setAttribute(o,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?e.setAttribute(o,f):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?e.setAttribute(o,f):e.removeAttribute(o);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?e.removeAttribute(o):e.setAttribute(o,f);break;case"popover":jt("beforetoggle",e),jt("toggle",e),tn(e,"popover",f);break;case"xlinkActuate":_n(e,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":_n(e,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":_n(e,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":_n(e,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":_n(e,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":_n(e,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":_n(e,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":_n(e,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":_n(e,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":tn(e,"is",f);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Zn.get(o)||o,tn(e,o,f))}}function fu(e,t,o,f,z,I){switch(o){case"style":Pr(e,f,I);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(a(61));if(o=f.__html,o!=null){if(z.children!=null)throw Error(a(60));e.innerHTML=o}}break;case"children":typeof f=="string"?Yn(e,f):(typeof f=="number"||typeof f=="bigint")&&Yn(e,""+f);break;case"onScroll":f!=null&&jt("scroll",e);break;case"onScrollEnd":f!=null&&jt("scrollend",e);break;case"onClick":f!=null&&(e.onclick=pr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hr.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(z=o.endsWith("Capture"),t=o.slice(2,z?o.length-7:void 0),I=e[Qt]||null,I=I!=null?I[o]:null,typeof I=="function"&&e.removeEventListener(t,I,z),typeof f=="function")){typeof I!="function"&&I!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(t,f,z);break e}o in e?e[o]=f:f===!0?e.setAttribute(o,""):tn(e,o,f)}}}function jn(e,t,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",e),jt("load",e);var f=!1,z=!1,I;for(I in o)if(o.hasOwnProperty(I)){var Y=o[I];if(Y!=null)switch(I){case"src":f=!0;break;case"srcSet":z=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:un(e,t,I,Y,o,null)}}z&&un(e,t,"srcSet",o.srcSet,o,null),f&&un(e,t,"src",o.src,o,null);return;case"input":jt("invalid",e);var ie=I=Y=z=null,ye=null,Ue=null;for(f in o)if(o.hasOwnProperty(f)){var Ye=o[f];if(Ye!=null)switch(f){case"name":z=Ye;break;case"type":Y=Ye;break;case"checked":ye=Ye;break;case"defaultChecked":Ue=Ye;break;case"value":I=Ye;break;case"defaultValue":ie=Ye;break;case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(a(137,t));break;default:un(e,t,f,Ye,o,null)}}gr(e,I,ie,ye,Ue,Y,z,!1);return;case"select":jt("invalid",e),f=Y=I=null;for(z in o)if(o.hasOwnProperty(z)&&(ie=o[z],ie!=null))switch(z){case"value":I=ie;break;case"defaultValue":Y=ie;break;case"multiple":f=ie;default:un(e,t,z,ie,o,null)}t=I,o=Y,e.multiple=!!f,t!=null?Kr(e,!!f,t,!1):o!=null&&Kr(e,!!f,o,!0);return;case"textarea":jt("invalid",e),I=z=f=null;for(Y in o)if(o.hasOwnProperty(Y)&&(ie=o[Y],ie!=null))switch(Y){case"value":f=ie;break;case"defaultValue":z=ie;break;case"children":I=ie;break;case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(91));break;default:un(e,t,Y,ie,o,null)}xs(e,f,z,I);return;case"option":for(ye in o)if(o.hasOwnProperty(ye)&&(f=o[ye],f!=null))switch(ye){case"selected":e.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:un(e,t,ye,f,o,null)}return;case"dialog":jt("beforetoggle",e),jt("toggle",e),jt("cancel",e),jt("close",e);break;case"iframe":case"object":jt("load",e);break;case"video":case"audio":for(f=0;f<uo.length;f++)jt(uo[f],e);break;case"image":jt("error",e),jt("load",e);break;case"details":jt("toggle",e);break;case"embed":case"source":case"link":jt("error",e),jt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ue in o)if(o.hasOwnProperty(Ue)&&(f=o[Ue],f!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:un(e,t,Ue,f,o,null)}return;default:if(Un(t)){for(Ye in o)o.hasOwnProperty(Ye)&&(f=o[Ye],f!==void 0&&fu(e,t,Ye,f,o,void 0));return}}for(ie in o)o.hasOwnProperty(ie)&&(f=o[ie],f!=null&&un(e,t,ie,f,o,null))}function Xd(e,t,o,f){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var z=null,I=null,Y=null,ie=null,ye=null,Ue=null,Ye=null;for(Ke in o){var tt=o[Ke];if(o.hasOwnProperty(Ke)&&tt!=null)switch(Ke){case"checked":break;case"value":break;case"defaultValue":ye=tt;default:f.hasOwnProperty(Ke)||un(e,t,Ke,null,f,tt)}}for(var We in f){var Ke=f[We];if(tt=o[We],f.hasOwnProperty(We)&&(Ke!=null||tt!=null))switch(We){case"type":I=Ke;break;case"name":z=Ke;break;case"checked":Ue=Ke;break;case"defaultChecked":Ye=Ke;break;case"value":Y=Ke;break;case"defaultValue":ie=Ke;break;case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(a(137,t));break;default:Ke!==tt&&un(e,t,We,Ke,f,tt)}}Sr(e,Y,ie,ye,Ue,Ye,I,z);return;case"select":Ke=Y=ie=We=null;for(I in o)if(ye=o[I],o.hasOwnProperty(I)&&ye!=null)switch(I){case"value":break;case"multiple":Ke=ye;default:f.hasOwnProperty(I)||un(e,t,I,null,f,ye)}for(z in f)if(I=f[z],ye=o[z],f.hasOwnProperty(z)&&(I!=null||ye!=null))switch(z){case"value":We=I;break;case"defaultValue":ie=I;break;case"multiple":Y=I;default:I!==ye&&un(e,t,z,I,f,ye)}t=ie,o=Y,f=Ke,We!=null?Kr(e,!!o,We,!1):!!f!=!!o&&(t!=null?Kr(e,!!o,t,!0):Kr(e,!!o,o?[]:"",!1));return;case"textarea":Ke=We=null;for(ie in o)if(z=o[ie],o.hasOwnProperty(ie)&&z!=null&&!f.hasOwnProperty(ie))switch(ie){case"value":break;case"children":break;default:un(e,t,ie,null,f,z)}for(Y in f)if(z=f[Y],I=o[Y],f.hasOwnProperty(Y)&&(z!=null||I!=null))switch(Y){case"value":We=z;break;case"defaultValue":Ke=z;break;case"children":break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(a(91));break;default:z!==I&&un(e,t,Y,z,f,I)}$r(e,We,Ke);return;case"option":for(var mt in o)if(We=o[mt],o.hasOwnProperty(mt)&&We!=null&&!f.hasOwnProperty(mt))switch(mt){case"selected":e.selected=!1;break;default:un(e,t,mt,null,f,We)}for(ye in f)if(We=f[ye],Ke=o[ye],f.hasOwnProperty(ye)&&We!==Ke&&(We!=null||Ke!=null))switch(ye){case"selected":e.selected=We&&typeof We!="function"&&typeof We!="symbol";break;default:un(e,t,ye,We,f,Ke)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var At in o)We=o[At],o.hasOwnProperty(At)&&We!=null&&!f.hasOwnProperty(At)&&un(e,t,At,null,f,We);for(Ue in f)if(We=f[Ue],Ke=o[Ue],f.hasOwnProperty(Ue)&&We!==Ke&&(We!=null||Ke!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(a(137,t));break;default:un(e,t,Ue,We,f,Ke)}return;default:if(Un(t)){for(var fn in o)We=o[fn],o.hasOwnProperty(fn)&&We!==void 0&&!f.hasOwnProperty(fn)&&fu(e,t,fn,void 0,f,We);for(Ye in f)We=f[Ye],Ke=o[Ye],!f.hasOwnProperty(Ye)||We===Ke||We===void 0&&Ke===void 0||fu(e,t,Ye,We,f,Ke);return}}for(var Re in o)We=o[Re],o.hasOwnProperty(Re)&&We!=null&&!f.hasOwnProperty(Re)&&un(e,t,Re,null,f,We);for(tt in f)We=f[tt],Ke=o[tt],!f.hasOwnProperty(tt)||We===Ke||We==null&&Ke==null||un(e,t,tt,We,f,Ke)}function Bh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Yd(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,o=performance.getEntriesByType("resource"),f=0;f<o.length;f++){var z=o[f],I=z.transferSize,Y=z.initiatorType,ie=z.duration;if(I&&ie&&Bh(Y)){for(Y=0,ie=z.responseEnd,f+=1;f<o.length;f++){var ye=o[f],Ue=ye.startTime;if(Ue>ie)break;var Ye=ye.transferSize,tt=ye.initiatorType;Ye&&Bh(tt)&&(ye=ye.responseEnd,Y+=Ye*(ye<ie?1:(ie-Ue)/(ye-Ue)))}if(--f,t+=8*(I+Y)/(z.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var hu=null,du=null;function El(e){return e.nodeType===9?e:e.ownerDocument}function Fh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Uh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function gu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var mu=null;function Zd(){var e=window.event;return e&&e.type==="popstate"?e===mu?!1:(mu=e,!0):(mu=null,!1)}var Nh=typeof setTimeout=="function"?setTimeout:void 0,Qd=typeof clearTimeout=="function"?clearTimeout:void 0,jh=typeof Promise=="function"?Promise:void 0,qd=typeof queueMicrotask=="function"?queueMicrotask:typeof jh<"u"?function(e){return jh.resolve(null).then(e).catch(Jd)}:Nh;function Jd(e){setTimeout(function(){throw e})}function ea(e){return e==="head"}function Gh(e,t){var o=t,f=0;do{var z=o.nextSibling;if(e.removeChild(o),z&&z.nodeType===8)if(o=z.data,o==="/$"||o==="/&"){if(f===0){e.removeChild(z),_s(t);return}f--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")f++;else if(o==="html")ho(e.ownerDocument.documentElement);else if(o==="head"){o=e.ownerDocument.head,ho(o);for(var I=o.firstChild;I;){var Y=I.nextSibling,ie=I.nodeName;I[Pn]||ie==="SCRIPT"||ie==="STYLE"||ie==="LINK"&&I.rel.toLowerCase()==="stylesheet"||o.removeChild(I),I=Y}}else o==="body"&&ho(e.ownerDocument.body);o=z}while(o);_s(t)}function Wh(e,t){var o=e;e=0;do{var f=o.nextSibling;if(o.nodeType===1?t?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(t?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),f&&f.nodeType===8)if(o=f.data,o==="/$"){if(e===0)break;e--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||e++;o=f}while(o)}function pu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var o=t;switch(t=t.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":pu(o),Er(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function e0(e,t,o,f){for(;e.nodeType===1;){var z=o;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!f&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(f){if(!e[Pn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(I=e.getAttribute("rel"),I==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(I!==z.rel||e.getAttribute("href")!==(z.href==null||z.href===""?null:z.href)||e.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin)||e.getAttribute("title")!==(z.title==null?null:z.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(I=e.getAttribute("src"),(I!==(z.src==null?null:z.src)||e.getAttribute("type")!==(z.type==null?null:z.type)||e.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin))&&I&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var I=z.name==null?null:""+z.name;if(z.type==="hidden"&&e.getAttribute("name")===I)return e}else return e;if(e=Rr(e.nextSibling),e===null)break}return null}function t0(e,t,o){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=Rr(e.nextSibling),e===null))return null;return e}function Vh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Rr(e.nextSibling),e===null))return null;return e}function vu(e){return e.data==="$?"||e.data==="$~"}function yu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function n0(e,t){var o=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||o.readyState!=="loading")t();else{var f=function(){t(),o.removeEventListener("DOMContentLoaded",f)};o.addEventListener("DOMContentLoaded",f),e._reactRetry=f}}function Rr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var _u=null;function Hh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"||o==="/&"){if(t===0)return Rr(e.nextSibling);t--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||t++}e=e.nextSibling}return null}function kh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(t===0)return e;t--}else o!=="/$"&&o!=="/&"||t++}e=e.previousSibling}return null}function Kh(e,t,o){switch(t=El(o),e){case"html":if(e=t.documentElement,!e)throw Error(a(452));return e;case"head":if(e=t.head,!e)throw Error(a(453));return e;case"body":if(e=t.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function ho(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Er(e)}var Dr=new Map,$h=new Set;function Sl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ri=H.d;H.d={f:r0,r:i0,D:a0,C:s0,L:o0,m:l0,X:u0,S:c0,M:f0};function r0(){var e=Ri.f(),t=gl();return e||t}function i0(e){var t=Gn(e);t!==null&&t.tag===5&&t.type==="form"?uf(t):Ri.r(e)}var ps=typeof document>"u"?null:document;function Xh(e,t,o){var f=ps;if(f&&typeof t=="string"&&t){var z=$t(t);z='link[rel="'+e+'"][href="'+z+'"]',typeof o=="string"&&(z+='[crossorigin="'+o+'"]'),$h.has(z)||($h.add(z),e={rel:e,crossOrigin:o,href:t},f.querySelector(z)===null&&(t=f.createElement("link"),jn(t,"link",e),hn(t),f.head.appendChild(t)))}}function a0(e){Ri.D(e),Xh("dns-prefetch",e,null)}function s0(e,t){Ri.C(e,t),Xh("preconnect",e,t)}function o0(e,t,o){Ri.L(e,t,o);var f=ps;if(f&&e&&t){var z='link[rel="preload"][as="'+$t(t)+'"]';t==="image"&&o&&o.imageSrcSet?(z+='[imagesrcset="'+$t(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(z+='[imagesizes="'+$t(o.imageSizes)+'"]')):z+='[href="'+$t(e)+'"]';var I=z;switch(t){case"style":I=vs(e);break;case"script":I=ys(e)}Dr.has(I)||(e=A({rel:"preload",href:t==="image"&&o&&o.imageSrcSet?void 0:e,as:t},o),Dr.set(I,e),f.querySelector(z)!==null||t==="style"&&f.querySelector(go(I))||t==="script"&&f.querySelector(mo(I))||(t=f.createElement("link"),jn(t,"link",e),hn(t),f.head.appendChild(t)))}}function l0(e,t){Ri.m(e,t);var o=ps;if(o&&e){var f=t&&typeof t.as=="string"?t.as:"script",z='link[rel="modulepreload"][as="'+$t(f)+'"][href="'+$t(e)+'"]',I=z;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":I=ys(e)}if(!Dr.has(I)&&(e=A({rel:"modulepreload",href:e},t),Dr.set(I,e),o.querySelector(z)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(mo(I)))return}f=o.createElement("link"),jn(f,"link",e),hn(f),o.head.appendChild(f)}}}function c0(e,t,o){Ri.S(e,t,o);var f=ps;if(f&&e){var z=$n(f).hoistableStyles,I=vs(e);t=t||"default";var Y=z.get(I);if(!Y){var ie={loading:0,preload:null};if(Y=f.querySelector(go(I)))ie.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":t},o),(o=Dr.get(I))&&xu(e,o);var ye=Y=f.createElement("link");hn(ye),jn(ye,"link",e),ye._p=new Promise(function(Ue,Ye){ye.onload=Ue,ye.onerror=Ye}),ye.addEventListener("load",function(){ie.loading|=1}),ye.addEventListener("error",function(){ie.loading|=2}),ie.loading|=4,Cl(Y,t,f)}Y={type:"stylesheet",instance:Y,count:1,state:ie},z.set(I,Y)}}}function u0(e,t){Ri.X(e,t);var o=ps;if(o&&e){var f=$n(o).hoistableScripts,z=ys(e),I=f.get(z);I||(I=o.querySelector(mo(z)),I||(e=A({src:e,async:!0},t),(t=Dr.get(z))&&bu(e,t),I=o.createElement("script"),hn(I),jn(I,"link",e),o.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},f.set(z,I))}}function f0(e,t){Ri.M(e,t);var o=ps;if(o&&e){var f=$n(o).hoistableScripts,z=ys(e),I=f.get(z);I||(I=o.querySelector(mo(z)),I||(e=A({src:e,async:!0,type:"module"},t),(t=Dr.get(z))&&bu(e,t),I=o.createElement("script"),hn(I),jn(I,"link",e),o.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},f.set(z,I))}}function Yh(e,t,o,f){var z=(z=oe.current)?Sl(z):null;if(!z)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(t=vs(o.href),o=$n(z).hoistableStyles,f=o.get(t),f||(f={type:"style",instance:null,count:0,state:null},o.set(t,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=vs(o.href);var I=$n(z).hoistableStyles,Y=I.get(e);if(Y||(z=z.ownerDocument||z,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},I.set(e,Y),(I=z.querySelector(go(e)))&&!I._p&&(Y.instance=I,Y.state.loading=5),Dr.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Dr.set(e,o),I||h0(z,e,o,Y.state))),t&&f===null)throw Error(a(528,""));return Y}if(t&&f!==null)throw Error(a(529,""));return null;case"script":return t=o.async,o=o.src,typeof o=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ys(o),o=$n(z).hoistableScripts,f=o.get(t),f||(f={type:"script",instance:null,count:0,state:null},o.set(t,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function vs(e){return'href="'+$t(e)+'"'}function go(e){return'link[rel="stylesheet"]['+e+"]"}function Zh(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function h0(e,t,o,f){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?f.loading=1:(t=e.createElement("link"),f.preload=t,t.addEventListener("load",function(){return f.loading|=1}),t.addEventListener("error",function(){return f.loading|=2}),jn(t,"link",o),hn(t),e.head.appendChild(t))}function ys(e){return'[src="'+$t(e)+'"]'}function mo(e){return"script[async]"+e}function Qh(e,t,o){if(t.count++,t.instance===null)switch(t.type){case"style":var f=e.querySelector('style[data-href~="'+$t(o.href)+'"]');if(f)return t.instance=f,hn(f),f;var z=A({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return f=(e.ownerDocument||e).createElement("style"),hn(f),jn(f,"style",z),Cl(f,o.precedence,e),t.instance=f;case"stylesheet":z=vs(o.href);var I=e.querySelector(go(z));if(I)return t.state.loading|=4,t.instance=I,hn(I),I;f=Zh(o),(z=Dr.get(z))&&xu(f,z),I=(e.ownerDocument||e).createElement("link"),hn(I);var Y=I;return Y._p=new Promise(function(ie,ye){Y.onload=ie,Y.onerror=ye}),jn(I,"link",f),t.state.loading|=4,Cl(I,o.precedence,e),t.instance=I;case"script":return I=ys(o.src),(z=e.querySelector(mo(I)))?(t.instance=z,hn(z),z):(f=o,(z=Dr.get(I))&&(f=A({},o),bu(f,z)),e=e.ownerDocument||e,z=e.createElement("script"),hn(z),jn(z,"link",f),e.head.appendChild(z),t.instance=z);case"void":return null;default:throw Error(a(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(f=t.instance,t.state.loading|=4,Cl(f,o.precedence,e));return t.instance}function Cl(e,t,o){for(var f=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),z=f.length?f[f.length-1]:null,I=z,Y=0;Y<f.length;Y++){var ie=f[Y];if(ie.dataset.precedence===t)I=ie;else if(I!==z)break}I?I.parentNode.insertBefore(e,I.nextSibling):(t=o.nodeType===9?o.head:o,t.insertBefore(e,t.firstChild))}function xu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function bu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Al=null;function qh(e,t,o){if(Al===null){var f=new Map,z=Al=new Map;z.set(o,f)}else z=Al,f=z.get(o),f||(f=new Map,z.set(o,f));if(f.has(e))return f;for(f.set(e,null),o=o.getElementsByTagName(e),z=0;z<o.length;z++){var I=o[z];if(!(I[Pn]||I[Lt]||e==="link"&&I.getAttribute("rel")==="stylesheet")&&I.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=I.getAttribute(t)||"";Y=e+Y;var ie=f.get(Y);ie?ie.push(I):f.set(Y,[I])}}return f}function Jh(e,t,o){e=e.ownerDocument||e,e.head.insertBefore(o,t==="title"?e.querySelector("head > title"):null)}function d0(e,t,o){if(o===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function ed(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function g0(e,t,o,f){if(o.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var z=vs(f.href),I=t.querySelector(go(z));if(I){t=I._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ml.bind(e),t.then(e,e)),o.state.loading|=4,o.instance=I,hn(I);return}I=t.ownerDocument||t,f=Zh(f),(z=Dr.get(z))&&xu(f,z),I=I.createElement("link"),hn(I);var Y=I;Y._p=new Promise(function(ie,ye){Y.onload=ie,Y.onerror=ye}),jn(I,"link",f),o.instance=I}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(o,t),(t=o.state.preload)&&(o.state.loading&3)===0&&(e.count++,o=Ml.bind(e),t.addEventListener("load",o),t.addEventListener("error",o))}}var Eu=0;function m0(e,t){return e.stylesheets&&e.count===0&&wl(e,e.stylesheets),0<e.count||0<e.imgCount?function(o){var f=setTimeout(function(){if(e.stylesheets&&wl(e,e.stylesheets),e.unsuspend){var I=e.unsuspend;e.unsuspend=null,I()}},6e4+t);0<e.imgBytes&&Eu===0&&(Eu=62500*Yd());var z=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&wl(e,e.stylesheets),e.unsuspend)){var I=e.unsuspend;e.unsuspend=null,I()}},(e.imgBytes>Eu?50:800)+t);return e.unsuspend=o,function(){e.unsuspend=null,clearTimeout(f),clearTimeout(z)}}:null}function Ml(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Tl=null;function wl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Tl=new Map,t.forEach(p0,e),Tl=null,Ml.call(e))}function p0(e,t){if(!(t.state.loading&4)){var o=Tl.get(e);if(o)var f=o.get(null);else{o=new Map,Tl.set(e,o);for(var z=e.querySelectorAll("link[data-precedence],style[data-precedence]"),I=0;I<z.length;I++){var Y=z[I];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(o.set(Y.dataset.precedence,Y),f=Y)}f&&o.set(null,f)}z=t.instance,Y=z.getAttribute("data-precedence"),I=o.get(Y)||f,I===f&&o.set(null,z),o.set(Y,z),this.count++,f=Ml.bind(this),z.addEventListener("load",f),z.addEventListener("error",f),I?I.parentNode.insertBefore(z,I.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(z,e.firstChild)),t.state.loading|=4}}var po={$$typeof:v,Provider:null,Consumer:null,_currentValue:k,_currentValue2:k,_threadCount:0};function v0(e,t,o,f,z,I,Y,ie,ye){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=De(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=De(0),this.hiddenUpdates=De(null),this.identifierPrefix=f,this.onUncaughtError=z,this.onCaughtError=I,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ye,this.incompleteTransitions=new Map}function td(e,t,o,f,z,I,Y,ie,ye,Ue,Ye,tt){return e=new v0(e,t,o,Y,ye,Ue,Ye,tt,ie),t=1,I===!0&&(t|=24),I=Jn(3,null,null,t),e.current=I,I.stateNode=e,t=$s(),t.refCount++,e.pooledCache=t,t.refCount++,I.memoizedState={element:f,isDehydrated:o,cache:t},bn(I),e}function nd(e){return e?(e=Ni,e):Ni}function rd(e,t,o,f,z,I){z=nd(z),f.context===null?f.context=z:f.pendingContext=z,f=Wt(t),f.payload={element:o},I=I===void 0?null:I,I!==null&&(f.callback=I),o=Ot(e,f,t),o!==null&&(hr(o,e,t),Mt(o,e,t))}function id(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function Su(e,t){id(e,t),(e=e.alternate)&&id(e,t)}function ad(e){if(e.tag===13||e.tag===31){var t=qr(e,67108864);t!==null&&hr(t,e,67108864),Su(e,67108864)}}function sd(e){if(e.tag===13||e.tag===31){var t=br();t=St(t);var o=qr(e,t);o!==null&&hr(o,e,t),Su(e,t)}}var Ol=!0;function y0(e,t,o,f){var z=G.T;G.T=null;var I=H.p;try{H.p=2,Cu(e,t,o,f)}finally{H.p=I,G.T=z}}function _0(e,t,o,f){var z=G.T;G.T=null;var I=H.p;try{H.p=8,Cu(e,t,o,f)}finally{H.p=I,G.T=z}}function Cu(e,t,o,f){if(Ol){var z=Au(f);if(z===null)uu(e,t,f,Rl,o),ld(e,f);else if(b0(z,e,t,o,f))f.stopPropagation();else if(ld(e,f),t&4&&-1<x0.indexOf(e)){for(;z!==null;){var I=Gn(z);if(I!==null)switch(I.tag){case 3:if(I=I.stateNode,I.current.memoizedState.isDehydrated){var Y=j(I.pendingLanes);if(Y!==0){var ie=I;for(ie.pendingLanes|=2,ie.entangledLanes|=2;Y;){var ye=1<<31-be(Y);ie.entanglements[1]|=ye,Y&=~ye}ai(I),(nn&6)===0&&(hl=Ge()+500,co(0))}}break;case 31:case 13:ie=qr(I,2),ie!==null&&hr(ie,I,2),gl(),Su(I,2)}if(I=Au(f),I===null&&uu(e,t,f,Rl,o),I===z)break;z=I}z!==null&&f.stopPropagation()}else uu(e,t,f,null,o)}}function Au(e){return e=Yr(e),Mu(e)}var Rl=null;function Mu(e){if(Rl=null,e=In(e),e!==null){var t=y(e);if(t===null)e=null;else{var o=t.tag;if(o===13){if(e=C(t),e!==null)return e;e=null}else if(o===31){if(e=p(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Rl=e,null}function od(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(at()){case ot:return 2;case J:return 8;case ne:case se:return 32;case _e:return 268435456;default:return 32}default:return 32}}var Tu=!1,ta=null,na=null,ra=null,vo=new Map,yo=new Map,ia=[],x0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ld(e,t){switch(e){case"focusin":case"focusout":ta=null;break;case"dragenter":case"dragleave":na=null;break;case"mouseover":case"mouseout":ra=null;break;case"pointerover":case"pointerout":vo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yo.delete(t.pointerId)}}function _o(e,t,o,f,z,I){return e===null||e.nativeEvent!==I?(e={blockedOn:t,domEventName:o,eventSystemFlags:f,nativeEvent:I,targetContainers:[z]},t!==null&&(t=Gn(t),t!==null&&ad(t)),e):(e.eventSystemFlags|=f,t=e.targetContainers,z!==null&&t.indexOf(z)===-1&&t.push(z),e)}function b0(e,t,o,f,z){switch(t){case"focusin":return ta=_o(ta,e,t,o,f,z),!0;case"dragenter":return na=_o(na,e,t,o,f,z),!0;case"mouseover":return ra=_o(ra,e,t,o,f,z),!0;case"pointerover":var I=z.pointerId;return vo.set(I,_o(vo.get(I)||null,e,t,o,f,z)),!0;case"gotpointercapture":return I=z.pointerId,yo.set(I,_o(yo.get(I)||null,e,t,o,f,z)),!0}return!1}function cd(e){var t=In(e.target);if(t!==null){var o=y(t);if(o!==null){if(t=o.tag,t===13){if(t=C(o),t!==null){e.blockedOn=t,Gt(e.priority,function(){sd(o)});return}}else if(t===31){if(t=p(o),t!==null){e.blockedOn=t,Gt(e.priority,function(){sd(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Dl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=Au(e.nativeEvent);if(o===null){o=e.nativeEvent;var f=new o.constructor(o.type,o);Ia=f,o.target.dispatchEvent(f),Ia=null}else return t=Gn(o),t!==null&&ad(t),e.blockedOn=o,!1;t.shift()}return!0}function ud(e,t,o){Dl(e)&&o.delete(t)}function E0(){Tu=!1,ta!==null&&Dl(ta)&&(ta=null),na!==null&&Dl(na)&&(na=null),ra!==null&&Dl(ra)&&(ra=null),vo.forEach(ud),yo.forEach(ud)}function Ll(e,t){e.blockedOn===t&&(e.blockedOn=null,Tu||(Tu=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,E0)))}var zl=null;function fd(e){zl!==e&&(zl=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){zl===e&&(zl=null);for(var t=0;t<e.length;t+=3){var o=e[t],f=e[t+1],z=e[t+2];if(typeof f!="function"){if(Mu(f||o)===null)continue;break}var I=Gn(o);I!==null&&(e.splice(t,3),t-=3,Ac(I,{pending:!0,data:z,method:o.method,action:f},f,z))}}))}function _s(e){function t(ye){return Ll(ye,e)}ta!==null&&Ll(ta,e),na!==null&&Ll(na,e),ra!==null&&Ll(ra,e),vo.forEach(t),yo.forEach(t);for(var o=0;o<ia.length;o++){var f=ia[o];f.blockedOn===e&&(f.blockedOn=null)}for(;0<ia.length&&(o=ia[0],o.blockedOn===null);)cd(o),o.blockedOn===null&&ia.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(f=0;f<o.length;f+=3){var z=o[f],I=o[f+1],Y=z[Qt]||null;if(typeof I=="function")Y||fd(o);else if(Y){var ie=null;if(I&&I.hasAttribute("formAction")){if(z=I,Y=I[Qt]||null)ie=Y.formAction;else if(Mu(z)!==null)continue}else ie=Y.action;typeof ie=="function"?o[f+1]=ie:(o.splice(f,3),f-=3),fd(o)}}}function hd(){function e(I){I.canIntercept&&I.info==="react-transition"&&I.intercept({handler:function(){return new Promise(function(Y){return z=Y})},focusReset:"manual",scroll:"manual"})}function t(){z!==null&&(z(),z=null),f||setTimeout(o,20)}function o(){if(!f&&!navigation.transition){var I=navigation.currentEntry;I&&I.url!=null&&navigation.navigate(I.url,{state:I.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,z=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(o,100),function(){f=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),z!==null&&(z(),z=null)}}}function wu(e){this._internalRoot=e}Pl.prototype.render=wu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(a(409));var o=t.current,f=br();rd(o,f,e,t,null,null)},Pl.prototype.unmount=wu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rd(e.current,2,null,e,null,null),gl(),t[Bt]=null}};function Pl(e){this._internalRoot=e}Pl.prototype.unstable_scheduleHydration=function(e){if(e){var t=yt();e={blockedOn:null,target:e,priority:t};for(var o=0;o<ia.length&&t!==0&&t<ia[o].priority;o++);ia.splice(o,0,e),o===0&&cd(e)}};var dd=i.version;if(dd!=="19.2.3")throw Error(a(527,dd,"19.2.3"));H.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=R(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var S0={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Il.isDisabled&&Il.supportsFiber)try{Ie=Il.inject(S0),Q=Il}catch{}}return reactDomClient_production.createRoot=function(e,t){if(!d(e))throw Error(a(299));var o=!1,f="",z=xf,I=bf,Y=Ef;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(f=t.identifierPrefix),t.onUncaughtError!==void 0&&(z=t.onUncaughtError),t.onCaughtError!==void 0&&(I=t.onCaughtError),t.onRecoverableError!==void 0&&(Y=t.onRecoverableError)),t=td(e,1,!1,null,null,o,f,null,z,I,Y,hd),e[Bt]=t.current,cu(e),new wu(t)},reactDomClient_production.hydrateRoot=function(e,t,o){if(!d(e))throw Error(a(299));var f=!1,z="",I=xf,Y=bf,ie=Ef,ye=null;return o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(z=o.identifierPrefix),o.onUncaughtError!==void 0&&(I=o.onUncaughtError),o.onCaughtError!==void 0&&(Y=o.onCaughtError),o.onRecoverableError!==void 0&&(ie=o.onRecoverableError),o.formState!==void 0&&(ye=o.formState)),t=td(e,1,!0,t,o??null,f,z,ye,I,Y,ie,hd),t.context=nd(null),o=t.current,f=br(),f=St(f),z=Wt(f),z.callback=null,Ot(o,z,f),o=f,t.current.lanes=o,lt(t,o),ai(t),e[Bt]=t.current,cu(e),new Pl(t)},reactDomClient_production.version="19.2.3",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(i){console.error(i)}}return s(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const logo="/ai-drug-ui/assets/logo-Cj1z9qv9.png";function Header(){return jsxRuntimeExports.jsx("header",{className:"app-header",children:jsxRuntimeExports.jsxs("div",{className:"header-left",children:[jsxRuntimeExports.jsx("div",{className:"logo-icon",children:jsxRuntimeExports.jsx("img",{src:logo,alt:"Logo ToxiPredict AI",className:"header-logo"})}),jsxRuntimeExports.jsxs("div",{className:"text-logo",children:[jsxRuntimeExports.jsx("h1",{className:"header-title",style:{color:"black"},children:"ToxiPredict AI"}),jsxRuntimeExports.jsx("p",{className:"header-subtitle",children:"H thng d on c tnh thuc bng AI"})]})]})})}const Footer=()=>jsxRuntimeExports.jsxs("footer",{className:"footer",children:[jsxRuntimeExports.jsxs("div",{className:"footer-container",children:[jsxRuntimeExports.jsxs("div",{className:"footer-section",children:[jsxRuntimeExports.jsx("h3",{className:"footer-title",children:"ToxiPedictAI"}),jsxRuntimeExports.jsxs("p",{className:"footer-text",children:["Website demo m hnh AI d on c tnh phn t thuc ",jsxRuntimeExports.jsx("br",{}),"(SMILES-based) "]})]}),jsxRuntimeExports.jsxs("div",{className:"footer-section",children:[jsxRuntimeExports.jsx("h4",{className:"footer-subtitle",children:"Team 13"}),jsxRuntimeExports.jsx("p",{children:"22024569 - Nguyn Th Hng Nhung"}),jsxRuntimeExports.jsx("p",{children:"22024570 - H Anh Th"}),jsxRuntimeExports.jsx("p",{children:"22024522 - Trn Hong Lng"}),jsxRuntimeExports.jsx("p",{children:"22024580 - Thi Th Dip"})]})]}),jsxRuntimeExports.jsxs("div",{className:"footer-bottom",children:[" ",new Date().getFullYear()," ToxiPedictAI. All rights reserved."]})]});function SmilesInput({value:s,onChange:i}){return jsxRuntimeExports.jsxs("div",{className:"smiles-input",children:[jsxRuntimeExports.jsx("label",{children:"SMILES Notation"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"V d: CC(=O)Oc1ccccc1C(=O)O hoc CCO",value:s,onChange:n=>i(n.target.value)})]})}function PredictButton({onClick:s,loading:i}){return jsxRuntimeExports.jsx("button",{className:"predict-button",onClick:s,disabled:i,children:i?" Predicting...":" Predict Toxicity"})}function SmilesInfo(){return jsxRuntimeExports.jsxs("div",{className:"smiles-info",children:[jsxRuntimeExports.jsx("strong",{children:"SMILES l g?"})," Simplified Molecular Input Line Entry System (SMILES) l mt h k hiu dng  m t cu trc ca cc phn t ha hc bng cc chui k t ASCII."]})}function Card({children:s,style:i}){return jsxRuntimeExports.jsx("div",{className:"card",style:i,children:s})}const toKebabCase=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,n,a)=>a?a.toUpperCase():n.toLowerCase()),toPascalCase=s=>{const i=toCamelCase(s);return i.charAt(0).toUpperCase()+i.slice(1)},mergeClasses=(...s)=>s.filter((i,n,a)=>!!i&&i.trim()!==""&&a.indexOf(i)===n).join(" ").trim(),hasA11yProp=s=>{for(const i in s)if(i.startsWith("aria-")||i==="role"||i==="title")return!0};var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Icon$1=reactExports.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:d="",children:y,iconNode:C,...p},E)=>reactExports.createElement("svg",{ref:E,...defaultAttributes,width:i,height:i,stroke:s,strokeWidth:a?Number(n)*24/Number(i):n,className:mergeClasses("lucide",d),...!y&&!hasA11yProp(p)&&{"aria-hidden":"true"},...p},[...C.map(([R,x])=>reactExports.createElement(R,x)),...Array.isArray(y)?y:[y]]));const createLucideIcon=(s,i)=>{const n=reactExports.forwardRef(({className:a,...d},y)=>reactExports.createElement(Icon$1,{ref:y,iconNode:i,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(s))}`,`lucide-${s}`,a),...d}));return n.displayName=toPascalCase(s),n};const __iconNode$5=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$5);const __iconNode$4=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],FlaskConical=createLucideIcon("flask-conical",__iconNode$4);const __iconNode$3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Image=createLucideIcon("image",__iconNode$3);const __iconNode$2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Info=createLucideIcon("info",__iconNode$2);const __iconNode$1=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],OctagonAlert=createLucideIcon("octagon-alert",__iconNode$1);const __iconNode=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],Pill=createLucideIcon("pill",__iconNode);var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext$1=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(s,i){if(s==null)return{};var n=_objectWithoutPropertiesLoose(s,i),a,d;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(s);for(d=0;d<y.length;d++)a=y[d],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(n[a]=s[a])}return n}function _objectWithoutPropertiesLoose(s,i){if(s==null)return{};var n={};for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){if(i.indexOf(a)>=0)continue;n[a]=s[a]}return n}function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},_extends$d.apply(this,arguments)}function ownKeys$1(s,i){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);i&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(s,d).enumerable})),n.push.apply(n,a)}return n}function _objectSpread(s){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$1(Object(n),!0).forEach(function(a){_defineProperty$1(s,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(n,a))})}return s}function _defineProperty$1(s,i,n){return i=_toPropertyKey(i),i in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s}function _toPropertyKey(s){var i=_toPrimitive(s,"string");return typeof i=="symbol"?i:i+""}function _toPrimitive(s,i){if(typeof s!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var a=n.call(s,i);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(s)}function Tree2Element(s){return s&&s.map((i,n)=>React.createElement(i.tag,_objectSpread({key:n},i.attr),Tree2Element(i.child)))}function GenIcon(s){return i=>React.createElement(IconBase$1,_extends$d({attr:_objectSpread({},s.attr)},i),Tree2Element(s.child))}function IconBase$1(s){var i=n=>{var{attr:a,size:d,title:y}=s,C=_objectWithoutProperties(s,_excluded),p=d||n.size||"1em",E;return n.className&&(E=n.className),s.className&&(E=(E?E+" ":"")+s.className),React.createElement("svg",_extends$d({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,C,{className:E,style:_objectSpread(_objectSpread({color:s.color||n.color},n.style),s.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),y&&React.createElement("title",null,y),s.children)};return IconContext$1!==void 0?React.createElement(IconContext$1.Consumer,null,n=>i(n)):i(DefaultContext)}function FaSortAmountDown(s){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 416h-64a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm-128-64h-48V48a16 16 0 0 0-16-16H80a16 16 0 0 0-16 16v304H16c-14.19 0-21.37 17.24-11.29 27.31l80 96a16 16 0 0 0 22.62 0l80-96C197.35 369.26 190.22 352 176 352zm256-192H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h192a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm-64 128H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM496 32H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h256a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(s)}function FaSortAmountUpAlt(s){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M240 96h64a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16h-64a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16zm0 128h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16zm256 192H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h256a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm-256-64h192a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16H240a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16zM16 160h48v304a16 16 0 0 0 16 16h32a16 16 0 0 0 16-16V160h48c14.21 0 21.39-17.24 11.31-27.31l-80-96a16 16 0 0 0-22.62 0l-80 96C-5.35 142.74 1.78 160 16 160z"},child:[]}]})(s)}function FaSort(s){return GenIcon({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"},child:[]}]})(s)}function TitleCard({Icon:s,title:i,subtitle:n=null,iconSize:a="70%",iconStyle:d={color:"white"},titleStyle:y=null,onSort:C=null,sortDirection:p=null}){return jsxRuntimeExports.jsxs("div",{className:"title-card-general",children:[jsxRuntimeExports.jsxs("div",{className:"title-card",children:[jsxRuntimeExports.jsx("div",{className:"title-card-left",style:y,children:jsxRuntimeExports.jsx(s,{style:d,size:a})}),jsxRuntimeExports.jsxs("div",{className:"title-card-right",children:[jsxRuntimeExports.jsx("h2",{style:{margin:5},children:i}),jsxRuntimeExports.jsx("p",{style:{margin:5},children:n})]})]}),C&&jsxRuntimeExports.jsx("button",{className:"title-card-btn-sort",style:y,onClick:C,title:p==="desc"?"Sp xp t thp n cao":"Sp xp t cao n thp",children:p==="asc"?jsxRuntimeExports.jsx(FaSortAmountUpAlt,{style:d,size:a}):p==="desc"?jsxRuntimeExports.jsx(FaSortAmountDown,{style:d,size:a}):jsxRuntimeExports.jsx(FaSort,{style:d,size:a})})]})}function MoleculeInput({onResult:s,onError:i}){const[n,a]=reactExports.useState(""),[d,y]=reactExports.useState(!1),C=async()=>{if(n){y(!0),i(null);try{const p=await fetch("https://nhungnguyen0804-ai-drug.hf.space/predict",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({smiles:n,skip_image:!1})});if(!p.ok)throw new Error("API error");const E=await p.json();s(E)}catch(p){i(p.message)}finally{y(!1)}}};return jsxRuntimeExports.jsxs(Card,{style:{marginTop:30},children:[jsxRuntimeExports.jsx(TitleCard,{Icon:Pill,title:"Molecule Input",subtitle:"Enter a SMILES notation to predict toxicity"}),jsxRuntimeExports.jsx("hr",{}),jsxRuntimeExports.jsx(SmilesInput,{onChange:a}),jsxRuntimeExports.jsx(PredictButton,{onClick:C,loading:d}),jsxRuntimeExports.jsx(SmilesInfo,{})]})}var _3Dmol$1={exports:{}};var _3Dmol=_3Dmol$1.exports,hasRequired_3Dmol;function require_3Dmol(){return hasRequired_3Dmol||(hasRequired_3Dmol=1,(function(module,exports$1){(function(i,n){module.exports=n()})(_3Dmol,()=>(()=>{var __webpack_modules__={"./node_modules/iobuffer/lib-esm/IOBuffer.js":((s,i,n)=>{n.r(i),n.d(i,{IOBuffer:()=>p});var a=n("./node_modules/iobuffer/lib-esm/text.js");const d=1024*8,y=(()=>{const E=new Uint8Array(4),R=new Uint32Array(E.buffer);return!((R[0]=1)&E[0])})(),C={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class p{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(R=d,x={}){let A=!1;typeof R=="number"?R=new ArrayBuffer(R):(A=!0,this.lastWrittenByte=R.byteLength);const w=x.offset?x.offset>>>0:0,T=R.byteLength-w;let M=w;(ArrayBuffer.isView(R)||R instanceof p)&&(R.byteLength!==R.buffer.byteLength&&(M=R.byteOffset+w),R=R.buffer),A?this.lastWrittenByte=T:this.lastWrittenByte=0,this.buffer=R,this.length=T,this.byteLength=T,this.byteOffset=M,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,M,T),this._mark=0,this._marks=[]}available(R=1){return this.offset+R<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(R=1){return this.offset+=R,this}back(R=1){return this.offset-=R,this}seek(R){return this.offset=R,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const R=this._marks.pop();if(R===void 0)throw new Error("Mark stack empty");return this.seek(R),this}rewind(){return this.offset=0,this}ensureAvailable(R=1){if(!this.available(R)){const A=(this.offset+R)*2,w=new Uint8Array(A);w.set(new Uint8Array(this.buffer)),this.buffer=w.buffer,this.length=A,this.byteLength=A,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(R=1){return this.readArray(R,"uint8")}readArray(R,x){const A=C[x].BYTES_PER_ELEMENT*R,w=this.byteOffset+this.offset,T=this.buffer.slice(w,w+A);if(this.littleEndian===y&&x!=="uint8"&&x!=="int8"){const h=new Uint8Array(this.buffer.slice(w,w+A));h.reverse();const l=new C[x](h.buffer);return this.offset+=A,l.reverse(),l}const M=new C[x](T);return this.offset+=A,M}readInt16(){const R=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,R}readUint16(){const R=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,R}readInt32(){const R=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,R}readUint32(){const R=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,R}readFloat32(){const R=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,R}readFloat64(){const R=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,R}readBigInt64(){const R=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,R}readBigUint64(){const R=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,R}readChar(){return String.fromCharCode(this.readInt8())}readChars(R=1){let x="";for(let A=0;A<R;A++)x+=this.readChar();return x}readUtf8(R=1){return(0,a.decode)(this.readBytes(R))}decodeText(R=1,x="utf8"){return(0,a.decode)(this.readBytes(R),x)}writeBoolean(R){return this.writeUint8(R?255:0),this}writeInt8(R){return this.ensureAvailable(1),this._data.setInt8(this.offset++,R),this._updateLastWrittenByte(),this}writeUint8(R){return this.ensureAvailable(1),this._data.setUint8(this.offset++,R),this._updateLastWrittenByte(),this}writeByte(R){return this.writeUint8(R)}writeBytes(R){this.ensureAvailable(R.length);for(let x=0;x<R.length;x++)this._data.setUint8(this.offset++,R[x]);return this._updateLastWrittenByte(),this}writeInt16(R){return this.ensureAvailable(2),this._data.setInt16(this.offset,R,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(R){return this.ensureAvailable(2),this._data.setUint16(this.offset,R,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(R){return this.ensureAvailable(4),this._data.setInt32(this.offset,R,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(R){return this.ensureAvailable(4),this._data.setUint32(this.offset,R,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(R){return this.ensureAvailable(4),this._data.setFloat32(this.offset,R,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(R){return this.ensureAvailable(8),this._data.setFloat64(this.offset,R,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(R){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,R,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(R){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,R,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(R){return this.writeUint8(R.charCodeAt(0))}writeChars(R){for(let x=0;x<R.length;x++)this.writeUint8(R.charCodeAt(x));return this}writeUtf8(R){return this.writeBytes((0,a.encode)(R))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}}),"./node_modules/iobuffer/lib-esm/text.js":((s,i,n)=>{n.r(i),n.d(i,{decode:()=>a,encode:()=>y});function a(C,p="utf8"){return new TextDecoder(p).decode(C)}const d=new TextEncoder;function y(C){return d.encode(C)}}),"./node_modules/netcdfjs/lib-esm/data.js":((s,i,n)=>{n.r(i),n.d(i,{nonRecord:()=>d,record:()=>y});var a=n("./node_modules/netcdfjs/lib-esm/types.js");function d(C,p){const E=(0,a.str2num)(p.type),R=p.size/(0,a.num2bytes)(E),x=new Array(R);for(let A=0;A<R;A++)x[A]=(0,a.readType)(C,E,1);return x}function y(C,p,E){const R=(0,a.str2num)(p.type),x=p.size?p.size/(0,a.num2bytes)(R):1,A=E.length,w=new Array(A),T=E.recordStep;if(T)for(let M=0;M<A;M++){const h=C.offset;w[M]=(0,a.readType)(C,R,x),C.seek(h+T)}else throw new Error("recordDimension.recordStep is undefined");return w}}),"./node_modules/netcdfjs/lib-esm/header.js":((s,i,n)=>{n.r(i),n.d(i,{header:()=>x});var a=n("./node_modules/netcdfjs/lib-esm/types.js"),d=n("./node_modules/netcdfjs/lib-esm/utils.js");const y=0,C=10,p=11,E=12,R=0;function x(M,h){const l={version:h},c={length:M.readUint32()},g=A(M);Array.isArray(g)||(c.id=g.recordId,c.name=g.recordName,l.dimensions=g.dimensions),l.globalAttributes=w(M);const v=T(M,c?.id,h);return Array.isArray(v)||(l.variables=v.variables,c.recordStep=v.recordStep),l.recordDimension=c,l}function A(M){const h={};let l,c;const g=M.readUint32();let v;if(g===y)return(0,d.notNetcdf)(M.readUint32()!==y,"wrong empty tag for list of dimensions"),[];{(0,d.notNetcdf)(g!==C,"wrong tag for list of dimensions");const b=M.readUint32();v=new Array(b);for(let S=0;S<b;S++){const u=(0,d.readName)(M),m=M.readUint32();m===R&&(l=S,c=u),v[S]={name:u,size:m}}}return l!==void 0&&(h.recordId=l),c!==void 0&&(h.recordName=c),h.dimensions=v,h}function w(M){const h=M.readUint32();let l;if(h===y)return(0,d.notNetcdf)(M.readUint32()!==y,"wrong empty tag for list of attributes"),[];{(0,d.notNetcdf)(h!==E,"wrong tag for list of attributes");const c=M.readUint32();l=new Array(c);for(let g=0;g<c;g++){const v=(0,d.readName)(M),b=M.readUint32();(0,d.notNetcdf)(b<1||b>6,`non valid type ${b}`);const S=M.readUint32(),u=(0,a.readType)(M,b,S);(0,d.padding)(M),l[g]={name:v,type:(0,a.num2str)(b),value:u}}}return l}function T(M,h,l){const c=M.readUint32();let g=0,v;if(c===y)return(0,d.notNetcdf)(M.readUint32()!==y,"wrong empty tag for list of variables"),[];{(0,d.notNetcdf)(c!==p,"wrong tag for list of variables");const b=M.readUint32();v=new Array(b);for(let S=0;S<b;S++){const u=(0,d.readName)(M),m=M.readUint32(),_=new Array(m);for(let V=0;V<m;V++)_[V]=M.readUint32();const D=w(M),L=M.readUint32();(0,d.notNetcdf)(L<1&&L>6,`non valid type ${L}`);const P=M.readUint32();let N=M.readUint32();l===2&&((0,d.notNetcdf)(N>0,"offsets larger than 4GB not supported"),N=M.readUint32());let U=!1;typeof h<"u"&&_[0]===h&&(g+=P,U=!0),v[S]={name:u,dimensions:_,attributes:D,type:(0,a.num2str)(L),size:P,offset:N,record:U}}}return{variables:v,recordStep:g}}}),"./node_modules/netcdfjs/lib-esm/index.js":((s,i,n)=>{n.r(i),n.d(i,{NetCDFReader:()=>a.NetCDFReader});var a=n("./node_modules/netcdfjs/lib-esm/parser.js")}),"./node_modules/netcdfjs/lib-esm/parser.js":((s,i,n)=>{n.r(i),n.d(i,{NetCDFReader:()=>E});var a=n("./node_modules/iobuffer/lib-esm/IOBuffer.js"),d=n("./node_modules/netcdfjs/lib-esm/data.js"),y=n("./node_modules/netcdfjs/lib-esm/header.js"),C=n("./node_modules/netcdfjs/lib-esm/toString.js"),p=n("./node_modules/netcdfjs/lib-esm/utils.js");class E{constructor(x){this.toString=C.toString;const A=new a.IOBuffer(x);A.setBigEndian(),(0,p.notNetcdf)(A.readChars(3)!=="CDF","should start with CDF");const w=A.readByte();(0,p.notNetcdf)(w>2,"unknown version"),this.header=(0,y.header)(A,w),this.buffer=A}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(x){const A=this.globalAttributes.find(w=>w.name===x);return A?A.value:null}getDataVariableAsString(x){const A=this.getDataVariable(x);return A?A.join(""):null}get variables(){return this.header.variables}getDataVariable(x){let A;if(typeof x=="string"?A=this.header.variables.find(w=>w.name===x):A=x,A===void 0)throw new Error("Not a valid NetCDF v3.x file: variable not found");return this.buffer.seek(A.offset),A.record?(0,d.record)(this.buffer,A,this.header.recordDimension):(0,d.nonRecord)(this.buffer,A)}dataVariableExists(x){return this.header.variables.find(w=>w.name===x)!==void 0}attributeExists(x){return this.globalAttributes.find(w=>w.name===x)!==void 0}}}),"./node_modules/netcdfjs/lib-esm/toString.js":((s,i,n)=>{n.r(i),n.d(i,{toString:()=>a});function a(){const d=[];d.push("DIMENSIONS");for(const C of this.dimensions)d.push(`  ${C.name.padEnd(30)} = size: ${C.size}`);d.push(""),d.push("GLOBAL ATTRIBUTES");for(const C of this.globalAttributes)d.push(`  ${C.name.padEnd(30)} = ${C.value}`);const y=JSON.parse(JSON.stringify(this.variables));d.push(""),d.push("VARIABLES:");for(const C of y){C.value=this.getDataVariable(C);let p=JSON.stringify(C.value);p.length>50&&(p=p.substring(0,50)),isNaN(C.value.length)||(p+=` (length: ${C.value.length})`),d.push(`  ${C.name.padEnd(30)} = ${p}`)}return d.join(`
`)}}),"./node_modules/netcdfjs/lib-esm/types.js":((s,i,n)=>{n.r(i),n.d(i,{num2bytes:()=>y,num2str:()=>d,readType:()=>E,str2num:()=>C});const a={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};function d(x){switch(Number(x)){case a.BYTE:return"byte";case a.CHAR:return"char";case a.SHORT:return"short";case a.INT:return"int";case a.FLOAT:return"float";case a.DOUBLE:return"double";default:return"undefined"}}function y(x){switch(Number(x)){case a.BYTE:return 1;case a.CHAR:return 1;case a.SHORT:return 2;case a.INT:return 4;case a.FLOAT:return 4;case a.DOUBLE:return 8;default:return-1}}function C(x){switch(String(x)){case"byte":return a.BYTE;case"char":return a.CHAR;case"short":return a.SHORT;case"int":return a.INT;case"float":return a.FLOAT;case"double":return a.DOUBLE;default:return-1}}function p(x,A){if(x!==1){const w=new Array(x);for(let T=0;T<x;T++)w[T]=A();return w}else return A()}function E(x,A,w){switch(A){case a.BYTE:return Array.from(x.readBytes(w));case a.CHAR:return R(x.readChars(w));case a.SHORT:return p(w,x.readInt16.bind(x));case a.INT:return p(w,x.readInt32.bind(x));case a.FLOAT:return p(w,x.readFloat32.bind(x));case a.DOUBLE:return p(w,x.readFloat64.bind(x));default:throw new Error(`non valid type ${A}`)}}function R(x){return x.charCodeAt(x.length-1)===0?x.substring(0,x.length-1):x}}),"./node_modules/netcdfjs/lib-esm/utils.js":((s,i,n)=>{n.r(i),n.d(i,{notNetcdf:()=>a,padding:()=>d,readName:()=>y});function a(C,p){if(C)throw new TypeError(`Not a valid NetCDF v3.x file: ${p}`)}function d(C){C.offset%4!==0&&C.skip(4-C.offset%4)}function y(C){const p=C.readUint32(),E=C.readChars(p);return d(C),E}}),"./node_modules/pako/dist/pako.esm.mjs":((s,i,n)=>{n.r(i),n.d(i,{Deflate:()=>Wi,Inflate:()=>yi,constants:()=>Ys,default:()=>_i,deflate:()=>Vi,deflateRaw:()=>rs,gzip:()=>vi,inflate:()=>ko,inflateRaw:()=>Xs,ungzip:()=>Ko});const a=4,d=0,y=1,C=2;function p(O){let Z=O.length;for(;--Z>=0;)O[Z]=0}const E=0,R=1,x=2,A=3,w=258,T=29,M=256,h=M+1+T,l=30,c=19,g=2*h+1,v=15,b=16,S=7,u=256,m=16,_=17,D=18,L=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),P=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),U=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),V=512,W=new Array((h+2)*2);p(W);const G=new Array(l*2);p(G);const H=new Array(V);p(H);const k=new Array(w-A+1);p(k);const X=new Array(T);p(X);const $=new Array(l);p($);function F(O,Z,B,ae,de){this.static_tree=O,this.extra_bits=Z,this.extra_base=B,this.elems=ae,this.max_length=de,this.has_stree=O&&O.length}let K,te,re;function le(O,Z){this.dyn_tree=O,this.max_code=0,this.stat_desc=Z}const oe=O=>O<256?H[O]:H[256+(O>>>7)],ue=(O,Z)=>{O.pending_buf[O.pending++]=Z&255,O.pending_buf[O.pending++]=Z>>>8&255},he=(O,Z,B)=>{O.bi_valid>b-B?(O.bi_buf|=Z<<O.bi_valid&65535,ue(O,O.bi_buf),O.bi_buf=Z>>b-O.bi_valid,O.bi_valid+=B-b):(O.bi_buf|=Z<<O.bi_valid&65535,O.bi_valid+=B)},ge=(O,Z,B)=>{he(O,B[Z*2],B[Z*2+1])},Oe=(O,Z)=>{let B=0;do B|=O&1,O>>>=1,B<<=1;while(--Z>0);return B>>>1},Le=O=>{O.bi_valid===16?(ue(O,O.bi_buf),O.bi_buf=0,O.bi_valid=0):O.bi_valid>=8&&(O.pending_buf[O.pending++]=O.bi_buf&255,O.bi_buf>>=8,O.bi_valid-=8)},$e=(O,Z)=>{const B=Z.dyn_tree,ae=Z.max_code,de=Z.stat_desc.static_tree,fe=Z.stat_desc.has_stree,je=Z.stat_desc.extra_bits,Te=Z.stat_desc.extra_base,gt=Z.stat_desc.max_length;let Ee,Fe,kt,dt,it,_t,ln=0;for(dt=0;dt<=v;dt++)O.bl_count[dt]=0;for(B[O.heap[O.heap_max]*2+1]=0,Ee=O.heap_max+1;Ee<g;Ee++)Fe=O.heap[Ee],dt=B[B[Fe*2+1]*2+1]+1,dt>gt&&(dt=gt,ln++),B[Fe*2+1]=dt,!(Fe>ae)&&(O.bl_count[dt]++,it=0,Fe>=Te&&(it=je[Fe-Te]),_t=B[Fe*2],O.opt_len+=_t*(dt+it),fe&&(O.static_len+=_t*(de[Fe*2+1]+it)));if(ln!==0){do{for(dt=gt-1;O.bl_count[dt]===0;)dt--;O.bl_count[dt]--,O.bl_count[dt+1]+=2,O.bl_count[gt]--,ln-=2}while(ln>0);for(dt=gt;dt!==0;dt--)for(Fe=O.bl_count[dt];Fe!==0;)kt=O.heap[--Ee],!(kt>ae)&&(B[kt*2+1]!==dt&&(O.opt_len+=(dt-B[kt*2+1])*B[kt*2],B[kt*2+1]=dt),Fe--)}},we=(O,Z,B)=>{const ae=new Array(v+1);let de=0,fe,je;for(fe=1;fe<=v;fe++)de=de+B[fe-1]<<1,ae[fe]=de;for(je=0;je<=Z;je++){let Te=O[je*2+1];Te!==0&&(O[je*2]=Oe(ae[Te]++,Te))}},ce=()=>{let O,Z,B,ae,de;const fe=new Array(v+1);for(B=0,ae=0;ae<T-1;ae++)for(X[ae]=B,O=0;O<1<<L[ae];O++)k[B++]=ae;for(k[B-1]=ae,de=0,ae=0;ae<16;ae++)for($[ae]=de,O=0;O<1<<P[ae];O++)H[de++]=ae;for(de>>=7;ae<l;ae++)for($[ae]=de<<7,O=0;O<1<<P[ae]-7;O++)H[256+de++]=ae;for(Z=0;Z<=v;Z++)fe[Z]=0;for(O=0;O<=143;)W[O*2+1]=8,O++,fe[8]++;for(;O<=255;)W[O*2+1]=9,O++,fe[9]++;for(;O<=279;)W[O*2+1]=7,O++,fe[7]++;for(;O<=287;)W[O*2+1]=8,O++,fe[8]++;for(we(W,h+1,fe),O=0;O<l;O++)G[O*2+1]=5,G[O*2]=Oe(O,5);K=new F(W,L,M+1,h,v),te=new F(G,P,0,l,v),re=new F(new Array(0),N,0,c,S)},xe=O=>{let Z;for(Z=0;Z<h;Z++)O.dyn_ltree[Z*2]=0;for(Z=0;Z<l;Z++)O.dyn_dtree[Z*2]=0;for(Z=0;Z<c;Z++)O.bl_tree[Z*2]=0;O.dyn_ltree[u*2]=1,O.opt_len=O.static_len=0,O.sym_next=O.matches=0},Ne=O=>{O.bi_valid>8?ue(O,O.bi_buf):O.bi_valid>0&&(O.pending_buf[O.pending++]=O.bi_buf),O.bi_buf=0,O.bi_valid=0},Xe=(O,Z,B,ae)=>{const de=Z*2,fe=B*2;return O[de]<O[fe]||O[de]===O[fe]&&ae[Z]<=ae[B]},rt=(O,Z,B)=>{const ae=O.heap[B];let de=B<<1;for(;de<=O.heap_len&&(de<O.heap_len&&Xe(Z,O.heap[de+1],O.heap[de],O.depth)&&de++,!Xe(Z,ae,O.heap[de],O.depth));)O.heap[B]=O.heap[de],B=de,de<<=1;O.heap[B]=ae},nt=(O,Z,B)=>{let ae,de,fe=0,je,Te;if(O.sym_next!==0)do ae=O.pending_buf[O.sym_buf+fe++]&255,ae+=(O.pending_buf[O.sym_buf+fe++]&255)<<8,de=O.pending_buf[O.sym_buf+fe++],ae===0?ge(O,de,Z):(je=k[de],ge(O,je+M+1,Z),Te=L[je],Te!==0&&(de-=X[je],he(O,de,Te)),ae--,je=oe(ae),ge(O,je,B),Te=P[je],Te!==0&&(ae-=$[je],he(O,ae,Te)));while(fe<O.sym_next);ge(O,u,Z)},et=(O,Z)=>{const B=Z.dyn_tree,ae=Z.stat_desc.static_tree,de=Z.stat_desc.has_stree,fe=Z.stat_desc.elems;let je,Te,gt=-1,Ee;for(O.heap_len=0,O.heap_max=g,je=0;je<fe;je++)B[je*2]!==0?(O.heap[++O.heap_len]=gt=je,O.depth[je]=0):B[je*2+1]=0;for(;O.heap_len<2;)Ee=O.heap[++O.heap_len]=gt<2?++gt:0,B[Ee*2]=1,O.depth[Ee]=0,O.opt_len--,de&&(O.static_len-=ae[Ee*2+1]);for(Z.max_code=gt,je=O.heap_len>>1;je>=1;je--)rt(O,B,je);Ee=fe;do je=O.heap[1],O.heap[1]=O.heap[O.heap_len--],rt(O,B,1),Te=O.heap[1],O.heap[--O.heap_max]=je,O.heap[--O.heap_max]=Te,B[Ee*2]=B[je*2]+B[Te*2],O.depth[Ee]=(O.depth[je]>=O.depth[Te]?O.depth[je]:O.depth[Te])+1,B[je*2+1]=B[Te*2+1]=Ee,O.heap[1]=Ee++,rt(O,B,1);while(O.heap_len>=2);O.heap[--O.heap_max]=O.heap[1],$e(O,Z),we(B,gt,O.bl_count)},Ze=(O,Z,B)=>{let ae,de=-1,fe,je=Z[1],Te=0,gt=7,Ee=4;for(je===0&&(gt=138,Ee=3),Z[(B+1)*2+1]=65535,ae=0;ae<=B;ae++)fe=je,je=Z[(ae+1)*2+1],!(++Te<gt&&fe===je)&&(Te<Ee?O.bl_tree[fe*2]+=Te:fe!==0?(fe!==de&&O.bl_tree[fe*2]++,O.bl_tree[m*2]++):Te<=10?O.bl_tree[_*2]++:O.bl_tree[D*2]++,Te=0,de=fe,je===0?(gt=138,Ee=3):fe===je?(gt=6,Ee=3):(gt=7,Ee=4))},qe=(O,Z,B)=>{let ae,de=-1,fe,je=Z[1],Te=0,gt=7,Ee=4;for(je===0&&(gt=138,Ee=3),ae=0;ae<=B;ae++)if(fe=je,je=Z[(ae+1)*2+1],!(++Te<gt&&fe===je)){if(Te<Ee)do ge(O,fe,O.bl_tree);while(--Te!==0);else fe!==0?(fe!==de&&(ge(O,fe,O.bl_tree),Te--),ge(O,m,O.bl_tree),he(O,Te-3,2)):Te<=10?(ge(O,_,O.bl_tree),he(O,Te-3,3)):(ge(O,D,O.bl_tree),he(O,Te-11,7));Te=0,de=fe,je===0?(gt=138,Ee=3):fe===je?(gt=6,Ee=3):(gt=7,Ee=4)}},Ve=O=>{let Z;for(Ze(O,O.dyn_ltree,O.l_desc.max_code),Ze(O,O.dyn_dtree,O.d_desc.max_code),et(O,O.bl_desc),Z=c-1;Z>=3&&O.bl_tree[U[Z]*2+1]===0;Z--);return O.opt_len+=3*(Z+1)+5+5+4,Z},Ge=(O,Z,B,ae)=>{let de;for(he(O,Z-257,5),he(O,B-1,5),he(O,ae-4,4),de=0;de<ae;de++)he(O,O.bl_tree[U[de]*2+1],3);qe(O,O.dyn_ltree,Z-1),qe(O,O.dyn_dtree,B-1)},at=O=>{let Z=4093624447,B;for(B=0;B<=31;B++,Z>>>=1)if(Z&1&&O.dyn_ltree[B*2]!==0)return d;if(O.dyn_ltree[18]!==0||O.dyn_ltree[20]!==0||O.dyn_ltree[26]!==0)return y;for(B=32;B<M;B++)if(O.dyn_ltree[B*2]!==0)return y;return d};let ot=!1;const J=O=>{ot||(ce(),ot=!0),O.l_desc=new le(O.dyn_ltree,K),O.d_desc=new le(O.dyn_dtree,te),O.bl_desc=new le(O.bl_tree,re),O.bi_buf=0,O.bi_valid=0,xe(O)},ne=(O,Z,B,ae)=>{he(O,(E<<1)+(ae?1:0),3),Ne(O),ue(O,B),ue(O,~B),B&&O.pending_buf.set(O.window.subarray(Z,Z+B),O.pending),O.pending+=B},se=O=>{he(O,R<<1,3),ge(O,u,W),Le(O)},_e=(O,Z,B,ae)=>{let de,fe,je=0;O.level>0?(O.strm.data_type===C&&(O.strm.data_type=at(O)),et(O,O.l_desc),et(O,O.d_desc),je=Ve(O),de=O.opt_len+3+7>>>3,fe=O.static_len+3+7>>>3,fe<=de&&(de=fe)):de=fe=B+5,B+4<=de&&Z!==-1?ne(O,Z,B,ae):O.strategy===a||fe===de?(he(O,(R<<1)+(ae?1:0),3),nt(O,W,G)):(he(O,(x<<1)+(ae?1:0),3),Ge(O,O.l_desc.max_code+1,O.d_desc.max_code+1,je+1),nt(O,O.dyn_ltree,O.dyn_dtree)),xe(O),ae&&Ne(O)},Se=(O,Z,B)=>(O.pending_buf[O.sym_buf+O.sym_next++]=Z,O.pending_buf[O.sym_buf+O.sym_next++]=Z>>8,O.pending_buf[O.sym_buf+O.sym_next++]=B,Z===0?O.dyn_ltree[B*2]++:(O.matches++,Z--,O.dyn_ltree[(k[B]+M+1)*2]++,O.dyn_dtree[oe(Z)*2]++),O.sym_next===O.sym_end);var Pe=J,Ie=ne,Q=_e,me=Se,be=se,ke={_tr_init:Pe,_tr_stored_block:Ie,_tr_flush_block:Q,_tr_tally:me,_tr_align:be},ze=(O,Z,B,ae)=>{let de=O&65535|0,fe=O>>>16&65535|0,je=0;for(;B!==0;){je=B>2e3?2e3:B,B-=je;do de=de+Z[ae++]|0,fe=fe+de|0;while(--je);de%=65521,fe%=65521}return de|fe<<16|0};const q=()=>{let O,Z=[];for(var B=0;B<256;B++){O=B;for(var ae=0;ae<8;ae++)O=O&1?3988292384^O>>>1:O>>>1;Z[B]=O}return Z},He=new Uint32Array(q());var j=(O,Z,B,ae)=>{const de=He,fe=ae+B;O^=-1;for(let je=ae;je<fe;je++)O=O>>>8^de[(O^Z[je])&255];return O^-1},Me={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ae={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ee,_tr_stored_block:pe,_tr_flush_block:De,_tr_tally:lt,_tr_align:ct}=ke,{Z_NO_FLUSH:st,Z_PARTIAL_FLUSH:xt,Z_FULL_FLUSH:Zt,Z_FINISH:St,Z_BLOCK:vt,Z_OK:yt,Z_STREAM_END:Gt,Z_STREAM_ERROR:Ct,Z_DATA_ERROR:Lt,Z_BUF_ERROR:Qt,Z_DEFAULT_COMPRESSION:Bt,Z_FILTERED:zt,Z_HUFFMAN_ONLY:qt,Z_RLE:Cn,Z_FIXED:yn,Z_DEFAULT_STRATEGY:Pn,Z_UNKNOWN:Er,Z_DEFLATED:In}=Ae,Gn=9,dr=15,$n=8,Hr=256+1+29,Xn=30,Vn=19,si=2*Hr+1,Di=15,ft=3,sn=258,tn=sn+ft+1,nr=32,_n=42,An=57,Lr=69,Li=73,zr=91,kr=103,ut=113,Kt=666,$t=1,Sr=2,gr=3,mr=4,Kr=3,$r=(O,Z)=>(O.msg=Me[Z],Z),xs=O=>O*2-(O>4?9:0),Yn=O=>{let Z=O.length;for(;--Z>=0;)O[Z]=0},Bl=O=>{let Z,B,ae,de=O.w_size;Z=O.hash_size,ae=Z;do B=O.head[--ae],O.head[ae]=B>=de?B-de:0;while(--Z);Z=de,ae=Z;do B=O.prev[--ae],O.prev[ae]=B>=de?B-de:0;while(--Z)};let Pr=(O,Z,B)=>(Z<<O.hash_shift^B)&O.hash_mask;const Un=O=>{const Z=O.state;let B=Z.pending;B>O.avail_out&&(B=O.avail_out),B!==0&&(O.output.set(Z.pending_buf.subarray(Z.pending_out,Z.pending_out+B),O.next_out),O.next_out+=B,Z.pending_out+=B,O.total_out+=B,O.avail_out-=B,Z.pending-=B,Z.pending===0&&(Z.pending_out=0))},Zn=(O,Z)=>{De(O,O.block_start>=0?O.block_start:-1,O.strstart-O.block_start,Z),O.block_start=O.strstart,Un(O.strm)},Xt=(O,Z)=>{O.pending_buf[O.pending++]=Z},Xr=(O,Z)=>{O.pending_buf[O.pending++]=Z>>>8&255,O.pending_buf[O.pending++]=Z&255},pr=(O,Z,B,ae)=>{let de=O.avail_in;return de>ae&&(de=ae),de===0?0:(O.avail_in-=de,Z.set(O.input.subarray(O.next_in,O.next_in+de),B),O.state.wrap===1?O.adler=ze(O.adler,Z,de,B):O.state.wrap===2&&(O.adler=j(O.adler,Z,de,B)),O.next_in+=de,O.total_in+=de,de)},Ia=(O,Z)=>{let B=O.max_chain_length,ae=O.strstart,de,fe,je=O.prev_length,Te=O.nice_match;const gt=O.strstart>O.w_size-tn?O.strstart-(O.w_size-tn):0,Ee=O.window,Fe=O.w_mask,kt=O.prev,dt=O.strstart+sn;let it=Ee[ae+je-1],_t=Ee[ae+je];O.prev_length>=O.good_match&&(B>>=2),Te>O.lookahead&&(Te=O.lookahead);do if(de=Z,!(Ee[de+je]!==_t||Ee[de+je-1]!==it||Ee[de]!==Ee[ae]||Ee[++de]!==Ee[ae+1])){ae+=2,de++;do;while(Ee[++ae]===Ee[++de]&&Ee[++ae]===Ee[++de]&&Ee[++ae]===Ee[++de]&&Ee[++ae]===Ee[++de]&&Ee[++ae]===Ee[++de]&&Ee[++ae]===Ee[++de]&&Ee[++ae]===Ee[++de]&&Ee[++ae]===Ee[++de]&&ae<dt);if(fe=sn-(dt-ae),ae=dt-sn,fe>je){if(O.match_start=Z,je=fe,fe>=Te)break;it=Ee[ae+je-1],_t=Ee[ae+je]}}while((Z=kt[Z&Fe])>gt&&--B!==0);return je<=O.lookahead?je:O.lookahead},Yr=O=>{const Z=O.w_size;let B,ae,de;do{if(ae=O.window_size-O.lookahead-O.strstart,O.strstart>=Z+(Z-tn)&&(O.window.set(O.window.subarray(Z,Z+Z-ae),0),O.match_start-=Z,O.strstart-=Z,O.block_start-=Z,O.insert>O.strstart&&(O.insert=O.strstart),Bl(O),ae+=Z),O.strm.avail_in===0)break;if(B=pr(O.strm,O.window,O.strstart+O.lookahead,ae),O.lookahead+=B,O.lookahead+O.insert>=ft)for(de=O.strstart-O.insert,O.ins_h=O.window[de],O.ins_h=Pr(O,O.ins_h,O.window[de+1]);O.insert&&(O.ins_h=Pr(O,O.ins_h,O.window[de+ft-1]),O.prev[de&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=de,de++,O.insert--,!(O.lookahead+O.insert<ft)););}while(O.lookahead<tn&&O.strm.avail_in!==0)},oi=(O,Z)=>{let B=O.pending_buf_size-5>O.w_size?O.w_size:O.pending_buf_size-5,ae,de,fe,je=0,Te=O.strm.avail_in;do{if(ae=65535,fe=O.bi_valid+42>>3,O.strm.avail_out<fe||(fe=O.strm.avail_out-fe,de=O.strstart-O.block_start,ae>de+O.strm.avail_in&&(ae=de+O.strm.avail_in),ae>fe&&(ae=fe),ae<B&&(ae===0&&Z!==St||Z===st||ae!==de+O.strm.avail_in)))break;je=Z===St&&ae===de+O.strm.avail_in?1:0,pe(O,0,0,je),O.pending_buf[O.pending-4]=ae,O.pending_buf[O.pending-3]=ae>>8,O.pending_buf[O.pending-2]=~ae,O.pending_buf[O.pending-1]=~ae>>8,Un(O.strm),de&&(de>ae&&(de=ae),O.strm.output.set(O.window.subarray(O.block_start,O.block_start+de),O.strm.next_out),O.strm.next_out+=de,O.strm.avail_out-=de,O.strm.total_out+=de,O.block_start+=de,ae-=de),ae&&(pr(O.strm,O.strm.output,O.strm.next_out,ae),O.strm.next_out+=ae,O.strm.avail_out-=ae,O.strm.total_out+=ae)}while(je===0);return Te-=O.strm.avail_in,Te&&(Te>=O.w_size?(O.matches=2,O.window.set(O.strm.input.subarray(O.strm.next_in-O.w_size,O.strm.next_in),0),O.strstart=O.w_size,O.insert=O.strstart):(O.window_size-O.strstart<=Te&&(O.strstart-=O.w_size,O.window.set(O.window.subarray(O.w_size,O.w_size+O.strstart),0),O.matches<2&&O.matches++,O.insert>O.strstart&&(O.insert=O.strstart)),O.window.set(O.strm.input.subarray(O.strm.next_in-Te,O.strm.next_in),O.strstart),O.strstart+=Te,O.insert+=Te>O.w_size-O.insert?O.w_size-O.insert:Te),O.block_start=O.strstart),O.high_water<O.strstart&&(O.high_water=O.strstart),je?mr:Z!==st&&Z!==St&&O.strm.avail_in===0&&O.strstart===O.block_start?Sr:(fe=O.window_size-O.strstart,O.strm.avail_in>fe&&O.block_start>=O.w_size&&(O.block_start-=O.w_size,O.strstart-=O.w_size,O.window.set(O.window.subarray(O.w_size,O.w_size+O.strstart),0),O.matches<2&&O.matches++,fe+=O.w_size,O.insert>O.strstart&&(O.insert=O.strstart)),fe>O.strm.avail_in&&(fe=O.strm.avail_in),fe&&(pr(O.strm,O.window,O.strstart,fe),O.strstart+=fe,O.insert+=fe>O.w_size-O.insert?O.w_size-O.insert:fe),O.high_water<O.strstart&&(O.high_water=O.strstart),fe=O.bi_valid+42>>3,fe=O.pending_buf_size-fe>65535?65535:O.pending_buf_size-fe,B=fe>O.w_size?O.w_size:fe,de=O.strstart-O.block_start,(de>=B||(de||Z===St)&&Z!==st&&O.strm.avail_in===0&&de<=fe)&&(ae=de>fe?fe:de,je=Z===St&&O.strm.avail_in===0&&ae===de?1:0,pe(O,O.block_start,ae,je),O.block_start+=ae,Un(O.strm)),je?gr:$t)},Zr=(O,Z)=>{let B,ae;for(;;){if(O.lookahead<tn){if(Yr(O),O.lookahead<tn&&Z===st)return $t;if(O.lookahead===0)break}if(B=0,O.lookahead>=ft&&(O.ins_h=Pr(O,O.ins_h,O.window[O.strstart+ft-1]),B=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),B!==0&&O.strstart-B<=O.w_size-tn&&(O.match_length=Ia(O,B)),O.match_length>=ft)if(ae=lt(O,O.strstart-O.match_start,O.match_length-ft),O.lookahead-=O.match_length,O.match_length<=O.max_lazy_match&&O.lookahead>=ft){O.match_length--;do O.strstart++,O.ins_h=Pr(O,O.ins_h,O.window[O.strstart+ft-1]),B=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart;while(--O.match_length!==0);O.strstart++}else O.strstart+=O.match_length,O.match_length=0,O.ins_h=O.window[O.strstart],O.ins_h=Pr(O,O.ins_h,O.window[O.strstart+1]);else ae=lt(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++;if(ae&&(Zn(O,!1),O.strm.avail_out===0))return $t}return O.insert=O.strstart<ft-1?O.strstart:ft-1,Z===St?(Zn(O,!0),O.strm.avail_out===0?gr:mr):O.sym_next&&(Zn(O,!1),O.strm.avail_out===0)?$t:Sr},li=(O,Z)=>{let B,ae,de;for(;;){if(O.lookahead<tn){if(Yr(O),O.lookahead<tn&&Z===st)return $t;if(O.lookahead===0)break}if(B=0,O.lookahead>=ft&&(O.ins_h=Pr(O,O.ins_h,O.window[O.strstart+ft-1]),B=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),O.prev_length=O.match_length,O.prev_match=O.match_start,O.match_length=ft-1,B!==0&&O.prev_length<O.max_lazy_match&&O.strstart-B<=O.w_size-tn&&(O.match_length=Ia(O,B),O.match_length<=5&&(O.strategy===zt||O.match_length===ft&&O.strstart-O.match_start>4096)&&(O.match_length=ft-1)),O.prev_length>=ft&&O.match_length<=O.prev_length){de=O.strstart+O.lookahead-ft,ae=lt(O,O.strstart-1-O.prev_match,O.prev_length-ft),O.lookahead-=O.prev_length-1,O.prev_length-=2;do++O.strstart<=de&&(O.ins_h=Pr(O,O.ins_h,O.window[O.strstart+ft-1]),B=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart);while(--O.prev_length!==0);if(O.match_available=0,O.match_length=ft-1,O.strstart++,ae&&(Zn(O,!1),O.strm.avail_out===0))return $t}else if(O.match_available){if(ae=lt(O,0,O.window[O.strstart-1]),ae&&Zn(O,!1),O.strstart++,O.lookahead--,O.strm.avail_out===0)return $t}else O.match_available=1,O.strstart++,O.lookahead--}return O.match_available&&(ae=lt(O,0,O.window[O.strstart-1]),O.match_available=0),O.insert=O.strstart<ft-1?O.strstart:ft-1,Z===St?(Zn(O,!0),O.strm.avail_out===0?gr:mr):O.sym_next&&(Zn(O,!1),O.strm.avail_out===0)?$t:Sr},bs=(O,Z)=>{let B,ae,de,fe;const je=O.window;for(;;){if(O.lookahead<=sn){if(Yr(O),O.lookahead<=sn&&Z===st)return $t;if(O.lookahead===0)break}if(O.match_length=0,O.lookahead>=ft&&O.strstart>0&&(de=O.strstart-1,ae=je[de],ae===je[++de]&&ae===je[++de]&&ae===je[++de])){fe=O.strstart+sn;do;while(ae===je[++de]&&ae===je[++de]&&ae===je[++de]&&ae===je[++de]&&ae===je[++de]&&ae===je[++de]&&ae===je[++de]&&ae===je[++de]&&de<fe);O.match_length=sn-(fe-de),O.match_length>O.lookahead&&(O.match_length=O.lookahead)}if(O.match_length>=ft?(B=lt(O,1,O.match_length-ft),O.lookahead-=O.match_length,O.strstart+=O.match_length,O.match_length=0):(B=lt(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++),B&&(Zn(O,!1),O.strm.avail_out===0))return $t}return O.insert=0,Z===St?(Zn(O,!0),O.strm.avail_out===0?gr:mr):O.sym_next&&(Zn(O,!1),O.strm.avail_out===0)?$t:Sr},xo=(O,Z)=>{let B;for(;;){if(O.lookahead===0&&(Yr(O),O.lookahead===0)){if(Z===st)return $t;break}if(O.match_length=0,B=lt(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++,B&&(Zn(O,!1),O.strm.avail_out===0))return $t}return O.insert=0,Z===St?(Zn(O,!0),O.strm.avail_out===0?gr:mr):O.sym_next&&(Zn(O,!1),O.strm.avail_out===0)?$t:Sr};function Hn(O,Z,B,ae,de){this.good_length=O,this.max_lazy=Z,this.nice_length=B,this.max_chain=ae,this.func=de}const Qn=[new Hn(0,0,0,0,oi),new Hn(4,4,8,4,Zr),new Hn(4,5,16,8,Zr),new Hn(4,6,32,32,Zr),new Hn(4,4,16,16,li),new Hn(8,16,32,32,li),new Hn(8,16,128,128,li),new Hn(8,32,128,256,li),new Hn(32,128,258,1024,li),new Hn(32,258,258,4096,li)],Es=O=>{O.window_size=2*O.w_size,Yn(O.head),O.max_lazy_match=Qn[O.level].max_lazy,O.good_match=Qn[O.level].good_length,O.nice_match=Qn[O.level].nice_length,O.max_chain_length=Qn[O.level].max_chain,O.strstart=0,O.block_start=0,O.lookahead=0,O.insert=0,O.match_length=O.prev_length=ft-1,O.match_available=0,O.ins_h=0};function sa(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=In,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(si*2),this.dyn_dtree=new Uint16Array((2*Xn+1)*2),this.bl_tree=new Uint16Array((2*Vn+1)*2),Yn(this.dyn_ltree),Yn(this.dyn_dtree),Yn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Di+1),this.heap=new Uint16Array(2*Hr+1),Yn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Hr+1),Yn(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const rr=O=>{if(!O)return 1;const Z=O.state;return!Z||Z.strm!==O||Z.status!==_n&&Z.status!==An&&Z.status!==Lr&&Z.status!==Li&&Z.status!==zr&&Z.status!==kr&&Z.status!==ut&&Z.status!==Kt?1:0},Ba=O=>{if(rr(O))return $r(O,Ct);O.total_in=O.total_out=0,O.data_type=Er;const Z=O.state;return Z.pending=0,Z.pending_out=0,Z.wrap<0&&(Z.wrap=-Z.wrap),Z.status=Z.wrap===2?An:Z.wrap?_n:ut,O.adler=Z.wrap===2?0:1,Z.last_flush=-2,ee(Z),yt},oa=O=>{const Z=Ba(O);return Z===yt&&Es(O.state),Z},bo=(O,Z)=>rr(O)||O.state.wrap!==2?Ct:(O.state.gzhead=Z,yt),la=(O,Z,B,ae,de,fe)=>{if(!O)return Ct;let je=1;if(Z===Bt&&(Z=6),ae<0?(je=0,ae=-ae):ae>15&&(je=2,ae-=16),de<1||de>Gn||B!==In||ae<8||ae>15||Z<0||Z>9||fe<0||fe>yn||ae===8&&je!==1)return $r(O,Ct);ae===8&&(ae=9);const Te=new sa;return O.state=Te,Te.strm=O,Te.status=_n,Te.wrap=je,Te.gzhead=null,Te.w_bits=ae,Te.w_size=1<<Te.w_bits,Te.w_mask=Te.w_size-1,Te.hash_bits=de+7,Te.hash_size=1<<Te.hash_bits,Te.hash_mask=Te.hash_size-1,Te.hash_shift=~~((Te.hash_bits+ft-1)/ft),Te.window=new Uint8Array(Te.w_size*2),Te.head=new Uint16Array(Te.hash_size),Te.prev=new Uint16Array(Te.w_size),Te.lit_bufsize=1<<de+6,Te.pending_buf_size=Te.lit_bufsize*4,Te.pending_buf=new Uint8Array(Te.pending_buf_size),Te.sym_buf=Te.lit_bufsize,Te.sym_end=(Te.lit_bufsize-1)*3,Te.level=Z,Te.strategy=fe,Te.method=B,oa(O)},Fa=(O,Z)=>la(O,Z,In,dr,$n,Pn),Eo=(O,Z)=>{if(rr(O)||Z>vt||Z<0)return O?$r(O,Ct):Ct;const B=O.state;if(!O.output||O.avail_in!==0&&!O.input||B.status===Kt&&Z!==St)return $r(O,O.avail_out===0?Qt:Ct);const ae=B.last_flush;if(B.last_flush=Z,B.pending!==0){if(Un(O),O.avail_out===0)return B.last_flush=-1,yt}else if(O.avail_in===0&&xs(Z)<=xs(ae)&&Z!==St)return $r(O,Qt);if(B.status===Kt&&O.avail_in!==0)return $r(O,Qt);if(B.status===_n&&B.wrap===0&&(B.status=ut),B.status===_n){let de=In+(B.w_bits-8<<4)<<8,fe=-1;if(B.strategy>=qt||B.level<2?fe=0:B.level<6?fe=1:B.level===6?fe=2:fe=3,de|=fe<<6,B.strstart!==0&&(de|=nr),de+=31-de%31,Xr(B,de),B.strstart!==0&&(Xr(B,O.adler>>>16),Xr(B,O.adler&65535)),O.adler=1,B.status=ut,Un(O),B.pending!==0)return B.last_flush=-1,yt}if(B.status===An){if(O.adler=0,Xt(B,31),Xt(B,139),Xt(B,8),B.gzhead)Xt(B,(B.gzhead.text?1:0)+(B.gzhead.hcrc?2:0)+(B.gzhead.extra?4:0)+(B.gzhead.name?8:0)+(B.gzhead.comment?16:0)),Xt(B,B.gzhead.time&255),Xt(B,B.gzhead.time>>8&255),Xt(B,B.gzhead.time>>16&255),Xt(B,B.gzhead.time>>24&255),Xt(B,B.level===9?2:B.strategy>=qt||B.level<2?4:0),Xt(B,B.gzhead.os&255),B.gzhead.extra&&B.gzhead.extra.length&&(Xt(B,B.gzhead.extra.length&255),Xt(B,B.gzhead.extra.length>>8&255)),B.gzhead.hcrc&&(O.adler=j(O.adler,B.pending_buf,B.pending,0)),B.gzindex=0,B.status=Lr;else if(Xt(B,0),Xt(B,0),Xt(B,0),Xt(B,0),Xt(B,0),Xt(B,B.level===9?2:B.strategy>=qt||B.level<2?4:0),Xt(B,Kr),B.status=ut,Un(O),B.pending!==0)return B.last_flush=-1,yt}if(B.status===Lr){if(B.gzhead.extra){let de=B.pending,fe=(B.gzhead.extra.length&65535)-B.gzindex;for(;B.pending+fe>B.pending_buf_size;){let Te=B.pending_buf_size-B.pending;if(B.pending_buf.set(B.gzhead.extra.subarray(B.gzindex,B.gzindex+Te),B.pending),B.pending=B.pending_buf_size,B.gzhead.hcrc&&B.pending>de&&(O.adler=j(O.adler,B.pending_buf,B.pending-de,de)),B.gzindex+=Te,Un(O),B.pending!==0)return B.last_flush=-1,yt;de=0,fe-=Te}let je=new Uint8Array(B.gzhead.extra);B.pending_buf.set(je.subarray(B.gzindex,B.gzindex+fe),B.pending),B.pending+=fe,B.gzhead.hcrc&&B.pending>de&&(O.adler=j(O.adler,B.pending_buf,B.pending-de,de)),B.gzindex=0}B.status=Li}if(B.status===Li){if(B.gzhead.name){let de=B.pending,fe;do{if(B.pending===B.pending_buf_size){if(B.gzhead.hcrc&&B.pending>de&&(O.adler=j(O.adler,B.pending_buf,B.pending-de,de)),Un(O),B.pending!==0)return B.last_flush=-1,yt;de=0}B.gzindex<B.gzhead.name.length?fe=B.gzhead.name.charCodeAt(B.gzindex++)&255:fe=0,Xt(B,fe)}while(fe!==0);B.gzhead.hcrc&&B.pending>de&&(O.adler=j(O.adler,B.pending_buf,B.pending-de,de)),B.gzindex=0}B.status=zr}if(B.status===zr){if(B.gzhead.comment){let de=B.pending,fe;do{if(B.pending===B.pending_buf_size){if(B.gzhead.hcrc&&B.pending>de&&(O.adler=j(O.adler,B.pending_buf,B.pending-de,de)),Un(O),B.pending!==0)return B.last_flush=-1,yt;de=0}B.gzindex<B.gzhead.comment.length?fe=B.gzhead.comment.charCodeAt(B.gzindex++)&255:fe=0,Xt(B,fe)}while(fe!==0);B.gzhead.hcrc&&B.pending>de&&(O.adler=j(O.adler,B.pending_buf,B.pending-de,de))}B.status=kr}if(B.status===kr){if(B.gzhead.hcrc){if(B.pending+2>B.pending_buf_size&&(Un(O),B.pending!==0))return B.last_flush=-1,yt;Xt(B,O.adler&255),Xt(B,O.adler>>8&255),O.adler=0}if(B.status=ut,Un(O),B.pending!==0)return B.last_flush=-1,yt}if(O.avail_in!==0||B.lookahead!==0||Z!==st&&B.status!==Kt){let de=B.level===0?oi(B,Z):B.strategy===qt?xo(B,Z):B.strategy===Cn?bs(B,Z):Qn[B.level].func(B,Z);if((de===gr||de===mr)&&(B.status=Kt),de===$t||de===gr)return O.avail_out===0&&(B.last_flush=-1),yt;if(de===Sr&&(Z===xt?ct(B):Z!==vt&&(pe(B,0,0,!1),Z===Zt&&(Yn(B.head),B.lookahead===0&&(B.strstart=0,B.block_start=0,B.insert=0))),Un(O),O.avail_out===0))return B.last_flush=-1,yt}return Z!==St?yt:B.wrap<=0?Gt:(B.wrap===2?(Xt(B,O.adler&255),Xt(B,O.adler>>8&255),Xt(B,O.adler>>16&255),Xt(B,O.adler>>24&255),Xt(B,O.total_in&255),Xt(B,O.total_in>>8&255),Xt(B,O.total_in>>16&255),Xt(B,O.total_in>>24&255)):(Xr(B,O.adler>>>16),Xr(B,O.adler&65535)),Un(O),B.wrap>0&&(B.wrap=-B.wrap),B.pending!==0?yt:Gt)},kn=O=>{if(rr(O))return Ct;const Z=O.state.status;return O.state=null,Z===ut?$r(O,Lt):yt},ci=(O,Z)=>{let B=Z.length;if(rr(O))return Ct;const ae=O.state,de=ae.wrap;if(de===2||de===1&&ae.status!==_n||ae.lookahead)return Ct;if(de===1&&(O.adler=ze(O.adler,Z,B,0)),ae.wrap=0,B>=ae.w_size){de===0&&(Yn(ae.head),ae.strstart=0,ae.block_start=0,ae.insert=0);let gt=new Uint8Array(ae.w_size);gt.set(Z.subarray(B-ae.w_size,B),0),Z=gt,B=ae.w_size}const fe=O.avail_in,je=O.next_in,Te=O.input;for(O.avail_in=B,O.next_in=0,O.input=Z,Yr(ae);ae.lookahead>=ft;){let gt=ae.strstart,Ee=ae.lookahead-(ft-1);do ae.ins_h=Pr(ae,ae.ins_h,ae.window[gt+ft-1]),ae.prev[gt&ae.w_mask]=ae.head[ae.ins_h],ae.head[ae.ins_h]=gt,gt++;while(--Ee);ae.strstart=gt,ae.lookahead=ft-1,Yr(ae)}return ae.strstart+=ae.lookahead,ae.block_start=ae.strstart,ae.insert=ae.lookahead,ae.lookahead=0,ae.match_length=ae.prev_length=ft-1,ae.match_available=0,O.next_in=je,O.input=Te,O.avail_in=fe,ae.wrap=de,yt};var Ua=Fa,ca=la,Ul=oa,Ss=Ba,Cs=bo,ua=Eo,Na=kn,So=ci,Nl="pako deflate (from Nodeca project)",fa={deflateInit:Ua,deflateInit2:ca,deflateReset:Ul,deflateResetKeep:Ss,deflateSetHeader:Cs,deflate:ua,deflateEnd:Na,deflateSetDictionary:So,deflateInfo:Nl};const jl=(O,Z)=>Object.prototype.hasOwnProperty.call(O,Z);var As=function(O){const Z=Array.prototype.slice.call(arguments,1);for(;Z.length;){const B=Z.shift();if(B){if(typeof B!="object")throw new TypeError(B+"must be non-object");for(const ae in B)jl(B,ae)&&(O[ae]=B[ae])}}return O},Gl=O=>{let Z=0;for(let ae=0,de=O.length;ae<de;ae++)Z+=O[ae].length;const B=new Uint8Array(Z);for(let ae=0,de=0,fe=O.length;ae<fe;ae++){let je=O[ae];B.set(je,de),de+=je.length}return B},ja={assign:As,flattenChunks:Gl};let Co=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Co=!1}const ha=new Uint8Array(256);for(let O=0;O<256;O++)ha[O]=O>=252?6:O>=248?5:O>=240?4:O>=224?3:O>=192?2:1;ha[254]=ha[254]=1;var Wl=O=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(O);let Z,B,ae,de,fe,je=O.length,Te=0;for(de=0;de<je;de++)B=O.charCodeAt(de),(B&64512)===55296&&de+1<je&&(ae=O.charCodeAt(de+1),(ae&64512)===56320&&(B=65536+(B-55296<<10)+(ae-56320),de++)),Te+=B<128?1:B<2048?2:B<65536?3:4;for(Z=new Uint8Array(Te),fe=0,de=0;fe<Te;de++)B=O.charCodeAt(de),(B&64512)===55296&&de+1<je&&(ae=O.charCodeAt(de+1),(ae&64512)===56320&&(B=65536+(B-55296<<10)+(ae-56320),de++)),B<128?Z[fe++]=B:B<2048?(Z[fe++]=192|B>>>6,Z[fe++]=128|B&63):B<65536?(Z[fe++]=224|B>>>12,Z[fe++]=128|B>>>6&63,Z[fe++]=128|B&63):(Z[fe++]=240|B>>>18,Z[fe++]=128|B>>>12&63,Z[fe++]=128|B>>>6&63,Z[fe++]=128|B&63);return Z};const Ao=(O,Z)=>{if(Z<65534&&O.subarray&&Co)return String.fromCharCode.apply(null,O.length===Z?O:O.subarray(0,Z));let B="";for(let ae=0;ae<Z;ae++)B+=String.fromCharCode(O[ae]);return B};var Vl=(O,Z)=>{const B=Z||O.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(O.subarray(0,Z));let ae,de;const fe=new Array(B*2);for(de=0,ae=0;ae<B;){let je=O[ae++];if(je<128){fe[de++]=je;continue}let Te=ha[je];if(Te>4){fe[de++]=65533,ae+=Te-1;continue}for(je&=Te===2?31:Te===3?15:7;Te>1&&ae<B;)je=je<<6|O[ae++]&63,Te--;if(Te>1){fe[de++]=65533;continue}je<65536?fe[de++]=je:(je-=65536,fe[de++]=55296|je>>10&1023,fe[de++]=56320|je&1023)}return Ao(fe,de)},Hl=(O,Z)=>{Z=Z||O.length,Z>O.length&&(Z=O.length);let B=Z-1;for(;B>=0&&(O[B]&192)===128;)B--;return B<0||B===0?Z:B+ha[O[B]]>Z?B:Z},da={string2buf:Wl,buf2string:Vl,utf8border:Hl};function kl(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Ga=kl;const Mo=Object.prototype.toString,{Z_NO_FLUSH:Kl,Z_SYNC_FLUSH:$l,Z_FULL_FLUSH:To,Z_FINISH:Xl,Z_OK:Wa,Z_STREAM_END:Yl,Z_DEFAULT_COMPRESSION:Zl,Z_DEFAULT_STRATEGY:Ql,Z_DEFLATED:ql}=Ae;function ga(O){this.options=ja.assign({level:Zl,method:ql,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ql},O||{});let Z=this.options;Z.raw&&Z.windowBits>0?Z.windowBits=-Z.windowBits:Z.gzip&&Z.windowBits>0&&Z.windowBits<16&&(Z.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ga,this.strm.avail_out=0;let B=fa.deflateInit2(this.strm,Z.level,Z.method,Z.windowBits,Z.memLevel,Z.strategy);if(B!==Wa)throw new Error(Me[B]);if(Z.header&&fa.deflateSetHeader(this.strm,Z.header),Z.dictionary){let ae;if(typeof Z.dictionary=="string"?ae=da.string2buf(Z.dictionary):Mo.call(Z.dictionary)==="[object ArrayBuffer]"?ae=new Uint8Array(Z.dictionary):ae=Z.dictionary,B=fa.deflateSetDictionary(this.strm,ae),B!==Wa)throw new Error(Me[B]);this._dict_set=!0}}ga.prototype.push=function(O,Z){const B=this.strm,ae=this.options.chunkSize;let de,fe;if(this.ended)return!1;for(Z===~~Z?fe=Z:fe=Z===!0?Xl:Kl,typeof O=="string"?B.input=da.string2buf(O):Mo.call(O)==="[object ArrayBuffer]"?B.input=new Uint8Array(O):B.input=O,B.next_in=0,B.avail_in=B.input.length;;){if(B.avail_out===0&&(B.output=new Uint8Array(ae),B.next_out=0,B.avail_out=ae),(fe===$l||fe===To)&&B.avail_out<=6){this.onData(B.output.subarray(0,B.next_out)),B.avail_out=0;continue}if(de=fa.deflate(B,fe),de===Yl)return B.next_out>0&&this.onData(B.output.subarray(0,B.next_out)),de=fa.deflateEnd(this.strm),this.onEnd(de),this.ended=!0,de===Wa;if(B.avail_out===0){this.onData(B.output);continue}if(fe>0&&B.next_out>0){this.onData(B.output.subarray(0,B.next_out)),B.avail_out=0;continue}if(B.avail_in===0)break}return!0},ga.prototype.onData=function(O){this.chunks.push(O)},ga.prototype.onEnd=function(O){O===Wa&&(this.result=ja.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg};function Ms(O,Z){const B=new ga(Z);if(B.push(O,!0),B.err)throw B.msg||Me[B.err];return B.result}function Jl(O,Z){return Z=Z||{},Z.raw=!0,Ms(O,Z)}function Ts(O,Z){return Z=Z||{},Z.gzip=!0,Ms(O,Z)}var ma=ga,ec=Ms,wo=Jl,Oo=Ts,Ro={Deflate:ma,deflate:ec,deflateRaw:wo,gzip:Oo};const pa=16209,Do=16191;var zi=function(Z,B){let ae,de,fe,je,Te,gt,Ee,Fe,kt,dt,it,_t,ln,Pt,Tt,Yt,wt,ht,It,bn,Et,Wt,Ot,Mt;const Ft=Z.state;ae=Z.next_in,Ot=Z.input,de=ae+(Z.avail_in-5),fe=Z.next_out,Mt=Z.output,je=fe-(B-Z.avail_out),Te=fe+(Z.avail_out-257),gt=Ft.dmax,Ee=Ft.wsize,Fe=Ft.whave,kt=Ft.wnext,dt=Ft.window,it=Ft.hold,_t=Ft.bits,ln=Ft.lencode,Pt=Ft.distcode,Tt=(1<<Ft.lenbits)-1,Yt=(1<<Ft.distbits)-1;e:do{_t<15&&(it+=Ot[ae++]<<_t,_t+=8,it+=Ot[ae++]<<_t,_t+=8),wt=ln[it&Tt];t:for(;;){if(ht=wt>>>24,it>>>=ht,_t-=ht,ht=wt>>>16&255,ht===0)Mt[fe++]=wt&65535;else if(ht&16){It=wt&65535,ht&=15,ht&&(_t<ht&&(it+=Ot[ae++]<<_t,_t+=8),It+=it&(1<<ht)-1,it>>>=ht,_t-=ht),_t<15&&(it+=Ot[ae++]<<_t,_t+=8,it+=Ot[ae++]<<_t,_t+=8),wt=Pt[it&Yt];n:for(;;){if(ht=wt>>>24,it>>>=ht,_t-=ht,ht=wt>>>16&255,ht&16){if(bn=wt&65535,ht&=15,_t<ht&&(it+=Ot[ae++]<<_t,_t+=8,_t<ht&&(it+=Ot[ae++]<<_t,_t+=8)),bn+=it&(1<<ht)-1,bn>gt){Z.msg="invalid distance too far back",Ft.mode=pa;break e}if(it>>>=ht,_t-=ht,ht=fe-je,bn>ht){if(ht=bn-ht,ht>Fe&&Ft.sane){Z.msg="invalid distance too far back",Ft.mode=pa;break e}if(Et=0,Wt=dt,kt===0){if(Et+=Ee-ht,ht<It){It-=ht;do Mt[fe++]=dt[Et++];while(--ht);Et=fe-bn,Wt=Mt}}else if(kt<ht){if(Et+=Ee+kt-ht,ht-=kt,ht<It){It-=ht;do Mt[fe++]=dt[Et++];while(--ht);if(Et=0,kt<It){ht=kt,It-=ht;do Mt[fe++]=dt[Et++];while(--ht);Et=fe-bn,Wt=Mt}}}else if(Et+=kt-ht,ht<It){It-=ht;do Mt[fe++]=dt[Et++];while(--ht);Et=fe-bn,Wt=Mt}for(;It>2;)Mt[fe++]=Wt[Et++],Mt[fe++]=Wt[Et++],Mt[fe++]=Wt[Et++],It-=3;It&&(Mt[fe++]=Wt[Et++],It>1&&(Mt[fe++]=Wt[Et++]))}else{Et=fe-bn;do Mt[fe++]=Mt[Et++],Mt[fe++]=Mt[Et++],Mt[fe++]=Mt[Et++],It-=3;while(It>2);It&&(Mt[fe++]=Mt[Et++],It>1&&(Mt[fe++]=Mt[Et++]))}}else if((ht&64)===0){wt=Pt[(wt&65535)+(it&(1<<ht)-1)];continue n}else{Z.msg="invalid distance code",Ft.mode=pa;break e}break}}else if((ht&64)===0){wt=ln[(wt&65535)+(it&(1<<ht)-1)];continue t}else if(ht&32){Ft.mode=Do;break e}else{Z.msg="invalid literal/length code",Ft.mode=pa;break e}break}}while(ae<de&&fe<Te);It=_t>>3,ae-=It,_t-=It<<3,it&=(1<<_t)-1,Z.next_in=ae,Z.next_out=fe,Z.avail_in=ae<de?5+(de-ae):5-(ae-de),Z.avail_out=fe<Te?257+(Te-fe):257-(fe-Te),Ft.hold=it,Ft.bits=_t};const Pi=15,Lo=852,zo=592,ws=0,Va=1,Ii=2,va=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),tc=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ha=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Po=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ui=(O,Z,B,ae,de,fe,je,Te)=>{const gt=Te.bits;let Ee=0,Fe=0,kt=0,dt=0,it=0,_t=0,ln=0,Pt=0,Tt=0,Yt=0,wt,ht,It,bn,Et,Wt=null,Ot;const Mt=new Uint16Array(Pi+1),Ft=new Uint16Array(Pi+1);let Gr=null,Hi,ri,Ra;for(Ee=0;Ee<=Pi;Ee++)Mt[Ee]=0;for(Fe=0;Fe<ae;Fe++)Mt[Z[B+Fe]]++;for(it=gt,dt=Pi;dt>=1&&Mt[dt]===0;dt--);if(it>dt&&(it=dt),dt===0)return de[fe++]=1<<24|64<<16|0,de[fe++]=1<<24|64<<16|0,Te.bits=1,0;for(kt=1;kt<dt&&Mt[kt]===0;kt++);for(it<kt&&(it=kt),Pt=1,Ee=1;Ee<=Pi;Ee++)if(Pt<<=1,Pt-=Mt[Ee],Pt<0)return-1;if(Pt>0&&(O===ws||dt!==1))return-1;for(Ft[1]=0,Ee=1;Ee<Pi;Ee++)Ft[Ee+1]=Ft[Ee]+Mt[Ee];for(Fe=0;Fe<ae;Fe++)Z[B+Fe]!==0&&(je[Ft[Z[B+Fe]]++]=Fe);if(O===ws?(Wt=Gr=je,Ot=20):O===Va?(Wt=va,Gr=tc,Ot=257):(Wt=Ha,Gr=Po,Ot=0),Yt=0,Fe=0,Ee=kt,Et=fe,_t=it,ln=0,It=-1,Tt=1<<it,bn=Tt-1,O===Va&&Tt>Lo||O===Ii&&Tt>zo)return 1;for(;;){Hi=Ee-ln,je[Fe]+1<Ot?(ri=0,Ra=je[Fe]):je[Fe]>=Ot?(ri=Gr[je[Fe]-Ot],Ra=Wt[je[Fe]-Ot]):(ri=96,Ra=0),wt=1<<Ee-ln,ht=1<<_t,kt=ht;do ht-=wt,de[Et+(Yt>>ln)+ht]=Hi<<24|ri<<16|Ra|0;while(ht!==0);for(wt=1<<Ee-1;Yt&wt;)wt>>=1;if(wt!==0?(Yt&=wt-1,Yt+=wt):Yt=0,Fe++,--Mt[Ee]===0){if(Ee===dt)break;Ee=Z[B+je[Fe]]}if(Ee>it&&(Yt&bn)!==It){for(ln===0&&(ln=it),Et+=kt,_t=Ee-ln,Pt=1<<_t;_t+ln<dt&&(Pt-=Mt[_t+ln],!(Pt<=0));)_t++,Pt<<=1;if(Tt+=1<<_t,O===Va&&Tt>Lo||O===Ii&&Tt>zo)return 1;It=Yt&bn,de[It]=it<<24|_t<<16|Et-fe|0}}return Yt!==0&&(de[Et+Yt]=Ee-ln<<24|64<<16|0),Te.bits=it,0};const Os=0,Rs=1,Ds=2,{Z_FINISH:Ls,Z_BLOCK:rc,Z_TREES:ka,Z_OK:fi,Z_STREAM_END:ic,Z_NEED_DICT:ac,Z_STREAM_ERROR:mn,Z_DATA_ERROR:Bi,Z_MEM_ERROR:zs,Z_BUF_ERROR:Io,Z_DEFLATED:Ps}=Ae,ya=16180,Ka=16181,Bo=16182,hi=16183,$a=16184,Fi=16185,Xa=16186,Is=16187,Qr=16188,di=16189,Ui=16190,Cr=16191,Ir=16192,Bs=16193,Ya=16194,Fs=16195,Fo=16196,Uo=16197,No=16198,_a=16199,xa=16200,Za=16201,ir=16202,ba=16203,qn=16204,gi=16205,Ea=16206,Sa=16207,Ca=16208,on=16209,qr=16210,Us=16211,Qa=852,Ni=592,Jn=15,qa=O=>(O>>>24&255)+(O>>>8&65280)+((O&65280)<<8)+((O&255)<<24);function Br(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Jr=O=>{if(!O)return 1;const Z=O.state;return!Z||Z.strm!==O||Z.mode<ya||Z.mode>Us?1:0},Aa=O=>{if(Jr(O))return mn;const Z=O.state;return O.total_in=O.total_out=Z.total=0,O.msg="",Z.wrap&&(O.adler=Z.wrap&1),Z.mode=ya,Z.last=0,Z.havedict=0,Z.flags=-1,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new Int32Array(Qa),Z.distcode=Z.distdyn=new Int32Array(Ni),Z.sane=1,Z.back=-1,fi},ei=O=>{if(Jr(O))return mn;const Z=O.state;return Z.wsize=0,Z.whave=0,Z.wnext=0,Aa(O)},Ja=(O,Z)=>{let B;if(Jr(O))return mn;const ae=O.state;return Z<0?(B=0,Z=-Z):(B=(Z>>4)+5,Z<48&&(Z&=15)),Z&&(Z<8||Z>15)?mn:(ae.window!==null&&ae.wbits!==Z&&(ae.window=null),ae.wrap=B,ae.wbits=Z,ei(O))},Ns=(O,Z)=>{if(!O)return mn;const B=new Br;O.state=B,B.strm=O,B.window=null,B.mode=ya;const ae=Ja(O,Z);return ae!==fi&&(O.state=null),ae},js=O=>Ns(O,Jn);let Gs=!0,Kn,ti;const ji=O=>{if(Gs){Kn=new Int32Array(512),ti=new Int32Array(32);let Z=0;for(;Z<144;)O.lens[Z++]=8;for(;Z<256;)O.lens[Z++]=9;for(;Z<280;)O.lens[Z++]=7;for(;Z<288;)O.lens[Z++]=8;for(ui(Rs,O.lens,0,288,Kn,0,O.work,{bits:9}),Z=0;Z<32;)O.lens[Z++]=5;ui(Ds,O.lens,0,32,ti,0,O.work,{bits:5}),Gs=!1}O.lencode=Kn,O.lenbits=9,O.distcode=ti,O.distbits=5},Ma=(O,Z,B,ae)=>{let de;const fe=O.state;return fe.window===null&&(fe.wsize=1<<fe.wbits,fe.wnext=0,fe.whave=0,fe.window=new Uint8Array(fe.wsize)),ae>=fe.wsize?(fe.window.set(Z.subarray(B-fe.wsize,B),0),fe.wnext=0,fe.whave=fe.wsize):(de=fe.wsize-fe.wnext,de>ae&&(de=ae),fe.window.set(Z.subarray(B-ae,B-ae+de),fe.wnext),ae-=de,ae?(fe.window.set(Z.subarray(B-ae,B),0),fe.wnext=ae,fe.whave=fe.wsize):(fe.wnext+=de,fe.wnext===fe.wsize&&(fe.wnext=0),fe.whave<fe.wsize&&(fe.whave+=de))),0},Ta=(O,Z)=>{let B,ae,de,fe,je,Te,gt,Ee,Fe,kt,dt,it,_t,ln,Pt=0,Tt,Yt,wt,ht,It,bn,Et,Wt;const Ot=new Uint8Array(4);let Mt,Ft;const Gr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Jr(O)||!O.output||!O.input&&O.avail_in!==0)return mn;B=O.state,B.mode===Cr&&(B.mode=Ir),je=O.next_out,de=O.output,gt=O.avail_out,fe=O.next_in,ae=O.input,Te=O.avail_in,Ee=B.hold,Fe=B.bits,kt=Te,dt=gt,Wt=fi;e:for(;;)switch(B.mode){case ya:if(B.wrap===0){B.mode=Ir;break}for(;Fe<16;){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}if(B.wrap&2&&Ee===35615){B.wbits===0&&(B.wbits=15),B.check=0,Ot[0]=Ee&255,Ot[1]=Ee>>>8&255,B.check=j(B.check,Ot,2,0),Ee=0,Fe=0,B.mode=Ka;break}if(B.head&&(B.head.done=!1),!(B.wrap&1)||(((Ee&255)<<8)+(Ee>>8))%31){O.msg="incorrect header check",B.mode=on;break}if((Ee&15)!==Ps){O.msg="unknown compression method",B.mode=on;break}if(Ee>>>=4,Fe-=4,Et=(Ee&15)+8,B.wbits===0&&(B.wbits=Et),Et>15||Et>B.wbits){O.msg="invalid window size",B.mode=on;break}B.dmax=1<<B.wbits,B.flags=0,O.adler=B.check=1,B.mode=Ee&512?di:Cr,Ee=0,Fe=0;break;case Ka:for(;Fe<16;){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}if(B.flags=Ee,(B.flags&255)!==Ps){O.msg="unknown compression method",B.mode=on;break}if(B.flags&57344){O.msg="unknown header flags set",B.mode=on;break}B.head&&(B.head.text=Ee>>8&1),B.flags&512&&B.wrap&4&&(Ot[0]=Ee&255,Ot[1]=Ee>>>8&255,B.check=j(B.check,Ot,2,0)),Ee=0,Fe=0,B.mode=Bo;case Bo:for(;Fe<32;){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}B.head&&(B.head.time=Ee),B.flags&512&&B.wrap&4&&(Ot[0]=Ee&255,Ot[1]=Ee>>>8&255,Ot[2]=Ee>>>16&255,Ot[3]=Ee>>>24&255,B.check=j(B.check,Ot,4,0)),Ee=0,Fe=0,B.mode=hi;case hi:for(;Fe<16;){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}B.head&&(B.head.xflags=Ee&255,B.head.os=Ee>>8),B.flags&512&&B.wrap&4&&(Ot[0]=Ee&255,Ot[1]=Ee>>>8&255,B.check=j(B.check,Ot,2,0)),Ee=0,Fe=0,B.mode=$a;case $a:if(B.flags&1024){for(;Fe<16;){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}B.length=Ee,B.head&&(B.head.extra_len=Ee),B.flags&512&&B.wrap&4&&(Ot[0]=Ee&255,Ot[1]=Ee>>>8&255,B.check=j(B.check,Ot,2,0)),Ee=0,Fe=0}else B.head&&(B.head.extra=null);B.mode=Fi;case Fi:if(B.flags&1024&&(it=B.length,it>Te&&(it=Te),it&&(B.head&&(Et=B.head.extra_len-B.length,B.head.extra||(B.head.extra=new Uint8Array(B.head.extra_len)),B.head.extra.set(ae.subarray(fe,fe+it),Et)),B.flags&512&&B.wrap&4&&(B.check=j(B.check,ae,it,fe)),Te-=it,fe+=it,B.length-=it),B.length))break e;B.length=0,B.mode=Xa;case Xa:if(B.flags&2048){if(Te===0)break e;it=0;do Et=ae[fe+it++],B.head&&Et&&B.length<65536&&(B.head.name+=String.fromCharCode(Et));while(Et&&it<Te);if(B.flags&512&&B.wrap&4&&(B.check=j(B.check,ae,it,fe)),Te-=it,fe+=it,Et)break e}else B.head&&(B.head.name=null);B.length=0,B.mode=Is;case Is:if(B.flags&4096){if(Te===0)break e;it=0;do Et=ae[fe+it++],B.head&&Et&&B.length<65536&&(B.head.comment+=String.fromCharCode(Et));while(Et&&it<Te);if(B.flags&512&&B.wrap&4&&(B.check=j(B.check,ae,it,fe)),Te-=it,fe+=it,Et)break e}else B.head&&(B.head.comment=null);B.mode=Qr;case Qr:if(B.flags&512){for(;Fe<16;){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}if(B.wrap&4&&Ee!==(B.check&65535)){O.msg="header crc mismatch",B.mode=on;break}Ee=0,Fe=0}B.head&&(B.head.hcrc=B.flags>>9&1,B.head.done=!0),O.adler=B.check=0,B.mode=Cr;break;case di:for(;Fe<32;){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}O.adler=B.check=qa(Ee),Ee=0,Fe=0,B.mode=Ui;case Ui:if(B.havedict===0)return O.next_out=je,O.avail_out=gt,O.next_in=fe,O.avail_in=Te,B.hold=Ee,B.bits=Fe,ac;O.adler=B.check=1,B.mode=Cr;case Cr:if(Z===rc||Z===ka)break e;case Ir:if(B.last){Ee>>>=Fe&7,Fe-=Fe&7,B.mode=Ea;break}for(;Fe<3;){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}switch(B.last=Ee&1,Ee>>>=1,Fe-=1,Ee&3){case 0:B.mode=Bs;break;case 1:if(ji(B),B.mode=_a,Z===ka){Ee>>>=2,Fe-=2;break e}break;case 2:B.mode=Fo;break;case 3:O.msg="invalid block type",B.mode=on}Ee>>>=2,Fe-=2;break;case Bs:for(Ee>>>=Fe&7,Fe-=Fe&7;Fe<32;){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}if((Ee&65535)!==(Ee>>>16^65535)){O.msg="invalid stored block lengths",B.mode=on;break}if(B.length=Ee&65535,Ee=0,Fe=0,B.mode=Ya,Z===ka)break e;case Ya:B.mode=Fs;case Fs:if(it=B.length,it){if(it>Te&&(it=Te),it>gt&&(it=gt),it===0)break e;de.set(ae.subarray(fe,fe+it),je),Te-=it,fe+=it,gt-=it,je+=it,B.length-=it;break}B.mode=Cr;break;case Fo:for(;Fe<14;){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}if(B.nlen=(Ee&31)+257,Ee>>>=5,Fe-=5,B.ndist=(Ee&31)+1,Ee>>>=5,Fe-=5,B.ncode=(Ee&15)+4,Ee>>>=4,Fe-=4,B.nlen>286||B.ndist>30){O.msg="too many length or distance symbols",B.mode=on;break}B.have=0,B.mode=Uo;case Uo:for(;B.have<B.ncode;){for(;Fe<3;){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}B.lens[Gr[B.have++]]=Ee&7,Ee>>>=3,Fe-=3}for(;B.have<19;)B.lens[Gr[B.have++]]=0;if(B.lencode=B.lendyn,B.lenbits=7,Mt={bits:B.lenbits},Wt=ui(Os,B.lens,0,19,B.lencode,0,B.work,Mt),B.lenbits=Mt.bits,Wt){O.msg="invalid code lengths set",B.mode=on;break}B.have=0,B.mode=No;case No:for(;B.have<B.nlen+B.ndist;){for(;Pt=B.lencode[Ee&(1<<B.lenbits)-1],Tt=Pt>>>24,Yt=Pt>>>16&255,wt=Pt&65535,!(Tt<=Fe);){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}if(wt<16)Ee>>>=Tt,Fe-=Tt,B.lens[B.have++]=wt;else{if(wt===16){for(Ft=Tt+2;Fe<Ft;){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}if(Ee>>>=Tt,Fe-=Tt,B.have===0){O.msg="invalid bit length repeat",B.mode=on;break}Et=B.lens[B.have-1],it=3+(Ee&3),Ee>>>=2,Fe-=2}else if(wt===17){for(Ft=Tt+3;Fe<Ft;){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}Ee>>>=Tt,Fe-=Tt,Et=0,it=3+(Ee&7),Ee>>>=3,Fe-=3}else{for(Ft=Tt+7;Fe<Ft;){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}Ee>>>=Tt,Fe-=Tt,Et=0,it=11+(Ee&127),Ee>>>=7,Fe-=7}if(B.have+it>B.nlen+B.ndist){O.msg="invalid bit length repeat",B.mode=on;break}for(;it--;)B.lens[B.have++]=Et}}if(B.mode===on)break;if(B.lens[256]===0){O.msg="invalid code -- missing end-of-block",B.mode=on;break}if(B.lenbits=9,Mt={bits:B.lenbits},Wt=ui(Rs,B.lens,0,B.nlen,B.lencode,0,B.work,Mt),B.lenbits=Mt.bits,Wt){O.msg="invalid literal/lengths set",B.mode=on;break}if(B.distbits=6,B.distcode=B.distdyn,Mt={bits:B.distbits},Wt=ui(Ds,B.lens,B.nlen,B.ndist,B.distcode,0,B.work,Mt),B.distbits=Mt.bits,Wt){O.msg="invalid distances set",B.mode=on;break}if(B.mode=_a,Z===ka)break e;case _a:B.mode=xa;case xa:if(Te>=6&&gt>=258){O.next_out=je,O.avail_out=gt,O.next_in=fe,O.avail_in=Te,B.hold=Ee,B.bits=Fe,zi(O,dt),je=O.next_out,de=O.output,gt=O.avail_out,fe=O.next_in,ae=O.input,Te=O.avail_in,Ee=B.hold,Fe=B.bits,B.mode===Cr&&(B.back=-1);break}for(B.back=0;Pt=B.lencode[Ee&(1<<B.lenbits)-1],Tt=Pt>>>24,Yt=Pt>>>16&255,wt=Pt&65535,!(Tt<=Fe);){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}if(Yt&&(Yt&240)===0){for(ht=Tt,It=Yt,bn=wt;Pt=B.lencode[bn+((Ee&(1<<ht+It)-1)>>ht)],Tt=Pt>>>24,Yt=Pt>>>16&255,wt=Pt&65535,!(ht+Tt<=Fe);){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}Ee>>>=ht,Fe-=ht,B.back+=ht}if(Ee>>>=Tt,Fe-=Tt,B.back+=Tt,B.length=wt,Yt===0){B.mode=gi;break}if(Yt&32){B.back=-1,B.mode=Cr;break}if(Yt&64){O.msg="invalid literal/length code",B.mode=on;break}B.extra=Yt&15,B.mode=Za;case Za:if(B.extra){for(Ft=B.extra;Fe<Ft;){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}B.length+=Ee&(1<<B.extra)-1,Ee>>>=B.extra,Fe-=B.extra,B.back+=B.extra}B.was=B.length,B.mode=ir;case ir:for(;Pt=B.distcode[Ee&(1<<B.distbits)-1],Tt=Pt>>>24,Yt=Pt>>>16&255,wt=Pt&65535,!(Tt<=Fe);){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}if((Yt&240)===0){for(ht=Tt,It=Yt,bn=wt;Pt=B.distcode[bn+((Ee&(1<<ht+It)-1)>>ht)],Tt=Pt>>>24,Yt=Pt>>>16&255,wt=Pt&65535,!(ht+Tt<=Fe);){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}Ee>>>=ht,Fe-=ht,B.back+=ht}if(Ee>>>=Tt,Fe-=Tt,B.back+=Tt,Yt&64){O.msg="invalid distance code",B.mode=on;break}B.offset=wt,B.extra=Yt&15,B.mode=ba;case ba:if(B.extra){for(Ft=B.extra;Fe<Ft;){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}B.offset+=Ee&(1<<B.extra)-1,Ee>>>=B.extra,Fe-=B.extra,B.back+=B.extra}if(B.offset>B.dmax){O.msg="invalid distance too far back",B.mode=on;break}B.mode=qn;case qn:if(gt===0)break e;if(it=dt-gt,B.offset>it){if(it=B.offset-it,it>B.whave&&B.sane){O.msg="invalid distance too far back",B.mode=on;break}it>B.wnext?(it-=B.wnext,_t=B.wsize-it):_t=B.wnext-it,it>B.length&&(it=B.length),ln=B.window}else ln=de,_t=je-B.offset,it=B.length;it>gt&&(it=gt),gt-=it,B.length-=it;do de[je++]=ln[_t++];while(--it);B.length===0&&(B.mode=xa);break;case gi:if(gt===0)break e;de[je++]=B.length,gt--,B.mode=xa;break;case Ea:if(B.wrap){for(;Fe<32;){if(Te===0)break e;Te--,Ee|=ae[fe++]<<Fe,Fe+=8}if(dt-=gt,O.total_out+=dt,B.total+=dt,B.wrap&4&&dt&&(O.adler=B.check=B.flags?j(B.check,de,dt,je-dt):ze(B.check,de,dt,je-dt)),dt=gt,B.wrap&4&&(B.flags?Ee:qa(Ee))!==B.check){O.msg="incorrect data check",B.mode=on;break}Ee=0,Fe=0}B.mode=Sa;case Sa:if(B.wrap&&B.flags){for(;Fe<32;){if(Te===0)break e;Te--,Ee+=ae[fe++]<<Fe,Fe+=8}if(B.wrap&4&&Ee!==(B.total&4294967295)){O.msg="incorrect length check",B.mode=on;break}Ee=0,Fe=0}B.mode=Ca;case Ca:Wt=ic;break e;case on:Wt=Bi;break e;case qr:return zs;case Us:default:return mn}return O.next_out=je,O.avail_out=gt,O.next_in=fe,O.avail_in=Te,B.hold=Ee,B.bits=Fe,(B.wsize||dt!==O.avail_out&&B.mode<on&&(B.mode<Ea||Z!==Ls))&&Ma(O,O.output,O.next_out,dt-O.avail_out),kt-=O.avail_in,dt-=O.avail_out,O.total_in+=kt,O.total_out+=dt,B.total+=dt,B.wrap&4&&dt&&(O.adler=B.check=B.flags?j(B.check,de,dt,O.next_out-dt):ze(B.check,de,dt,O.next_out-dt)),O.data_type=B.bits+(B.last?64:0)+(B.mode===Cr?128:0)+(B.mode===_a||B.mode===Ya?256:0),(kt===0&&dt===0||Z===Ls)&&Wt===fi&&(Wt=Io),Wt},ar=O=>{if(Jr(O))return mn;let Z=O.state;return Z.window&&(Z.window=null),O.state=null,fi},sr=(O,Z)=>{if(Jr(O))return mn;const B=O.state;return(B.wrap&2)===0?mn:(B.head=Z,Z.done=!1,fi)},ni=(O,Z)=>{const B=Z.length;let ae,de,fe;return Jr(O)||(ae=O.state,ae.wrap!==0&&ae.mode!==Ui)?mn:ae.mode===Ui&&(de=1,de=ze(de,Z,B,0),de!==ae.check)?Bi:(fe=Ma(O,Z,B,B),fe?(ae.mode=qr,zs):(ae.havedict=1,fi))};var Ar=ei,Mr=Ja,Fr=Aa,jo=js,Ws=Ns,Vs=Ta,Go=ar,Dn=sr,dn=ni,Ut="pako inflate (from Nodeca project)",Bn={inflateReset:Ar,inflateReset2:Mr,inflateResetKeep:Fr,inflateInit:jo,inflateInit2:Ws,inflate:Vs,inflateEnd:Go,inflateGetHeader:Dn,inflateSetDictionary:dn,inflateInfo:Ut};function or(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Hs=or;const Ur=Object.prototype.toString,{Z_NO_FLUSH:Wo,Z_FINISH:Vo,Z_OK:Tr,Z_STREAM_END:Nr,Z_NEED_DICT:wa,Z_STREAM_ERROR:Oa,Z_DATA_ERROR:es,Z_MEM_ERROR:mi}=Ae;function er(O){this.options=ja.assign({chunkSize:65536,windowBits:15,to:""},O||{});const Z=this.options;Z.raw&&Z.windowBits>=0&&Z.windowBits<16&&(Z.windowBits=-Z.windowBits,Z.windowBits===0&&(Z.windowBits=-15)),Z.windowBits>=0&&Z.windowBits<16&&!(O&&O.windowBits)&&(Z.windowBits+=32),Z.windowBits>15&&Z.windowBits<48&&(Z.windowBits&15)===0&&(Z.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ga,this.strm.avail_out=0;let B=Bn.inflateInit2(this.strm,Z.windowBits);if(B!==Tr)throw new Error(Me[B]);if(this.header=new Hs,Bn.inflateGetHeader(this.strm,this.header),Z.dictionary&&(typeof Z.dictionary=="string"?Z.dictionary=da.string2buf(Z.dictionary):Ur.call(Z.dictionary)==="[object ArrayBuffer]"&&(Z.dictionary=new Uint8Array(Z.dictionary)),Z.raw&&(B=Bn.inflateSetDictionary(this.strm,Z.dictionary),B!==Tr)))throw new Error(Me[B])}er.prototype.push=function(O,Z){const B=this.strm,ae=this.options.chunkSize,de=this.options.dictionary;let fe,je,Te;if(this.ended)return!1;for(Z===~~Z?je=Z:je=Z===!0?Vo:Wo,Ur.call(O)==="[object ArrayBuffer]"?B.input=new Uint8Array(O):B.input=O,B.next_in=0,B.avail_in=B.input.length;;){for(B.avail_out===0&&(B.output=new Uint8Array(ae),B.next_out=0,B.avail_out=ae),fe=Bn.inflate(B,je),fe===wa&&de&&(fe=Bn.inflateSetDictionary(B,de),fe===Tr?fe=Bn.inflate(B,je):fe===es&&(fe=wa));B.avail_in>0&&fe===Nr&&B.state.wrap>0&&O[B.next_in]!==0;)Bn.inflateReset(B),fe=Bn.inflate(B,je);switch(fe){case Oa:case es:case wa:case mi:return this.onEnd(fe),this.ended=!0,!1}if(Te=B.avail_out,B.next_out&&(B.avail_out===0||fe===Nr))if(this.options.to==="string"){let gt=da.utf8border(B.output,B.next_out),Ee=B.next_out-gt,Fe=da.buf2string(B.output,gt);B.next_out=Ee,B.avail_out=ae-Ee,Ee&&B.output.set(B.output.subarray(gt,gt+Ee),0),this.onData(Fe)}else this.onData(B.output.length===B.next_out?B.output:B.output.subarray(0,B.next_out));if(!(fe===Tr&&Te===0)){if(fe===Nr)return fe=Bn.inflateEnd(this.strm),this.onEnd(fe),this.ended=!0,!0;if(B.avail_in===0)break}}return!0},er.prototype.onData=function(O){this.chunks.push(O)},er.prototype.onEnd=function(O){O===Tr&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ja.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg};function wr(O,Z){const B=new er(Z);if(B.push(O),B.err)throw B.msg||Me[B.err];return B.result}function jr(O,Z){return Z=Z||{},Z.raw=!0,wr(O,Z)}var ks=er,Ks=wr,Gi=jr,ts=wr,pi={Inflate:ks,inflate:Ks,inflateRaw:Gi,ungzip:ts};const{Deflate:Ln,deflate:ns,deflateRaw:Ho,gzip:sc}=Ro,{Inflate:oc,inflate:lc,inflateRaw:xn,ungzip:$s}=pi;var Wi=Ln,Vi=ns,rs=Ho,vi=sc,yi=oc,ko=lc,Xs=xn,Ko=$s,Ys=Ae,_i={Deflate:Wi,deflate:Vi,deflateRaw:rs,gzip:vi,Inflate:yi,inflate:ko,inflateRaw:Xs,ungzip:Ko,constants:Ys}}),"./node_modules/upng-js/UPNG.js":((s,i,n)=>{(function(){var a={},d;s.exports=a,d=n("./node_modules/upng-js/node_modules/pako/index.js"),(function(y,C){y.toRGBA8=function(p){var E=p.width,R=p.height;if(p.tabs.acTL==null)return[y.toRGBA8.decodeImage(p.data,E,R,p).buffer];var x=[];p.frames[0].data==null&&(p.frames[0].data=p.data);for(var A,w=new Uint8Array(E*R*4),T=0;T<p.frames.length;T++){var M=p.frames[T],h=M.rect.x,l=M.rect.y,c=M.rect.width,g=M.rect.height,v=y.toRGBA8.decodeImage(M.data,c,g,p);if(T==0?A=v:M.blend==0?y._copyTile(v,c,g,A,E,R,h,l,0):M.blend==1&&y._copyTile(v,c,g,A,E,R,h,l,1),x.push(A.buffer),A=A.slice(0),M.dispose!=0){if(M.dispose==1)y._copyTile(w,c,g,A,E,R,h,l,0);else if(M.dispose==2){for(var b=T-1;p.frames[b].dispose==2;)b--;A=new Uint8Array(x[b]).slice(0)}}}return x},y.toRGBA8.decodeImage=function(p,E,R,x){var A=E*R,w=y.decode._getBPP(x),T=Math.ceil(E*w/8),M=new Uint8Array(A*4),h=new Uint32Array(M.buffer),l=x.ctype,c=x.depth,g=y._bin.readUshort;if(l==6){var v=A<<2;if(c==8)for(var b=0;b<v;b++)M[b]=p[b];if(c==16)for(var b=0;b<v;b++)M[b]=p[b<<1]}else if(l==2){var S=x.tabs.tRNS,u=-1,m=-1,_=-1;if(S&&(u=S[0],m=S[1],_=S[2]),c==8)for(var b=0;b<A;b++){var D=b<<2,L=b*3;M[D]=p[L],M[D+1]=p[L+1],M[D+2]=p[L+2],M[D+3]=255,u!=-1&&p[L]==u&&p[L+1]==m&&p[L+2]==_&&(M[D+3]=0)}if(c==16)for(var b=0;b<A;b++){var D=b<<2,L=b*6;M[D]=p[L],M[D+1]=p[L+2],M[D+2]=p[L+4],M[D+3]=255,u!=-1&&g(p,L)==u&&g(p,L+2)==m&&g(p,L+4)==_&&(M[D+3]=0)}}else if(l==3){var P=x.tabs.PLTE,N=x.tabs.tRNS,U=N?N.length:0;if(c==1)for(var V=0;V<R;V++)for(var W=V*T,G=V*E,b=0;b<E;b++){var D=G+b<<2,H=p[W+(b>>3)]>>7-((b&7)<<0)&1,k=3*H;M[D]=P[k],M[D+1]=P[k+1],M[D+2]=P[k+2],M[D+3]=H<U?N[H]:255}if(c==2)for(var V=0;V<R;V++)for(var W=V*T,G=V*E,b=0;b<E;b++){var D=G+b<<2,H=p[W+(b>>2)]>>6-((b&3)<<1)&3,k=3*H;M[D]=P[k],M[D+1]=P[k+1],M[D+2]=P[k+2],M[D+3]=H<U?N[H]:255}if(c==4)for(var V=0;V<R;V++)for(var W=V*T,G=V*E,b=0;b<E;b++){var D=G+b<<2,H=p[W+(b>>1)]>>4-((b&1)<<2)&15,k=3*H;M[D]=P[k],M[D+1]=P[k+1],M[D+2]=P[k+2],M[D+3]=H<U?N[H]:255}if(c==8)for(var b=0;b<A;b++){var D=b<<2,H=p[b],k=3*H;M[D]=P[k],M[D+1]=P[k+1],M[D+2]=P[k+2],M[D+3]=H<U?N[H]:255}}else if(l==4){if(c==8)for(var b=0;b<A;b++){var D=b<<2,X=b<<1,$=p[X];M[D]=$,M[D+1]=$,M[D+2]=$,M[D+3]=p[X+1]}if(c==16)for(var b=0;b<A;b++){var D=b<<2,X=b<<2,$=p[X];M[D]=$,M[D+1]=$,M[D+2]=$,M[D+3]=p[X+2]}}else if(l==0){var u=x.tabs.tRNS?x.tabs.tRNS:-1;if(c==1)for(var b=0;b<A;b++){var $=255*(p[b>>3]>>7-(b&7)&1),F=$==u*255?0:255;h[b]=F<<24|$<<16|$<<8|$}if(c==2)for(var b=0;b<A;b++){var $=85*(p[b>>2]>>6-((b&3)<<1)&3),F=$==u*85?0:255;h[b]=F<<24|$<<16|$<<8|$}if(c==4)for(var b=0;b<A;b++){var $=17*(p[b>>1]>>4-((b&1)<<2)&15),F=$==u*17?0:255;h[b]=F<<24|$<<16|$<<8|$}if(c==8)for(var b=0;b<A;b++){var $=p[b],F=$==u?0:255;h[b]=F<<24|$<<16|$<<8|$}if(c==16)for(var b=0;b<A;b++){var $=p[b<<1],F=g(p,b<<1)==u?0:255;h[b]=F<<24|$<<16|$<<8|$}}return M},y.decode=function(p){for(var E=new Uint8Array(p),R=8,x=y._bin,A=x.readUshort,w=x.readUint,T={tabs:{},frames:[]},M=new Uint8Array(E.length),h=0,l,c=0,g=[137,80,78,71,13,10,26,10],v=0;v<8;v++)if(E[v]!=g[v])throw"The input is not a PNG file!";for(;R<E.length;){var b=x.readUint(E,R);R+=4;var S=x.readASCII(E,R,4);if(R+=4,S=="IHDR")y.decode._IHDR(E,R,T);else if(S=="IDAT"){for(var v=0;v<b;v++)M[h+v]=E[R+v];h+=b}else if(S=="acTL")T.tabs[S]={num_frames:w(E,R),num_plays:w(E,R+4)},l=new Uint8Array(E.length);else if(S=="fcTL"){if(c!=0){var u=T.frames[T.frames.length-1];u.data=y.decode._decompress(T,l.slice(0,c),u.rect.width,u.rect.height),c=0}var m={x:w(E,R+12),y:w(E,R+16),width:w(E,R+4),height:w(E,R+8)},_=A(E,R+22);_=A(E,R+20)/(_==0?100:_);var D={rect:m,delay:Math.round(_*1e3),dispose:E[R+24],blend:E[R+25]};T.frames.push(D)}else if(S=="fdAT"){for(var v=0;v<b-4;v++)l[c+v]=E[R+v+4];c+=b-4}else if(S=="pHYs")T.tabs[S]=[x.readUint(E,R),x.readUint(E,R+4),E[R+8]];else if(S=="cHRM"){T.tabs[S]=[];for(var v=0;v<8;v++)T.tabs[S].push(x.readUint(E,R+v*4))}else if(S=="tEXt"){T.tabs[S]==null&&(T.tabs[S]={});var L=x.nextZero(E,R),P=x.readASCII(E,R,L-R),N=x.readASCII(E,L+1,R+b-L-1);T.tabs[S][P]=N}else if(S=="iTXt"){T.tabs[S]==null&&(T.tabs[S]={});var L=0,U=R;L=x.nextZero(E,U);var P=x.readASCII(E,U,L-U);U=L+1,E[U],E[U+1],U+=2,L=x.nextZero(E,U),x.readASCII(E,U,L-U),U=L+1,L=x.nextZero(E,U),x.readUTF8(E,U,L-U),U=L+1;var N=x.readUTF8(E,U,b-(U-R));T.tabs[S][P]=N}else if(S=="PLTE")T.tabs[S]=x.readBytes(E,R,b);else if(S=="hIST"){var V=T.tabs.PLTE.length/3;T.tabs[S]=[];for(var v=0;v<V;v++)T.tabs[S].push(A(E,R+v*2))}else if(S=="tRNS")T.ctype==3?T.tabs[S]=x.readBytes(E,R,b):T.ctype==0?T.tabs[S]=A(E,R):T.ctype==2&&(T.tabs[S]=[A(E,R),A(E,R+2),A(E,R+4)]);else if(S=="gAMA")T.tabs[S]=x.readUint(E,R)/1e5;else if(S=="sRGB")T.tabs[S]=E[R];else if(S=="bKGD")T.ctype==0||T.ctype==4?T.tabs[S]=[A(E,R)]:T.ctype==2||T.ctype==6?T.tabs[S]=[A(E,R),A(E,R+2),A(E,R+4)]:T.ctype==3&&(T.tabs[S]=E[R]);else if(S=="IEND"){if(c!=0){var u=T.frames[T.frames.length-1];u.data=y.decode._decompress(T,l.slice(0,c),u.rect.width,u.rect.height),c=0}T.data=y.decode._decompress(T,M,T.width,T.height);break}R+=b,x.readUint(E,R),R+=4}return delete T.compress,delete T.interlace,delete T.filter,T},y.decode._decompress=function(p,E,R,x){return p.compress==0&&(E=y.decode._inflate(E)),p.interlace==0?E=y.decode._filterZero(E,p,0,R,x):p.interlace==1&&(E=y.decode._readInterlace(E,p)),E},y.decode._inflate=function(p){return C.inflate(p)},y.decode._readInterlace=function(p,E){for(var R=E.width,x=E.height,A=y.decode._getBPP(E),w=A>>3,T=Math.ceil(R*A/8),M=new Uint8Array(x*T),h=0,l=[0,0,4,0,2,0,1],c=[0,4,0,2,0,1,0],g=[8,8,8,4,4,2,2],v=[8,8,4,4,2,2,1],b=0;b<7;){for(var S=g[b],u=v[b],m=0,_=0,D=l[b];D<x;)D+=S,_++;for(var L=c[b];L<R;)L+=u,m++;var P=Math.ceil(m*A/8);y.decode._filterZero(p,E,h,m,_);for(var N=0,U=l[b];U<x;){for(var V=c[b],W=h+N*P<<3;V<R;){if(A==1){var G=p[W>>3];G=G>>7-(W&7)&1,M[U*T+(V>>3)]|=G<<7-((V&3)<<0)}if(A==2){var G=p[W>>3];G=G>>6-(W&7)&3,M[U*T+(V>>2)]|=G<<6-((V&3)<<1)}if(A==4){var G=p[W>>3];G=G>>4-(W&7)&15,M[U*T+(V>>1)]|=G<<4-((V&1)<<2)}if(A>=8)for(var H=U*T+V*w,k=0;k<w;k++)M[H+k]=p[(W>>3)+k];W+=A,V+=u}N++,U+=S}m*_!=0&&(h+=_*(1+P)),b=b+1}return M},y.decode._getBPP=function(p){var E=[1,null,3,1,2,null,4][p.ctype];return E*p.depth},y.decode._filterZero=function(p,E,R,x,A){var w=y.decode._getBPP(E),T=Math.ceil(x*w/8),M=y.decode._paeth;w=Math.ceil(w/8);for(var h=0;h<A;h++){var l=R+h*T,c=l+h+1,g=p[c-1];if(g==0)for(var v=0;v<T;v++)p[l+v]=p[c+v];else if(g==1){for(var v=0;v<w;v++)p[l+v]=p[c+v];for(var v=w;v<T;v++)p[l+v]=p[c+v]+p[l+v-w]&255}else if(h==0){for(var v=0;v<w;v++)p[l+v]=p[c+v];if(g==2)for(var v=w;v<T;v++)p[l+v]=p[c+v]&255;if(g==3)for(var v=w;v<T;v++)p[l+v]=p[c+v]+(p[l+v-w]>>1)&255;if(g==4)for(var v=w;v<T;v++)p[l+v]=p[c+v]+M(p[l+v-w],0,0)&255}else{if(g==2)for(var v=0;v<T;v++)p[l+v]=p[c+v]+p[l+v-T]&255;if(g==3){for(var v=0;v<w;v++)p[l+v]=p[c+v]+(p[l+v-T]>>1)&255;for(var v=w;v<T;v++)p[l+v]=p[c+v]+(p[l+v-T]+p[l+v-w]>>1)&255}if(g==4){for(var v=0;v<w;v++)p[l+v]=p[c+v]+M(0,p[l+v-T],0)&255;for(var v=w;v<T;v++)p[l+v]=p[c+v]+M(p[l+v-w],p[l+v-T],p[l+v-w-T])&255}}}return p},y.decode._paeth=function(p,E,R){var x=p+E-R,A=Math.abs(x-p),w=Math.abs(x-E),T=Math.abs(x-R);return A<=w&&A<=T?p:w<=T?E:R},y.decode._IHDR=function(p,E,R){var x=y._bin;R.width=x.readUint(p,E),E+=4,R.height=x.readUint(p,E),E+=4,R.depth=p[E],E++,R.ctype=p[E],E++,R.compress=p[E],E++,R.filter=p[E],E++,R.interlace=p[E],E++},y._bin={nextZero:function(p,E){for(;p[E]!=0;)E++;return E},readUshort:function(p,E){return p[E]<<8|p[E+1]},writeUshort:function(p,E,R){p[E]=R>>8&255,p[E+1]=R&255},readUint:function(p,E){return p[E]*16777216+(p[E+1]<<16|p[E+2]<<8|p[E+3])},writeUint:function(p,E,R){p[E]=R>>24&255,p[E+1]=R>>16&255,p[E+2]=R>>8&255,p[E+3]=R&255},readASCII:function(p,E,R){for(var x="",A=0;A<R;A++)x+=String.fromCharCode(p[E+A]);return x},writeASCII:function(p,E,R){for(var x=0;x<R.length;x++)p[E+x]=R.charCodeAt(x)},readBytes:function(p,E,R){for(var x=[],A=0;A<R;A++)x.push(p[E+A]);return x},pad:function(p){return p.length<2?"0"+p:p},readUTF8:function(p,E,R){for(var x="",A,w=0;w<R;w++)x+="%"+y._bin.pad(p[E+w].toString(16));try{A=decodeURIComponent(x)}catch{return y._bin.readASCII(p,E,R)}return A}},y._copyTile=function(p,E,R,x,A,w,T,M,h){for(var l=Math.min(E,A),c=Math.min(R,w),g=0,v=0,b=0;b<c;b++)for(var S=0;S<l;S++)if(T>=0&&M>=0?(g=b*E+S<<2,v=(M+b)*A+T+S<<2):(g=(-M+b)*E-T+S<<2,v=b*A+S<<2),h==0)x[v]=p[g],x[v+1]=p[g+1],x[v+2]=p[g+2],x[v+3]=p[g+3];else if(h==1){var u=p[g+3]*.00392156862745098,m=p[g]*u,_=p[g+1]*u,D=p[g+2]*u,L=x[v+3]*(1/255),P=x[v]*L,N=x[v+1]*L,U=x[v+2]*L,V=1-u,W=u+L*V,G=W==0?0:1/W;x[v+3]=255*W,x[v+0]=(m+P*V)*G,x[v+1]=(_+N*V)*G,x[v+2]=(D+U*V)*G}else if(h==2){var u=p[g+3],m=p[g],_=p[g+1],D=p[g+2],L=x[v+3],P=x[v],N=x[v+1],U=x[v+2];u==L&&m==P&&_==N&&D==U?(x[v]=0,x[v+1]=0,x[v+2]=0,x[v+3]=0):(x[v]=m,x[v+1]=_,x[v+2]=D,x[v+3]=u)}else if(h==3){var u=p[g+3],m=p[g],_=p[g+1],D=p[g+2],L=x[v+3],P=x[v],N=x[v+1],U=x[v+2];if(u==L&&m==P&&_==N&&D==U)continue;if(u<220&&L>20)return!1}return!0},y.encode=function(p,E,R,x,A,w){x==null&&(x=0),w==null&&(w=!1);for(var T=new Uint8Array(p[0].byteLength*p.length+100),M=[137,80,78,71,13,10,26,10],h=0;h<8;h++)T[h]=M[h];var l=8,c=y._bin,g=y.crc.crc,v=c.writeUint,b=c.writeUshort,S=c.writeASCII,u=y.encode.compressPNG(p,E,R,x,w);v(T,l,13),l+=4,S(T,l,"IHDR"),l+=4,v(T,l,E),l+=4,v(T,l,R),l+=4,T[l]=u.depth,l++,T[l]=u.ctype,l++,T[l]=0,l++,T[l]=0,l++,T[l]=0,l++,v(T,l,g(T,l-17,17)),l+=4,v(T,l,1),l+=4,S(T,l,"sRGB"),l+=4,T[l]=1,l++,v(T,l,g(T,l-5,5)),l+=4;var m=p.length>1;if(m&&(v(T,l,8),l+=4,S(T,l,"acTL"),l+=4,v(T,l,p.length),l+=4,v(T,l,0),l+=4,v(T,l,g(T,l-12,12)),l+=4),u.ctype==3){var _=u.plte.length;v(T,l,_*3),l+=4,S(T,l,"PLTE"),l+=4;for(var h=0;h<_;h++){var D=h*3,L=u.plte[h],P=L&255,N=L>>8&255,U=L>>16&255;T[l+D+0]=P,T[l+D+1]=N,T[l+D+2]=U}if(l+=_*3,v(T,l,g(T,l-_*3-4,_*3+4)),l+=4,u.gotAlpha){v(T,l,_),l+=4,S(T,l,"tRNS"),l+=4;for(var h=0;h<_;h++)T[l+h]=u.plte[h]>>24&255;l+=_,v(T,l,g(T,l-_-4,_+4)),l+=4}}for(var V=0,W=0;W<u.frames.length;W++){var G=u.frames[W];m&&(v(T,l,26),l+=4,S(T,l,"fcTL"),l+=4,v(T,l,V++),l+=4,v(T,l,G.rect.width),l+=4,v(T,l,G.rect.height),l+=4,v(T,l,G.rect.x),l+=4,v(T,l,G.rect.y),l+=4,b(T,l,A[W]),l+=2,b(T,l,1e3),l+=2,T[l]=G.dispose,l++,T[l]=G.blend,l++,v(T,l,g(T,l-30,30)),l+=4);var H=G.cimg,_=H.length;v(T,l,_+(W==0?0:4)),l+=4;var k=l;S(T,l,W==0?"IDAT":"fdAT"),l+=4,W!=0&&(v(T,l,V++),l+=4);for(var h=0;h<_;h++)T[l+h]=H[h];l+=_,v(T,l,g(T,k,l-k)),l+=4}return v(T,l,0),l+=4,S(T,l,"IEND"),l+=4,v(T,l,g(T,l-4,4)),l+=4,T.buffer.slice(0,l)},y.encode.compressPNG=function(p,E,R,x,A){for(var w=y.encode.compress(p,E,R,x,!1,A),T=0;T<p.length;T++){var M=w.frames[T];M.rect.width;var h=M.rect.height,l=M.bpl,c=M.bpp,g=new Uint8Array(h*l+h);M.cimg=y.encode._filterZero(M.img,h,c,l,g)}return w},y.encode.compress=function(p,E,R,x,A,w){w==null&&(w=!1);for(var T=6,M=8,h=4,l=255,c=0;c<p.length;c++)for(var g=new Uint8Array(p[c]),v=g.length,b=0;b<v;b+=4)l&=g[b+3];var S=l!=255,u={},m=[];if(p.length!=0&&(u[0]=0,m.push(0),x!=0&&x--),x!=0){var _=y.quantize(p,x,A);p=_.bufs;for(var b=0;b<_.plte.length;b++){var D=_.plte[b].est.rgba;u[D]==null&&(u[D]=m.length,m.push(D))}}else for(var c=0;c<p.length;c++)for(var L=new Uint32Array(p[c]),v=L.length,b=0;b<v;b++){var D=L[b];if((b<E||D!=L[b-1]&&D!=L[b-E])&&u[D]==null&&(u[D]=m.length,m.push(D),m.length>=300))break}var P=S?A:!1,N=m.length;N<=256&&w==!1&&(N<=2?M=1:N<=4?M=2:N<=16?M=4:M=8,A&&(M=8),S=!0);for(var U=[],c=0;c<p.length;c++){var V=new Uint8Array(p[c]),W=new Uint32Array(V.buffer),G=0,H=0,k=E,X=R,$=0;if(c!=0&&!P){for(var F=A||c==1||U[U.length-2].dispose==2?1:2,K=0,te=1e9,re=0;re<F;re++){for(var we=new Uint8Array(p[c-1-re]),le=new Uint32Array(p[c-1-re]),oe=E,ue=R,he=-1,ge=-1,Oe=0;Oe<R;Oe++)for(var Le=0;Le<E;Le++){var b=Oe*E+Le;W[b]!=le[b]&&(Le<oe&&(oe=Le),Le>he&&(he=Le),Oe<ue&&(ue=Oe),Oe>ge&&(ge=Oe))}var $e=he==-1?1:(he-oe+1)*(ge-ue+1);$e<te&&(te=$e,K=re,he==-1?(G=H=0,k=X=1):(G=oe,H=ue,k=he-oe+1,X=ge-ue+1))}var we=new Uint8Array(p[c-1-K]);K==1&&(U[U.length-1].dispose=2);var ce=new Uint8Array(k*X*4);new Uint32Array(ce.buffer),y._copyTile(we,E,R,ce,k,X,-G,-H,0),y._copyTile(V,E,R,ce,k,X,-G,-H,3)?(y._copyTile(V,E,R,ce,k,X,-G,-H,2),$=1):(y._copyTile(V,E,R,ce,k,X,-G,-H,0),$=0),V=ce,W=new Uint32Array(V.buffer)}var xe=4*k;if(N<=256&&w==!1){xe=Math.ceil(M*k/8);for(var ce=new Uint8Array(xe*X),Oe=0;Oe<X;Oe++){var b=Oe*xe,Ne=Oe*k;if(M==8)for(var Le=0;Le<k;Le++)ce[b+Le]=u[W[Ne+Le]];else if(M==4)for(var Le=0;Le<k;Le++)ce[b+(Le>>1)]|=u[W[Ne+Le]]<<4-(Le&1)*4;else if(M==2)for(var Le=0;Le<k;Le++)ce[b+(Le>>2)]|=u[W[Ne+Le]]<<6-(Le&3)*2;else if(M==1)for(var Le=0;Le<k;Le++)ce[b+(Le>>3)]|=u[W[Ne+Le]]<<7-(Le&7)*1}V=ce,T=3,h=1}else if(S==!1&&p.length==1){for(var ce=new Uint8Array(k*X*3),Xe=k*X,b=0;b<Xe;b++){var rt=b*3,nt=b*4;ce[rt]=V[nt],ce[rt+1]=V[nt+1],ce[rt+2]=V[nt+2]}V=ce,T=2,h=3,xe=3*k}U.push({rect:{x:G,y:H,width:k,height:X},img:V,bpl:xe,bpp:h,blend:$,dispose:P?1:0})}return{ctype:T,depth:M,plte:m,gotAlpha:S,frames:U}},y.encode._filterZero=function(p,E,R,x,A){for(var w=[],T=0;T<5;T++)if(!(E*x>5e5&&(T==2||T==3||T==4))){for(var M=0;M<E;M++)y.encode._filterLine(A,p,M,x,R,T);if(w.push(C.deflate(A)),R==1)break}for(var h,l=1e9,c=0;c<w.length;c++)w[c].length<l&&(h=c,l=w[c].length);return w[h]},y.encode._filterLine=function(p,E,R,x,A,w){var T=R*x,M=T+R,h=y.decode._paeth;if(p[M]=w,M++,w==0)for(var l=0;l<x;l++)p[M+l]=E[T+l];else if(w==1){for(var l=0;l<A;l++)p[M+l]=E[T+l];for(var l=A;l<x;l++)p[M+l]=E[T+l]-E[T+l-A]+256&255}else if(R==0){for(var l=0;l<A;l++)p[M+l]=E[T+l];if(w==2)for(var l=A;l<x;l++)p[M+l]=E[T+l];if(w==3)for(var l=A;l<x;l++)p[M+l]=E[T+l]-(E[T+l-A]>>1)+256&255;if(w==4)for(var l=A;l<x;l++)p[M+l]=E[T+l]-h(E[T+l-A],0,0)+256&255}else{if(w==2)for(var l=0;l<x;l++)p[M+l]=E[T+l]+256-E[T+l-x]&255;if(w==3){for(var l=0;l<A;l++)p[M+l]=E[T+l]+256-(E[T+l-x]>>1)&255;for(var l=A;l<x;l++)p[M+l]=E[T+l]+256-(E[T+l-x]+E[T+l-A]>>1)&255}if(w==4){for(var l=0;l<A;l++)p[M+l]=E[T+l]+256-h(0,E[T+l-x],0)&255;for(var l=A;l<x;l++)p[M+l]=E[T+l]+256-h(E[T+l-A],E[T+l-x],E[T+l-A-x])&255}}},y.crc={table:(function(){for(var p=new Uint32Array(256),E=0;E<256;E++){for(var R=E,x=0;x<8;x++)R&1?R=3988292384^R>>>1:R=R>>>1;p[E]=R}return p})(),update:function(p,E,R,x){for(var A=0;A<x;A++)p=y.crc.table[(p^E[R+A])&255]^p>>>8;return p},crc:function(p,E,R){return y.crc.update(4294967295,p,E,R)^4294967295}},y.quantize=function(p,E,R){for(var x=[],A=0,w=0;w<p.length;w++)x.push(y.encode.alphaMul(new Uint8Array(p[w]),R)),A+=p[w].byteLength;for(var T=new Uint8Array(A),M=new Uint32Array(T.buffer),h=0,w=0;w<x.length;w++){for(var l=x[w],c=l.length,g=0;g<c;g++)T[h+g]=l[g];h+=c}var v={i0:0,i1:T.length,bst:null,est:null,tdst:0,left:null,right:null};v.bst=y.quantize.stats(T,v.i0,v.i1),v.est=y.quantize.estats(v.bst);for(var b=[v];b.length<E;){for(var S=0,u=0,w=0;w<b.length;w++)b[w].est.L>S&&(S=b[w].est.L,u=w);if(S<.001)break;var m=b[u],_=y.quantize.splitPixels(T,M,m.i0,m.i1,m.est.e,m.est.eMq255),D={i0:m.i0,i1:_,bst:null,est:null,tdst:0,left:null,right:null};D.bst=y.quantize.stats(T,D.i0,D.i1),D.est=y.quantize.estats(D.bst);var L={i0:_,i1:m.i1,bst:null,est:null,tdst:0,left:null,right:null};L.bst={R:[],m:[],N:m.bst.N-D.bst.N};for(var w=0;w<16;w++)L.bst.R[w]=m.bst.R[w]-D.bst.R[w];for(var w=0;w<4;w++)L.bst.m[w]=m.bst.m[w]-D.bst.m[w];L.est=y.quantize.estats(L.bst),m.left=D,m.right=L,b[u]=D,b.push(L)}b.sort(function(F,K){return K.bst.N-F.bst.N});for(var P=0;P<x.length;P++){for(var N=y.quantize.planeDst,U=new Uint8Array(x[P].buffer),V=new Uint32Array(x[P].buffer),W=U.length,w=0;w<W;w+=4){for(var G=U[w]*.00392156862745098,H=U[w+1]*(1/255),k=U[w+2]*(1/255),X=U[w+3]*(1/255),$=v;$.left;)$=N($.est,G,H,k,X)<=0?$.left:$.right;V[w>>2]=$.est.rgba}x[P]=V.buffer}return{bufs:x,plte:b}},y.quantize.getNearest=function(p,E,R,x,A){if(p.left==null)return p.tdst=y.quantize.dist(p.est.q,E,R,x,A),p;var w=y.quantize.planeDst(p.est,E,R,x,A),T=p.left,M=p.right;w>0&&(T=p.right,M=p.left);var h=y.quantize.getNearest(T,E,R,x,A);if(h.tdst<=w*w)return h;var l=y.quantize.getNearest(M,E,R,x,A);return l.tdst<h.tdst?l:h},y.quantize.planeDst=function(p,E,R,x,A){var w=p.e;return w[0]*E+w[1]*R+w[2]*x+w[3]*A-p.eMq},y.quantize.dist=function(p,E,R,x,A){var w=E-p[0],T=R-p[1],M=x-p[2],h=A-p[3];return w*w+T*T+M*M+h*h},y.quantize.splitPixels=function(p,E,R,x,A,w){var T=y.quantize.vecDot;for(x-=4;R<x;){for(;T(p,R,A)<=w;)R+=4;for(;T(p,x,A)>w;)x-=4;if(R>=x)break;var M=E[R>>2];E[R>>2]=E[x>>2],E[x>>2]=M,R+=4,x-=4}for(;T(p,R,A)>w;)R-=4;return R+4},y.quantize.vecDot=function(p,E,R){return p[E]*R[0]+p[E+1]*R[1]+p[E+2]*R[2]+p[E+3]*R[3]},y.quantize.stats=function(p,E,R){for(var x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=[0,0,0,0],w=R-E>>2,T=E;T<R;T+=4){var M=p[T]*.00392156862745098,h=p[T+1]*(1/255),l=p[T+2]*(1/255),c=p[T+3]*(1/255);A[0]+=M,A[1]+=h,A[2]+=l,A[3]+=c,x[0]+=M*M,x[1]+=M*h,x[2]+=M*l,x[3]+=M*c,x[5]+=h*h,x[6]+=h*l,x[7]+=h*c,x[10]+=l*l,x[11]+=l*c,x[15]+=c*c}return x[4]=x[1],x[8]=x[2],x[12]=x[3],x[9]=x[6],x[13]=x[7],x[14]=x[11],{R:x,m:A,N:w}},y.quantize.estats=function(p){var E=p.R,R=p.m,x=p.N,A=R[0],w=R[1],T=R[2],M=R[3],h=x==0?0:1/x,l=[E[0]-A*A*h,E[1]-A*w*h,E[2]-A*T*h,E[3]-A*M*h,E[4]-w*A*h,E[5]-w*w*h,E[6]-w*T*h,E[7]-w*M*h,E[8]-T*A*h,E[9]-T*w*h,E[10]-T*T*h,E[11]-T*M*h,E[12]-M*A*h,E[13]-M*w*h,E[14]-M*T*h,E[15]-M*M*h],c=l,g=y.M4,v=[.5,.5,.5,.5],b=0,S=0;if(x!=0)for(var u=0;u<10&&(v=g.multVec(c,v),S=Math.sqrt(g.dot(v,v)),v=g.sml(1/S,v),!(Math.abs(S-b)<1e-9));u++)b=S;var m=[A*h,w*h,T*h,M*h],_=g.dot(g.sml(255,m),v),D=m[3]<.001?0:1/m[3];return{Cov:l,q:m,e:v,L:b,eMq255:_,eMq:g.dot(v,m),rgba:(Math.round(255*m[3])<<24|Math.round(255*m[2]*D)<<16|Math.round(255*m[1]*D)<<8|Math.round(255*m[0]*D)<<0)>>>0}},y.M4={multVec:function(p,E){return[p[0]*E[0]+p[1]*E[1]+p[2]*E[2]+p[3]*E[3],p[4]*E[0]+p[5]*E[1]+p[6]*E[2]+p[7]*E[3],p[8]*E[0]+p[9]*E[1]+p[10]*E[2]+p[11]*E[3],p[12]*E[0]+p[13]*E[1]+p[14]*E[2]+p[15]*E[3]]},dot:function(p,E){return p[0]*E[0]+p[1]*E[1]+p[2]*E[2]+p[3]*E[3]},sml:function(p,E){return[p*E[0],p*E[1],p*E[2],p*E[3]]}},y.encode.alphaMul=function(p,E){for(var R=new Uint8Array(p.length),x=p.length>>2,A=0;A<x;A++){var w=A<<2,T=p[w+3];E&&(T=T<128?0:255);var M=T*(1/255);R[w+0]=p[w+0]*M,R[w+1]=p[w+1]*M,R[w+2]=p[w+2]*M,R[w+3]=T}return R}})(a,d)})()}),"./node_modules/upng-js/node_modules/pako/index.js":((s,i,n)=>{var a=n("./node_modules/upng-js/node_modules/pako/lib/utils/common.js").assign,d=n("./node_modules/upng-js/node_modules/pako/lib/deflate.js"),y=n("./node_modules/upng-js/node_modules/pako/lib/inflate.js"),C=n("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),p={};a(p,d,y,C),s.exports=p}),"./node_modules/upng-js/node_modules/pako/lib/deflate.js":((s,i,n)=>{var a=n("./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js"),d=n("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),y=n("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),C=n("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),p=n("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),E=Object.prototype.toString,R=0,x=4,A=0,w=1,T=2,M=-1,h=0,l=8;function c(S){if(!(this instanceof c))return new c(S);this.options=d.assign({level:M,method:l,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},S||{});var u=this.options;u.raw&&u.windowBits>0?u.windowBits=-u.windowBits:u.gzip&&u.windowBits>0&&u.windowBits<16&&(u.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var m=a.deflateInit2(this.strm,u.level,u.method,u.windowBits,u.memLevel,u.strategy);if(m!==A)throw new Error(C[m]);if(u.header&&a.deflateSetHeader(this.strm,u.header),u.dictionary){var _;if(typeof u.dictionary=="string"?_=y.string2buf(u.dictionary):E.call(u.dictionary)==="[object ArrayBuffer]"?_=new Uint8Array(u.dictionary):_=u.dictionary,m=a.deflateSetDictionary(this.strm,_),m!==A)throw new Error(C[m]);this._dict_set=!0}}c.prototype.push=function(S,u){var m=this.strm,_=this.options.chunkSize,D,L;if(this.ended)return!1;L=u===~~u?u:u===!0?x:R,typeof S=="string"?m.input=y.string2buf(S):E.call(S)==="[object ArrayBuffer]"?m.input=new Uint8Array(S):m.input=S,m.next_in=0,m.avail_in=m.input.length;do{if(m.avail_out===0&&(m.output=new d.Buf8(_),m.next_out=0,m.avail_out=_),D=a.deflate(m,L),D!==w&&D!==A)return this.onEnd(D),this.ended=!0,!1;(m.avail_out===0||m.avail_in===0&&(L===x||L===T))&&(this.options.to==="string"?this.onData(y.buf2binstring(d.shrinkBuf(m.output,m.next_out))):this.onData(d.shrinkBuf(m.output,m.next_out)))}while((m.avail_in>0||m.avail_out===0)&&D!==w);return L===x?(D=a.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===A):(L===T&&(this.onEnd(A),m.avail_out=0),!0)},c.prototype.onData=function(S){this.chunks.push(S)},c.prototype.onEnd=function(S){S===A&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=d.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function g(S,u){var m=new c(u);if(m.push(S,!0),m.err)throw m.msg||C[m.err];return m.result}function v(S,u){return u=u||{},u.raw=!0,g(S,u)}function b(S,u){return u=u||{},u.gzip=!0,g(S,u)}i.Deflate=c,i.deflate=g,i.deflateRaw=v,i.gzip=b}),"./node_modules/upng-js/node_modules/pako/lib/inflate.js":((s,i,n)=>{var a=n("./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js"),d=n("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),y=n("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),C=n("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),p=n("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),E=n("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),R=n("./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js"),x=Object.prototype.toString;function A(M){if(!(this instanceof A))return new A(M);this.options=d.assign({chunkSize:16384,windowBits:0,to:""},M||{});var h=this.options;h.raw&&h.windowBits>=0&&h.windowBits<16&&(h.windowBits=-h.windowBits,h.windowBits===0&&(h.windowBits=-15)),h.windowBits>=0&&h.windowBits<16&&!(M&&M.windowBits)&&(h.windowBits+=32),h.windowBits>15&&h.windowBits<48&&(h.windowBits&15)===0&&(h.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new E,this.strm.avail_out=0;var l=a.inflateInit2(this.strm,h.windowBits);if(l!==C.Z_OK)throw new Error(p[l]);if(this.header=new R,a.inflateGetHeader(this.strm,this.header),h.dictionary&&(typeof h.dictionary=="string"?h.dictionary=y.string2buf(h.dictionary):x.call(h.dictionary)==="[object ArrayBuffer]"&&(h.dictionary=new Uint8Array(h.dictionary)),h.raw&&(l=a.inflateSetDictionary(this.strm,h.dictionary),l!==C.Z_OK)))throw new Error(p[l])}A.prototype.push=function(M,h){var l=this.strm,c=this.options.chunkSize,g=this.options.dictionary,v,b,S,u,m,_=!1;if(this.ended)return!1;b=h===~~h?h:h===!0?C.Z_FINISH:C.Z_NO_FLUSH,typeof M=="string"?l.input=y.binstring2buf(M):x.call(M)==="[object ArrayBuffer]"?l.input=new Uint8Array(M):l.input=M,l.next_in=0,l.avail_in=l.input.length;do{if(l.avail_out===0&&(l.output=new d.Buf8(c),l.next_out=0,l.avail_out=c),v=a.inflate(l,C.Z_NO_FLUSH),v===C.Z_NEED_DICT&&g&&(v=a.inflateSetDictionary(this.strm,g)),v===C.Z_BUF_ERROR&&_===!0&&(v=C.Z_OK,_=!1),v!==C.Z_STREAM_END&&v!==C.Z_OK)return this.onEnd(v),this.ended=!0,!1;l.next_out&&(l.avail_out===0||v===C.Z_STREAM_END||l.avail_in===0&&(b===C.Z_FINISH||b===C.Z_SYNC_FLUSH))&&(this.options.to==="string"?(S=y.utf8border(l.output,l.next_out),u=l.next_out-S,m=y.buf2string(l.output,S),l.next_out=u,l.avail_out=c-u,u&&d.arraySet(l.output,l.output,S,u,0),this.onData(m)):this.onData(d.shrinkBuf(l.output,l.next_out))),l.avail_in===0&&l.avail_out===0&&(_=!0)}while((l.avail_in>0||l.avail_out===0)&&v!==C.Z_STREAM_END);return v===C.Z_STREAM_END&&(b=C.Z_FINISH),b===C.Z_FINISH?(v=a.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===C.Z_OK):(b===C.Z_SYNC_FLUSH&&(this.onEnd(C.Z_OK),l.avail_out=0),!0)},A.prototype.onData=function(M){this.chunks.push(M)},A.prototype.onEnd=function(M){M===C.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=d.flattenChunks(this.chunks)),this.chunks=[],this.err=M,this.msg=this.strm.msg};function w(M,h){var l=new A(h);if(l.push(M,!0),l.err)throw l.msg||p[l.err];return l.result}function T(M,h){return h=h||{},h.raw=!0,w(M,h)}i.Inflate=A,i.inflate=w,i.inflateRaw=T,i.ungzip=w}),"./node_modules/upng-js/node_modules/pako/lib/utils/common.js":((s,i)=>{var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function a(C,p){return Object.prototype.hasOwnProperty.call(C,p)}i.assign=function(C){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var E=p.shift();if(E){if(typeof E!="object")throw new TypeError(E+"must be non-object");for(var R in E)a(E,R)&&(C[R]=E[R])}}return C},i.shrinkBuf=function(C,p){return C.length===p?C:C.subarray?C.subarray(0,p):(C.length=p,C)};var d={arraySet:function(C,p,E,R,x){if(p.subarray&&C.subarray){C.set(p.subarray(E,E+R),x);return}for(var A=0;A<R;A++)C[x+A]=p[E+A]},flattenChunks:function(C){var p,E,R,x,A,w;for(R=0,p=0,E=C.length;p<E;p++)R+=C[p].length;for(w=new Uint8Array(R),x=0,p=0,E=C.length;p<E;p++)A=C[p],w.set(A,x),x+=A.length;return w}},y={arraySet:function(C,p,E,R,x){for(var A=0;A<R;A++)C[x+A]=p[E+A]},flattenChunks:function(C){return[].concat.apply([],C)}};i.setTyped=function(C){C?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,d)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,y))},i.setTyped(n)}),"./node_modules/upng-js/node_modules/pako/lib/utils/strings.js":((s,i,n)=>{var a=n("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),d=!0,y=!0;try{String.fromCharCode.apply(null,[0])}catch{d=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{y=!1}for(var C=new a.Buf8(256),p=0;p<256;p++)C[p]=p>=252?6:p>=248?5:p>=240?4:p>=224?3:p>=192?2:1;C[254]=C[254]=1,i.string2buf=function(R){var x,A,w,T,M,h=R.length,l=0;for(T=0;T<h;T++)A=R.charCodeAt(T),(A&64512)===55296&&T+1<h&&(w=R.charCodeAt(T+1),(w&64512)===56320&&(A=65536+(A-55296<<10)+(w-56320),T++)),l+=A<128?1:A<2048?2:A<65536?3:4;for(x=new a.Buf8(l),M=0,T=0;M<l;T++)A=R.charCodeAt(T),(A&64512)===55296&&T+1<h&&(w=R.charCodeAt(T+1),(w&64512)===56320&&(A=65536+(A-55296<<10)+(w-56320),T++)),A<128?x[M++]=A:A<2048?(x[M++]=192|A>>>6,x[M++]=128|A&63):A<65536?(x[M++]=224|A>>>12,x[M++]=128|A>>>6&63,x[M++]=128|A&63):(x[M++]=240|A>>>18,x[M++]=128|A>>>12&63,x[M++]=128|A>>>6&63,x[M++]=128|A&63);return x};function E(R,x){if(x<65534&&(R.subarray&&y||!R.subarray&&d))return String.fromCharCode.apply(null,a.shrinkBuf(R,x));for(var A="",w=0;w<x;w++)A+=String.fromCharCode(R[w]);return A}i.buf2binstring=function(R){return E(R,R.length)},i.binstring2buf=function(R){for(var x=new a.Buf8(R.length),A=0,w=x.length;A<w;A++)x[A]=R.charCodeAt(A);return x},i.buf2string=function(R,x){var A,w,T,M,h=x||R.length,l=new Array(h*2);for(w=0,A=0;A<h;){if(T=R[A++],T<128){l[w++]=T;continue}if(M=C[T],M>4){l[w++]=65533,A+=M-1;continue}for(T&=M===2?31:M===3?15:7;M>1&&A<h;)T=T<<6|R[A++]&63,M--;if(M>1){l[w++]=65533;continue}T<65536?l[w++]=T:(T-=65536,l[w++]=55296|T>>10&1023,l[w++]=56320|T&1023)}return E(l,w)},i.utf8border=function(R,x){var A;for(x=x||R.length,x>R.length&&(x=R.length),A=x-1;A>=0&&(R[A]&192)===128;)A--;return A<0||A===0?x:A+C[R[A]]>x?A:x}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js":(s=>{function i(n,a,d,y){for(var C=n&65535|0,p=n>>>16&65535|0,E=0;d!==0;){E=d>2e3?2e3:d,d-=E;do C=C+a[y++]|0,p=p+C|0;while(--E);C%=65521,p%=65521}return C|p<<16|0}s.exports=i}),"./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js":(s=>{s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js":(s=>{function i(){for(var d,y=[],C=0;C<256;C++){d=C;for(var p=0;p<8;p++)d=d&1?3988292384^d>>>1:d>>>1;y[C]=d}return y}var n=i();function a(d,y,C,p){var E=n,R=p+C;d^=-1;for(var x=p;x<R;x++)d=d>>>8^E[(d^y[x])&255];return d^-1}s.exports=a}),"./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js":((s,i,n)=>{var a=n("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),d=n("./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js"),y=n("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),C=n("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),p=n("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),E=0,R=1,x=3,A=4,w=5,T=0,M=1,h=-2,l=-3,c=-5,g=-1,v=1,b=2,S=3,u=4,m=0,_=2,D=8,L=9,P=15,N=8,U=29,V=256,W=V+1+U,G=30,H=19,k=2*W+1,X=15,$=3,F=258,K=F+$+1,te=32,re=42,le=69,oe=73,ue=91,he=103,ge=113,Oe=666,Le=1,$e=2,we=3,ce=4,xe=3;function Ne(j,Me){return j.msg=p[Me],Me}function Xe(j){return(j<<1)-(j>4?9:0)}function rt(j){for(var Me=j.length;--Me>=0;)j[Me]=0}function nt(j){var Me=j.state,Ae=Me.pending;Ae>j.avail_out&&(Ae=j.avail_out),Ae!==0&&(a.arraySet(j.output,Me.pending_buf,Me.pending_out,Ae,j.next_out),j.next_out+=Ae,Me.pending_out+=Ae,j.total_out+=Ae,j.avail_out-=Ae,Me.pending-=Ae,Me.pending===0&&(Me.pending_out=0))}function et(j,Me){d._tr_flush_block(j,j.block_start>=0?j.block_start:-1,j.strstart-j.block_start,Me),j.block_start=j.strstart,nt(j.strm)}function Ze(j,Me){j.pending_buf[j.pending++]=Me}function qe(j,Me){j.pending_buf[j.pending++]=Me>>>8&255,j.pending_buf[j.pending++]=Me&255}function Ve(j,Me,Ae,ee){var pe=j.avail_in;return pe>ee&&(pe=ee),pe===0?0:(j.avail_in-=pe,a.arraySet(Me,j.input,j.next_in,pe,Ae),j.state.wrap===1?j.adler=y(j.adler,Me,pe,Ae):j.state.wrap===2&&(j.adler=C(j.adler,Me,pe,Ae)),j.next_in+=pe,j.total_in+=pe,pe)}function Ge(j,Me){var Ae=j.max_chain_length,ee=j.strstart,pe,De,lt=j.prev_length,ct=j.nice_match,st=j.strstart>j.w_size-K?j.strstart-(j.w_size-K):0,xt=j.window,Zt=j.w_mask,St=j.prev,vt=j.strstart+F,yt=xt[ee+lt-1],Gt=xt[ee+lt];j.prev_length>=j.good_match&&(Ae>>=2),ct>j.lookahead&&(ct=j.lookahead);do if(pe=Me,!(xt[pe+lt]!==Gt||xt[pe+lt-1]!==yt||xt[pe]!==xt[ee]||xt[++pe]!==xt[ee+1])){ee+=2,pe++;do;while(xt[++ee]===xt[++pe]&&xt[++ee]===xt[++pe]&&xt[++ee]===xt[++pe]&&xt[++ee]===xt[++pe]&&xt[++ee]===xt[++pe]&&xt[++ee]===xt[++pe]&&xt[++ee]===xt[++pe]&&xt[++ee]===xt[++pe]&&ee<vt);if(De=F-(vt-ee),ee=vt-F,De>lt){if(j.match_start=Me,lt=De,De>=ct)break;yt=xt[ee+lt-1],Gt=xt[ee+lt]}}while((Me=St[Me&Zt])>st&&--Ae!==0);return lt<=j.lookahead?lt:j.lookahead}function at(j){var Me=j.w_size,Ae,ee,pe,De,lt;do{if(De=j.window_size-j.lookahead-j.strstart,j.strstart>=Me+(Me-K)){a.arraySet(j.window,j.window,Me,Me,0),j.match_start-=Me,j.strstart-=Me,j.block_start-=Me,ee=j.hash_size,Ae=ee;do pe=j.head[--Ae],j.head[Ae]=pe>=Me?pe-Me:0;while(--ee);ee=Me,Ae=ee;do pe=j.prev[--Ae],j.prev[Ae]=pe>=Me?pe-Me:0;while(--ee);De+=Me}if(j.strm.avail_in===0)break;if(ee=Ve(j.strm,j.window,j.strstart+j.lookahead,De),j.lookahead+=ee,j.lookahead+j.insert>=$)for(lt=j.strstart-j.insert,j.ins_h=j.window[lt],j.ins_h=(j.ins_h<<j.hash_shift^j.window[lt+1])&j.hash_mask;j.insert&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[lt+$-1])&j.hash_mask,j.prev[lt&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=lt,lt++,j.insert--,!(j.lookahead+j.insert<$)););}while(j.lookahead<K&&j.strm.avail_in!==0)}function ot(j,Me){var Ae=65535;for(Ae>j.pending_buf_size-5&&(Ae=j.pending_buf_size-5);;){if(j.lookahead<=1){if(at(j),j.lookahead===0&&Me===E)return Le;if(j.lookahead===0)break}j.strstart+=j.lookahead,j.lookahead=0;var ee=j.block_start+Ae;if((j.strstart===0||j.strstart>=ee)&&(j.lookahead=j.strstart-ee,j.strstart=ee,et(j,!1),j.strm.avail_out===0)||j.strstart-j.block_start>=j.w_size-K&&(et(j,!1),j.strm.avail_out===0))return Le}return j.insert=0,Me===A?(et(j,!0),j.strm.avail_out===0?we:ce):(j.strstart>j.block_start&&(et(j,!1),j.strm.avail_out===0),Le)}function J(j,Me){for(var Ae,ee;;){if(j.lookahead<K){if(at(j),j.lookahead<K&&Me===E)return Le;if(j.lookahead===0)break}if(Ae=0,j.lookahead>=$&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+$-1])&j.hash_mask,Ae=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart),Ae!==0&&j.strstart-Ae<=j.w_size-K&&(j.match_length=Ge(j,Ae)),j.match_length>=$)if(ee=d._tr_tally(j,j.strstart-j.match_start,j.match_length-$),j.lookahead-=j.match_length,j.match_length<=j.max_lazy_match&&j.lookahead>=$){j.match_length--;do j.strstart++,j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+$-1])&j.hash_mask,Ae=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart;while(--j.match_length!==0);j.strstart++}else j.strstart+=j.match_length,j.match_length=0,j.ins_h=j.window[j.strstart],j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+1])&j.hash_mask;else ee=d._tr_tally(j,0,j.window[j.strstart]),j.lookahead--,j.strstart++;if(ee&&(et(j,!1),j.strm.avail_out===0))return Le}return j.insert=j.strstart<$-1?j.strstart:$-1,Me===A?(et(j,!0),j.strm.avail_out===0?we:ce):j.last_lit&&(et(j,!1),j.strm.avail_out===0)?Le:$e}function ne(j,Me){for(var Ae,ee,pe;;){if(j.lookahead<K){if(at(j),j.lookahead<K&&Me===E)return Le;if(j.lookahead===0)break}if(Ae=0,j.lookahead>=$&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+$-1])&j.hash_mask,Ae=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart),j.prev_length=j.match_length,j.prev_match=j.match_start,j.match_length=$-1,Ae!==0&&j.prev_length<j.max_lazy_match&&j.strstart-Ae<=j.w_size-K&&(j.match_length=Ge(j,Ae),j.match_length<=5&&(j.strategy===v||j.match_length===$&&j.strstart-j.match_start>4096)&&(j.match_length=$-1)),j.prev_length>=$&&j.match_length<=j.prev_length){pe=j.strstart+j.lookahead-$,ee=d._tr_tally(j,j.strstart-1-j.prev_match,j.prev_length-$),j.lookahead-=j.prev_length-1,j.prev_length-=2;do++j.strstart<=pe&&(j.ins_h=(j.ins_h<<j.hash_shift^j.window[j.strstart+$-1])&j.hash_mask,Ae=j.prev[j.strstart&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=j.strstart);while(--j.prev_length!==0);if(j.match_available=0,j.match_length=$-1,j.strstart++,ee&&(et(j,!1),j.strm.avail_out===0))return Le}else if(j.match_available){if(ee=d._tr_tally(j,0,j.window[j.strstart-1]),ee&&et(j,!1),j.strstart++,j.lookahead--,j.strm.avail_out===0)return Le}else j.match_available=1,j.strstart++,j.lookahead--}return j.match_available&&(ee=d._tr_tally(j,0,j.window[j.strstart-1]),j.match_available=0),j.insert=j.strstart<$-1?j.strstart:$-1,Me===A?(et(j,!0),j.strm.avail_out===0?we:ce):j.last_lit&&(et(j,!1),j.strm.avail_out===0)?Le:$e}function se(j,Me){for(var Ae,ee,pe,De,lt=j.window;;){if(j.lookahead<=F){if(at(j),j.lookahead<=F&&Me===E)return Le;if(j.lookahead===0)break}if(j.match_length=0,j.lookahead>=$&&j.strstart>0&&(pe=j.strstart-1,ee=lt[pe],ee===lt[++pe]&&ee===lt[++pe]&&ee===lt[++pe])){De=j.strstart+F;do;while(ee===lt[++pe]&&ee===lt[++pe]&&ee===lt[++pe]&&ee===lt[++pe]&&ee===lt[++pe]&&ee===lt[++pe]&&ee===lt[++pe]&&ee===lt[++pe]&&pe<De);j.match_length=F-(De-pe),j.match_length>j.lookahead&&(j.match_length=j.lookahead)}if(j.match_length>=$?(Ae=d._tr_tally(j,1,j.match_length-$),j.lookahead-=j.match_length,j.strstart+=j.match_length,j.match_length=0):(Ae=d._tr_tally(j,0,j.window[j.strstart]),j.lookahead--,j.strstart++),Ae&&(et(j,!1),j.strm.avail_out===0))return Le}return j.insert=0,Me===A?(et(j,!0),j.strm.avail_out===0?we:ce):j.last_lit&&(et(j,!1),j.strm.avail_out===0)?Le:$e}function _e(j,Me){for(var Ae;;){if(j.lookahead===0&&(at(j),j.lookahead===0)){if(Me===E)return Le;break}if(j.match_length=0,Ae=d._tr_tally(j,0,j.window[j.strstart]),j.lookahead--,j.strstart++,Ae&&(et(j,!1),j.strm.avail_out===0))return Le}return j.insert=0,Me===A?(et(j,!0),j.strm.avail_out===0?we:ce):j.last_lit&&(et(j,!1),j.strm.avail_out===0)?Le:$e}function Se(j,Me,Ae,ee,pe){this.good_length=j,this.max_lazy=Me,this.nice_length=Ae,this.max_chain=ee,this.func=pe}var Pe;Pe=[new Se(0,0,0,0,ot),new Se(4,4,8,4,J),new Se(4,5,16,8,J),new Se(4,6,32,32,J),new Se(4,4,16,16,ne),new Se(8,16,32,32,ne),new Se(8,16,128,128,ne),new Se(8,32,128,256,ne),new Se(32,128,258,1024,ne),new Se(32,258,258,4096,ne)];function Ie(j){j.window_size=2*j.w_size,rt(j.head),j.max_lazy_match=Pe[j.level].max_lazy,j.good_match=Pe[j.level].good_length,j.nice_match=Pe[j.level].nice_length,j.max_chain_length=Pe[j.level].max_chain,j.strstart=0,j.block_start=0,j.lookahead=0,j.insert=0,j.match_length=j.prev_length=$-1,j.match_available=0,j.ins_h=0}function Q(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=D,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(k*2),this.dyn_dtree=new a.Buf16((2*G+1)*2),this.bl_tree=new a.Buf16((2*H+1)*2),rt(this.dyn_ltree),rt(this.dyn_dtree),rt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(X+1),this.heap=new a.Buf16(2*W+1),rt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*W+1),rt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function me(j){var Me;return!j||!j.state?Ne(j,h):(j.total_in=j.total_out=0,j.data_type=_,Me=j.state,Me.pending=0,Me.pending_out=0,Me.wrap<0&&(Me.wrap=-Me.wrap),Me.status=Me.wrap?re:ge,j.adler=Me.wrap===2?0:1,Me.last_flush=E,d._tr_init(Me),T)}function be(j){var Me=me(j);return Me===T&&Ie(j.state),Me}function ke(j,Me){return!j||!j.state||j.state.wrap!==2?h:(j.state.gzhead=Me,T)}function ve(j,Me,Ae,ee,pe,De){if(!j)return h;var lt=1;if(Me===g&&(Me=6),ee<0?(lt=0,ee=-ee):ee>15&&(lt=2,ee-=16),pe<1||pe>L||Ae!==D||ee<8||ee>15||Me<0||Me>9||De<0||De>u)return Ne(j,h);ee===8&&(ee=9);var ct=new Q;return j.state=ct,ct.strm=j,ct.wrap=lt,ct.gzhead=null,ct.w_bits=ee,ct.w_size=1<<ct.w_bits,ct.w_mask=ct.w_size-1,ct.hash_bits=pe+7,ct.hash_size=1<<ct.hash_bits,ct.hash_mask=ct.hash_size-1,ct.hash_shift=~~((ct.hash_bits+$-1)/$),ct.window=new a.Buf8(ct.w_size*2),ct.head=new a.Buf16(ct.hash_size),ct.prev=new a.Buf16(ct.w_size),ct.lit_bufsize=1<<pe+6,ct.pending_buf_size=ct.lit_bufsize*4,ct.pending_buf=new a.Buf8(ct.pending_buf_size),ct.d_buf=1*ct.lit_bufsize,ct.l_buf=3*ct.lit_bufsize,ct.level=Me,ct.strategy=De,ct.method=Ae,be(j)}function ze(j,Me){return ve(j,Me,D,P,N,m)}function q(j,Me){var Ae,ee,pe,De;if(!j||!j.state||Me>w||Me<0)return j?Ne(j,h):h;if(ee=j.state,!j.output||!j.input&&j.avail_in!==0||ee.status===Oe&&Me!==A)return Ne(j,j.avail_out===0?c:h);if(ee.strm=j,Ae=ee.last_flush,ee.last_flush=Me,ee.status===re)if(ee.wrap===2)j.adler=0,Ze(ee,31),Ze(ee,139),Ze(ee,8),ee.gzhead?(Ze(ee,(ee.gzhead.text?1:0)+(ee.gzhead.hcrc?2:0)+(ee.gzhead.extra?4:0)+(ee.gzhead.name?8:0)+(ee.gzhead.comment?16:0)),Ze(ee,ee.gzhead.time&255),Ze(ee,ee.gzhead.time>>8&255),Ze(ee,ee.gzhead.time>>16&255),Ze(ee,ee.gzhead.time>>24&255),Ze(ee,ee.level===9?2:ee.strategy>=b||ee.level<2?4:0),Ze(ee,ee.gzhead.os&255),ee.gzhead.extra&&ee.gzhead.extra.length&&(Ze(ee,ee.gzhead.extra.length&255),Ze(ee,ee.gzhead.extra.length>>8&255)),ee.gzhead.hcrc&&(j.adler=C(j.adler,ee.pending_buf,ee.pending,0)),ee.gzindex=0,ee.status=le):(Ze(ee,0),Ze(ee,0),Ze(ee,0),Ze(ee,0),Ze(ee,0),Ze(ee,ee.level===9?2:ee.strategy>=b||ee.level<2?4:0),Ze(ee,xe),ee.status=ge);else{var lt=D+(ee.w_bits-8<<4)<<8,ct=-1;ee.strategy>=b||ee.level<2?ct=0:ee.level<6?ct=1:ee.level===6?ct=2:ct=3,lt|=ct<<6,ee.strstart!==0&&(lt|=te),lt+=31-lt%31,ee.status=ge,qe(ee,lt),ee.strstart!==0&&(qe(ee,j.adler>>>16),qe(ee,j.adler&65535)),j.adler=1}if(ee.status===le)if(ee.gzhead.extra){for(pe=ee.pending;ee.gzindex<(ee.gzhead.extra.length&65535)&&!(ee.pending===ee.pending_buf_size&&(ee.gzhead.hcrc&&ee.pending>pe&&(j.adler=C(j.adler,ee.pending_buf,ee.pending-pe,pe)),nt(j),pe=ee.pending,ee.pending===ee.pending_buf_size));)Ze(ee,ee.gzhead.extra[ee.gzindex]&255),ee.gzindex++;ee.gzhead.hcrc&&ee.pending>pe&&(j.adler=C(j.adler,ee.pending_buf,ee.pending-pe,pe)),ee.gzindex===ee.gzhead.extra.length&&(ee.gzindex=0,ee.status=oe)}else ee.status=oe;if(ee.status===oe)if(ee.gzhead.name){pe=ee.pending;do{if(ee.pending===ee.pending_buf_size&&(ee.gzhead.hcrc&&ee.pending>pe&&(j.adler=C(j.adler,ee.pending_buf,ee.pending-pe,pe)),nt(j),pe=ee.pending,ee.pending===ee.pending_buf_size)){De=1;break}ee.gzindex<ee.gzhead.name.length?De=ee.gzhead.name.charCodeAt(ee.gzindex++)&255:De=0,Ze(ee,De)}while(De!==0);ee.gzhead.hcrc&&ee.pending>pe&&(j.adler=C(j.adler,ee.pending_buf,ee.pending-pe,pe)),De===0&&(ee.gzindex=0,ee.status=ue)}else ee.status=ue;if(ee.status===ue)if(ee.gzhead.comment){pe=ee.pending;do{if(ee.pending===ee.pending_buf_size&&(ee.gzhead.hcrc&&ee.pending>pe&&(j.adler=C(j.adler,ee.pending_buf,ee.pending-pe,pe)),nt(j),pe=ee.pending,ee.pending===ee.pending_buf_size)){De=1;break}ee.gzindex<ee.gzhead.comment.length?De=ee.gzhead.comment.charCodeAt(ee.gzindex++)&255:De=0,Ze(ee,De)}while(De!==0);ee.gzhead.hcrc&&ee.pending>pe&&(j.adler=C(j.adler,ee.pending_buf,ee.pending-pe,pe)),De===0&&(ee.status=he)}else ee.status=he;if(ee.status===he&&(ee.gzhead.hcrc?(ee.pending+2>ee.pending_buf_size&&nt(j),ee.pending+2<=ee.pending_buf_size&&(Ze(ee,j.adler&255),Ze(ee,j.adler>>8&255),j.adler=0,ee.status=ge)):ee.status=ge),ee.pending!==0){if(nt(j),j.avail_out===0)return ee.last_flush=-1,T}else if(j.avail_in===0&&Xe(Me)<=Xe(Ae)&&Me!==A)return Ne(j,c);if(ee.status===Oe&&j.avail_in!==0)return Ne(j,c);if(j.avail_in!==0||ee.lookahead!==0||Me!==E&&ee.status!==Oe){var st=ee.strategy===b?_e(ee,Me):ee.strategy===S?se(ee,Me):Pe[ee.level].func(ee,Me);if((st===we||st===ce)&&(ee.status=Oe),st===Le||st===we)return j.avail_out===0&&(ee.last_flush=-1),T;if(st===$e&&(Me===R?d._tr_align(ee):Me!==w&&(d._tr_stored_block(ee,0,0,!1),Me===x&&(rt(ee.head),ee.lookahead===0&&(ee.strstart=0,ee.block_start=0,ee.insert=0))),nt(j),j.avail_out===0))return ee.last_flush=-1,T}return Me!==A?T:ee.wrap<=0?M:(ee.wrap===2?(Ze(ee,j.adler&255),Ze(ee,j.adler>>8&255),Ze(ee,j.adler>>16&255),Ze(ee,j.adler>>24&255),Ze(ee,j.total_in&255),Ze(ee,j.total_in>>8&255),Ze(ee,j.total_in>>16&255),Ze(ee,j.total_in>>24&255)):(qe(ee,j.adler>>>16),qe(ee,j.adler&65535)),nt(j),ee.wrap>0&&(ee.wrap=-ee.wrap),ee.pending!==0?T:M)}function He(j){var Me;return!j||!j.state?h:(Me=j.state.status,Me!==re&&Me!==le&&Me!==oe&&Me!==ue&&Me!==he&&Me!==ge&&Me!==Oe?Ne(j,h):(j.state=null,Me===ge?Ne(j,l):T))}function Je(j,Me){var Ae=Me.length,ee,pe,De,lt,ct,st,xt,Zt;if(!j||!j.state||(ee=j.state,lt=ee.wrap,lt===2||lt===1&&ee.status!==re||ee.lookahead))return h;for(lt===1&&(j.adler=y(j.adler,Me,Ae,0)),ee.wrap=0,Ae>=ee.w_size&&(lt===0&&(rt(ee.head),ee.strstart=0,ee.block_start=0,ee.insert=0),Zt=new a.Buf8(ee.w_size),a.arraySet(Zt,Me,Ae-ee.w_size,ee.w_size,0),Me=Zt,Ae=ee.w_size),ct=j.avail_in,st=j.next_in,xt=j.input,j.avail_in=Ae,j.next_in=0,j.input=Me,at(ee);ee.lookahead>=$;){pe=ee.strstart,De=ee.lookahead-($-1);do ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[pe+$-1])&ee.hash_mask,ee.prev[pe&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=pe,pe++;while(--De);ee.strstart=pe,ee.lookahead=$-1,at(ee)}return ee.strstart+=ee.lookahead,ee.block_start=ee.strstart,ee.insert=ee.lookahead,ee.lookahead=0,ee.match_length=ee.prev_length=$-1,ee.match_available=0,j.next_in=st,j.input=xt,j.avail_in=ct,ee.wrap=lt,T}i.deflateInit=ze,i.deflateInit2=ve,i.deflateReset=be,i.deflateResetKeep=me,i.deflateSetHeader=ke,i.deflate=q,i.deflateEnd=He,i.deflateSetDictionary=Je,i.deflateInfo="pako deflate (from Nodeca project)"}),"./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js":(s=>{function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}s.exports=i}),"./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js":(s=>{var i=30,n=12;s.exports=function(d,y){var C,p,E,R,x,A,w,T,M,h,l,c,g,v,b,S,u,m,_,D,L,P,N,U,V;C=d.state,p=d.next_in,U=d.input,E=p+(d.avail_in-5),R=d.next_out,V=d.output,x=R-(y-d.avail_out),A=R+(d.avail_out-257),w=C.dmax,T=C.wsize,M=C.whave,h=C.wnext,l=C.window,c=C.hold,g=C.bits,v=C.lencode,b=C.distcode,S=(1<<C.lenbits)-1,u=(1<<C.distbits)-1;e:do{g<15&&(c+=U[p++]<<g,g+=8,c+=U[p++]<<g,g+=8),m=v[c&S];t:for(;;){if(_=m>>>24,c>>>=_,g-=_,_=m>>>16&255,_===0)V[R++]=m&65535;else if(_&16){D=m&65535,_&=15,_&&(g<_&&(c+=U[p++]<<g,g+=8),D+=c&(1<<_)-1,c>>>=_,g-=_),g<15&&(c+=U[p++]<<g,g+=8,c+=U[p++]<<g,g+=8),m=b[c&u];n:for(;;){if(_=m>>>24,c>>>=_,g-=_,_=m>>>16&255,_&16){if(L=m&65535,_&=15,g<_&&(c+=U[p++]<<g,g+=8,g<_&&(c+=U[p++]<<g,g+=8)),L+=c&(1<<_)-1,L>w){d.msg="invalid distance too far back",C.mode=i;break e}if(c>>>=_,g-=_,_=R-x,L>_){if(_=L-_,_>M&&C.sane){d.msg="invalid distance too far back",C.mode=i;break e}if(P=0,N=l,h===0){if(P+=T-_,_<D){D-=_;do V[R++]=l[P++];while(--_);P=R-L,N=V}}else if(h<_){if(P+=T+h-_,_-=h,_<D){D-=_;do V[R++]=l[P++];while(--_);if(P=0,h<D){_=h,D-=_;do V[R++]=l[P++];while(--_);P=R-L,N=V}}}else if(P+=h-_,_<D){D-=_;do V[R++]=l[P++];while(--_);P=R-L,N=V}for(;D>2;)V[R++]=N[P++],V[R++]=N[P++],V[R++]=N[P++],D-=3;D&&(V[R++]=N[P++],D>1&&(V[R++]=N[P++]))}else{P=R-L;do V[R++]=V[P++],V[R++]=V[P++],V[R++]=V[P++],D-=3;while(D>2);D&&(V[R++]=V[P++],D>1&&(V[R++]=V[P++]))}}else if((_&64)===0){m=b[(m&65535)+(c&(1<<_)-1)];continue n}else{d.msg="invalid distance code",C.mode=i;break e}break}}else if((_&64)===0){m=v[(m&65535)+(c&(1<<_)-1)];continue t}else if(_&32){C.mode=n;break e}else{d.msg="invalid literal/length code",C.mode=i;break e}break}}while(p<E&&R<A);D=g>>3,p-=D,g-=D<<3,c&=(1<<g)-1,d.next_in=p,d.next_out=R,d.avail_in=p<E?5+(E-p):5-(p-E),d.avail_out=R<A?257+(A-R):257-(R-A),C.hold=c,C.bits=g}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js":((s,i,n)=>{var a=n("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),d=n("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),y=n("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),C=n("./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js"),p=n("./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js"),E=0,R=1,x=2,A=4,w=5,T=6,M=0,h=1,l=2,c=-2,g=-3,v=-4,b=-5,S=8,u=1,m=2,_=3,D=4,L=5,P=6,N=7,U=8,V=9,W=10,G=11,H=12,k=13,X=14,$=15,F=16,K=17,te=18,re=19,le=20,oe=21,ue=22,he=23,ge=24,Oe=25,Le=26,$e=27,we=28,ce=29,xe=30,Ne=31,Xe=32,rt=852,nt=592,et=15,Ze=et;function qe(ve){return(ve>>>24&255)+(ve>>>8&65280)+((ve&65280)<<8)+((ve&255)<<24)}function Ve(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ge(ve){var ze;return!ve||!ve.state?c:(ze=ve.state,ve.total_in=ve.total_out=ze.total=0,ve.msg="",ze.wrap&&(ve.adler=ze.wrap&1),ze.mode=u,ze.last=0,ze.havedict=0,ze.dmax=32768,ze.head=null,ze.hold=0,ze.bits=0,ze.lencode=ze.lendyn=new a.Buf32(rt),ze.distcode=ze.distdyn=new a.Buf32(nt),ze.sane=1,ze.back=-1,M)}function at(ve){var ze;return!ve||!ve.state?c:(ze=ve.state,ze.wsize=0,ze.whave=0,ze.wnext=0,Ge(ve))}function ot(ve,ze){var q,He;return!ve||!ve.state||(He=ve.state,ze<0?(q=0,ze=-ze):(q=(ze>>4)+1,ze<48&&(ze&=15)),ze&&(ze<8||ze>15))?c:(He.window!==null&&He.wbits!==ze&&(He.window=null),He.wrap=q,He.wbits=ze,at(ve))}function J(ve,ze){var q,He;return ve?(He=new Ve,ve.state=He,He.window=null,q=ot(ve,ze),q!==M&&(ve.state=null),q):c}function ne(ve){return J(ve,Ze)}var se=!0,_e,Se;function Pe(ve){if(se){var ze;for(_e=new a.Buf32(512),Se=new a.Buf32(32),ze=0;ze<144;)ve.lens[ze++]=8;for(;ze<256;)ve.lens[ze++]=9;for(;ze<280;)ve.lens[ze++]=7;for(;ze<288;)ve.lens[ze++]=8;for(p(R,ve.lens,0,288,_e,0,ve.work,{bits:9}),ze=0;ze<32;)ve.lens[ze++]=5;p(x,ve.lens,0,32,Se,0,ve.work,{bits:5}),se=!1}ve.lencode=_e,ve.lenbits=9,ve.distcode=Se,ve.distbits=5}function Ie(ve,ze,q,He){var Je,j=ve.state;return j.window===null&&(j.wsize=1<<j.wbits,j.wnext=0,j.whave=0,j.window=new a.Buf8(j.wsize)),He>=j.wsize?(a.arraySet(j.window,ze,q-j.wsize,j.wsize,0),j.wnext=0,j.whave=j.wsize):(Je=j.wsize-j.wnext,Je>He&&(Je=He),a.arraySet(j.window,ze,q-He,Je,j.wnext),He-=Je,He?(a.arraySet(j.window,ze,q-He,He,0),j.wnext=He,j.whave=j.wsize):(j.wnext+=Je,j.wnext===j.wsize&&(j.wnext=0),j.whave<j.wsize&&(j.whave+=Je))),0}function Q(ve,ze){var q,He,Je,j,Me,Ae,ee,pe,De,lt,ct,st,xt,Zt,St=0,vt,yt,Gt,Ct,Lt,Qt,Bt,zt,qt=new a.Buf8(4),Cn,yn,Pn=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ve||!ve.state||!ve.output||!ve.input&&ve.avail_in!==0)return c;q=ve.state,q.mode===H&&(q.mode=k),Me=ve.next_out,Je=ve.output,ee=ve.avail_out,j=ve.next_in,He=ve.input,Ae=ve.avail_in,pe=q.hold,De=q.bits,lt=Ae,ct=ee,zt=M;e:for(;;)switch(q.mode){case u:if(q.wrap===0){q.mode=k;break}for(;De<16;){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}if(q.wrap&2&&pe===35615){q.check=0,qt[0]=pe&255,qt[1]=pe>>>8&255,q.check=y(q.check,qt,2,0),pe=0,De=0,q.mode=m;break}if(q.flags=0,q.head&&(q.head.done=!1),!(q.wrap&1)||(((pe&255)<<8)+(pe>>8))%31){ve.msg="incorrect header check",q.mode=xe;break}if((pe&15)!==S){ve.msg="unknown compression method",q.mode=xe;break}if(pe>>>=4,De-=4,Bt=(pe&15)+8,q.wbits===0)q.wbits=Bt;else if(Bt>q.wbits){ve.msg="invalid window size",q.mode=xe;break}q.dmax=1<<Bt,ve.adler=q.check=1,q.mode=pe&512?W:H,pe=0,De=0;break;case m:for(;De<16;){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}if(q.flags=pe,(q.flags&255)!==S){ve.msg="unknown compression method",q.mode=xe;break}if(q.flags&57344){ve.msg="unknown header flags set",q.mode=xe;break}q.head&&(q.head.text=pe>>8&1),q.flags&512&&(qt[0]=pe&255,qt[1]=pe>>>8&255,q.check=y(q.check,qt,2,0)),pe=0,De=0,q.mode=_;case _:for(;De<32;){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}q.head&&(q.head.time=pe),q.flags&512&&(qt[0]=pe&255,qt[1]=pe>>>8&255,qt[2]=pe>>>16&255,qt[3]=pe>>>24&255,q.check=y(q.check,qt,4,0)),pe=0,De=0,q.mode=D;case D:for(;De<16;){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}q.head&&(q.head.xflags=pe&255,q.head.os=pe>>8),q.flags&512&&(qt[0]=pe&255,qt[1]=pe>>>8&255,q.check=y(q.check,qt,2,0)),pe=0,De=0,q.mode=L;case L:if(q.flags&1024){for(;De<16;){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}q.length=pe,q.head&&(q.head.extra_len=pe),q.flags&512&&(qt[0]=pe&255,qt[1]=pe>>>8&255,q.check=y(q.check,qt,2,0)),pe=0,De=0}else q.head&&(q.head.extra=null);q.mode=P;case P:if(q.flags&1024&&(st=q.length,st>Ae&&(st=Ae),st&&(q.head&&(Bt=q.head.extra_len-q.length,q.head.extra||(q.head.extra=new Array(q.head.extra_len)),a.arraySet(q.head.extra,He,j,st,Bt)),q.flags&512&&(q.check=y(q.check,He,st,j)),Ae-=st,j+=st,q.length-=st),q.length))break e;q.length=0,q.mode=N;case N:if(q.flags&2048){if(Ae===0)break e;st=0;do Bt=He[j+st++],q.head&&Bt&&q.length<65536&&(q.head.name+=String.fromCharCode(Bt));while(Bt&&st<Ae);if(q.flags&512&&(q.check=y(q.check,He,st,j)),Ae-=st,j+=st,Bt)break e}else q.head&&(q.head.name=null);q.length=0,q.mode=U;case U:if(q.flags&4096){if(Ae===0)break e;st=0;do Bt=He[j+st++],q.head&&Bt&&q.length<65536&&(q.head.comment+=String.fromCharCode(Bt));while(Bt&&st<Ae);if(q.flags&512&&(q.check=y(q.check,He,st,j)),Ae-=st,j+=st,Bt)break e}else q.head&&(q.head.comment=null);q.mode=V;case V:if(q.flags&512){for(;De<16;){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}if(pe!==(q.check&65535)){ve.msg="header crc mismatch",q.mode=xe;break}pe=0,De=0}q.head&&(q.head.hcrc=q.flags>>9&1,q.head.done=!0),ve.adler=q.check=0,q.mode=H;break;case W:for(;De<32;){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}ve.adler=q.check=qe(pe),pe=0,De=0,q.mode=G;case G:if(q.havedict===0)return ve.next_out=Me,ve.avail_out=ee,ve.next_in=j,ve.avail_in=Ae,q.hold=pe,q.bits=De,l;ve.adler=q.check=1,q.mode=H;case H:if(ze===w||ze===T)break e;case k:if(q.last){pe>>>=De&7,De-=De&7,q.mode=$e;break}for(;De<3;){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}switch(q.last=pe&1,pe>>>=1,De-=1,pe&3){case 0:q.mode=X;break;case 1:if(Pe(q),q.mode=le,ze===T){pe>>>=2,De-=2;break e}break;case 2:q.mode=K;break;case 3:ve.msg="invalid block type",q.mode=xe}pe>>>=2,De-=2;break;case X:for(pe>>>=De&7,De-=De&7;De<32;){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}if((pe&65535)!==(pe>>>16^65535)){ve.msg="invalid stored block lengths",q.mode=xe;break}if(q.length=pe&65535,pe=0,De=0,q.mode=$,ze===T)break e;case $:q.mode=F;case F:if(st=q.length,st){if(st>Ae&&(st=Ae),st>ee&&(st=ee),st===0)break e;a.arraySet(Je,He,j,st,Me),Ae-=st,j+=st,ee-=st,Me+=st,q.length-=st;break}q.mode=H;break;case K:for(;De<14;){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}if(q.nlen=(pe&31)+257,pe>>>=5,De-=5,q.ndist=(pe&31)+1,pe>>>=5,De-=5,q.ncode=(pe&15)+4,pe>>>=4,De-=4,q.nlen>286||q.ndist>30){ve.msg="too many length or distance symbols",q.mode=xe;break}q.have=0,q.mode=te;case te:for(;q.have<q.ncode;){for(;De<3;){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}q.lens[Pn[q.have++]]=pe&7,pe>>>=3,De-=3}for(;q.have<19;)q.lens[Pn[q.have++]]=0;if(q.lencode=q.lendyn,q.lenbits=7,Cn={bits:q.lenbits},zt=p(E,q.lens,0,19,q.lencode,0,q.work,Cn),q.lenbits=Cn.bits,zt){ve.msg="invalid code lengths set",q.mode=xe;break}q.have=0,q.mode=re;case re:for(;q.have<q.nlen+q.ndist;){for(;St=q.lencode[pe&(1<<q.lenbits)-1],vt=St>>>24,yt=St>>>16&255,Gt=St&65535,!(vt<=De);){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}if(Gt<16)pe>>>=vt,De-=vt,q.lens[q.have++]=Gt;else{if(Gt===16){for(yn=vt+2;De<yn;){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}if(pe>>>=vt,De-=vt,q.have===0){ve.msg="invalid bit length repeat",q.mode=xe;break}Bt=q.lens[q.have-1],st=3+(pe&3),pe>>>=2,De-=2}else if(Gt===17){for(yn=vt+3;De<yn;){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}pe>>>=vt,De-=vt,Bt=0,st=3+(pe&7),pe>>>=3,De-=3}else{for(yn=vt+7;De<yn;){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}pe>>>=vt,De-=vt,Bt=0,st=11+(pe&127),pe>>>=7,De-=7}if(q.have+st>q.nlen+q.ndist){ve.msg="invalid bit length repeat",q.mode=xe;break}for(;st--;)q.lens[q.have++]=Bt}}if(q.mode===xe)break;if(q.lens[256]===0){ve.msg="invalid code -- missing end-of-block",q.mode=xe;break}if(q.lenbits=9,Cn={bits:q.lenbits},zt=p(R,q.lens,0,q.nlen,q.lencode,0,q.work,Cn),q.lenbits=Cn.bits,zt){ve.msg="invalid literal/lengths set",q.mode=xe;break}if(q.distbits=6,q.distcode=q.distdyn,Cn={bits:q.distbits},zt=p(x,q.lens,q.nlen,q.ndist,q.distcode,0,q.work,Cn),q.distbits=Cn.bits,zt){ve.msg="invalid distances set",q.mode=xe;break}if(q.mode=le,ze===T)break e;case le:q.mode=oe;case oe:if(Ae>=6&&ee>=258){ve.next_out=Me,ve.avail_out=ee,ve.next_in=j,ve.avail_in=Ae,q.hold=pe,q.bits=De,C(ve,ct),Me=ve.next_out,Je=ve.output,ee=ve.avail_out,j=ve.next_in,He=ve.input,Ae=ve.avail_in,pe=q.hold,De=q.bits,q.mode===H&&(q.back=-1);break}for(q.back=0;St=q.lencode[pe&(1<<q.lenbits)-1],vt=St>>>24,yt=St>>>16&255,Gt=St&65535,!(vt<=De);){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}if(yt&&(yt&240)===0){for(Ct=vt,Lt=yt,Qt=Gt;St=q.lencode[Qt+((pe&(1<<Ct+Lt)-1)>>Ct)],vt=St>>>24,yt=St>>>16&255,Gt=St&65535,!(Ct+vt<=De);){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}pe>>>=Ct,De-=Ct,q.back+=Ct}if(pe>>>=vt,De-=vt,q.back+=vt,q.length=Gt,yt===0){q.mode=Le;break}if(yt&32){q.back=-1,q.mode=H;break}if(yt&64){ve.msg="invalid literal/length code",q.mode=xe;break}q.extra=yt&15,q.mode=ue;case ue:if(q.extra){for(yn=q.extra;De<yn;){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}q.length+=pe&(1<<q.extra)-1,pe>>>=q.extra,De-=q.extra,q.back+=q.extra}q.was=q.length,q.mode=he;case he:for(;St=q.distcode[pe&(1<<q.distbits)-1],vt=St>>>24,yt=St>>>16&255,Gt=St&65535,!(vt<=De);){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}if((yt&240)===0){for(Ct=vt,Lt=yt,Qt=Gt;St=q.distcode[Qt+((pe&(1<<Ct+Lt)-1)>>Ct)],vt=St>>>24,yt=St>>>16&255,Gt=St&65535,!(Ct+vt<=De);){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}pe>>>=Ct,De-=Ct,q.back+=Ct}if(pe>>>=vt,De-=vt,q.back+=vt,yt&64){ve.msg="invalid distance code",q.mode=xe;break}q.offset=Gt,q.extra=yt&15,q.mode=ge;case ge:if(q.extra){for(yn=q.extra;De<yn;){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}q.offset+=pe&(1<<q.extra)-1,pe>>>=q.extra,De-=q.extra,q.back+=q.extra}if(q.offset>q.dmax){ve.msg="invalid distance too far back",q.mode=xe;break}q.mode=Oe;case Oe:if(ee===0)break e;if(st=ct-ee,q.offset>st){if(st=q.offset-st,st>q.whave&&q.sane){ve.msg="invalid distance too far back",q.mode=xe;break}st>q.wnext?(st-=q.wnext,xt=q.wsize-st):xt=q.wnext-st,st>q.length&&(st=q.length),Zt=q.window}else Zt=Je,xt=Me-q.offset,st=q.length;st>ee&&(st=ee),ee-=st,q.length-=st;do Je[Me++]=Zt[xt++];while(--st);q.length===0&&(q.mode=oe);break;case Le:if(ee===0)break e;Je[Me++]=q.length,ee--,q.mode=oe;break;case $e:if(q.wrap){for(;De<32;){if(Ae===0)break e;Ae--,pe|=He[j++]<<De,De+=8}if(ct-=ee,ve.total_out+=ct,q.total+=ct,ct&&(ve.adler=q.check=q.flags?y(q.check,Je,ct,Me-ct):d(q.check,Je,ct,Me-ct)),ct=ee,(q.flags?pe:qe(pe))!==q.check){ve.msg="incorrect data check",q.mode=xe;break}pe=0,De=0}q.mode=we;case we:if(q.wrap&&q.flags){for(;De<32;){if(Ae===0)break e;Ae--,pe+=He[j++]<<De,De+=8}if(pe!==(q.total&4294967295)){ve.msg="incorrect length check",q.mode=xe;break}pe=0,De=0}q.mode=ce;case ce:zt=h;break e;case xe:zt=g;break e;case Ne:return v;case Xe:default:return c}return ve.next_out=Me,ve.avail_out=ee,ve.next_in=j,ve.avail_in=Ae,q.hold=pe,q.bits=De,(q.wsize||ct!==ve.avail_out&&q.mode<xe&&(q.mode<$e||ze!==A))&&Ie(ve,ve.output,ve.next_out,ct-ve.avail_out),lt-=ve.avail_in,ct-=ve.avail_out,ve.total_in+=lt,ve.total_out+=ct,q.total+=ct,q.wrap&&ct&&(ve.adler=q.check=q.flags?y(q.check,Je,ct,ve.next_out-ct):d(q.check,Je,ct,ve.next_out-ct)),ve.data_type=q.bits+(q.last?64:0)+(q.mode===H?128:0)+(q.mode===le||q.mode===$?256:0),(lt===0&&ct===0||ze===A)&&zt===M&&(zt=b),zt}function me(ve){if(!ve||!ve.state)return c;var ze=ve.state;return ze.window&&(ze.window=null),ve.state=null,M}function be(ve,ze){var q;return!ve||!ve.state||(q=ve.state,(q.wrap&2)===0)?c:(q.head=ze,ze.done=!1,M)}function ke(ve,ze){var q=ze.length,He,Je,j;return!ve||!ve.state||(He=ve.state,He.wrap!==0&&He.mode!==G)?c:He.mode===G&&(Je=1,Je=d(Je,ze,q,0),Je!==He.check)?g:(j=Ie(ve,ze,q,q),j?(He.mode=Ne,v):(He.havedict=1,M))}i.inflateReset=at,i.inflateReset2=ot,i.inflateResetKeep=Ge,i.inflateInit=ne,i.inflateInit2=J,i.inflate=Q,i.inflateEnd=me,i.inflateGetHeader=be,i.inflateSetDictionary=ke,i.inflateInfo="pako inflate (from Nodeca project)"}),"./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js":((s,i,n)=>{var a=n("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),d=15,y=852,C=592,p=0,E=1,R=2,x=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],A=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],w=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],T=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(h,l,c,g,v,b,S,u){var m=u.bits,_=0,D=0,L=0,P=0,N=0,U=0,V=0,W=0,G=0,H=0,k,X,$,F,K,te=null,re=0,le,oe=new a.Buf16(d+1),ue=new a.Buf16(d+1),he=null,ge=0,Oe,Le,$e;for(_=0;_<=d;_++)oe[_]=0;for(D=0;D<g;D++)oe[l[c+D]]++;for(N=m,P=d;P>=1&&oe[P]===0;P--);if(N>P&&(N=P),P===0)return v[b++]=20971520,v[b++]=20971520,u.bits=1,0;for(L=1;L<P&&oe[L]===0;L++);for(N<L&&(N=L),W=1,_=1;_<=d;_++)if(W<<=1,W-=oe[_],W<0)return-1;if(W>0&&(h===p||P!==1))return-1;for(ue[1]=0,_=1;_<d;_++)ue[_+1]=ue[_]+oe[_];for(D=0;D<g;D++)l[c+D]!==0&&(S[ue[l[c+D]]++]=D);if(h===p?(te=he=S,le=19):h===E?(te=x,re-=257,he=A,ge-=257,le=256):(te=w,he=T,le=-1),H=0,D=0,_=L,K=b,U=N,V=0,$=-1,G=1<<N,F=G-1,h===E&&G>y||h===R&&G>C)return 1;for(;;){Oe=_-V,S[D]<le?(Le=0,$e=S[D]):S[D]>le?(Le=he[ge+S[D]],$e=te[re+S[D]]):(Le=96,$e=0),k=1<<_-V,X=1<<U,L=X;do X-=k,v[K+(H>>V)+X]=Oe<<24|Le<<16|$e|0;while(X!==0);for(k=1<<_-1;H&k;)k>>=1;if(k!==0?(H&=k-1,H+=k):H=0,D++,--oe[_]===0){if(_===P)break;_=l[c+S[D]]}if(_>N&&(H&F)!==$){for(V===0&&(V=N),K+=L,U=_-V,W=1<<U;U+V<P&&(W-=oe[U+V],!(W<=0));)U++,W<<=1;if(G+=1<<U,h===E&&G>y||h===R&&G>C)return 1;$=H&F,v[$]=N<<24|U<<16|K-b|0}}return H!==0&&(v[K+H]=_-V<<24|4194304|0),u.bits=N,0}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js":(s=>{s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js":((s,i,n)=>{var a=n("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),d=4,y=0,C=1,p=2;function E(Q){for(var me=Q.length;--me>=0;)Q[me]=0}var R=0,x=1,A=2,w=3,T=258,M=29,h=256,l=h+1+M,c=30,g=19,v=2*l+1,b=15,S=16,u=7,m=256,_=16,D=17,L=18,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=512,G=new Array((l+2)*2);E(G);var H=new Array(c*2);E(H);var k=new Array(W);E(k);var X=new Array(T-w+1);E(X);var $=new Array(M);E($);var F=new Array(c);E(F);function K(Q,me,be,ke,ve){this.static_tree=Q,this.extra_bits=me,this.extra_base=be,this.elems=ke,this.max_length=ve,this.has_stree=Q&&Q.length}var te,re,le;function oe(Q,me){this.dyn_tree=Q,this.max_code=0,this.stat_desc=me}function ue(Q){return Q<256?k[Q]:k[256+(Q>>>7)]}function he(Q,me){Q.pending_buf[Q.pending++]=me&255,Q.pending_buf[Q.pending++]=me>>>8&255}function ge(Q,me,be){Q.bi_valid>S-be?(Q.bi_buf|=me<<Q.bi_valid&65535,he(Q,Q.bi_buf),Q.bi_buf=me>>S-Q.bi_valid,Q.bi_valid+=be-S):(Q.bi_buf|=me<<Q.bi_valid&65535,Q.bi_valid+=be)}function Oe(Q,me,be){ge(Q,be[me*2],be[me*2+1])}function Le(Q,me){var be=0;do be|=Q&1,Q>>>=1,be<<=1;while(--me>0);return be>>>1}function $e(Q){Q.bi_valid===16?(he(Q,Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0):Q.bi_valid>=8&&(Q.pending_buf[Q.pending++]=Q.bi_buf&255,Q.bi_buf>>=8,Q.bi_valid-=8)}function we(Q,me){var be=me.dyn_tree,ke=me.max_code,ve=me.stat_desc.static_tree,ze=me.stat_desc.has_stree,q=me.stat_desc.extra_bits,He=me.stat_desc.extra_base,Je=me.stat_desc.max_length,j,Me,Ae,ee,pe,De,lt=0;for(ee=0;ee<=b;ee++)Q.bl_count[ee]=0;for(be[Q.heap[Q.heap_max]*2+1]=0,j=Q.heap_max+1;j<v;j++)Me=Q.heap[j],ee=be[be[Me*2+1]*2+1]+1,ee>Je&&(ee=Je,lt++),be[Me*2+1]=ee,!(Me>ke)&&(Q.bl_count[ee]++,pe=0,Me>=He&&(pe=q[Me-He]),De=be[Me*2],Q.opt_len+=De*(ee+pe),ze&&(Q.static_len+=De*(ve[Me*2+1]+pe)));if(lt!==0){do{for(ee=Je-1;Q.bl_count[ee]===0;)ee--;Q.bl_count[ee]--,Q.bl_count[ee+1]+=2,Q.bl_count[Je]--,lt-=2}while(lt>0);for(ee=Je;ee!==0;ee--)for(Me=Q.bl_count[ee];Me!==0;)Ae=Q.heap[--j],!(Ae>ke)&&(be[Ae*2+1]!==ee&&(Q.opt_len+=(ee-be[Ae*2+1])*be[Ae*2],be[Ae*2+1]=ee),Me--)}}function ce(Q,me,be){var ke=new Array(b+1),ve=0,ze,q;for(ze=1;ze<=b;ze++)ke[ze]=ve=ve+be[ze-1]<<1;for(q=0;q<=me;q++){var He=Q[q*2+1];He!==0&&(Q[q*2]=Le(ke[He]++,He))}}function xe(){var Q,me,be,ke,ve,ze=new Array(b+1);for(be=0,ke=0;ke<M-1;ke++)for($[ke]=be,Q=0;Q<1<<P[ke];Q++)X[be++]=ke;for(X[be-1]=ke,ve=0,ke=0;ke<16;ke++)for(F[ke]=ve,Q=0;Q<1<<N[ke];Q++)k[ve++]=ke;for(ve>>=7;ke<c;ke++)for(F[ke]=ve<<7,Q=0;Q<1<<N[ke]-7;Q++)k[256+ve++]=ke;for(me=0;me<=b;me++)ze[me]=0;for(Q=0;Q<=143;)G[Q*2+1]=8,Q++,ze[8]++;for(;Q<=255;)G[Q*2+1]=9,Q++,ze[9]++;for(;Q<=279;)G[Q*2+1]=7,Q++,ze[7]++;for(;Q<=287;)G[Q*2+1]=8,Q++,ze[8]++;for(ce(G,l+1,ze),Q=0;Q<c;Q++)H[Q*2+1]=5,H[Q*2]=Le(Q,5);te=new K(G,P,h+1,l,b),re=new K(H,N,0,c,b),le=new K(new Array(0),U,0,g,u)}function Ne(Q){var me;for(me=0;me<l;me++)Q.dyn_ltree[me*2]=0;for(me=0;me<c;me++)Q.dyn_dtree[me*2]=0;for(me=0;me<g;me++)Q.bl_tree[me*2]=0;Q.dyn_ltree[m*2]=1,Q.opt_len=Q.static_len=0,Q.last_lit=Q.matches=0}function Xe(Q){Q.bi_valid>8?he(Q,Q.bi_buf):Q.bi_valid>0&&(Q.pending_buf[Q.pending++]=Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0}function rt(Q,me,be,ke){Xe(Q),he(Q,be),he(Q,~be),a.arraySet(Q.pending_buf,Q.window,me,be,Q.pending),Q.pending+=be}function nt(Q,me,be,ke){var ve=me*2,ze=be*2;return Q[ve]<Q[ze]||Q[ve]===Q[ze]&&ke[me]<=ke[be]}function et(Q,me,be){for(var ke=Q.heap[be],ve=be<<1;ve<=Q.heap_len&&(ve<Q.heap_len&&nt(me,Q.heap[ve+1],Q.heap[ve],Q.depth)&&ve++,!nt(me,ke,Q.heap[ve],Q.depth));)Q.heap[be]=Q.heap[ve],be=ve,ve<<=1;Q.heap[be]=ke}function Ze(Q,me,be){var ke,ve,ze=0,q,He;if(Q.last_lit!==0)do ke=Q.pending_buf[Q.d_buf+ze*2]<<8|Q.pending_buf[Q.d_buf+ze*2+1],ve=Q.pending_buf[Q.l_buf+ze],ze++,ke===0?Oe(Q,ve,me):(q=X[ve],Oe(Q,q+h+1,me),He=P[q],He!==0&&(ve-=$[q],ge(Q,ve,He)),ke--,q=ue(ke),Oe(Q,q,be),He=N[q],He!==0&&(ke-=F[q],ge(Q,ke,He)));while(ze<Q.last_lit);Oe(Q,m,me)}function qe(Q,me){var be=me.dyn_tree,ke=me.stat_desc.static_tree,ve=me.stat_desc.has_stree,ze=me.stat_desc.elems,q,He,Je=-1,j;for(Q.heap_len=0,Q.heap_max=v,q=0;q<ze;q++)be[q*2]!==0?(Q.heap[++Q.heap_len]=Je=q,Q.depth[q]=0):be[q*2+1]=0;for(;Q.heap_len<2;)j=Q.heap[++Q.heap_len]=Je<2?++Je:0,be[j*2]=1,Q.depth[j]=0,Q.opt_len--,ve&&(Q.static_len-=ke[j*2+1]);for(me.max_code=Je,q=Q.heap_len>>1;q>=1;q--)et(Q,be,q);j=ze;do q=Q.heap[1],Q.heap[1]=Q.heap[Q.heap_len--],et(Q,be,1),He=Q.heap[1],Q.heap[--Q.heap_max]=q,Q.heap[--Q.heap_max]=He,be[j*2]=be[q*2]+be[He*2],Q.depth[j]=(Q.depth[q]>=Q.depth[He]?Q.depth[q]:Q.depth[He])+1,be[q*2+1]=be[He*2+1]=j,Q.heap[1]=j++,et(Q,be,1);while(Q.heap_len>=2);Q.heap[--Q.heap_max]=Q.heap[1],we(Q,me),ce(be,Je,Q.bl_count)}function Ve(Q,me,be){var ke,ve=-1,ze,q=me[1],He=0,Je=7,j=4;for(q===0&&(Je=138,j=3),me[(be+1)*2+1]=65535,ke=0;ke<=be;ke++)ze=q,q=me[(ke+1)*2+1],!(++He<Je&&ze===q)&&(He<j?Q.bl_tree[ze*2]+=He:ze!==0?(ze!==ve&&Q.bl_tree[ze*2]++,Q.bl_tree[_*2]++):He<=10?Q.bl_tree[D*2]++:Q.bl_tree[L*2]++,He=0,ve=ze,q===0?(Je=138,j=3):ze===q?(Je=6,j=3):(Je=7,j=4))}function Ge(Q,me,be){var ke,ve=-1,ze,q=me[1],He=0,Je=7,j=4;for(q===0&&(Je=138,j=3),ke=0;ke<=be;ke++)if(ze=q,q=me[(ke+1)*2+1],!(++He<Je&&ze===q)){if(He<j)do Oe(Q,ze,Q.bl_tree);while(--He!==0);else ze!==0?(ze!==ve&&(Oe(Q,ze,Q.bl_tree),He--),Oe(Q,_,Q.bl_tree),ge(Q,He-3,2)):He<=10?(Oe(Q,D,Q.bl_tree),ge(Q,He-3,3)):(Oe(Q,L,Q.bl_tree),ge(Q,He-11,7));He=0,ve=ze,q===0?(Je=138,j=3):ze===q?(Je=6,j=3):(Je=7,j=4)}}function at(Q){var me;for(Ve(Q,Q.dyn_ltree,Q.l_desc.max_code),Ve(Q,Q.dyn_dtree,Q.d_desc.max_code),qe(Q,Q.bl_desc),me=g-1;me>=3&&Q.bl_tree[V[me]*2+1]===0;me--);return Q.opt_len+=3*(me+1)+5+5+4,me}function ot(Q,me,be,ke){var ve;for(ge(Q,me-257,5),ge(Q,be-1,5),ge(Q,ke-4,4),ve=0;ve<ke;ve++)ge(Q,Q.bl_tree[V[ve]*2+1],3);Ge(Q,Q.dyn_ltree,me-1),Ge(Q,Q.dyn_dtree,be-1)}function J(Q){var me=4093624447,be;for(be=0;be<=31;be++,me>>>=1)if(me&1&&Q.dyn_ltree[be*2]!==0)return y;if(Q.dyn_ltree[18]!==0||Q.dyn_ltree[20]!==0||Q.dyn_ltree[26]!==0)return C;for(be=32;be<h;be++)if(Q.dyn_ltree[be*2]!==0)return C;return y}var ne=!1;function se(Q){ne||(xe(),ne=!0),Q.l_desc=new oe(Q.dyn_ltree,te),Q.d_desc=new oe(Q.dyn_dtree,re),Q.bl_desc=new oe(Q.bl_tree,le),Q.bi_buf=0,Q.bi_valid=0,Ne(Q)}function _e(Q,me,be,ke){ge(Q,(R<<1)+(ke?1:0),3),rt(Q,me,be)}function Se(Q){ge(Q,x<<1,3),Oe(Q,m,G),$e(Q)}function Pe(Q,me,be,ke){var ve,ze,q=0;Q.level>0?(Q.strm.data_type===p&&(Q.strm.data_type=J(Q)),qe(Q,Q.l_desc),qe(Q,Q.d_desc),q=at(Q),ve=Q.opt_len+3+7>>>3,ze=Q.static_len+3+7>>>3,ze<=ve&&(ve=ze)):ve=ze=be+5,be+4<=ve&&me!==-1?_e(Q,me,be,ke):Q.strategy===d||ze===ve?(ge(Q,(x<<1)+(ke?1:0),3),Ze(Q,G,H)):(ge(Q,(A<<1)+(ke?1:0),3),ot(Q,Q.l_desc.max_code+1,Q.d_desc.max_code+1,q+1),Ze(Q,Q.dyn_ltree,Q.dyn_dtree)),Ne(Q),ke&&Xe(Q)}function Ie(Q,me,be){return Q.pending_buf[Q.d_buf+Q.last_lit*2]=me>>>8&255,Q.pending_buf[Q.d_buf+Q.last_lit*2+1]=me&255,Q.pending_buf[Q.l_buf+Q.last_lit]=be&255,Q.last_lit++,me===0?Q.dyn_ltree[be*2]++:(Q.matches++,me--,Q.dyn_ltree[(X[be]+h+1)*2]++,Q.dyn_dtree[ue(me)*2]++),Q.last_lit===Q.lit_bufsize-1}i._tr_init=se,i._tr_stored_block=_e,i._tr_flush_block=Pe,i._tr_tally=Ie,i._tr_align=Se}),"./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js":(s=>{function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}s.exports=i}),"./src/3Dmol.ts":((s,i,n)=>{n.r(i),n.d(i,{CAP:()=>C.CAP,CC:()=>d.CC,CONTEXTS_PER_VIEWPORT:()=>R.CONTEXTS_PER_VIEWPORT,Color:()=>d.Color,CustomLinear:()=>x.CustomLinear,Cylinder:()=>v.Cylinder,GLDraw:()=>C.GLDraw,GLModel:()=>p.GLModel,GLShape:()=>E.GLShape,GLViewer:()=>R.GLViewer,GLVolumetricRender:()=>c.GLVolumetricRender,Gradient:()=>x.Gradient,GradientType:()=>x.GradientType,Label:()=>A.Label,LabelCount:()=>A.LabelCount,MarchingCube:()=>M.MarchingCube,MarchingCubeInitializer:()=>M.MarchingCubeInitializer,Matrix3:()=>g.Matrix3,Matrix4:()=>g.Matrix4,Parsers:()=>w.Parsers,PausableTimer:()=>h.PausableTimer,PointGrid:()=>M.PointGrid,ProteinSurface:()=>M.ProteinSurface,Quaternion:()=>g.Quaternion,ROYGB:()=>x.ROYGB,RWB:()=>x.RWB,Ray:()=>g.Ray,Sinebow:()=>x.Sinebow,Sphere:()=>v.Sphere,SurfaceType:()=>M.SurfaceType,Triangle:()=>v.Triangle,Vector2:()=>g.Vector2,Vector3:()=>g.Vector3,VolumeData:()=>l.VolumeData,adjustVolumeStyle:()=>h.adjustVolumeStyle,applyPartialCharges:()=>T.applyPartialCharges,autoinit:()=>a.autoinit,autoload:()=>a.autoload,base64ToArray:()=>h.base64ToArray,bondLength:()=>w.bondLength,builtinColorSchemes:()=>d.builtinColorSchemes,builtinGradients:()=>x.builtinGradients,chains:()=>d.chains,clamp:()=>g.clamp,conversionMatrix3:()=>g.conversionMatrix3,createStereoViewer:()=>R.createStereoViewer,createViewer:()=>R.createViewer,createViewerGrid:()=>R.createViewerGrid,deepCopy:()=>h.deepCopy,degToRad:()=>g.degToRad,download:()=>h.download,drawCartoon:()=>y.drawCartoon,elementColors:()=>d.elementColors,extend:()=>h.extend,get:()=>h.get,getAtomProperty:()=>h.getAtomProperty,getColorFromStyle:()=>h.getColorFromStyle,getElement:()=>h.getElement,getExtent:()=>h.getExtent,getGradient:()=>x.getGradient,getPropertyRange:()=>h.getPropertyRange,getbin:()=>h.getbin,htmlColors:()=>d.htmlColors,inflateString:()=>h.inflateString,isEmptyObject:()=>h.isEmptyObject,isNumeric:()=>h.isNumeric,makeFunction:()=>h.makeFunction,mergeGeos:()=>h.mergeGeos,normalizeValue:()=>x.normalizeValue,partialCharges:()=>T.partialCharges,processing_autoinit:()=>a.processing_autoinit,residues:()=>d.residues,setBondLength:()=>w.setBondLength,setSyncSurface:()=>M.setSyncSurface,specStringToObject:()=>h.specStringToObject,splitMesh:()=>E.splitMesh,ssColors:()=>d.ssColors,subdivide_spline:()=>y.subdivide_spline,syncSurface:()=>M.syncSurface,viewers:()=>a.viewers});var a=n("./src/autoload.ts"),d=n("./src/colors.ts"),y=n("./src/glcartoon.ts"),C=n("./src/GLDraw.ts"),p=n("./src/GLModel.ts"),E=n("./src/GLShape.ts"),R=n("./src/GLViewer.ts"),x=n("./src/Gradient.ts"),A=n("./src/Label.ts"),w=n("./src/parsers/index.ts"),T=n("./src/partialCharges.ts"),M=n("./src/ProteinSurface4.ts");n("./src/specs.ts");var h=n("./src/utilities.ts"),l=n("./src/VolumeData.ts"),c=n("./src/VolumetricRender.ts"),g=n("./src/WebGL/math/index.ts"),v=n("./src/WebGL/shapes/index.ts")}),"./src/GLDraw.ts":((s,i,n)=>{n.r(i),n.d(i,{CAP:()=>d,GLDraw:()=>y});var a=n("./src/WebGL/math/index.ts"),d;(function(C){C[C.NONE=0]="NONE",C[C.FLAT=1]="FLAT",C[C.ROUND=2]="ROUND"})(d||(d={}));var y;(function(C){function p(h,l,c){var g=Math.hypot(h,l),v,b,S,u,m;g<1e-4?(b=0,S=1):(b=-h/g,S=l/g),l=-b*h+S*l,v=Math.hypot(l,c),v<1e-4?(u=0,m=1):(u=c/v,m=l/v);var _=new Float32Array(9);return _[0]=S,_[1]=b,_[2]=0,_[3]=-b*m,_[4]=S*m,_[5]=u,_[6]=b*u,_[7]=-S*u,_[8]=m,_}class E{constructor(){this.cache={};let l=[],c=4,g=Math.pow(2,c),v=2,b=Math.pow(2,v),S=g/b,u;for(l[0]=new a.Vector3(-1,0,0),l[S]=new a.Vector3(0,0,1),l[S*2]=new a.Vector3(1,0,0),l[S*3]=new a.Vector3(0,0,-1),v=3;v<=c;v++){for(b=Math.pow(2,v-1),S=g/b,u=0;u<b-1;u++)l[S/2+u*S]=l[u*S].clone().add(l[(u+1)*S]).normalize();u=b-1,l[S/2+u*S]=l[u*S].clone().add(l[0]).normalize()}this.basisVectors=l}getVerticesForRadius(l,c,g){if(typeof this.cache<"u"&&this.cache[l]!==void 0&&this.cache[l][c+g]!==void 0)return this.cache[l][c+g];for(var v=this.basisVectors.length,b=[],S=[],u,m=0;m<v;m++)b.push(this.basisVectors[m].clone().multiplyScalar(l)),b.push(this.basisVectors[m].clone().multiplyScalar(l)),u=this.basisVectors[m].clone().normalize(),S.push(u),S.push(u);var _=[],D=10,L=v,P=0,N=Math.PI*2,U=0,V=Math.PI,W,G,H=!1,k=!1;for(G=0;G<=D;G++){H=G===0||G===D,k=G===D/2;var X=[],$=[];for(W=0;W<=L;W++){if(k){var F=W<L?2*W:0;$.push(F+1),X.push(F);continue}var K=W/L,te=G/D;if(!H||W===0)if(W<L){var re=new a.Vector3;re.x=-l*Math.cos(P+K*N)*Math.sin(U+te*V),c==1?re.y=0:re.y=l*Math.cos(U+te*V),re.z=l*Math.sin(P+K*N)*Math.sin(U+te*V),Math.abs(re.x)<1e-5&&(re.x=0),Math.abs(re.y)<1e-5&&(re.y=0),Math.abs(re.z)<1e-5&&(re.z=0),c==d.FLAT?(u=new a.Vector3(0,Math.cos(U+te*V),0),u.normalize()):(u=new a.Vector3(re.x,re.y,re.z),u.normalize()),b.push(re),S.push(u),X.push(b.length-1)}else X.push(b.length-L);else H&&X.push(b.length-1)}k&&_.push($),_.push(X)}var le={vertices:b,normals:S,verticesRows:_,w:L,h:D};return l in this.cache||(this.cache[l]={}),this.cache[l][c+g]=le,le}}var R=new E;function x(h,l,c,g,v,b=0,S=0){if(!l||!c)return;let u=function(De){if(typeof De=="string"){let lt=De;return lt.toLowerCase()=="flat"?d.FLAT:lt.toLowerCase()=="round"?d.ROUND:d.NONE}else return De};b=u(b),S=u(S);var m=S||b;v=v||{r:0,g:0,b:0};var _=p(c.x-l.x,c.y-l.y,c.z-l.z),D=R.getVerticesForRadius(g,S,"to"),L=D.w,P=D.h,N=m?P*L+2:2*L,U=h.updateGeoGroup(N),V=D.vertices,W=D.normals,G=D.verticesRows,H=G[P/2],k=G[P/2+1],X=U.vertices,$,F,K,te,re,le,oe=U.vertexArray,ue=U.normalArray,he=U.colorArray,ge=U.faceArray;for(K=0;K<L;++K){var Oe=2*K;te=_[0]*V[Oe].x+_[3]*V[Oe].y+_[6]*V[Oe].z,re=_[1]*V[Oe].x+_[4]*V[Oe].y+_[7]*V[Oe].z,le=_[5]*V[Oe].y+_[8]*V[Oe].z,$=3*(X+Oe),F=U.faceidx,oe[$]=te+l.x,oe[$+1]=re+l.y,oe[$+2]=le+l.z,oe[$+3]=te+c.x,oe[$+4]=re+c.y,oe[$+5]=le+c.z,ue[$]=te,ue[$+3]=te,ue[$+1]=re,ue[$+4]=re,ue[$+2]=le,ue[$+5]=le,he[$]=v.r,he[$+3]=v.r,he[$+1]=v.g,he[$+4]=v.g,he[$+2]=v.b,he[$+5]=v.b,ge[F]=k[K]+X,ge[F+1]=k[K+1]+X,ge[F+2]=H[K]+X,ge[F+3]=H[K]+X,ge[F+4]=k[K+1]+X,ge[F+5]=H[K+1]+X,U.faceidx+=6}if(m){var Le=S?0:P/2,$e=b?P+1:P/2+1,we,ce,xe,Ne,Xe,rt,nt,et,Ze,qe,Ve,Ge,at,ot,J,ne,se,_e,Se,Pe,Ie,Q,me,be,ke,ve,ze,q,He,Je,j,Me;for(re=Le;re<$e;re++)if(re!==P/2){var Ae=re<=P/2?c:l,ee=R.getVerticesForRadius(g,S,"to"),pe=R.getVerticesForRadius(g,b,"from");for(Ae===c?(V=ee.vertices,W=ee.normals,G=ee.verticesRows):Ae==l&&(V=pe.vertices,W=pe.normals,G=pe.verticesRows),te=0;te<L;te++)F=U.faceidx,we=G[re][te+1],He=(we+X)*3,ce=G[re][te],Je=(ce+X)*3,xe=G[re+1][te],j=(xe+X)*3,Ne=G[re+1][te+1],Me=(Ne+X)*3,Xe=_[0]*V[we].x+_[3]*V[we].y+_[6]*V[we].z,rt=_[0]*V[ce].x+_[3]*V[ce].y+_[6]*V[ce].z,nt=_[0]*V[xe].x+_[3]*V[xe].y+_[6]*V[xe].z,et=_[0]*V[Ne].x+_[3]*V[Ne].y+_[6]*V[Ne].z,Ze=_[1]*V[we].x+_[4]*V[we].y+_[7]*V[we].z,qe=_[1]*V[ce].x+_[4]*V[ce].y+_[7]*V[ce].z,Ve=_[1]*V[xe].x+_[4]*V[xe].y+_[7]*V[xe].z,Ge=_[1]*V[Ne].x+_[4]*V[Ne].y+_[7]*V[Ne].z,at=_[5]*V[we].y+_[8]*V[we].z,ot=_[5]*V[ce].y+_[8]*V[ce].z,J=_[5]*V[xe].y+_[8]*V[xe].z,ne=_[5]*V[Ne].y+_[8]*V[Ne].z,oe[He]=Xe+Ae.x,oe[Je]=rt+Ae.x,oe[j]=nt+Ae.x,oe[Me]=et+Ae.x,oe[He+1]=Ze+Ae.y,oe[Je+1]=qe+Ae.y,oe[j+1]=Ve+Ae.y,oe[Me+1]=Ge+Ae.y,oe[He+2]=at+Ae.z,oe[Je+2]=ot+Ae.z,oe[j+2]=J+Ae.z,oe[Me+2]=ne+Ae.z,he[He]=v.r,he[Je]=v.r,he[j]=v.r,he[Me]=v.r,he[He+1]=v.g,he[Je+1]=v.g,he[j+1]=v.g,he[Me+1]=v.g,he[He+2]=v.b,he[Je+2]=v.b,he[j+2]=v.b,he[Me+2]=v.b,se=_[0]*W[we].x+_[3]*W[we].y+_[6]*W[we].z,_e=_[0]*W[ce].x+_[3]*W[ce].y+_[6]*W[ce].z,Se=_[0]*W[xe].x+_[3]*W[xe].y+_[6]*W[xe].z,Pe=_[0]*W[Ne].x+_[3]*W[Ne].y+_[6]*W[Ne].z,Ie=_[1]*W[we].x+_[4]*W[we].y+_[7]*W[we].z,Q=_[1]*W[ce].x+_[4]*W[ce].y+_[7]*W[ce].z,me=_[1]*W[xe].x+_[4]*W[xe].y+_[7]*W[xe].z,be=_[1]*W[Ne].x+_[4]*W[Ne].y+_[7]*W[Ne].z,ke=_[5]*W[we].y+_[8]*W[we].z,ve=_[5]*W[ce].y+_[8]*W[ce].z,ze=_[5]*W[xe].y+_[8]*W[xe].z,q=_[5]*W[Ne].y+_[8]*W[Ne].z,re===0?(ue[He]=se,ue[j]=Se,ue[Me]=Pe,ue[He+1]=Ie,ue[j+1]=me,ue[Me+1]=be,ue[He+2]=ke,ue[j+2]=ze,ue[Me+2]=q,ge[F]=we+X,ge[F+1]=xe+X,ge[F+2]=Ne+X,U.faceidx+=3):re===$e-1?(ue[He]=se,ue[Je]=_e,ue[j]=Se,ue[He+1]=Ie,ue[Je+1]=Q,ue[j+1]=me,ue[He+2]=ke,ue[Je+2]=ve,ue[j+2]=ze,ge[F]=we+X,ge[F+1]=ce+X,ge[F+2]=xe+X,U.faceidx+=3):(ue[He]=se,ue[Je]=_e,ue[Me]=Pe,ue[He+1]=Ie,ue[Je+1]=Q,ue[Me+1]=be,ue[He+2]=ke,ue[Je+2]=ve,ue[Me+2]=q,ue[Je]=_e,ue[j]=Se,ue[Me]=Pe,ue[Je+1]=Q,ue[j+1]=me,ue[Me+1]=be,ue[Je+2]=ve,ue[j+2]=ze,ue[Me+2]=q,ge[F]=we+X,ge[F+1]=ce+X,ge[F+2]=Ne+X,ge[F+3]=ce+X,ge[F+4]=xe+X,ge[F+5]=Ne+X,U.faceidx+=6)}}U.vertices+=N}C.drawCylinder=x;function A(h,l,c,g,v){if(!l||!c)return;v=v||{r:0,g:0,b:0};let b=new a.Vector3(c.x-l.x,c.y-l.y,c.z-l.z);var S=p(b.x,b.y,b.z);b=b.normalize();var u=R.basisVectors.length,m=R.basisVectors,_=u+2,D=h.updateGeoGroup(_),L=D.vertices,P,N,U,V,W,G,H=D.vertexArray,k=D.normalArray,X=D.colorArray,$=D.faceArray;for(P=L*3,H[P]=l.x,H[P+1]=l.y,H[P+2]=l.z,k[P]=-b.x,k[P+1]=-b.y,k[P+2]=-b.z,X[P]=v.r,X[P+1]=v.g,X[P+2]=v.b,H[P+3]=c.x,H[P+4]=c.y,H[P+5]=c.z,k[P+3]=b.x,k[P+4]=b.y,k[P+5]=b.z,X[P+3]=v.r,X[P+4]=v.g,X[P+5]=v.b,P+=6,U=0;U<u;++U){var F=m[U].clone();F.multiplyScalar(g),V=S[0]*F.x+S[3]*F.y+S[6]*F.z,W=S[1]*F.x+S[4]*F.y+S[7]*F.z,G=S[5]*F.y+S[8]*F.z,H[P]=V+l.x,H[P+1]=W+l.y,H[P+2]=G+l.z,k[P]=V,k[P+1]=W,k[P+2]=G,X[P]=v.r,X[P+1]=v.g,X[P+2]=v.b,P+=3}for(D.vertices+=u+2,N=D.faceidx,U=0;U<u;U++){var K=L+2+U,te=L+2+(U+1)%u;$[N]=K,$[N+1]=te,$[N+2]=L,N+=3,$[N]=K,$[N+1]=te,$[N+2]=L+1,N+=3}D.faceidx+=6*u}C.drawCone=A;class w{constructor(){this.cache=new Map}getVerticesForRadius(l,c){c=c||2,this.cache.has(c)||this.cache.set(c,new Map);let g=this.cache.get(c);if(g.has(l))return g.get(l);var v={vertices:[],verticesRows:[],normals:[]},b=16*c,S=10*c;l<1&&(b=10*c,S=8*c);var u=0,m=Math.PI*2,_=0,D=Math.PI,L,P;for(P=0;P<=S;P++){let U=[];for(L=0;L<=b;L++){let V=L/b,W=P/S,G=-l*Math.cos(u+V*m)*Math.sin(_+W*D),H=l*Math.cos(_+W*D),k=l*Math.sin(u+V*m)*Math.sin(_+W*D);var N=new a.Vector3(G,H,k);N.normalize(),v.vertices.push({x:G,y:H,z:k}),v.normals.push(N),U.push(v.vertices.length-1)}v.verticesRows.push(U)}return g.set(l,v),v}}var T=new w;function M(h,l,c,g,v){var b=T.getVerticesForRadius(c,v),S=b.vertices,u=b.normals,m=h.updateGeoGroup(S.length),_=m.vertices,D=m.vertexArray,L=m.colorArray,P=m.faceArray,N=m.lineArray,U=m.normalArray;for(let G=0,H=S.length;G<H;++G){let k=3*(_+G),X=S[G];D[k]=X.x+l.x,D[k+1]=X.y+l.y,D[k+2]=X.z+l.z,L[k]=g.r,L[k+1]=g.g,L[k+2]=g.b}m.vertices+=S.length;let V=b.verticesRows,W=V.length-1;for(let G=0;G<W;G++){let H=V[G].length-1;for(let k=0;k<H;k++){let X=m.faceidx,$=m.lineidx,F=V[G][k+1]+_,K=F*3,te=V[G][k]+_,re=te*3,le=V[G+1][k]+_,oe=le*3,ue=V[G+1][k+1]+_,he=ue*3,ge=u[F-_],Oe=u[te-_],Le=u[le-_],$e=u[ue-_];Math.abs(S[F-_].y)===c?(U[K]=ge.x,U[oe]=Le.x,U[he]=$e.x,U[K+1]=ge.y,U[oe+1]=Le.y,U[he+1]=$e.y,U[K+2]=ge.z,U[oe+2]=Le.z,U[he+2]=$e.z,P[X]=F,P[X+1]=le,P[X+2]=ue,N[$]=F,N[$+1]=le,N[$+2]=F,N[$+3]=ue,N[$+4]=le,N[$+5]=ue,m.faceidx+=3,m.lineidx+=6):Math.abs(S[le-_].y)===c?(U[K]=ge.x,U[re]=Oe.x,U[oe]=Le.x,U[K+1]=ge.y,U[re+1]=Oe.y,U[oe+1]=Le.y,U[K+2]=ge.z,U[re+2]=Oe.z,U[oe+2]=Le.z,P[X]=F,P[X+1]=te,P[X+2]=le,N[$]=F,N[$+1]=te,N[$+2]=F,N[$+3]=le,N[$+4]=te,N[$+5]=le,m.faceidx+=3,m.lineidx+=6):(U[K]=ge.x,U[re]=Oe.x,U[he]=$e.x,U[K+1]=ge.y,U[re+1]=Oe.y,U[he+1]=$e.y,U[K+2]=ge.z,U[re+2]=Oe.z,U[he+2]=$e.z,U[re]=Oe.x,U[oe]=Le.x,U[he]=$e.x,U[re+1]=Oe.y,U[oe+1]=Le.y,U[he+1]=$e.y,U[re+2]=Oe.z,U[oe+2]=Le.z,U[he+2]=$e.z,P[X]=F,P[X+1]=te,P[X+2]=ue,P[X+3]=te,P[X+4]=le,P[X+5]=ue,N[$]=F,N[$+1]=te,N[$+2]=F,N[$+3]=ue,N[$+4]=te,N[$+5]=le,N[$+6]=le,N[$+7]=ue,m.faceidx+=6,m.lineidx+=8)}}}C.drawSphere=M})(y||(y={}))}),"./src/GLModel.ts":((s,i,n)=>{n.r(i),n.d(i,{GLModel:()=>M});var a=n("./src/WebGL/index.ts"),d=n("./src/WebGL/shapes/index.ts"),y=n("./src/WebGL/math/index.ts"),C=n("./src/colors.ts"),p=n("./src/GLDraw.ts"),E=n("./src/glcartoon.ts"),R=n("./src/utilities.ts"),x=n("./src/Gradient.ts"),A=n("./src/parsers/index.ts"),w=n("./node_modules/netcdfjs/lib-esm/index.js"),T=n("./src/parsers/utils/assignBonds.ts");class M{static sameObj(l,c){return l&&c?JSON.stringify(l)==JSON.stringify(c):l==c}constructor(l,c,g){this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new y.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=C.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=c||{},this.viewer=g,this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:C.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=l}getRadiusFromStyle(l,c){var g=this.defaultSphereRadius;if(typeof c.radius<"u")g=c.radius;else if(M.vdwRadii[l.elem])g=M.vdwRadii[l.elem];else if(l.elem.length>1){let v=l.elem;v=v[0].toUpperCase()+v[1].toLowerCase(),M.vdwRadii[v]&&(g=M.vdwRadii[v])}return typeof c.scale<"u"&&(g*=c.scale),g}drawAtomCross(l,c){if(l.style.cross){var g=l.style.cross;if(!g.hidden){var v=g.linewidth||M.defaultlineWidth;c[v]||(c[v]=new a.Geometry);var b=c[v].updateGeoGroup(6),S=this.getRadiusFromStyle(l,g),u=[[S,0,0],[-S,0,0],[0,S,0],[0,-S,0],[0,0,S],[0,0,-S]],m=l.clickable||l.hoverable;m&&l.intersectionShape===void 0&&(l.intersectionShape={sphere:[],cylinder:[],line:[]});for(var _=(0,R.getColorFromStyle)(l,g),D=b.vertexArray,L=b.colorArray,P=0;P<6;P++){var N=b.vertices*3;if(b.vertices++,D[N]=l.x+u[P][0],D[N+1]=l.y+u[P][1],D[N+2]=l.z+u[P][2],L[N]=_.r,L[N+1]=_.g,L[N+2]=_.b,m){var U=new y.Vector3(u[P][0],u[P][1],u[P][2]);U.multiplyScalar(.1),U.set(U.x+l.x,U.y+l.y,U.z+l.z),l.intersectionShape.line.push(U)}}}}}getGoodCross(l,c,g,v){for(var b=null,S=-1,u=0,m=l.bonds.length;u<m;u++)if(l.bonds[u]!=c.index){let D=l.bonds[u],L=this.atoms[D],N=new y.Vector3(L.x,L.y,L.z).clone();N.sub(g);let U=N.clone();U.cross(v);var _=U.lengthSq();if(_>S&&(S=_,b=U,S>.1))return b}return b}getSideBondV(l,c,g){var v,b,S,u,m,_=new y.Vector3(l.x,l.y,l.z),D=new y.Vector3(c.x,c.y,c.z),L=D.clone(),P=null;if(L.sub(_),l.bonds.length===1)c.bonds.length===1?(P=L.clone(),Math.abs(P.x)>1e-4?P.y+=1:P.x+=1):(v=(g+1)%c.bonds.length,b=c.bonds[v],S=this.atoms[b],S.index==l.index&&(v=(v+1)%c.bonds.length,b=c.bonds[v],S=this.atoms[b]),u=new y.Vector3(S.x,S.y,S.z),m=u.clone(),m.sub(_),P=m.clone(),P.cross(L));else if(P=this.getGoodCross(l,c,_,L),P.lengthSq()<.01){var N=this.getGoodCross(c,l,_,L);N!=null&&(P=N)}return P.lengthSq()<.01&&(P=L.clone(),Math.abs(P.x)>1e-4?P.y+=1:P.x+=1),P.cross(L),P.normalize(),P}addLine(l,c,g,v,b,S){l[g]=v.x,l[g+1]=v.y,l[g+2]=v.z,c[g]=S.r,c[g+1]=S.g,c[g+2]=S.b,l[g+3]=b.x,l[g+4]=b.y,l[g+5]=b.z,c[g+3]=S.r,c[g+4]=S.g,c[g+5]=S.b}drawBondLines(l,c,g){if(l.style.line){var v=l.style.line;if(!v.hidden){var b,S,u,m,_=v.linewidth||M.defaultlineWidth;g[_]||(g[_]=new a.Geometry);for(var D=g[_].updateGeoGroup(6*l.bonds.length),L=D.vertexArray,P=D.colorArray,N=0;N<l.bonds.length;N++){var U=l.bonds[N],V=c[U];if(V.style.line&&!(l.index>=V.index)){var W=new y.Vector3(l.x,l.y,l.z),G=new y.Vector3(V.x,V.y,V.z),H=W.clone().add(G).multiplyScalar(.5),k=!1,X=l.clickable||l.hoverable,$=V.clickable||V.hoverable;(X||$)&&(X&&(l.intersectionShape===void 0&&(l.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),l.intersectionShape.line.push(W),l.intersectionShape.line.push(H)),$&&(V.intersectionShape===void 0&&(V.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),V.intersectionShape.line.push(H),V.intersectionShape.line.push(G)));var F=(0,R.getColorFromStyle)(l,l.style.line),K=(0,R.getColorFromStyle)(V,V.style.line);if(l.bondStyles&&l.bondStyles[N]){var te=l.bondStyles[N];if(!te.iswire)continue;te.singleBond&&(k=!0),typeof te.color1<"u"&&(F=C.CC.color(te.color1)),typeof te.color2<"u"&&(K=C.CC.color(te.color2))}var re=D.vertices*3,le,oe;if(l.bondOrder[N]>1&&l.bondOrder[N]<4&&!k){var ue=this.getSideBondV(l,V,N),he=G.clone();he.sub(W),l.bondOrder[N]==2?(ue.multiplyScalar(.1),b=W.clone(),b.add(ue),S=W.clone(),S.sub(ue),u=b.clone(),u.add(he),m=S.clone(),m.add(he),F==K?(D.vertices+=4,this.addLine(L,P,re,b,u,F),this.addLine(L,P,re+6,S,m,F)):(D.vertices+=8,he.multiplyScalar(.5),le=b.clone(),le.add(he),oe=S.clone(),oe.add(he),this.addLine(L,P,re,b,le,F),this.addLine(L,P,re+6,le,u,K),this.addLine(L,P,re+12,S,oe,F),this.addLine(L,P,re+18,oe,m,K))):l.bondOrder[N]==3&&(ue.multiplyScalar(.1),b=W.clone(),b.add(ue),S=W.clone(),S.sub(ue),u=b.clone(),u.add(he),m=S.clone(),m.add(he),F==K?(D.vertices+=6,this.addLine(L,P,re,W,G,F),this.addLine(L,P,re+6,b,u,F),this.addLine(L,P,re+12,S,m,F)):(D.vertices+=12,he.multiplyScalar(.5),le=b.clone(),le.add(he),oe=S.clone(),oe.add(he),this.addLine(L,P,re,W,H,F),this.addLine(L,P,re+6,H,G,K),this.addLine(L,P,re+12,b,le,F),this.addLine(L,P,re+18,le,u,K),this.addLine(L,P,re+24,S,oe,F),this.addLine(L,P,re+30,oe,m,K)))}else F==K?(D.vertices+=2,this.addLine(L,P,re,W,G,F)):(D.vertices+=4,this.addLine(L,P,re,W,H,F),this.addLine(L,P,re+6,H,G,K))}}}}}drawAtomSphere(l,c){if(l.style.sphere){var g=l.style.sphere;if(!g.hidden){var v=(0,R.getColorFromStyle)(l,g),b=this.getRadiusFromStyle(l,g);if((l.clickable===!0||l.hoverable)&&l.intersectionShape!==void 0){var S=new y.Vector3(l.x,l.y,l.z);l.intersectionShape.sphere.push(new d.Sphere(S,b))}p.GLDraw.drawSphere(c,l,b,v)}}}drawAtomClickSphere(l){if(l.style.clicksphere){var c=l.style.clicksphere;if(!c.hidden){var g=this.getRadiusFromStyle(l,c);if((l.clickable===!0||l.hoverable)&&l.intersectionShape!==void 0){var v=new y.Vector3(l.x,l.y,l.z);l.intersectionShape.sphere.push(new d.Sphere(v,g))}}}}drawAtomInstanced(l,c){if(l.style.sphere){var g=l.style.sphere;if(!g.hidden){var v=this.getRadiusFromStyle(l,g),b=(0,R.getColorFromStyle)(l,g),S=c.updateGeoGroup(1),u=S.vertices,m=u*3,_=S.vertexArray,D=S.colorArray,L=S.radiusArray;if(_[m]=l.x,_[m+1]=l.y,_[m+2]=l.z,D[m]=b.r,D[m+1]=b.g,D[m+2]=b.b,L[u]=v,(l.clickable===!0||l.hoverable)&&l.intersectionShape!==void 0){var P=new y.Vector3(l.x,l.y,l.z);l.intersectionShape.sphere.push(new d.Sphere(P,v))}S.vertices+=1}}}drawSphereImposter(l,c,g,v){var b=l.updateGeoGroup(4),S,u=b.vertices,m=u*3,_=b.vertexArray,D=b.colorArray;for(S=0;S<4;S++)_[m+3*S]=c.x,_[m+3*S+1]=c.y,_[m+3*S+2]=c.z;var L=b.normalArray;for(S=0;S<4;S++)D[m+3*S]=v.r,D[m+3*S+1]=v.g,D[m+3*S+2]=v.b;L[m+0]=-g,L[m+1]=g,L[m+2]=0,L[m+3]=-g,L[m+4]=-g,L[m+5]=0,L[m+6]=g,L[m+7]=-g,L[m+8]=0,L[m+9]=g,L[m+10]=g,L[m+11]=0,b.vertices+=4;var P=b.faceArray,N=b.faceidx;P[N+0]=u,P[N+1]=u+1,P[N+2]=u+2,P[N+3]=u+2,P[N+4]=u+3,P[N+5]=u,b.faceidx+=6}drawAtomImposter(l,c){if(l.style.sphere){var g=l.style.sphere;if(!g.hidden){var v=this.getRadiusFromStyle(l,g),b=(0,R.getColorFromStyle)(l,g);if((l.clickable===!0||l.hoverable)&&l.intersectionShape!==void 0){var S=new y.Vector3(l.x,l.y,l.z);l.intersectionShape.sphere.push(new d.Sphere(S,v))}this.drawSphereImposter(c,l,v,b)}}}calculateDashes(l,c,g,v,b){var S=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2)+Math.pow(l.z-c.z,2));g=Math.max(g,0),b=Math.max(b,0)+2*g,v=Math.max(v,.001),v+b>S&&(v=S,b=0);var u=Math.floor((S-v)/(v+b))+1,m=u*v;b=(S-m)/u;for(var _,D=new y.Vector3(l.x,l.y,l.z),L=new y.Vector3((c.x-l.x)/(S/b),(c.y-l.y)/(S/b),(c.z-l.z)/(S/b)),P=new y.Vector3((c.x-l.x)/(S/v),(c.y-l.y)/(S/v),(c.z-l.z)/(S/v)),N=[],U=0;U<u;U++)_=new y.Vector3(D.x+P.x,D.y+P.y,D.z+P.z),N.push({from:D,to:_}),D=new y.Vector3(_.x+L.x,_.y+L.y,_.z+L.z);return N}static drawStickImposter(l,c,g,v,b,S=0,u=0){for(var m=l.updateGeoGroup(4),_=m.vertices,D=_*3,L=m.vertexArray,P=m.colorArray,N=m.radiusArray,U=m.normalArray,V=b.r,W=b.g,G=b.b,H=function(K){var te=-K;return te==0&&(te=-1e-4),te},k=D,X=0;X<4;X++)L[k]=c.x,U[k]=g.x,P[k]=V,k++,L[k]=c.y,U[k]=g.y,P[k]=W,k++,L[k]=c.z,U[k]=g.z,X<2?P[k]=G:P[k]=H(G),k++;m.vertices+=4,N[_]=-v,N[_+1]=v,N[_+2]=-v,N[_+3]=v;var $=m.faceArray,F=m.faceidx;$[F+0]=_,$[F+1]=_+1,$[F+2]=_+2,$[F+3]=_+2,$[F+4]=_+3,$[F+5]=_,m.faceidx+=6}drawBondSticks(l,c,g){var v,b;if(l.style.stick){var S=l.style.stick;if(!S.hidden){var u=S.radius||this.defaultStickRadius,m=S.doubleBondScaling||.4,_=S.tripleBondScaling||.25,D=((v=S.dashedBondConfig)===null||v===void 0?void 0:v.dashLength)||.1,L=((b=S.dashedBondConfig)===null||b===void 0?void 0:b.gapLength)||.25,P=u,N=S.singleBonds||!1,U=S.dashedBonds||!1,V=0,W=0,G,H,k,X,$,F,K,te,re,le,oe,ue=(0,R.getColorFromStyle)(l,S),he,ge,Oe;!l.capDrawn&&l.bonds.length<4&&(V=2);var Le=me=>{var be=g.imposter?M.drawStickImposter:p.GLDraw.drawCylinder;return!U&&me>=1?be:(ke,ve,ze,q,He,Je=0,j=0,Me=.1,Ae=.25)=>{var ee=this.calculateDashes(ve,ze,q,Me,Ae);ee.forEach(pe=>{be(ke,pe.from,pe.to,q,He,Je,j)})}};for(k=0;k<l.bonds.length;k++){var $e=Le(l.bondOrder[k]),we=l.bonds[k],ce=c[we];if(he=ge=Oe=null,l.index<ce.index){var xe=ce.style;if(!xe.stick||xe.stick.hidden)continue;var Ne=(0,R.getColorFromStyle)(ce,xe.stick);if(P=u,X=N,l.bondStyles&&l.bondStyles[k]){if($=l.bondStyles[k],$.iswire)continue;$.radius&&(P=$.radius),$.singleBond&&(X=!0),typeof $.color1<"u"&&(ue=C.CC.color($.color1)),typeof $.color2<"u"&&(Ne=C.CC.color($.color2))}var Xe=new y.Vector3(l.x,l.y,l.z),rt=new y.Vector3(ce.x,ce.y,ce.z);if(l.bondOrder[k]<=1||X||l.bondOrder[k]>3){if(l.bondOrder[k]<1&&(P*=l.bondOrder[k]),!ce.capDrawn&&ce.bonds.length<4&&(W=2),ue!=Ne?(he=new y.Vector3().addVectors(Xe,rt).multiplyScalar(.5),$e(g,Xe,he,P,ue,V,0,D,L),$e(g,he,rt,P,Ne,0,W,D,L)):$e(g,Xe,rt,P,ue,V,W,D,L),G=l.clickable||l.hoverable,H=ce.clickable||ce.hoverable,G||H){if(he||(he=new y.Vector3().addVectors(Xe,rt).multiplyScalar(.5)),G){var nt=new d.Cylinder(Xe,he,P),et=new d.Sphere(Xe,P);l.intersectionShape.cylinder.push(nt),l.intersectionShape.sphere.push(et)}if(H){var Ze=new d.Cylinder(rt,he,P),qe=new d.Sphere(rt,P);ce.intersectionShape.cylinder.push(Ze),ce.intersectionShape.sphere.push(qe)}}}else if(l.bondOrder[k]>1){var Ve=0,Ge=0;P!=u&&(Ve=2,Ge=2);var at=rt.clone(),ot=null;at.sub(Xe);var J,ne,se,_e,Se;ot=this.getSideBondV(l,ce,k),l.bondOrder[k]==2?(J=P*m,ot.multiplyScalar(J*1.5),ne=Xe.clone(),ne.add(ot),se=Xe.clone(),se.sub(ot),_e=ne.clone(),_e.add(at),Se=se.clone(),Se.add(at),ue!=Ne?(he=new y.Vector3().addVectors(ne,_e).multiplyScalar(.5),ge=new y.Vector3().addVectors(se,Se).multiplyScalar(.5),$e(g,ne,he,J,ue,Ve,0),$e(g,he,_e,J,Ne,0,Ge),$e(g,se,ge,J,ue,Ve,0),$e(g,ge,Se,J,Ne,0,Ge)):($e(g,ne,_e,J,ue,Ve,Ge),$e(g,se,Se,J,ue,Ve,Ge)),G=l.clickable||l.hoverable,H=ce.clickable||ce.hoverable,(G||H)&&(he||(he=new y.Vector3().addVectors(ne,_e).multiplyScalar(.5)),ge||(ge=new y.Vector3().addVectors(se,Se).multiplyScalar(.5)),G&&(F=new d.Cylinder(ne,he,J),K=new d.Cylinder(se,ge,J),l.intersectionShape.cylinder.push(F),l.intersectionShape.cylinder.push(K)),H&&(re=new d.Cylinder(_e,he,J),le=new d.Cylinder(Se,ge,J),ce.intersectionShape.cylinder.push(re),ce.intersectionShape.cylinder.push(le)))):l.bondOrder[k]==3&&(J=P*_,ot.cross(at),ot.normalize(),ot.multiplyScalar(J*3),ne=Xe.clone(),ne.add(ot),se=Xe.clone(),se.sub(ot),_e=ne.clone(),_e.add(at),Se=se.clone(),Se.add(at),ue!=Ne?(he=new y.Vector3().addVectors(ne,_e).multiplyScalar(.5),ge=new y.Vector3().addVectors(se,Se).multiplyScalar(.5),Oe=new y.Vector3().addVectors(Xe,rt).multiplyScalar(.5),$e(g,ne,he,J,ue,Ve,0),$e(g,he,_e,J,Ne,0,Ge),$e(g,Xe,Oe,J,ue,V,0),$e(g,Oe,rt,J,Ne,0,W),$e(g,se,ge,J,ue,Ve,0),$e(g,ge,Se,J,Ne,0,Ge)):($e(g,ne,_e,J,ue,Ve,Ge),$e(g,Xe,rt,J,ue,V,W),$e(g,se,Se,J,ue,Ve,Ge)),G=l.clickable||l.hoverable,H=ce.clickable||ce.hoverable,(G||H)&&(he||(he=new y.Vector3().addVectors(ne,_e).multiplyScalar(.5)),ge||(ge=new y.Vector3().addVectors(se,Se).multiplyScalar(.5)),Oe||(Oe=new y.Vector3().addVectors(Xe,rt).multiplyScalar(.5)),G&&(F=new d.Cylinder(ne.clone(),he.clone(),J),K=new d.Cylinder(se.clone(),ge.clone(),J),te=new d.Cylinder(Xe.clone(),Oe.clone(),J),l.intersectionShape.cylinder.push(F),l.intersectionShape.cylinder.push(K),l.intersectionShape.cylinder.push(te)),H&&(re=new d.Cylinder(_e.clone(),he.clone(),J),le=new d.Cylinder(Se.clone(),ge.clone(),J),oe=new d.Cylinder(rt.clone(),Oe.clone(),J),ce.intersectionShape.cylinder.push(re),ce.intersectionShape.cylinder.push(le),ce.intersectionShape.cylinder.push(oe))))}}}var Pe=!1,Ie=0,Q=!1;for(k=0;k<l.bonds.length;k++)X=N,l.bondStyles&&l.bondStyles[k]&&($=l.bondStyles[k],$.singleBond&&(X=!0),$.radius&&$.radius!=u&&(Q=!0)),(X||l.bondOrder[k]==1)&&Ie++;Q?Ie>0&&(Pe=!0):Ie==0&&(l.bonds.length>0||S.showNonBonded)&&(Pe=!0),Pe&&(P=u,g.imposter?this.drawSphereImposter(g.sphereGeometry,l,P,ue):p.GLDraw.drawSphere(g,l,P,ue))}}}createMolObj(l,c){c=c||{};var g=new a.Object3D,v=[],b={},S={},u=this.drawAtomSphere,m=null,_=null;c.supportsImposters?(u=this.drawAtomImposter,m=new a.Geometry(!0),m.imposter=!0,_=new a.Geometry(!0,!0),_.imposter=!0,_.sphereGeometry=new a.Geometry(!0),_.sphereGeometry.imposter=!0,_.drawnCaps={}):c.supportsAIA?(u=this.drawAtomInstanced,m=new a.Geometry(!1,!0,!0),m.instanced=!0,_=new a.Geometry(!0)):(m=new a.Geometry(!0),_=new a.Geometry(!0));var D,L,P,N,U={},V=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(D=0,P=l.length;D<P;D++){var W=l[D];if(W&&W.style){(W.clickable||W.hoverable)&&W.intersectionShape===void 0&&(W.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),N={line:void 0,cross:void 0,stick:void 0,sphere:void 0};for(L in N)W.style[L]?W.style[L].opacity?N[L]=parseFloat(W.style[L].opacity):N[L]=1:N[L]=void 0,U[L]?N[L]!=null&&U[L]!=N[L]&&(console.log("Warning: "+L+" opacity is ambiguous"),U[L]=1):U[L]=N[L];u.call(this,W,m),this.drawAtomClickSphere(W),this.drawAtomCross(W,S),this.drawBondLines(W,l,b),this.drawBondSticks(W,l,_),typeof W.style.cartoon<"u"&&!W.style.cartoon.hidden&&(W.style.cartoon.color==="spectrum"&&typeof W.resi=="number"&&!W.hetflag&&(W.resi<V[0]&&(V[0]=W.resi),W.resi>V[1]&&(V[1]=W.resi)),v.push(W))}}if(v.length>0&&(0,E.drawCartoon)(g,v,V,this.defaultCartoonQuality),m&&m.vertices>0){m.initTypedArrays();var G=null,H=null;m.imposter?G=new a.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):m.instanced?(H=new a.Geometry(!0),p.GLDraw.drawSphere(H,{x:0,y:0,z:0},1,new C.Color(.5,.5,.5)),H.initTypedArrays(),G=new a.InstancedMaterial({sphereMaterial:new a.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:H})):G=new a.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),U.sphere<1&&U.sphere>=0&&(G.transparent=!0,G.opacity=U.sphere),H=new a.Mesh(m,G),g.add(H)}if(_.vertices>0){var k=null,X=null,$=_.sphereGeometry;(!$||typeof $.vertices>"u"||$.vertices==0)&&($=null),_.initTypedArrays(),$&&$.initTypedArrays();var F={ambient:0,vertexColors:!0,reflectivity:0};_.imposter?(k=new a.StickImposterMaterial(F),X=new a.SphereImposterMaterial(F)):(k=new a.MeshLambertMaterial(F),X=new a.MeshLambertMaterial(F),k.wireframe&&(_.setUpWireframe(),$&&$.setUpWireframe())),U.stick<1&&U.stick>=0&&(k.transparent=!0,k.opacity=U.stick,X.transparent=!0,X.opacity=U.stick);var K=new a.Mesh(_,k);if(g.add(K),$){var te=new a.Mesh($,X);g.add(te)}}var re;for(D in b)if(b.hasOwnProperty(D)){re=D;var le=new a.LineBasicMaterial({linewidth:re,vertexColors:!0});U.line<1&&U.line>=0&&(le.transparent=!0,le.opacity=U.line),b[D].initTypedArrays();var oe=new a.Line(b[D],le,a.LineStyle.LinePieces);g.add(oe)}for(D in S)if(S.hasOwnProperty(D)){re=D;var ue=new a.LineBasicMaterial({linewidth:re,vertexColors:!0});U.cross<1&&U.cross>=0&&(ue.transparent=!0,ue.opacity=U.cross),S[D].initTypedArrays();var he=new a.Line(S[D],ue,a.LineStyle.LinePieces);g.add(he)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var ge=new a.Object3D,Oe;for(Oe=0;Oe<this.modelData.symmetries.length;Oe++){var Le=new a.Object3D;Le=g.clone(),Le.matrix.copy(this.modelData.symmetries[Oe]),Le.matrixAutoUpdate=!1,ge.add(Le)}return ge}return g}getViewer(){return this.viewer}getInternalState(){return{atoms:this.atoms,frames:this.frames}}setInternalState(l){this.atoms=l.atoms,this.frames=l.frames,this.molObj=null}getCrystData(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){const l=this.modelData.cryst;this.modelData.cryst.matrix=(0,y.conversionMatrix3)(l.a,l.b,l.c,l.alpha,l.beta,l.gamma)}return this.modelData.cryst}else return null}setCrystData(l,c,g,v,b,S){l=l||1,c=c||1,g=g||1,v=v||90,b=b||90,S=S||90;const u=(0,y.conversionMatrix3)(l,c,g,v,b,S);this.modelData.cryst={a:l,b:c,c:g,alpha:v,beta:b,gamma:S,matrix:u}}setCrystMatrix(l){l=l||new y.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix:l}}getSymmetries(){return typeof this.modelData.symmetries>"u"&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}setSymmetries(l){typeof l>"u"?this.modelData.symmetries=[this.idMatrix]:(this.modelData.symmetries=l,this.molObj=null)}getID(){return this.id}getNumFrames(){return this.frames.numFrames!=null?this.frames.numFrames:this.frames.length}adjustCoord(l,c,g,v){var b=c-l;return b<-g?c+v:b>g?c-v:c}adjustCoordinatesToBox(){if(this.box&&this.atomdfs)for(var l=this.box[0],c=this.box[1],g=this.box[2],v=l*.9,b=c*.9,S=g*.9,u=0;u<this.atomdfs.length;u++)for(var m=this.atomdfs[u],_=1;_<m.length;_++){var D=this.atoms[m[_][0]],L=this.atoms[m[_][1]];D.x=this.adjustCoord(L.x,D.x,v,l),D.y=this.adjustCoord(L.y,D.y,b,c),D.z=this.adjustCoord(L.z,D.z,S,g)}}setFrame(l){var c=this.getNumFrames();let g=this,v=this.viewer;return new Promise(function(b,S){if(c==0&&b(),(l<0||l>=c)&&(l=c-1),g.frames.url!=null){var u=g.frames.url;(0,R.getbin)(u+"/traj/frame/"+l+"/"+g.frames.path,void 0,"POST",void 0).then(function(m){for(var _=new Float32Array(m,44),D=0,L=0;L<g.atoms.length;L++)g.atoms[L].x=_[D++],g.atoms[L].y=_[D++],g.atoms[L].z=_[D++];g.box&&g.atomdfs&&g.adjustCoordinatesToBox(),b()}).catch(S)}else g.atoms=g.frames[l],b();g.molObj=null,g.modelDatas&&l<g.modelDatas.length&&(g.modelData=g.modelDatas[l],g.unitCellObjects&&v&&(v.removeUnitCell(g),v.addUnitCell(g)))})}addFrame(l){this.frames.push(l)}vibrate(l=10,c=1,g=!1,v){var b=0,S=l;let u=this.viewer;g&&(b=-l,S=l),this.frames!==void 0&&this.frames.origIndex!==void 0?this.setFrame(this.frames.origIndex):this.setFrame(0),b<S&&(this.frames=[]),g&&(this.frames.origIndex=l);for(var m=b;m<S;m++){var _=[],D=this.frames.length;if(m==0&&!v){this.frames.push(this.atoms);continue}for(var L=0;L<this.atoms.length;L++){var P=(0,R.getAtomProperty)(this.atoms[L],"dx"),N=(0,R.getAtomProperty)(this.atoms[L],"dy"),U=(0,R.getAtomProperty)(this.atoms[L],"dz"),V=new y.Vector3(P,N,U),W=new y.Vector3(this.atoms[L].x,this.atoms[L].y,this.atoms[L].z),G=m*c/l;V.multiplyScalar(G),W.add(V);var H={};for(var k in this.atoms[L])H[k]=this.atoms[L][k];if(H.x=W.x,H.y=W.y,H.z=W.z,_.push(H),u&&v){var X=(0,R.extend)({},v),$=new y.Vector3(P,N,U);if($.multiplyScalar(c),$.add(W),X.start=W,X.end=$,X.frame=D,!X.color){var F=H.style.sphere;F||(F=H.style.stick),F||(F=H.style.line),X.color=(0,R.getColorFromStyle)(H,F)}u.addArrow(X)}}this.frames.push(_)}}setAtomDefaults(l){for(let c=0;c<l.length;c++){let g=l[c];g&&(g.style=g.style||(0,R.deepCopy)(M.defaultAtomStyle),g.color=g.color||this.ElementColors[g.elem]||this.defaultColor,g.model=this.id,(g.clickable||g.hoverable)&&(g.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}addMolData(l,c,g={}){var v=M.parseMolData(l,c,g);this.dontDuplicateAtoms=!g.duplicateAssemblyAtoms;var b=v.modelData;if(b&&(Array.isArray(b)?(this.modelData=b[0],g.frames&&(this.modelDatas=b)):this.modelData=b),v.box?this.box=v.box:this.box=null,this.frames.length==0){for(let u=0;u<v.length;u++)v[u].length!=0&&this.frames.push(v[u]);this.frames[0]&&(this.atoms=this.frames[0])}else if(g.frames)for(let u=0;u<v.length;u++)this.frames.push(v[u]);else for(var S=0;S<v.length;S++)this.addAtoms(v[S]);for(let u=0;u<this.frames.length;u++)this.setAtomDefaults(this.frames[u]);g.vibrate&&g.vibrate.frames&&g.vibrate.amplitude&&this.vibrate(g.vibrate.frames,g.vibrate.amplitude),g.style&&this.setStyle({},g.style)}setDontDuplicateAtoms(l){this.dontDuplicateAtoms=l}setModelData(l){this.modelData=l}propertyMatches(l,c){if(l==c)return!0;if(typeof c=="string"&&typeof l=="number"){var g=c.match(/(-?\d+)\s*-\s*(-?\d+)/);if(g){var v=parseInt(g[1]),b=parseInt(g[2]);if(g&&l>=v&&l<=b)return!0}}return!1}static deepCopyAndCache(l,c){if(typeof l!="object"||l==null||l instanceof M||l.__cache_created)return l;const g={};for(const v in l){const b=l[v];if(Array.isArray(b)){g[v]=[];for(let S=0;S<b.length;S++)g[v].push(M.deepCopyAndCache(b[S],c))}else typeof b=="object"&&v!="properties"&&v!="model"?g[v]=M.deepCopyAndCache(b,c):g[v]=b;if(v=="and"||v=="or"){const S=[];for(const u of g[v]){const m=new Set;for(const _ of c.selectedAtoms(u))m.add(_.index);S.push(m)}if(v=="and"){const u=function(_,D){const L=new Set;for(const P of D)_.has(P)&&L.add(P);return L};let m=new Set(S[0]);for(const _ of S.splice(1))m=u(m,_);g[v].__cached_results=m}else if(v=="or"){const u=new Set;for(const m of S)for(const _ of m)u.add(_);g[v].__cached_results=u}}}return g.__cache_created=!0,g}atomIsSelected(l,c){if(typeof c>"u")return!0;var g=!!c.invert,v=!0;for(var b in c)if(b=="and"||b=="or"||b=="not"){if(b=="not"){if(this.atomIsSelected(l,c[b])){v=!1;break}}else if(c[b].__cached_results===void 0&&(c=M.deepCopyAndCache(c,this)),v=c[b].__cached_results.has(l.index),!v)break}else if(b==="predicate"){if(!c.predicate(l)){v=!1;break}}else if(b=="properties"&&l[b]){for(var S in c.properties)if(!S.startsWith("__cache")){if(typeof l.properties[S]>"u"){v=!1;break}if(l.properties[S]!=c.properties[S]){v=!1;break}}}else if(b=="model"){let D=c.model;if(typeof D=="number"&&D<0&&(D=this.viewer.getNextModelId()+D),Array.isArray(D)){let L=!1;for(let P=0;P<D.length;P++)if(D[P]==this||D[P]==this.id){L=!0;break}if(!L){v=!1;break}}else if(D!=this&&D!=this.id){v=!1;break}}else if(c.hasOwnProperty(b)&&!M.ignoredKeys.has(b)&&!b.startsWith("__cache")){if(typeof l[b]>"u"){v=!1;break}let D=!1;if(b==="bonds"){var u=c[b];if(u!=l.bonds.length){v=!1;break}}else if(Array.isArray(c[b])){var m=c[b],_=l[b];for(let L=0;L<m.length;L++)if(this.propertyMatches(_,m[L])){D=!0;break}if(!D){v=!1;break}}else{let L=c[b];if(!this.propertyMatches(l[b],L)){v=!1;break}}}return g?!v:v}static squaredDistance(l,c){var g=c.x-l.x,v=c.y-l.y,b=c.z-l.z;return g*g+v*v+b*b}expandAtomList(l,c){if(c<=0)return l;for(var g=(0,R.getExtent)(l,void 0),v=[[],[],[]],b=0;b<3;b++)v[0][b]=g[0][b]-c,v[1][b]=g[1][b]+c,v[2][b]=g[2][b];var S=[];for(let D=0;D<this.atoms.length;D++){var u=this.atoms[D].x,m=this.atoms[D].y,_=this.atoms[D].z;u>=v[0][0]&&u<=v[1][0]&&m>=v[0][1]&&m<=v[1][1]&&_>=v[0][2]&&_<=v[1][2]&&(u>=g[0][0]&&u<=g[1][0]&&m>=g[0][1]&&m<=g[1][1]&&_>=g[0][2]&&_<=g[1][2]||S.push(this.atoms[D]))}return S}static getFloat(l){return typeof l=="number"?l:parseFloat(l)}selectedAtoms(l,c){var g=[];l=M.deepCopyAndCache(l||{},this),c||(c=this.atoms);for(var v=c.length,b=0;b<v;b++){var S=c[b];S&&this.atomIsSelected(S,l)&&g.push(S)}if(l.hasOwnProperty("expand")){const H=M.getFloat(l.expand);let k=this.expandAtomList(g,H),X=g.length;const $=H*H;for(let F=0;F<k.length;F++)for(let K=0;K<X;K++){var u=M.squaredDistance(k[F],g[K]);u<$&&u>0&&g.push(k[F])}}if(l.hasOwnProperty("within")&&l.within.hasOwnProperty("sel")&&l.within.hasOwnProperty("distance")){var m=this.selectedAtoms(l.within.sel,this.atoms),_={};const H=M.getFloat(l.within.distance),k=H*H;for(let X=0;X<m.length;X++)for(let $=0;$<g.length;$++){let F=M.squaredDistance(m[X],g[$]);F<k&&F>0&&(_[$]=1)}var D=[];if(l.within.invert)for(let X=0;X<g.length;X++)_[X]||D.push(g[X]);else for(let X in _)D.push(g[X]);g=D}if(l.hasOwnProperty("byres")){var L={},P=[],N=[];for(let H=0;H<g.length;H++){let k=g[H];var U=k.chain,V=k.resi;if(L[U]===void 0&&(L[U]={}),k.hasOwnProperty("resi")&&L[U][V]===void 0){for(L[U][V]=!0,N.push(k);N.length>0;)if(k=N.pop(),U=k.chain,V=k.resi,P[k.index]===void 0){P[k.index]=!0;for(var W=0;W<k.bonds.length;W++){var G=this.atoms[k.bonds[W]];P[G.index]===void 0&&G.hasOwnProperty("resi")&&G.chain==U&&G.resi==V&&(N.push(G),g.push(G))}}}}}return g}addAtoms(l){this.molObj=null;var c=this.atoms.length,g=[],v;for(v=0;v<l.length;v++)typeof l[v].index>"u"&&(l[v].index=v),typeof l[v].serial>"u"&&(l[v].serial=v),g[l[v].index]=c+v;for(v=0;v<l.length;v++){var b=l[v],S=g[b.index],u=(0,R.extend)({},b);u.index=S,u.bonds=[],u.bondOrder=[],u.model=this.id,u.style=u.style||(0,R.deepCopy)(M.defaultAtomStyle),typeof u.color>"u"&&(u.color=this.ElementColors[u.elem]||this.defaultColor);for(var m=b.bonds?b.bonds.length:0,_=0;_<m;_++){var D=g[b.bonds[_]];typeof D<"u"&&(u.bonds.push(D),u.bondOrder.push(b.bondOrder?b.bondOrder[_]:1))}this.atoms.push(u)}}assignBonds(){(0,T.assignBonds)(this.atoms,{assignBonds:!0})}removeAtoms(l){this.molObj=null;var c=[],g;for(g=0;g<l.length;g++)c[l[g].index]=!0;var v=[];for(g=0;g<this.atoms.length;g++){var b=this.atoms[g];c[b.index]||v.push(b)}this.atoms=[],this.addAtoms(v)}setStyle(l,c,g){typeof c>"u"&&typeof g>"u"&&(c=l,l={}),l=l,typeof c=="string"&&(c=(0,R.specStringToObject)(c));var v=!1,b=this,S=function(m){var _=b.selectedAtoms(l,m);for(let D=0;D<m.length;D++)m[D]&&(m[D].capDrawn=!1);for(let D=0;D<_.length;D++){v=!0,(_[D].clickable||_[D].hoverable)&&(_[D].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),g||(_[D].style={});for(let L in c)c.hasOwnProperty(L)&&(_[D].style[L]=_[D].style[L]||{},Object.assign(_[D].style[L],c[L]))}};if(l.frame!==void 0&&l.frame<this.frames.length){let m=l.frame;m<0&&(m=this.frames.length+m),S(this.frames[m])}else{S(this.atoms);for(var u=0;u<this.frames.length;u++)this.frames[u]!==this.atoms&&S(this.frames[u])}v&&(this.molObj=null)}setClickable(l,c,g){if(c=!!c,g=(0,R.makeFunction)(g),g===null){console.log("Callback is not a function");return}var v=this.selectedAtoms(l,this.atoms),b=v.length;for(let S=0;S<b;S++)v[S].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},v[S].clickable=c,g&&(v[S].callback=g);b>0&&(this.molObj=null)}setHoverable(l,c,g,v){if(c=!!c,g=(0,R.makeFunction)(g),v=(0,R.makeFunction)(v),g===null){console.log("Hover_callback is not a function");return}if(v===null){console.log("Unhover_callback is not a function");return}var b=this.selectedAtoms(l,this.atoms),S=b.length;for(let u=0;u<S;u++)b[u].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},b[u].hoverable=c,g&&(b[u].hover_callback=g),v&&(b[u].unhover_callback=v);S>0&&(this.molObj=null)}enableContextMenu(l,c){c=!!c;var g,v=this.selectedAtoms(l,this.atoms),b=v.length;for(g=0;g<b;g++)v[g].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},v[g].contextMenuEnabled=c;b>0&&(this.molObj=null)}setColorByElement(l,c){if(!(this.molObj!==null&&M.sameObj(c,this.lastColors))){this.lastColors=c;var g=this.selectedAtoms(l,g);g.length>0&&(this.molObj=null);for(var v=0;v<g.length;v++){var b=g[v];typeof c[b.elem]<"u"&&(b.color=c[b.elem])}}}setColorByProperty(l,c,g,v){var b,S,u=this.selectedAtoms(l,u);for(this.lastColors=null,u.length>0&&(this.molObj=null),typeof g=="string"&&typeof x.Gradient.builtinGradients[g]<"u"&&(g=new x.Gradient.builtinGradients[g]),g=g,v||(v=g.range()),v||(v=(0,R.getPropertyRange)(u,c)),b=0;b<u.length;b++){S=u[b];var m=(0,R.getAtomProperty)(S,c);m!=null&&(S.color=g.valueToHex(parseFloat(S.properties[c]),v))}}setColorByFunction(l,c){var g=this.selectedAtoms(l,g);if(typeof c=="function"){this.lastColors=null,g.length>0&&(this.molObj=null);for(let v=0;v<g.length;v++){let b=g[v];b.color=c(b)}}}toCDObject(l=!1){var c={a:[],b:[]};l&&(c.s=[]);for(let v=0;v<this.atoms.length;v++){let b={},S=this.atoms[v];if(b.x=S.x,b.y=S.y,b.z=S.z,S.elem!="C"&&(b.l=S.elem),l){for(var g=0;g<c.s.length&&JSON.stringify(S.style)!==JSON.stringify(c.s[g]);)g++;g===c.s.length&&c.s.push(S.style),g!==0&&(b.s=g)}c.a.push(b);for(let u=0;u<S.bonds.length;u++){let m=v,_=S.bonds[u];if(m>=_)continue;let D={b:m,e:_},L=S.bondOrder[u];L!=1&&(D.o=L),c.b.push(D)}}return c}globj(l,c){(this.molObj===null||c.regen)&&(this.molObj=this.createMolObj(this.atoms,c),this.renderedMolObj&&(l.remove(this.renderedMolObj),this.renderedMolObj=null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),l.add(this.renderedMolObj))}exportVRML(){var l=this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1});return l.vrml()}removegl(l){this.renderedMolObj&&(this.renderedMolObj.geometry!==void 0&&this.renderedMolObj.geometry.dispose(),this.renderedMolObj.material!==void 0&&this.renderedMolObj.material.dispose(),l.remove(this.renderedMolObj),this.renderedMolObj=null),this.molObj=null}hide(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}show(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}addPropertyLabels(l,c,g){let v=this.selectedAtoms(c),b=this.viewer,S=(0,R.deepCopy)(g);for(let m=0;m<v.length;m++){let _=v[m];var u=null;typeof _[l]<"u"?u=String(_[l]):typeof _.properties[l]<"u"&&(u=String(_.properties[l])),u!=null&&(S.position=_,b.addLabel(u,S))}}addResLabels(l,c,g=!1){let v=this.viewer;var b=[],S=function(m,_){for(var D=m.selectedAtoms(l,D),L={},P=0;P<D.length;P++){var N=D[P],U=N.chain,V=N.resn,W=N.resi,G=V+""+W;L[U]||(L[U]={}),L[U][G]||(L[U][G]=[]),L[U][G].push(N)}var H=(0,R.deepCopy)(c);for(let X in L)if(L.hasOwnProperty(X)){var k=L[X];for(let $ in k)if(k.hasOwnProperty($)){let F=k[$],K=new y.Vector3(0,0,0);for(let re=0;re<F.length;re++){let le=F[re];K.x+=le.x,K.y+=le.y,K.z+=le.z}K.divideScalar(F.length),H.position=K,H.frame=_;let te=v.addLabel($,H,void 0,!0);b.push(te)}}};if(g){var u=this.getNumFrames();let m=this.atoms;for(let _=0;_<u;_++)this.frames[_]&&(this.atoms=this.frames[_],S(this,_));this.atoms=m}else S(this);return b}setupDFS(){this.atomdfs=[];var l=this,c=new Int8Array(this.atoms.length);c.fill(0);for(var g=function(u,m,_){_.push([u,m]);var D=l.atoms[u];c[u]=1;for(var L=0;L<D.bonds.length;L++){var P=D.bonds[L];l.atoms[P]&&!c[P]&&g(P,u,_)}},v=0;v<this.atoms.length;v++){var b=this.atoms[v];if(b&&!c[v]){var S=[];g(v,-1,S),this.atomdfs.push(S)}}}setCoordinatesFromURL(l,c){this.frames=[];var g=this;return this.box&&this.setupDFS(),l.startsWith("http")||(l="http://"+l),(0,R.get)(l+"/traj/numframes/"+c,function(v){if(!isNaN(parseInt(v)))return g.frames.push(g.atoms),g.frames.numFrames=v,g.frames.url=l,g.frames.path=c,g.setFrame(0)})}setCoordinates(l,c){if(c=c||"",!l)return[];if(/\.gz$/.test(c)){c=c.replace(/\.gz$/,"");try{l=(0,R.inflateString)(l)}catch(L){console.log(L)}}var g={mdcrd:"",inpcrd:"",pdb:"",netcdf:"",array:""};if(g.hasOwnProperty(c)){this.frames=[];for(var v=this.atoms.length,b=M.parseCrd(l,c),S=0;S<b.length;){for(var u=[],m=0;m<v;m++){var _={};for(var D in this.atoms[m])_[D]=this.atoms[m][D];u[m]=_,u[m].x=b[S++],u[m].y=b[S++],u[m].z=b[S++]}this.frames.push(u)}return this.atoms=this.frames[0],this.frames}return[]}addAtomSpecs(l){}static parseCrd(l,c){var g=[],v=0;if(c=="pdb")for(var b=l.indexOf(`
ATOM`);b!=-1;){for(;l.slice(b,b+5)==`
ATOM`||l.slice(b,b+7)==`
HETATM`;)g[v++]=parseFloat(l.slice(b+31,b+39)),g[v++]=parseFloat(l.slice(b+39,b+47)),g[v++]=parseFloat(l.slice(b+47,b+55)),b=l.indexOf(`
`,b+54),l.slice(b,b+4)==`
TER`&&(b=l.indexOf(`
`,b+5));b=l.indexOf(`
ATOM`,b)}else if(c=="netcdf"){var S=new w.NetCDFReader(l);g=[].concat.apply([],S.getDataVariable("coordinates"))}else{if(c=="array"||Array.isArray(l))return l.flat(2);{let u=l.indexOf(`
`);c=="inpcrd"&&(u=l.indexOf(`
`,u+1)),l=l.slice(u+1),g=l.match(/\S+/g).map(parseFloat)}}return g}static parseMolData(l,c="",g){if(!l)return[];if(/\.gz$/.test(c)){c=c.replace(/\.gz$/,"");try{c.match(/bcif/i)?l=(0,R.inflateString)(l,!1):l=(0,R.inflateString)(l)}catch(S){console.log(S)}}typeof A.Parsers[c]>"u"&&(c=c.split(".").pop(),typeof A.Parsers[c]>"u"&&(console.log("Unknown format: "+c),l instanceof Uint8Array?c="bcif":l.match(/^@<TRIPOS>MOLECULE/gm)?c="mol2":l.match(/^data_/gm)&&l.match(/^loop_/gm)?c="cif":l.match(/^HETATM/gm)||l.match(/^ATOM/gm)?c="pdb":l.match(/ITEM: TIMESTEP/gm)?c="lammpstrj":l.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?c="sdf":l.match(/^%VERSION\s+VERSION_STAMP/gm)?c="prmtop":c="xyz",console.log("Best guess: "+c)));var v=A.Parsers[c],b=v(l,g);return b}}M.defaultAtomStyle={line:{}},M.defaultlineWidth=1,M.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86},M.ignoredKeys=new Set(["props","invert","model","frame","byres","expand","within","and","or","not"])}),"./src/GLShape.ts":((s,i,n)=>{n.r(i),n.d(i,{GLShape:()=>w,splitMesh:()=>T});var a=n("./src/WebGL/index.ts"),d=n("./src/WebGL/shapes/index.ts"),y=n("./src/WebGL/math/index.ts"),C=n("./src/colors.ts"),p=n("./src/ProteinSurface4.ts"),E=n("./src/VolumeData.ts"),R=n("./src/GLDraw.ts"),x=n("./src/glcartoon.ts"),A=n("./src/utilities.ts");class w{static finalizeGeo(h){var l=h.updateGeoGroup(0);l.vertices>0&&l.truncateArrayBuffers(!0,!0)}static updateColor(h,l){l=l||C.CC.color(l),h.colorsNeedUpdate=!0;var c,g,v;l.constructor!==Array&&(c=l.r,g=l.g,v=l.b);for(let b in h.geometryGroups){let S=h.geometryGroups[b],u=S.colorArray;for(let m=0,_=S.vertices;m<_;++m){if(l.constructor===Array){let D=l[m];c=D.r,g=D.g,v=D.b}u[m*3]=c,u[m*3+1]=g,u[m*3+2]=v}}}static drawArrow(h,l,c){var g=c.start,v=c.end,b=c.radius,S=c.radiusRatio,u=c.mid,m=c.midpos;if(!(g&&v))return;var _=l.updateGeoGroup(51),D=new y.Vector3(v.x,v.y,v.z).sub(g);if(m){let ve=D.length();m>0?u=m/ve:u=(ve+m)/ve}D.multiplyScalar(u);var L=new y.Vector3(g.x,g.y,g.z).add(D),P=D.clone().negate();let N=new y.Vector3(g.x,g.y,g.z);h.intersectionShape.cylinder.push(new d.Cylinder(N,L.clone(),b)),h.intersectionShape.sphere.push(new d.Sphere(N,b));var U=[];U[0]=D.clone(),Math.abs(U[0].x)>1e-4?U[0].y+=1:U[0].x+=1,U[0].cross(D),U[0].normalize(),U[4]=U[0].clone(),U[4].crossVectors(U[0],D),U[4].normalize(),U[8]=U[0].clone().negate(),U[12]=U[4].clone().negate(),U[2]=U[0].clone().add(U[4]).normalize(),U[6]=U[4].clone().add(U[8]).normalize(),U[10]=U[8].clone().add(U[12]).normalize(),U[14]=U[12].clone().add(U[0]).normalize(),U[1]=U[0].clone().add(U[2]).normalize(),U[3]=U[2].clone().add(U[4]).normalize(),U[5]=U[4].clone().add(U[6]).normalize(),U[7]=U[6].clone().add(U[8]).normalize(),U[9]=U[8].clone().add(U[10]).normalize(),U[11]=U[10].clone().add(U[12]).normalize(),U[13]=U[12].clone().add(U[14]).normalize(),U[15]=U[14].clone().add(U[0]).normalize();var V=_.vertices,W=_.vertexArray,G=_.faceArray,H=_.normalArray,k=_.lineArray,X,$,F;for($=0,F=U.length;$<F;++$){X=3*(V+3*$);var K=U[$].clone().multiplyScalar(b).add(g),te=U[$].clone().multiplyScalar(b).add(L),re=U[$].clone().multiplyScalar(b*S).add(L);if(W[X]=K.x,W[X+1]=K.y,W[X+2]=K.z,W[X+3]=te.x,W[X+4]=te.y,W[X+5]=te.z,W[X+6]=re.x,W[X+7]=re.y,W[X+8]=re.z,$>0){var le=W[X-3],oe=W[X-2],ue=W[X-1],he=new y.Vector3(le,oe,ue),ge=new y.Vector3(v.x,v.y,v.z),Oe=L.clone(),Le=new y.Vector3(re.x,re.y,re.z);h.intersectionShape.triangle.push(new d.Triangle(Le,ge,he)),h.intersectionShape.triangle.push(new d.Triangle(he.clone(),Oe,Le.clone()))}}_.vertices+=48,X=_.vertices*3,W[X]=g.x,W[X+1]=g.y,W[X+2]=g.z,W[X+3]=L.x,W[X+4]=L.y,W[X+5]=L.z,W[X+6]=v.x,W[X+7]=v.y,W[X+8]=v.z,_.vertices+=3;var $e,we,ce,xe,Ne,Xe,rt,nt,et,Ze,qe,Ve,Ge,at,ot,J,ne,se,_e,Se=_.vertices-3,Pe=_.vertices-2,Ie=_.vertices-1,Q=Se*3,me=Pe*3,be=Ie*3;for($=0,F=U.length-1;$<F;++$){var ke=V+3*$;X=ke*3,we=_.faceidx,ce=_.lineidx,xe=ke,Ze=xe*3,Ne=ke+1,qe=Ne*3,Xe=ke+2,Ve=Xe*3,rt=ke+4,Ge=rt*3,nt=ke+5,at=nt*3,et=ke+3,ot=et*3,J=ne=U[$],se=_e=U[$+1],H[Ze]=J.x,H[qe]=ne.x,H[ot]=_e.x,H[Ze+1]=J.y,H[qe+1]=ne.y,H[ot+1]=_e.y,H[Ze+2]=J.z,H[qe+2]=ne.z,H[ot+2]=_e.z,H[qe]=ne.x,H[Ge]=se.x,H[ot]=_e.x,H[qe+1]=ne.y,H[Ge+1]=se.y,H[ot+1]=_e.y,H[qe+2]=ne.z,H[Ge+2]=se.z,H[ot+2]=_e.z,H[Ve]=ne.x,H[at]=se.x,H[Ve+1]=ne.y,H[at+1]=se.y,H[Ve+2]=ne.z,H[at+2]=se.z,G[we]=xe,G[we+1]=Ne,G[we+2]=et,G[we+3]=Ne,G[we+4]=rt,G[we+5]=et,G[we+6]=xe,G[we+7]=et,G[we+8]=Se,G[we+9]=Xe,G[we+10]=Pe,G[we+11]=nt,G[we+12]=Xe,G[we+13]=Ie,G[we+14]=nt,k[ce]=xe,k[ce+1]=Ne,k[ce+2]=xe,k[ce+3]=et,k[ce+4]=rt,k[ce+5]=et,k[ce+6]=xe,k[ce+7]=et,k[ce+8]=Xe,k[ce+9]=Ne,k[ce+10]=Xe,k[ce+11]=nt,k[ce+12]=rt,k[ce+13]=nt,k[ce+14]=Xe,k[ce+15]=Ie,k[ce+16]=Xe,k[ce+17]=nt,k[ce+18]=Ie,k[ce+19]=nt,_.faceidx+=15,_.lineidx+=20}$e=[V+45,V+46,V+1,V,V+47,V+2],we=_.faceidx,ce=_.lineidx,xe=$e[0],Ze=xe*3,Ne=$e[1],qe=Ne*3,Xe=$e[4],Ve=Xe*3,rt=$e[2],Ge=rt*3,nt=$e[5],at=nt*3,et=$e[3],ot=et*3,J=ne=U[15],se=_e=U[0],H[Ze]=J.x,H[qe]=ne.x,H[ot]=_e.x,H[Ze+1]=J.y,H[qe+1]=ne.y,H[ot+1]=_e.y,H[Ze+2]=J.z,H[qe+2]=ne.z,H[ot+2]=_e.z,H[qe]=ne.x,H[Ge]=se.x,H[ot]=_e.x,H[qe+1]=ne.y,H[Ge+1]=se.y,H[ot+1]=_e.y,H[qe+2]=ne.z,H[Ge+2]=se.z,H[ot+2]=_e.z,H[Ve]=ne.x,H[at]=se.x,H[Ve+1]=ne.y,H[at+1]=se.y,H[Ve+2]=ne.z,H[at+2]=se.z,D.normalize(),P.normalize(),H[Q]=P.x,H[me]=H[be]=D.x,H[Q+1]=P.y,H[me+1]=H[be+1]=D.y,H[Q+2]=P.z,H[me+2]=H[be+2]=D.z,G[we]=xe,G[we+1]=Ne,G[we+2]=et,G[we+3]=Ne,G[we+4]=rt,G[we+5]=et,G[we+6]=xe,G[we+7]=et,G[we+8]=Se,G[we+9]=Xe,G[we+10]=Pe,G[we+11]=nt,G[we+12]=Xe,G[we+13]=Ie,G[we+14]=nt,k[ce]=xe,k[ce+1]=Ne,k[ce+2]=xe,k[ce+3]=et,k[ce+4]=rt,k[ce+5]=et,k[ce+6]=xe,k[ce+7]=et,k[ce+8]=Xe,k[ce+9]=Ne,k[ce+10]=Xe,k[ce+11]=nt,k[ce+12]=rt,k[ce+13]=nt,k[ce+14]=Xe,k[ce+15]=Ie,k[ce+16]=Xe,k[ce+17]=nt,k[ce+18]=Ie,k[ce+19]=nt,_.faceidx+=15,_.lineidx+=20}static updateBoundingFromPoints(h,l,c,g){h.center.set(0,0,0);let v=1/0,b=1/0,S=1/0,u=-1/0,m=-1/0,_=-1/0;h.box&&(v=h.box.min.x,u=h.box.max.x,b=h.box.min.y,m=h.box.max.y,S=h.box.min.z,_=h.box.max.z);for(let N=0,U=g;N<U;N++){var D=c[N*3],L=c[N*3+1],P=c[N*3+2];D<v&&(v=D),L<b&&(b=L),P<S&&(S=P),D>u&&(u=D),L>m&&(m=L),P>_&&(_=P)}h.center.set((u+v)/2,(m+b)/2,(_+S)/2),h.radius=h.center.distanceTo({x:u,y:m,z:_}),h.box={min:{x:v,y:b,z:S},max:{x:u,y:m,z:_}}}static addCustomGeo(h,l,c,g,v){var b=l.addGeoGroup(),S=c.vertexArr,u=c.normalArr,m=c.faceArr;b.vertices=S.length,b.faceidx=m.length;var _,D,L,P,N,U,V,W,G,H=b.vertexArray,k=b.colorArray;for(g.constructor!==Array&&(W=g.r,G=g.g,P=g.b),U=0,V=b.vertices;U<V;++U)_=U*3,D=S[U],H[_]=D.x,H[_+1]=D.y,H[_+2]=D.z,g.constructor===Array&&(N=g[U],W=N.r,G=N.g,P=N.b),k[_]=W,k[_+1]=G,k[_+2]=P;if(v)for(U=0,V=b.faceidx/3;U<V;++U){_=U*3,L=m[_],P=m[_+1],N=m[_+2];var X=new y.Vector3,$=new y.Vector3,F=new y.Vector3;h.intersectionShape.triangle.push(new d.Triangle(X.copy(S[L]),$.copy(S[P]),F.copy(S[N])))}if(v){var K=new y.Vector3(0,0,0),te=0;for(let oe=0;oe<l.geometryGroups.length;oe++)K.add(l.geometryGroups[oe].getCentroid()),te++;K.divideScalar(te),w.updateBoundingFromPoints(h.boundingSphere,{centroid:K},H,b.vertices)}if(b.faceArray=new Uint16Array(m),b.truncateArrayBuffers(!0,!0),u.length<b.vertices)b.setNormals();else{var re=b.normalArray=new Float32Array(b.vertices*3),le;for(U=0,V=b.vertices;U<V;++U)_=U*3,le=u[U],re[_]=le.x,re[_+1]=le.y,re[_+2]=le.z}b.setLineIndices(),b.lineidx=b.lineArray.length}static updateFromStyle(h,l){typeof l.color<"u"?(h.color=l.color||new C.Color,l.color instanceof C.Color||(h.color=C.CC.color(l.color))):h.color=C.CC.color(0),h.wireframe=!!l.wireframe,h.opacity=l.alpha?(0,y.clamp)(l.alpha,0,1):1,typeof l.opacity<"u"&&(h.opacity=(0,y.clamp)(l.opacity,0,1)),h.side=l.side!==void 0?l.side:a.DoubleSide,h.linewidth=typeof l.linewidth>"u"?1:l.linewidth,h.clickable=!!l.clickable,h.callback=(0,A.makeFunction)(l.callback),h.hoverable=!!l.hoverable,h.hover_callback=(0,A.makeFunction)(l.hover_callback),h.unhover_callback=(0,A.makeFunction)(l.unhover_callback),h.contextMenuEnabled=!!l.contextMenuEnabled,h.hidden=l.hidden,h.frame=l.frame}constructor(h){this.color=16777215,this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.contextMenuEnabled=!1,this.side=a.DoubleSide,this.stylespec=h||{},this.boundingSphere=new d.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},w.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new a.Geometry(!0),this.linegeo=new a.Geometry(!0)}updateStyle(h){for(var l in h)this.stylespec[l]=h[l];if(w.updateFromStyle(this,this.stylespec),h.voldata&&h.volscheme){(0,A.adjustVolumeStyle)(h);const c=h.volscheme,g=h.voldata,v=C.CC,b=c.range()||[-1,1];this.geo.setColors(function(S,u,m){let _=g.getVal(S,u,m);return v.color(c.valueToHex(_,b))}),delete this.color}}addCustom(h){h.vertexArr=h.vertexArr||[],h.faceArr=h.faceArr||[],h.normalArr=h.normalArr||[],w.drawCustom(this,this.geo,h)}addSphere(h){h.center||(h.center=new y.Vector3(0,0,0)),h.radius=h.radius?(0,y.clamp)(h.radius,0,1/0):1.5,h.color=C.CC.color(h.color),this.intersectionShape.sphere.push(new d.Sphere(h.center,h.radius)),R.GLDraw.drawSphere(this.geo,h.center,h.radius,h.color,h.quality),this.components.push({centroid:new y.Vector3(h.center.x,h.center.y,h.center.z)});var l=this.geo.updateGeoGroup(0);w.updateBoundingFromPoints(this.boundingSphere,this.components,l.vertexArray,l.vertices)}addBox(h){var l=h.dimensions||{w:1,h:1,d:1},c;typeof l.w=="number"?c={x:l.w,y:0,z:0}:c=l.w;var g;typeof l.h=="number"?g={x:0,y:l.h,z:0}:g=l.h;var v;typeof l.d=="number"?v={x:0,y:0,z:l.d}:v=l.d;var b=h.corner;b==null&&(h.center!==void 0?b={x:h.center.x-.5*(c.x+g.x+v.x),y:h.center.y-.5*(c.y+g.y+v.y),z:h.center.z-.5*(c.z+g.z+v.z)}:b={x:0,y:0,z:0});var S=[{x:b.x,y:b.y,z:b.z},{x:b.x+c.x,y:b.y+c.y,z:b.z+c.z},{x:b.x+g.x,y:b.y+g.y,z:b.z+g.z},{x:b.x+c.x+g.x,y:b.y+c.y+g.y,z:b.z+c.z+g.z},{x:b.x+v.x,y:b.y+v.y,z:b.z+v.z},{x:b.x+c.x+v.x,y:b.y+c.y+v.y,z:b.z+c.z+v.z},{x:b.x+g.x+v.x,y:b.y+g.y+v.y,z:b.z+g.z+v.z},{x:b.x+c.x+g.x+v.x,y:b.y+c.y+g.y+v.y,z:b.z+c.z+g.z+v.z}],u=[],m=[];u.splice(u.length,0,S[0],S[1],S[2],S[3]),m.splice(m.length,0,0,2,1,1,2,3);var _=4;u.splice(u.length,0,S[2],S[3],S[6],S[7]),m.splice(m.length,0,_+0,_+2,_+1,_+1,_+2,_+3),_+=4,u.splice(u.length,0,S[4],S[5],S[0],S[1]),m.splice(m.length,0,_+0,_+2,_+1,_+1,_+2,_+3),_+=4,u.splice(u.length,0,S[6],S[7],S[4],S[5]),m.splice(m.length,0,_+0,_+2,_+1,_+1,_+2,_+3),_+=4,u.splice(u.length,0,S[3],S[1],S[7],S[5]),m.splice(m.length,0,_+0,_+2,_+1,_+1,_+2,_+3),_+=4,u.splice(u.length,0,S[2],S[6],S[0],S[4]),m.splice(m.length,0,_+0,_+2,_+1,_+1,_+2,_+3),_+=4;var D=(0,A.extend)({},h);D.vertexArr=u,D.faceArr=m,D.normalArr=[],w.drawCustom(this,this.geo,D);var L=new y.Vector3;this.components.push({centroid:L.addVectors(S[0],S[7]).multiplyScalar(.5)});var P=this.geo.updateGeoGroup(0);w.updateBoundingFromPoints(this.boundingSphere,this.components,P.vertexArray,P.vertices)}addCylinder(h){var l,c;h.start?l=new y.Vector3(h.start.x||0,h.start.y||0,h.start.z||0):l=new y.Vector3(0,0,0),h.end?(c=new y.Vector3(h.end.x,h.end.y||0,h.end.z||0),typeof c.x>"u"&&(c.x=3)):c=new y.Vector3(0,0,0);var g=h.radius||.1,v=C.CC.color(h.color);this.intersectionShape.cylinder.push(new d.Cylinder(l,c,g)),R.GLDraw.drawCylinder(this.geo,l,c,g,v,h.fromCap,h.toCap);var b=new y.Vector3;this.components.push({centroid:b.addVectors(l,c).multiplyScalar(.5)});var S=this.geo.updateGeoGroup(0);w.updateBoundingFromPoints(this.boundingSphere,this.components,S.vertexArray,S.vertices)}addDashedCylinder(h){h.dashLength=h.dashLength||.25,h.gapLength=h.gapLength||.25;var l;h.start?l=new y.Vector3(h.start.x||0,h.start.y||0,h.start.z||0):l=new y.Vector3(0,0,0);var c;h.end?(c=new y.Vector3(h.end.x,h.end.y||0,h.end.z||0),typeof c.x>"u"&&(c.x=3)):c=new y.Vector3(3,0,0);for(var g=h.radius||.1,v=C.CC.color(h.color),b=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2)+Math.pow(l.z-c.z,2)),S=b/(h.gapLength+h.dashLength),u=new y.Vector3(h.start.x||0,h.start.y||0,h.start.z||0),m=new y.Vector3(h.end.x,h.end.y||0,h.end.z||0),_=new y.Vector3((c.x-l.x)/(b/h.gapLength),(c.y-l.y)/(b/h.gapLength),(c.z-l.z)/(b/h.gapLength)),D=new y.Vector3((c.x-l.x)/(b/h.dashLength),(c.y-l.y)/(b/h.dashLength),(c.z-l.z)/(b/h.dashLength)),L=0;L<S;L++)m=new y.Vector3(u.x+D.x,u.y+D.y,u.z+D.z),this.intersectionShape.cylinder.push(new d.Cylinder(u,m,g)),R.GLDraw.drawCylinder(this.geo,u,m,g,v,h.fromCap,h.toCap),u=new y.Vector3(m.x+_.x,m.y+_.y,m.z+_.z);var P=new y.Vector3;this.components.push({centroid:P.addVectors(l,c).multiplyScalar(.5)});var N=this.geo.updateGeoGroup(0);w.updateBoundingFromPoints(this.boundingSphere,this.components,N.vertexArray,N.vertices)}addCurve(h){h.points=h.points||[],h.smooth=h.smooth||10,typeof h.fromCap>"u"&&(h.fromCap=2),typeof h.toCap>"u"&&(h.toCap=2);var l=(0,x.subdivide_spline)(h.points,h.smooth);if(l.length<3){console.log("Too few points in addCurve");return}var c=h.radius||.1,g=C.CC.color(h.color),v=0,b=l.length-1,S=l[0].distanceTo(l[1]),u=Math.ceil(2*c/S);if(h.toArrow){b-=u;let L={start:l[b],end:l[l.length-1],radius:c,color:g,mid:1e-4};this.addArrow(L)}if(h.fromArrow){v+=u;let L={start:l[v],end:l[0],radius:c,color:g,mid:1e-4};this.addArrow(L)}for(var m=Math.ceil(l.length/2),_={radius:c,color:g,fromCap:2,toCap:2},D=v;D<b;D++)_.start=l[D],_.end=l[D+1],_.fromCap=2,_.toCap=2,D<m?(_.fromCap=2,_.toCap=0):D>m?(_.fromCap=0,_.toCap=2):(_.fromCap=2,_.toCap=2),this.addCylinder(_)}addLine(h){var l,c;h.start?l=new y.Vector3(h.start.x||0,h.start.y||0,h.start.z||0):l=new y.Vector3(0,0,0),h.end?(c=new y.Vector3(h.end.x,h.end.y||0,h.end.z||0),typeof c.x>"u"&&(c.x=3)):c=new y.Vector3(3,0,0);var g=this.geo.updateGeoGroup(2),v=g.vertices,b=v*3,S=g.vertexArray;S[b]=l.x,S[b+1]=l.y,S[b+2]=l.z,S[b+3]=c.x,S[b+4]=c.y,S[b+5]=c.z,g.vertices+=2;var u=g.lineArray,m=g.lineidx;u[m]=v,u[m+1]=v+1,g.lineidx+=2;var _=new y.Vector3;this.components.push({centroid:_.addVectors(l,c).multiplyScalar(.5)}),g=this.geo.updateGeoGroup(0),w.updateBoundingFromPoints(this.boundingSphere,this.components,g.vertexArray,g.vertices)}addArrow(h){if(h.start?h.start=new y.Vector3(h.start.x||0,h.start.y||0,h.start.z||0):h.start=new y.Vector3(0,0,0),h.dir instanceof y.Vector3&&typeof h.length=="number"){var l=h.dir.clone().multiplyScalar(h.length).add(h.start);h.end=l}else h.end?(h.end=new y.Vector3(h.end.x,h.end.y||0,h.end.z||0),typeof h.end.x>"u"&&(h.end.x=3)):h.end=new y.Vector3(3,0,0);h.radius=h.radius||.1,h.radiusRatio=h.radiusRatio||1.618034,h.mid=0<h.mid&&h.mid<1?h.mid:.618034,w.drawArrow(this,this.geo,h);var c=new y.Vector3;this.components.push({centroid:c.addVectors(h.start,h.end).multiplyScalar(.5)});var g=this.geo.updateGeoGroup(0);w.updateBoundingFromPoints(this.boundingSphere,this.components,g.vertexArray,g.vertices)}static distance_from(h,l){return Math.sqrt(Math.pow(h.x-l.x,2)+Math.pow(h.y-l.y,2)+Math.pow(h.z-l.z,2))}static inSelectedRegion(h,l,c){for(var g=0;g<l.length;g++)if(w.distance_from(l[g],h)<=c)return!0;return!1}addIsosurface(h,l,c,g){var v=l.isoval!==void 0&&typeof l.isoval=="number"?l.isoval:0,b=!!l.voxel,S=l.smoothness===void 0?1:l.smoothness,u=h.size.x,m=h.size.y,_=h.size.z,D=new Int16Array(u*m*_),L=h.data,P,N;for(P=0,N=D.length;P<N;++P)D[P]=-1;var U=new Uint8Array(u*m*_);for(P=0,N=L.length;P<N;++P){var V=v>=0?L[P]-v:v-L[P];V>0&&(U[P]|=w.ISDONE)}var W=[],G=[];p.MarchingCube.march(U,W,G,{fulltable:!0,voxel:b,unitCube:h.unit,origin:h.origin,matrix:h.matrix,nX:u,nY:m,nZ:_}),!b&&S>0&&p.MarchingCube.laplacianSmooth(S,W,G);var H=[],k=[],X=[];if(l.selectedRegion&&l.coords===void 0&&(l.coords=l.selectedRegion),l.coords===void 0&&l.selection!==void 0&&(g?l.coords=g.selectedAtoms(l.selection):console.log("addIsosurface needs viewer is selection provided.")),l.coords!==void 0){var $=l.coords[0].x,F=l.coords[0].y,K=l.coords[0].z,te=l.coords[0].x,re=l.coords[0].y,le=l.coords[0].z;for(let ce=0;ce<l.coords.length;ce++)l.coords[ce].x>$?$=l.coords[ce].x:l.coords[ce].x<te&&(te=l.coords[ce].x),l.coords[ce].y>F?F=l.coords[ce].y:l.coords[ce].y<re&&(re=l.coords[ce].y),l.coords[ce].z>K?K=l.coords[ce].z:l.coords[ce].z<le&&(le=l.coords[ce].z);var oe=2;l.radius!==void 0&&(oe=l.radius),l.selectedOffset!==void 0&&(oe=l.selectedOffset),l.seldist!==void 0&&(oe=l.seldist),te-=oe,$+=oe,re-=oe,F+=oe,le-=oe,K+=oe;for(let ce=0;ce<W.length;ce++)W[ce].x>te&&W[ce].x<$&&W[ce].y>re&&W[ce].y<F&&W[ce].z>le&&W[ce].z<K&&w.inSelectedRegion(W[ce],l.coords,oe)?(H.push(k.length),k.push(W[ce])):H.push(-1);for(let ce=0;ce+2<G.length;ce+=3)H[G[ce]]!==-1&&H[G[ce+1]]!==-1&&H[G[ce+2]]!==-1&&(X.push(G[ce]-(G[ce]-H[G[ce]])),X.push(G[ce+1]-(G[ce+1]-H[G[ce+1]])),X.push(G[ce+2]-(G[ce+2]-H[G[ce+2]])));W=k,G=X}w.drawCustom(this,this.geo,{vertexArr:W,faceArr:G,normalArr:[],clickable:l.clickable,hoverable:l.hoverable}),this.updateStyle(l);var ue=new y.Vector3(h.origin.x,h.origin.y,h.origin.z),he=new y.Vector3(h.size.x*h.unit.x,h.size.y*h.unit.y,h.size.z*h.unit.z),ge=new y.Vector3(0,0,0),Oe=ue.clone(),Le=ue.clone().add(he);for(let ce=0;ce<W.length;ce++)ge.add(W[ce]),Oe.max(W[ce]),Le.min(W[ce]);ge.divideScalar(W.length);var $e=ge.distanceTo(Le),we=ge.distanceTo(Oe);this.boundingSphere.center=ge,this.boundingSphere.radius=Math.max($e,we),typeof c=="function"&&c()}addVolumetricData(h,l,c){h=new E.VolumeData(h,l),this.addIsosurface(h,c)}finalize(){return w.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}globj(h){if(this.renderedShapeObj&&(h.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){w.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),typeof this.color<"u"&&w.updateColor(this.geo,this.color),this.shapeObj=new a.Object3D;var l=null;this.side==a.DoubleSide?l=new a.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:a.Coloring.VertexColors}):l=new a.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:a.Coloring.VertexColors});var c=new a.Mesh(this.geo,l);if(this.shapeObj.add(c),this.linegeo&&this.linegeo.vertices>0){var g=new a.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),v=new a.Line(this.linegeo,g,a.LineStyle.LinePieces);this.shapeObj.add(v)}this.renderedShapeObj=this.shapeObj.clone(),h.add(this.renderedShapeObj)}}removegl(h){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),h.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}w.ISDONE=2,w.drawCustom=function(M,h,l){var c=l,g=c.vertexArr,v=c.faceArr;(g.length===0||v.length===0)&&console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var b=l.color;typeof b>"u"&&(b=M.color),b=C.CC.color(b);for(var S=T(c),u=0,m=S.length;u<m;u++)w.addCustomGeo(M,h,S[u],S[u].colorArr?S[u].colorArr:b,l.clickable)};function T(M){var h=64e3;if(M.vertexArr.length<h)return[M];var l=[{vertexArr:[],normalArr:[],faceArr:[]}];M.colorArr&&(l.colorArr=[]);var c=[],g=[],v=0,b=M.faceArr;for(let u=0,m=b.length;u<m;u+=3){let _=l[v];for(let D=0;D<3;D++){var S=b[u+D];c[S]!==v&&(c[S]=v,g[S]=_.vertexArr.length,_.vertexArr.push(M.vertexArr[S]),M.normalArr&&M.normalArr[S]&&_.normalArr.push(M.normalArr[S]),M.colorArr&&M.colorArr[S]&&_.colorArr.push(M.colorArr[S])),_.faceArr.push(g[S])}_.vertexArr.length>=h&&(l.push({vertexArr:[],normalArr:[],faceArr:[]}),M.colorArr&&(l.colorArr=[]),v++)}return l}}),"./src/GLViewer.ts":((s,i,n)=>{n.r(i),n.d(i,{CONTEXTS_PER_VIEWPORT:()=>h,GLViewer:()=>c,createStereoViewer:()=>b,createViewer:()=>g,createViewerGrid:()=>v});var a=n("./node_modules/upng-js/UPNG.js"),d=n("./src/GLModel.ts"),y=n("./src/GLShape.ts"),C=n("./src/Gradient.ts"),p=n("./src/Label.ts"),E=n("./src/ProteinSurface4.ts"),R=n("./src/VolumeData.ts"),x=n("./src/VolumetricRender.ts"),A=n("./src/WebGL/index.ts"),w=n("./src/WebGL/math/index.ts"),T=n("./src/colors.ts"),M=n("./src/utilities.ts");const h=16;class l extends Array{constructor(u){super(...u)}getSymmetries(){if(this.length==0)return[];let u=this[0];return typeof u.symmetries>"u"&&this.setSymmetries([new w.Matrix4]),u.symmetries}setSymmetries(u){typeof u>"u"&&(u=[new w.Matrix4]);for(let m of this)m.symmetries=u,m.finished=!1}}class c{getWidth(){let u=this.container,m=u.offsetWidth;if(m==0&&u.style.display==="none"){let _=u.style.position,D=u.style.visibility;u.style.display="block",u.style.visibility="hidden",u.style.position="absolute",m=u.offsetWidth,u.style.display="none",u.style.visibility=D,u.style.position=_}return m}getHeight(){let u=this.container,m=u.offsetHeight;if(m==0&&u.style.display==="none"){let _=u.style.position,D=u.style.visibility;u.style.display="block",u.style.visibility="hidden",u.style.position="absolute",m=u.offsetHeight,u.style.display="none",u.style.visibility=D,u.style.position=_}return m}setupRenderer(){let u=Object.assign(Object.assign({},this.config),{preserveDrawingBuffer:!0,premultipliedAlpha:!1,containerWidth:this.WIDTH,containerHeight:this.HEIGHT});this.renderer=new A.Renderer(u),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.renderer.domElement.style.padding="0",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.renderer.domElement.style.zIndex="0"}initializeScene(){this.scene=new A.Scene,this.scene.fog=new A.Fog(this.bgColor,100,200),this.modelGroup=new A.Object3D,this.rotationGroup=new A.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new w.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var u=new A.Light(16777215);u.position=new w.Vector3(.2,.2,1).normalize(),u.intensity=1,this.scene.add(u)}_handleLostContext(u){const m=function(_){const D=_.getBoundingClientRect();return!(D.right<0||D.bottom<0||D.top>(window.innerHeight||document.documentElement.clientHeight)||D.left>(window.innerWidth||document.documentElement.clientWidth))};if(m(this.container)){let _=0;for(let D of document.getElementsByTagName("canvas"))if(m(D)&&D._3dmol_viewer!=null&&(D._3dmol_viewer.resize(),_+=1,_>=h))break}}initContainer(u){this.container=u,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.glDOM._3dmol_viewer=this,this.glDOM.addEventListener("webglcontextlost",this._handleLostContext.bind(this)),this.nomouse||(this.glDOM.addEventListener("mousedown",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("touchstart",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("wheel",this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener("mousemove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("touchmove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("contextmenu",this._handleContextMenu.bind(this),{passive:!1}))}decAnim(){this.animated--,this.animated<0&&(this.animated=0)}incAnim(){this.animated++}nextSurfID(){var u=0;for(let _ in this.surfaces)if(this.surfaces.hasOwnProperty(_)){var m=parseInt(_);isNaN(m)||m>u&&(u=m)}return u+1}setSlabAndFog(){let u=this.camera.position.z-this.rotationGroup.position.z;u<1&&(u=1),this.camera.near=u+this.slabNear,!this.camera.ortho&&this.camera.near<1&&(this.camera.near=1),this.camera.far=u+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=u*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.near+this.fogEnd*(this.camera.far-this.camera.near),this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}show(u){if(this.renderer.setViewport(),!!this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!u&&this.linkedViewers.length>0))for(var m=this._viewer.getView(),_=0;_<this.linkedViewers.length;_++){var D=this.linkedViewers[_];D.setView(m,!0)}}updateClickables(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledObjects.splice(0,this.contextMenuEnabledObjects.length);for(let u=0,m=this.models.length;u<m;u++){let _=this.models[u];if(_){let D=_.selectedAtoms({clickable:!0}),L=_.selectedAtoms({hoverable:!0}),P=_.selectedAtoms({contextMenuEnabled:!0});for(let N=0;N<L.length;N++)this.hoverables.push(L[N]);for(let N=0;N<D.length;N++)this.clickables.push(D[N]);for(let N=0;N<P.length;N++)this.contextMenuEnabledObjects.push(P[N])}}for(let u=0,m=this.shapes.length;u<m;u++){let _=this.shapes[u];_&&_.clickable&&this.clickables.push(_),_&&_.hoverable&&this.hoverables.push(_),_&&_.contextMenuEnabled&&this.contextMenuEnabledObjects.push(_)}}handleClickSelection(u,m,_){let D=this.targetedObjects(u,m,this.clickables);if(D.length){var L=D[0].clickable;L.callback!==void 0&&(typeof L.callback!="function"&&(L.callback=(0,M.makeFunction)(L.callback)),typeof L.callback=="function"&&(this.mouseButton===3&&this.contextMenuEnabledObjects.includes(L)&&this.userContextMenuHandler||L.callback(L,this._viewer,_,this.container,D)))}}canvasOffset(){let u=this.glDOM,m=u.getBoundingClientRect(),_=u.ownerDocument,D=_.documentElement,L=_.defaultView;return{top:m.top+L.pageYOffset-D.clientTop,left:m.left+L.pageXOffset-D.clientLeft}}setHover(u,m,_){this.current_hover!=u&&(this.current_hover&&(typeof this.current_hover.unhover_callback!="function"&&(this.current_hover.unhover_callback=(0,M.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,m,this.container,_)),this.current_hover=u,u&&u.hover_callback!==void 0&&(typeof u.hover_callback!="function"&&(u.hover_callback=(0,M.makeFunction)(u.hover_callback)),typeof u.hover_callback=="function"&&u.hover_callback(u,this._viewer,m,this.container,_)))}handleHoverSelection(u,m,_){if(this.hoverables.length==0)return;let D=this.targetedObjects(u,m,this.hoverables);if(D.length){var L=D[0].clickable;this.setHover(L,_,D),this.current_hover=L}else this.setHover(null)}handleHoverContinue(u,m){let _=this.targetedObjects(u,m,this.hoverables);(_.length==0||_[0]===void 0)&&this.setHover(null),_[0]!==void 0&&_[0].clickable!==this.current_hover&&this.setHover(null)}closeEnoughForClick(u,{allowTolerance:m=u.targetTouches,tolerance:_=5}={}){const D=this.getX(u),L=this.getY(u);if(m){const P=Math.abs(D-this.mouseStartX),N=Math.abs(L-this.mouseStartY);return P<=_&&N<=_}else return D===this.mouseStartX&&L===this.mouseStartY}calcTouchDistance(u){var m=u.targetTouches[0].pageX-u.targetTouches[1].pageX,_=u.targetTouches[0].pageY-u.targetTouches[1].pageY;return Math.hypot(m,_)}getX(u){var m=u.pageX;return m==null&&(m=u.pageX),u.targetTouches&&u.targetTouches[0]?m=u.targetTouches[0].pageX:u.changedTouches&&u.changedTouches[0]&&(m=u.changedTouches[0].pageX),m}getY(u){var m=u.pageY;return m==null&&(m=u.pageY),u.targetTouches&&u.targetTouches[0]?m=u.targetTouches[0].pageY:u.changedTouches&&u.changedTouches[0]&&(m=u.changedTouches[0].pageY),m}isInViewer(u,m){if(this.viewers!=null){var _=this.WIDTH/this.cols,D=this.HEIGHT/this.rows,L=this.canvasOffset(),P=u-L.left,N=m-L.top,U=this.rows-Math.floor(N/D)-1,V=Math.floor(P/_);if(U!=this.row||V!=this.col)return!1}return!0}adjustZoomToLimits(u){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){let m=this.CAMERA_Z-this.config.lowerZoomLimit;u>m&&(u=m)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){let m=this.CAMERA_Z-this.config.upperZoomLimit;u<m&&(u=m)}return u>this.CAMERA_Z-1&&(u=this.CAMERA_Z-1),u}static slerp(u,m,_){if(_==1)return m.clone();if(_==0)return u.clone();let D=u.x*m.x+u.y*m.y+u.z*m.z+u.w*m.w;if(D>.9995){let G=new w.Quaternion(u.x+_*(m.x-u.x),u.y+_*(m.y-u.y),u.z+_*(m.z-u.z),u.w+_*(m.w-u.w));return G.normalize(),G}D<0&&(m=m.clone().multiplyScalar(-1),D=-D),D>1?D=1:D<-1&&(D=-1);var L=Math.acos(D),P=L*_,N=m.clone();N.sub(u.clone().multiplyScalar(D)),N.normalize();var U=Math.cos(P),V=Math.sin(P),W=new w.Quaternion(u.x*U+N.x*V,u.y*U+N.y*V,u.z*U+N.z*V,u.w*U+N.w*V);return W.normalize(),W}constructor(u,m={}){if(this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledObjects=[],this.current_hover=null,this.hoverDuration=500,this.longTouchDuration=1e3,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.fogEnd=1,this.slabNear=-50,this.slabFar=50,this.cq=new w.Quaternion(0,0,0,1),this.dq=new w.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=m,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||(this.defaultcolors=T.elementColors.defaultColors),this.nomouse=!!this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||"#ffffff",typeof this.config.backgroundColor<"u"&&(this.bgColor=T.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=this.config.backgroundAlpha==null?1:this.config.backgroundAlpha,this.camerax=0,typeof this.config.camerax<"u"&&(this.camerax=typeof this.config.camerax=="string"?parseFloat(this.config.camerax):this.config.camerax),this._viewer=this,this.container=u,this.config.hoverDuration!=null&&(this.hoverDuration=this.config.hoverDuration),this.config.antialias===void 0&&(this.config.antialias=!0),this.config.cartoonQuality===void 0&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row==null?0:this.config.row,this.col=this.config.col==null?0:this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new A.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new w.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new w.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new A.Raycaster(new w.Vector3(0,0,0),new w.Vector3(0,0,0)),this.projector=new A.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=T.CC.color(this.bgColor),document.body.addEventListener("mouseup",this._handleMouseUp.bind(this)),document.body.addEventListener("touchend",this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener("resize",this.resize.bind(this)),typeof window.ResizeObserver<"u"&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container)),typeof window.IntersectionObserver<"u"){let _=(D,L)=>{D.forEach(P=>{P.isIntersecting&&this.resize()})};this.intwatcher=new window.IntersectionObserver(_),this.intwatcher.observe(this.container)}try{typeof this.callback=="function"&&this.callback(this)}catch(_){console.log("error with glviewer callback: "+_)}}targetedObjects(u,m,_){var D={x:u,y:m,z:-1};return Array.isArray(_)||(_=this.selectedAtoms(_)),_.length==0?[]:(this.raycaster.setFromCamera(D,this.camera),this.raycaster.intersectObjects(this.modelGroup,_))}modelToScreen(u){let m=!1;Array.isArray(u)||(u=[u],m=!0);let _=this.renderer.getXRatio(),D=this.renderer.getYRatio(),L=this.col,P=this.row,N=L*(this.WIDTH/_),U=(D-P-1)*(this.HEIGHT/D),V=[],W=this.canvasOffset();return u.forEach(G=>{let H=new w.Vector3(G.x,G.y,G.z);H.applyMatrix4(this.modelGroup.matrixWorld),this.projector.projectVector(H,this.camera);let k=this.WIDTH/_*(H.x+1)/2+W.left+N,X=-(this.HEIGHT/D)*(H.y-1)/2+W.top+U;V.push({x:k,y:X})}),m&&(V=V[0]),V}screenOffsetToModel(u,m,_){var D=u/this.WIDTH,L=m/this.HEIGHT,P=_===void 0?this.rotationGroup.position.z:_,N=this.rotationGroup.quaternion,U=new w.Vector3(0,0,P);return this.projector.projectVector(U,this.camera),U.x+=D*2,U.y-=L*2,this.projector.unprojectVector(U,this.camera),U.z=0,U.applyQuaternion(N),U}screenToModelDistance(u,m){let _=this.canvasOffset(),D=new w.Vector3(m.x,m.y,m.z);D.applyMatrix4(this.modelGroup.matrixWorld);let L=D.clone();this.projector.projectVector(D,this.camera);let P=new w.Vector3((u.x-_.left)*2/this.WIDTH-1,(u.y-_.top)*2/-this.HEIGHT+1,D.z);return this.projector.unprojectVector(P,this.camera),P.distanceTo(L)}setViewChangeCallback(u){(typeof u=="function"||u==null)&&(this.viewChangeCallback=u)}setStateChangeCallback(u){(typeof u=="function"||u==null)&&(this.stateChangeCallback=u)}getConfig(){return this.config}setConfig(u){this.config=u,u.ambientOcclusion&&this.renderer.enableAmbientOcclusion(u.ambientOcclusion)}getInternalState(){var u={models:[],surfaces:[],shapes:[],labels:[]};for(let m=0;m<this.models.length;m++)this.models[m]&&(u.models[m]=this.models[m].getInternalState());return u}setInternalState(u){this.clear();var m=u.models;for(let _=0;_<m.length;_++)m[_]&&(this.models[_]=new d.GLModel(_,void 0,this),this.models[_].setInternalState(m[_]));this.render()}setZoomLimits(u,m){typeof u<"u"&&(this.config.lowerZoomLimit=u),m&&(this.config.upperZoomLimit=m),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}setCameraParameters(u){u.fov!==void 0&&(this.fov=u.fov,this.camera.fov=this.fov),u.z!==void 0&&(this.CAMERA_Z=u.z,this.camera.z=this.CAMERA_Z),u.orthographic!==void 0&&(this.camera.ortho=u.orthographic),this.setSlabAndFog()}_handleMouseDown(u){if(u.preventDefault(),!this.scene)return;var m=this.getX(u),_=this.getY(u);if(m===void 0)return;this.isDragging=!0,this.mouseButton=u.which,this.mouseStartX=m,this.mouseStartY=_,this.touchHold=!0,this.touchDistanceStart=0,u.targetTouches&&u.targetTouches.length==2&&(this.touchDistanceStart=this.calcTouchDistance(u)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;let D=this;u.targetTouches&&u.targetTouches.length===1&&(this.longTouchTimeout=setTimeout(function(){if(D.touchHold==!0){D.glDOM=D.renderer.domElement;const L=u.targetTouches[0],P=new PointerEvent("contextmenu",Object.assign(Object.assign({},u),{pageX:L.pageX,pageY:L.pageY,screenX:L.screenX,screenY:L.screenY,clientX:L.clientX,clientY:L.clientY}));D.glDOM.dispatchEvent(P)}},this.longTouchDuration))}_handleMouseUp(u){if(this.touchHold=!1,this.isDragging&&this.scene){var m=this.getX(u),_=this.getY(u);if(this.closeEnoughForClick(u)&&this.isInViewer(m,_)){let D=this.mouseXY(m,_);this.handleClickSelection(D.x,D.y,u)}}this.isDragging=!1}_handleMouseScroll(u){if(u.preventDefault(),!!this.scene){var m=this.getX(u),_=this.getY(u);if(m!==void 0&&!(!this.control_all&&!this.isInViewer(m,_))){var D=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,L=1;if(u.ctrlKey&&(L=-1),u.detail)this.rotationGroup.position.z+=L*D*u.detail/10;else if(u.wheelDelta){let P=u.wheelDelta*600/(u.wheelDelta+600);this.rotationGroup.position.z-=L*D*P/400}this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}pngURI(){return this.getCanvas().toDataURL("image/png")}apngURI(u){let m=this;return u=u||1,new Promise(function(_){let D=0,L=m.viewChangeCallback,P=[],N=[],U=Date.now();m.viewChangeCallback=function(){N.push(Date.now()-U),U=Date.now(),P.push(new Promise(V=>{m.getCanvas().toBlob(function(W){W.arrayBuffer().then(V)},"image/png")})),D+=1,D==u&&(m.viewChangeCallback=L,Promise.all(P).then(V=>{let W=[];for(let F=0;F<V.length;F++){let K=(0,a.decode)(V[F]);W.push((0,a.toRGBA8)(K)[0])}let G=m.getCanvas().width,H=m.getCanvas().height,k=(0,a.encode)(W,G,H,0,N),X=new Blob([k],{type:"image/png"}),$=new FileReader;$.onload=function(F){_(F.target.result)},$.readAsDataURL(X)}))}})}getCanvas(){return this.glDOM}getRenderer(){return this.renderer}setHoverDuration(u){this.hoverDuration=u}mouseXY(u,m){let _=this.canvasOffset(),D=this.renderer.getXRatio(),L=this.renderer.getYRatio(),P=this.col,N=this.row,U=P*(this.WIDTH/D),V=(L-N-1)*(this.HEIGHT/L),W=(u-_.left-U)/(this.WIDTH/D)*2-1,G=-((m-_.top-V)/(this.HEIGHT/L))*2+1;return{x:W,y:G}}_handleMouseMove(u){clearTimeout(this.hoverTimeout),u.preventDefault();let m=this.getX(u),_=this.getY(u);if(m===void 0)return;let D=this.renderer.getXRatio(),L=this.renderer.getYRatio(),P=this.mouseXY(m,_),N=this;this.current_hover!==null&&this.handleHoverContinue(P.x,P.y);var U=0;if(!(!this.control_all&&!this.isInViewer(m,_))&&this.scene&&(this.hoverables.length>0&&(this.hoverTimeout=setTimeout(function(){N.handleHoverSelection(P.x,P.y,u)},this.hoverDuration)),!!this.isDragging)){u.targetTouches&&(u.targetTouches.length>1||u.targetTouches.length===1&&!this.closeEnoughForClick(u))&&clearTimeout(this.longTouchTimeout);var V=(m-this.mouseStartX)/this.WIDTH,W=(_-this.mouseStartY)/this.HEIGHT;if(this.touchDistanceStart!=0&&u.targetTouches&&u.targetTouches.length==2){var G=this.calcTouchDistance(u);U=2,W=(G-this.touchDistanceStart)*2/(this.WIDTH+this.HEIGHT)}else u.targetTouches&&u.targetTouches.length==3&&(U=1);V*=D,W*=L;var H=Math.hypot(V,W),k;if(U==3||this.mouseButton==3&&u.ctrlKey)this.slabNear=this.cslabNear+V*100,this.slabFar=this.cslabFar-W*100;else if(U==2||this.mouseButton==3||u.shiftKey)k=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,k<80&&(k=80),this.rotationGroup.position.z=this.cz+W*k,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(U==1||this.mouseButton==2||u.ctrlKey){var X=this.screenOffsetToModel(D*(m-this.mouseStartX),L*(_-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,X)}else if((U===0||this.mouseButton==1)&&H!==0){var $=Math.sin(H*Math.PI)/H;this.dq.x=Math.cos(H*Math.PI),this.dq.y=0,this.dq.z=$*V,this.dq.w=-$*W,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}_handleContextMenu(u){if(u.preventDefault(),this.closeEnoughForClick(u)){var D=this.mouseStartX,L=this.mouseStartY,_=this.canvasOffset();let P=this.mouseXY(D,L),N=P.x,U=P.y,V=this.targetedObjects(N,U,this.contextMenuEnabledObjects);var m=null;V.length&&(m=V[0].clickable);var _=this.canvasOffset(),D=this.mouseStartX-_.left,L=this.mouseStartY-_.top;this.userContextMenuHandler&&(this.userContextMenuHandler(m,D,L,V,u),this.isDragging=!1)}}setContainer(u){let m=(0,M.getElement)(u)||this.container;return this.initContainer(m),this}setBackgroundColor(u,m){(typeof m>"u"||m<0||m>1)&&(m=1);var _=T.CC.color(u);return this.scene.fog.color=_,this.bgColor=_.getHex(),this.renderer.setClearColorHex(_.getHex(),m),this.show(),this}setProjection(u){this.camera.ortho=u==="orthographic",this.setSlabAndFog()}setViewStyle(u){if(u=u||{},u.style=u.style||"",u.style.includes("outline")?this.renderer.enableOutline(u):this.renderer.disableOutline(),u.style.includes("ambientOcclusion")){var m={};u.strength&&(m.strength=u.strength),u.radius&&(m.radius=u.radius),this.renderer.enableAmbientOcclusion(m)}else this.renderer.disableAmbientOcclusion();return this}updateSize(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}setWidth(u){return this.WIDTH=u||this.WIDTH,this.updateSize(),this}setHeight(u){return this.HEIGHT=u||this.HEIGHT,this.updateSize(),this}resize(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();let u=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0){let m=!1,_=this.container.querySelector("canvas");_&&_!=this.renderer.getCanvas()?this.config.canvas=_:(_.remove(),this.config&&this.config.canvas!=null&&(delete this.config.canvas,m=!0)),this.setupRenderer(),this.initContainer(this.container),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),u=!0,m&&(this.config.canvas=this.renderer.getCanvas())}if(this.WIDTH==0||this.HEIGHT==0?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),u){let m=this.renderer.supportedExtensions();if(m.regen=!0,this.viewers)for(let _=0,D=this.viewers.length;_<D;_++)for(let L=0,P=this.viewers[_].length;L<P;L++)this.viewers[_][L].render(null,m);this._viewer.render(null,m)}else this.WIDTH>0&&this.HEIGHT>0&&this.show();return this}getModel(u){return u===void 0?this.models.length==0?null:this.models[this.models.length-1]:u instanceof d.GLModel?u:u in this.models?this.models[u]:this.models.length==0?null:this.models[this.models.length-1]}spin(u,m=1,_=!1){if(clearInterval(this.spinInterval),typeof u>"u"&&(u="y"),typeof u=="boolean")if(u)u="y";else return;Array.isArray(u)&&(u={x:u[0],y:u[1],z:u[2]});var D=this;this.spinInterval=setInterval(function(){!D.getCanvas().isConnected&&D.renderer.isLost()&&clearInterval(D.spinInterval),(!_||D.container.checkVisibility&&D.container.checkVisibility())&&D.rotate(1*m,u)},25)}animateMotion(u,m,_,D,L,P){var N=20,U=Math.ceil(u/N);U<1&&(U=1),this.incAnim();var V={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(m){let H=new Array(U);for(let F=0;F<U;F++){let K=(F+1)/U,te={mpos:V.mpos,rz:V.rz,rot:V.rot};te.mpos=_.clone().sub(V.mpos).multiplyScalar(K).add(V.mpos),te.rz=V.rz+K*(D-V.rz),te.rot=c.slerp(V.rot,L,K),te.cam=P.clone().sub(V.cam).multiplyScalar(K).add(V.cam),H[F]=te}let k=0,X=this,$=function(){var F=H[k];k+=1,X.modelGroup.position=F.mpos,X.rotationGroup.position.z=F.rz,X.rotationGroup.quaternion=F.rot,X.camera.lookAt(F.cam),k<H.length?setTimeout($,N):X.decAnim(),X.show()};setTimeout($,N)}else{var W={};let H=1/U;if(_&&(W.mpos=_.clone().sub(V.mpos).multiplyScalar(H)),typeof D<"u"&&D!=null&&(W.rz=H*(D-V.rz)),L){var G=c.slerp(V.rot,L,H);W.rot=V.rot.clone().inverse().multiply(G)}P&&(W.cam=P.clone().sub(V.cam).multiplyScalar(H));let k=0,X=this,$=function(){k+=1,W.mpos&&X.modelGroup.position.add(W.mpos),W.rz&&(X.rotationGroup.position.z+=W.rz),W.rot&&X.rotationGroup.quaternion.multiply(W.rot),W.cam&&(X.lookingAt.add(W.cam),X.camera.lookAt(X.lookingAt)),k<U?setTimeout($,N):X.decAnim(),X.show()};setTimeout($,N)}}rotate(u,m="y",_=0,D=!1){if(m=="x"?m={x:1,y:0,z:0}:m=="y"?m={x:0,y:1,z:0}:m=="z"&&(m={x:0,y:0,z:1}),m=="vx"?m={vx:1,vy:0,vz:0}:m=="vy"?m={vx:0,vy:1,vz:0}:m=="vz"&&(m={vx:0,vy:0,vz:1}),typeof m.vx<"u"){var L=new w.Vector3(m.vx,m.vy,m.vz);L.applyQuaternion(this.rotationGroup.quaternion),m={x:L.x,y:L.y,z:L.z}}var P=function(W){var G=Math.sin(W/2),H=Math.cos(W/2),k=0,X=0,$=0;return k=m.x*G,X=m.y*G,$=m.z*G,new w.Quaternion(k,X,$,H).normalize()},N=Math.PI*u/180,U=P(N);if(_){var V=new w.Quaternion().copy(this.rotationGroup.quaternion).multiply(U);this.animateMotion(_,D,this.modelGroup.position,this.rotationGroup.position.z,V,this.lookingAt)}else this.rotationGroup.quaternion.multiply(U),this.show();return this}surfacesFinished(){for(var u in this.surfaces)if(!this.surfaces[u][0].done)return!1;return!0}getView(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var u=this.modelGroup.position,m=this.rotationGroup.quaternion;return[u.x,u.y,u.z,this.rotationGroup.position.z,m.x,m.y,m.z,m.w]}setView(u,m){return u===void 0||!(u instanceof Array||u.length!==8)?this:!this.modelGroup||!this.rotationGroup?this:(this.modelGroup.position.x=u[0],this.modelGroup.position.y=u[1],this.modelGroup.position.z=u[2],this.rotationGroup.position.z=u[3],this.rotationGroup.quaternion.x=u[4],this.rotationGroup.quaternion.y=u[5],this.rotationGroup.quaternion.z=u[6],this.rotationGroup.quaternion.w=u[7],typeof u[8]<"u"&&(this.rotationGroup.position.x=u[8],this.rotationGroup.position.y=u[9]),this.show(m),this)}render(u,m){this.renderer.setViewport(),this.updateClickables();var _=this.getView();this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState());var D,L;for(m||(m=this.renderer.supportedExtensions()),D=0;D<this.models.length;D++)this.models[D]&&this.models[D].globj(this.modelGroup,m);for(D=0;D<this.shapes.length;D++)this.shapes[D]&&(typeof this.shapes[D].frame>"u"||this.viewer_frame<0||this.shapes[D].frame<0||this.shapes[D].frame==this.viewer_frame?this.shapes[D].globj(this.modelGroup,m):this.shapes[D].removegl(this.modelGroup));for(D=0;D<this.labels.length;D++)m.regen&&(this.labels[D].dispose(),this.modelGroup.remove(this.labels[D].sprite),this.labels[D].setContext(),this.modelGroup.add(this.labels[D].sprite)),this.labels[D]&&typeof this.labels[D].frame<"u"&&this.labels[D].frame>=0&&(this.modelGroup.remove(this.labels[D].sprite),(this.viewer_frame<0||this.labels[D].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[D].sprite));for(D in this.surfaces)if(this.surfaces.hasOwnProperty(D)){var P=this.surfaces[D];for(L=0;L<P.length;L++)if(P.hasOwnProperty(L)){var N=P[L].geo;if(!P[L].finished||m.regen){N.verticesNeedUpdate=!0,N.elementsNeedUpdate=!0,N.normalsNeedUpdate=!0,N.colorsNeedUpdate=!0,N.buffersNeedUpdate=!0,P[L].mat.needsUpdate=!0,P[L].done&&(P[L].finished=!0),P[L].lastGL&&this.modelGroup.remove(P[L].lastGL);var U=null;if(P[L].mat instanceof A.LineBasicMaterial?U=new A.Line(N,P[L].mat):("wireframe"in P.style&&P.style.wireframe&&N.setUpWireframe(),U=new A.Mesh(N,P[L].mat)),P[L].mat.transparent&&P[L].mat.opacity==0?U.visible=!1:U.visible=!0,P[L].symmetries.length>1||P[L].symmetries.length==1&&!P[L].symmetries[0].isIdentity()){var V,W=new A.Object3D;for(V=0;V<P[L].symmetries.length;V++){var G=U.clone();G.matrix=P[L].symmetries[V],G.matrixAutoUpdate=!1,W.add(G)}P[L].lastGL=W,this.modelGroup.add(W)}else P[L].lastGL=U,this.modelGroup.add(U)}}}return this.setView(_),typeof u=="function"&&u(this),this}getModelList(u){let m=[];if(typeof u>"u"||typeof u.model>"u")for(let D=0;D<this.models.length;D++)this.models[D]&&m.push(this.models[D]);else{let D=u.model;Array.isArray(D)||(D=[D]);for(let L=0;L<D.length;L++)if(typeof D[L]=="number"){var _=D[L];_<0&&(_+=this.models.length),m.push(this.models[_])}else m.push(D[L])}return m}getAtomsFromSel(u){var m=[];typeof u>"u"&&(u={});var _=this.getModelList(u);for(let D=0;D<_.length;D++)m=m.concat(_[D].selectedAtoms(u));return m}atomIsSelected(u,m){typeof m>"u"&&(m={});for(var _=this.getModelList(m),D=0;D<_.length;D++)if(_[D].atomIsSelected(u,m))return!0;return!1}selectedAtoms(u){return this.getAtomsFromSel(u)}getUniqueValues(u,m){typeof m>"u"&&(m={});var _=this.getAtomsFromSel(m),D={};for(var L in _)if(_[L].hasOwnProperty(u)){var P=_[L][u];D[P]=!0}return Object.keys(D)}pdbData(u){for(var m=this.getAtomsFromSel(u),_="",D=0,L=m.length;D<L;++D)_+=m[D].pdbline+`
`;return _}zoom(u=2,m=0,_=!1){var D=(this.CAMERA_Z-this.rotationGroup.position.z)/u,L=this.CAMERA_Z-D;return m>0?this.animateMotion(m,_,this.modelGroup.position,this.adjustZoomToLimits(L),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits(L),this.show()),this}translate(u,m,_=0,D=!1){var L=u/this.WIDTH,P=m/this.HEIGHT,N=new w.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector(N,this.camera),N.x-=L,N.y-=P,this.projector.unprojectVector(N,this.camera),N.z=0;var U=this.lookingAt.clone().add(N);return _>0?this.animateMotion(_,D,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,U):(this.lookingAt=U,this.camera.lookAt(this.lookingAt),this.show()),this}translateScene(u,m,_=0,D=!1){var L=this.screenOffsetToModel(u,m),P=this.modelGroup.position.clone().add(L);return _>0?this.animateMotion(_,D,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=P,this.show()),this}fitSlab(u){u=u||{};var m=this.getAtomsFromSel(u),_=(0,M.getExtent)(m),D=_[1][0]-_[0][0],L=_[1][1]-_[0][1],P=_[1][2]-_[0][2],N=Math.hypot(D,L,P);return N<5&&(N=5),this.slabNear=-N/1.9,this.slabFar=N/2,this}center(u={},m=0,_=!1){var D,L,P=this.getAtomsFromSel(u),N=(0,M.getExtent)(P);(0,M.isEmptyObject)(u)?(this.shapes.forEach(K=>{if(K&&K.boundingSphere&&K.boundingSphere.center){var te=K.boundingSphere.center,re=K.boundingSphere.radius;re>0?(P.push(new w.Vector3(te.x+re,te.y,te.z)),P.push(new w.Vector3(te.x-re,te.y,te.z)),P.push(new w.Vector3(te.x,te.y+re,te.z)),P.push(new w.Vector3(te.x,te.y-re,te.z)),P.push(new w.Vector3(te.x,te.y,te.z+re)),P.push(new w.Vector3(te.x,te.y,te.z-re))):P.push(te)}}),N=(0,M.getExtent)(P),D=P,L=N):(D=this.getAtomsFromSel({}),L=(0,M.getExtent)(D));var U=new w.Vector3(N[2][0],N[2][1],N[2][2]),V=L[1][0]-L[0][0],W=L[1][1]-L[0][1],G=L[1][2]-L[0][2],H=Math.hypot(V,W,G);H<5&&(H=5),this.slabNear=-H/1.9,this.slabFar=H/2,V=N[1][0]-N[0][0],W=N[1][1]-N[0][1],G=N[1][2]-N[0][2],H=Math.hypot(V,W,G),H<5&&(H=5);for(var k=25,X=0;X<P.length;X++)if(P[X]){var $=U.distanceToSquared(P[X]);$>k&&(k=$)}H=Math.sqrt(k)*2;var F=U.clone().multiplyScalar(-1);return m>0?this.animateMotion(m,_,F,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=F,this.show()),this}zoomTo(u={},m=0,_=!1){let D=this.getAtomsFromSel(u),L=(0,M.getExtent)(D),P=L;if((0,M.isEmptyObject)(u)){let te=D&&D.length;if(this.shapes.forEach(re=>{if(re&&re.boundingSphere){if(re.boundingSphere.box){let ue=re.boundingSphere.box;D.push(new w.Vector3(ue.min.x,ue.min.y,ue.min.z)),D.push(new w.Vector3(ue.max.x,ue.max.y,ue.max.z))}else if(re.boundingSphere.center){var le=re.boundingSphere.center,oe=re.boundingSphere.radius;oe>0?(D.push(new w.Vector3(le.x+oe,le.y,le.z)),D.push(new w.Vector3(le.x-oe,le.y,le.z)),D.push(new w.Vector3(le.x,le.y+oe,le.z)),D.push(new w.Vector3(le.x,le.y-oe,le.z)),D.push(new w.Vector3(le.x,le.y,le.z+oe)),D.push(new w.Vector3(le.x,le.y,le.z-oe))):D.push(le)}}}),P=(0,M.getExtent)(D),!te)for(let re=0;re<3;re++)L[2][re]=(P[0][re]+P[1][re])/2}else{let te=this.getAtomsFromSel({});P=(0,M.getExtent)(te)}var N=new w.Vector3(L[2][0],L[2][1],L[2][2]),U=P[1][0]-P[0][0],V=P[1][1]-P[0][1],W=P[1][2]-P[0][2],G=Math.hypot(U,V,W);G<5&&(G=5),this.slabNear=-G/1.9,this.slabFar=G/2,Object.keys(u).length===0&&(this.slabNear=Math.min(-G*2,-50),this.slabFar=Math.max(G*2,50));var H=this.config.minimumZoomToDistance||5;U=L[1][0]-L[0][0],V=L[1][1]-L[0][1],W=L[1][2]-L[0][2],G=Math.hypot(U,V,W),G<H&&(G=H);for(var k=H*H,X=0;X<D.length;X++)if(D[X]){var $=N.distanceToSquared(D[X]);$>k&&(k=$)}G=Math.sqrt(k)*2;var F=N.clone().multiplyScalar(-1),K=-(G*.5/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return K=this.adjustZoomToLimits(K),m>0?this.animateMotion(m,_,F,K,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=F,this.rotationGroup.position.z=K,this.show()),this}setSlab(u,m){this.slabNear=u,this.slabFar=m}getSlab(){return{near:this.slabNear,far:this.slabFar}}addLabel(u,m={},_,D=!1){if(_){var L=(0,M.getExtent)(this.getAtomsFromSel(_));m.position={x:L[2][0],y:L[2][1],z:L[2][2]}}var P=new p.Label(u,m);return P.setContext(),this.modelGroup.add(P.sprite),this.labels.push(P),D||this.show(),P}addResLabels(u,m,_=!1){let D=this.labels.length;return this.applyToModels("addResLabels",u,m,_),this.show(),this.labels.slice(D)}addPropertyLabels(u,m,_){return this.applyToModels("addPropertyLabels",u,m,_),this.show(),this}removeLabel(u){for(var m=0;m<this.labels.length;m++)if(this.labels[m]==u){this.labels.splice(m,1),u.dispose(),this.modelGroup.remove(u.sprite);break}return this.show(),this}removeAllLabels(){for(var u=0;u<this.labels.length;u++)this.labels[u]&&this.labels[u].sprite&&this.modelGroup.remove(this.labels[u].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}hideAllLabels(){for(var u=0;u<this.labels.length;u++)this.labels[u]&&this.labels[u].hide();return this.show(),this}showAllLabels(){for(var u=0;u<this.labels.length;u++)this.labels[u]&&this.labels[u].show();return this.show(),this}setLabelStyle(u,m){return this.modelGroup.remove(u.sprite),u.dispose(),u.stylespec=m,u.setContext(),this.modelGroup.add(u.sprite),this.show(),u}setLabelText(u,m){return this.modelGroup.remove(u.sprite),u.dispose(),u.text=m,u.setContext(),this.modelGroup.add(u.sprite),this.show(),u}addShape(u){u=u||{};var m=new y.GLShape(u);return m.shapePosition=this.shapes.length,this.shapes.push(m),m}removeShape(u){if(!u)return this;for(u.removegl(this.modelGroup),delete this.shapes[u.shapePosition];this.shapes.length>0&&typeof this.shapes[this.shapes.length-1]>"u";)this.shapes.pop();return this}removeAllShapes(){for(var u=0;u<this.shapes.length;u++){var m=this.shapes[u];m&&m.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}getSelectionCenter(u){if(u.hasOwnProperty("x")&&u.hasOwnProperty("y")&&u.hasOwnProperty("z"))return u;var m=this.getAtomsFromSel(u);if(m.length==0)return{x:0,y:0,z:0};var _=(0,M.getExtent)(m);return{x:_[0][0]+(_[1][0]-_[0][0])/2,y:_[0][1]+(_[1][1]-_[0][1])/2,z:_[0][2]+(_[1][2]-_[0][2])/2}}addSphere(u){u=u||{},u.center=this.getSelectionCenter(u.center);var m=new y.GLShape(u);return m.shapePosition=this.shapes.length,m.addSphere(u),this.shapes.push(m),m.finalize(),m}addBox(u={}){u.corner!=null&&(u.corner=this.getSelectionCenter(u.corner)),u.center!=null&&(u.center=this.getSelectionCenter(u.center));var m=new y.GLShape(u);return m.shapePosition=this.shapes.length,m.addBox(u),this.shapes.push(m),m.finalize(),m}addArrow(u={}){u.start=this.getSelectionCenter(u.start),u.end=this.getSelectionCenter(u.end);var m=new y.GLShape(u);return m.shapePosition=this.shapes.length,m.addArrow(u),this.shapes.push(m),m.finalize(),m}addCylinder(u={}){u.start=this.getSelectionCenter(u.start),u.end=this.getSelectionCenter(u.end);var m=new y.GLShape(u);return m.shapePosition=this.shapes.length,u.dashed?m.addDashedCylinder(u):m.addCylinder(u),this.shapes.push(m),m.finalize(),m}addCurve(u={}){var m=new y.GLShape(u);return m.shapePosition=this.shapes.length,m.addCurve(u),this.shapes.push(m),m.finalize(),m}addLine(u={}){u.start=this.getSelectionCenter(u.start),u.end=this.getSelectionCenter(u.end),u.wireframe=!0;var m=new y.GLShape(u);return m.shapePosition=this.shapes.length,u.dashed?m=this.addLineDashed(u,m):m.addLine(u),this.shapes.push(m),m.finalize(),m}addUnitCell(u,m){u=this.getModel(u),m=m||{alabel:"a",blabel:"b",clabel:"c"},m.box=m.box||{},m.astyle=m.astyle||{color:"red",radius:.1,midpos:-1},m.bstyle=m.bstyle||{color:"green",radius:.1,midpos:-1},m.cstyle=m.cstyle||{color:"blue",radius:.1,midpos:-1},m.alabelstyle=m.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1},m.blabelstyle=m.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1},m.clabelstyle=m.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1},u.unitCellObjects&&this.removeUnitCell(u),u.unitCellObjects={shapes:[],labels:[]};var _=u.getCrystData(),D=null;if(_){if(_.matrix)D=_.matrix;else{var L=_.a,P=_.b,N=_.c,U=_.alpha,V=_.beta,W=_.gamma;U=U*Math.PI/180,V=V*Math.PI/180,W=W*Math.PI/180;var G,H,k;G=Math.cos(V),H=(Math.cos(U)-Math.cos(V)*Math.cos(W))/Math.sin(W),k=Math.sqrt(Math.max(0,1-G*G-H*H)),D=new w.Matrix3(L,P*Math.cos(W),N*G,0,P*Math.sin(W),N*H,0,0,N*k)}var X=[new w.Vector3(0,0,0),new w.Vector3(1,0,0),new w.Vector3(0,1,0),new w.Vector3(0,0,1),new w.Vector3(1,1,0),new w.Vector3(0,1,1),new w.Vector3(1,0,1),new w.Vector3(1,1,1)];if(_.matrix4)for(let F=0;F<X.length;F++)_.size&&X[F].multiplyVectors(X[F],_.size),X[F]=X[F].applyMatrix4(_.matrix4);else for(let F=0;F<X.length;F++)X[F]=X[F].applyMatrix3(D);if(m.box&&!m.box.hidden){m.box.wireframe=!0;var $=new y.GLShape(m.box);$.shapePosition=this.shapes.length,$.addLine({start:X[0],end:X[1]}),$.addLine({start:X[0],end:X[2]}),$.addLine({start:X[1],end:X[4]}),$.addLine({start:X[2],end:X[4]}),$.addLine({start:X[0],end:X[3]}),$.addLine({start:X[3],end:X[5]}),$.addLine({start:X[2],end:X[5]}),$.addLine({start:X[1],end:X[6]}),$.addLine({start:X[4],end:X[7]}),$.addLine({start:X[6],end:X[7]}),$.addLine({start:X[3],end:X[6]}),$.addLine({start:X[5],end:X[7]}),this.shapes.push($),u.unitCellObjects.shapes.push($),$.finalize()}if(!m.astyle.hidden){m.astyle.start=X[0],m.astyle.end=X[1];let F=this.addArrow(m.astyle);u.unitCellObjects.shapes.push(F)}if(!m.bstyle.hidden){m.bstyle.start=X[0],m.bstyle.end=X[2];let F=this.addArrow(m.bstyle);u.unitCellObjects.shapes.push(F)}if(!m.cstyle.hidden){m.cstyle.start=X[0],m.cstyle.end=X[3];let F=this.addArrow(m.cstyle);u.unitCellObjects.shapes.push(F)}if(m.alabel){m.alabelstyle.position=X[1];let F=this.addLabel(m.alabel,m.alabelstyle);u.unitCellObjects.labels.push(F)}if(m.blabel){m.blabelstyle.position=X[2];let F=this.addLabel(m.blabel,m.blabelstyle);u.unitCellObjects.labels.push(F)}if(m.clabel){m.clabelstyle.position=X[3];let F=this.addLabel(m.clabel,m.clabelstyle);u.unitCellObjects.labels.push(F)}}}removeUnitCell(u){if(u=this.getModel(u),u.unitCellObjects){let m=this;u.unitCellObjects.shapes.forEach(function(_){m.removeShape(_)}),u.unitCellObjects.labels.forEach(function(_){m.removeLabel(_)})}delete u.unitCellObjects}replicateUnitCell(u=3,m=u,_=m,D,L,P){D=this.getModel(D);let N=D.getCrystData();if(N){const U=D.selectedAtoms({}),V=N.matrix;let W=function(H){return H%2==0?-H/2:Math.ceil(H/2)};u<=1&&m<=1&&_<=1&&(P=!0,u=m=_=3);let G=function(H,k,X){return!1};if(P){const H=new w.Matrix3().getInverse3(V);G=function(k,X,$){let F=new w.Vector3(k,X,$).applyMatrix3(H);return!(F.x>-1e-4&&F.x<1.0001&&F.y>-1e-4&&F.y<1.0001&&F.z>-1e-4&&F.z<1.0001)}}for(let H=0;H<u;H++)for(let k=0;k<m;k++)for(let X=0;X<_;X++){if(H==0&&k==0&&X==0)continue;let $=new w.Vector3(W(H),W(k),W(X));$.applyMatrix3(V);let F=[];for(let K=0;K<U.length;K++){let te=U[K].x+$.x,re=U[K].y+$.y,le=U[K].z+$.z;if(G(te,re,le))continue;let oe={};for(let ue in U[K])oe[ue]=U[K][ue];oe.x=te,oe.y=re,oe.z=le,F.push(oe)}D.addAtoms(F)}L&&D.assignBonds()}}addLineDashed(u,m){u.dashLength=u.dashLength||.5,u.gapLength=u.gapLength||.5;var _;u.start?_=new w.Vector3(u.start.x||0,u.start.y||0,u.start.z||0):_=new w.Vector3(0,0,0);var D;u.end?D=new w.Vector3(u.end.x,u.end.y||0,u.end.z||0):D=new w.Vector3(0,0,0);var L=new w.Vector3,P=new w.Vector3,N=new w.Vector3,U,V,W,G=_.clone(),H=0;for(L.subVectors(D,_),U=L.length(),L.normalize(),P=L.clone(),N=L.clone(),P.multiplyScalar(u.dashLength),N.multiplyScalar(u.gapLength),V=P.length(),W=N.length();H<U;){if(H+V>U){u.start=_,u.end=D,m.addLine(u);break}G.addVectors(_,P),u.start=_,u.end=G,m.addLine(u),_=G.clone(),H+=V,G.addVectors(_,N),_=G.clone(),H+=W}return m.finalize(),m}addCustom(u){u=u||{};var m=new y.GLShape(u);return m.shapePosition=this.shapes.length,m.addCustom(u),this.shapes.push(m),m.finalize(),m}addVolumetricData(u,m,_={}){var D=new R.VolumeData(u,m);return _.hasOwnProperty("transferfn")?this.addVolumetricRender(D,_):this.addIsosurface(D,_)}addIsosurface(u,m={},_){var D=new y.GLShape(m);return D.shapePosition=this.shapes.length,D.addIsosurface(u,m,_,this),this.shapes.push(D),D}addVolumetricRender(u,m){m=m||{};var _=new x.GLVolumetricRender(u,m,this);return _.shapePosition=this.shapes.length,this.shapes.push(_),_}hasVolumetricRender(){return this.renderer.supportsVolumetric()}enableFog(u){if(u){this.scene.fog=new A.Fog(this.bgColor,100,200),this.config.disableFog=!1;const m=u;m.fogStart==null?this.fogStart=.4:this.fogStart=m.fogStart,m.fogEnd==null?this.fogEnd=1:this.fogEnd=m.fogEnd}else this.config.disableFog=!0,this.show()}setFrame(u){this.viewer_frame=u;let m=this;return new Promise(function(_){var D=m.models.map(function(L){return L.setFrame(u)});Promise.all(D).then(function(){_()})})}getFrame(){return this.viewer_frame}getNumFrames(){var u=0;for(let m=0;m<this.models.length;m++)this.models[m].getNumFrames()>u&&(u=this.models[m].getNumFrames());for(let m=0;m<this.shapes.length;m++)this.shapes[m].frame&&this.shapes[m].frame>=u&&(u=this.shapes[m].frame+1);for(let m=0;m<this.labels.length;m++)this.labels[m].frame&&this.labels[m].frame>=u&&(u=this.labels[m].frame+1);return u}getNextModelId(){return this.models.length}animate(u){this.incAnim();var m=100,_="forward",D=1/0;u=u||{},u.interval&&(m=u.interval),u.loop&&(_=u.loop),u.reps&&(D=u.reps);var L=this.getNumFrames(),P=this,N=0;u.startFrame&&(N=u.startFrame%L);var U=1;u.step&&(U=u.step,D/=U);var V=0,W=L*D,G=new Date,H,k,X=function($){G=new Date,$=="forward"?P.setFrame(N).then(function(){N=(N+U)%L,H()}):$=="backward"?P.setFrame(L-1-N).then(function(){N=(N+U)%L,H()}):P.setFrame(N).then(function(){N+=U,U*=N%(L-1)==0?-1:1,H()})};return H=function(){if(P.render(),!P.getCanvas().isConnected)P.stopAnimate();else if(++V>=W||!P.isAnimated())k.cancel(),P.animationTimers.delete(k),P.decAnim();else{var $=m-(new Date().getTime()-G.getTime());$=$>0?$:0,k.cancel(),P.animationTimers.delete(k),k=new M.PausableTimer(X,$,_),P.animationTimers.add(k)}},k=new M.PausableTimer(X,0,_),this.animationTimers.add(k),this}stopAnimate(){return this.animated=0,this.animationTimers.forEach(function(u){u.cancel()}),this.animationTimers=new Set,this}pauseAnimate(){return this.animationTimers.forEach(function(u){u.pause()}),this}resumeAnimate(){return this.animationTimers.forEach(function(u){u.resume()}),this}isAnimated(){return this.animated>0}getModelOpt(u){return u&&!u.defaultcolors?(u.defaultcolors=this.defaultcolors,u.cartoonQuality=u.cartoonQuality||this.config.cartoonQuality):typeof u>"u"&&(u={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality}),u}addModel(u,m="",_){_=this.getModelOpt(_);var D=new d.GLModel(this.models.length,_,this);return D.addMolData(u,m,_),this.models.push(D),D}addModels(u,m,_){_=this.getModelOpt(_),_.multimodel=!0,_.frames=!0;for(var D=d.GLModel.parseMolData(u,m,_),L=0;L<D.length;L++){var P=new d.GLModel(this.models.length,_,this);P.setAtomDefaults(D[L]),P.addFrame(D[L]),P.setFrame(0),D.modelData&&P.setModelData(D.modelData[L]),P.setDontDuplicateAtoms(!_.duplicateAssemblyAtoms),this.models.push(P)}return this.models}addModelsAsFrames(u,m,_){_=this.getModelOpt(_),_.multimodel=!0,_.frames=!0;var D=new d.GLModel(this.models.length,_,this);return D.addMolData(u,m,_),this.models.push(D),D}addAsOneMolecule(u,m,_){_=this.getModelOpt(_),_.multimodel=!0,_.onemol=!0;var D=new d.GLModel(this.models.length,_,this);return D.addMolData(u,m,_),this.models.push(D),D}removeModel(u){if(u=this.getModel(u),!!u){for(u.removegl(this.modelGroup),delete this.models[u.getID()];this.models.length>0&&typeof this.models[this.models.length-1]>"u";)this.models.pop();return this}}removeAllModels(){for(var u=0;u<this.models.length;u++){var m=this.models[u];m&&m.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}exportJSON(u,m){var _={};return m===void 0?_.m=this.models.map(function(D){return D.toCDObject(u)}):_.m=[this.models[m].toCDObject()],JSON.stringify(_)}exportVRML(){var u=this.modelGroup;this.applyToModels("removegl",this.modelGroup),this.modelGroup=new A.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var m=`#VRML V2.0 utf8
`+this.modelGroup.vrml()+`
`;return this.applyToModels("removegl",this.modelGroup),this.modelGroup=u,m}createModelFrom(u,m=!1){for(var _=new d.GLModel(this.models.length,this.defaultcolors,this),D=0;D<this.models.length;D++)if(this.models[D]){var L=this.models[D].selectedAtoms(u);_.addAtoms(L),m&&this.models[D].removeAtoms(L)}return this.models.push(_),_}applyToModels(u,m,_,D,L,P,N){for(var U=this.getModelList(m),V=0;V<U.length;V++)U[V][u](m,_,D,L,P,N)}setStyle(u,m){return typeof m>"u"&&(m=u,u={}),this.applyToModels("setStyle",u,m,!1),this}addStyle(u,m){return typeof m>"u"&&(m=u,u={}),this.applyToModels("setStyle",u,m,!0),this}setClickable(u,m,_){return this.applyToModels("setClickable",u,m,_),this}setHoverable(u,m,_,D){return this.applyToModels("setHoverable",u,m,_,D),this}enableContextMenu(u,m){return this.applyToModels("enableContextMenu",u,m),this}vibrate(u,m,_,D){return this.applyToModels("vibrate",u,m,_,D),this}setColorByProperty(u,m,_,D){return this.applyToModels("setColorByProperty",u,m,_,D),this}setColorByElement(u,m){return this.applyToModels("setColorByElement",u,m),this}static getAtomsWithin(u,m){var _=[];for(let L=0;L<u.length;L++){var D=u[L];typeof D>"u"||D.x<m[0][0]||D.x>m[1][0]||D.y<m[0][1]||D.y>m[1][1]||D.z<m[0][2]||D.z>m[1][2]||_.push(D)}return _}static volume(u){var m=u[1][0]-u[0][0],_=u[1][1]-u[0][1],D=u[1][2]-u[0][2];return m*_*D}carveUpExtent(u,m,_){let D=[],L={};for(let G=0,H=m.length;G<H;G++)L[m[G].index]=G;let P=function(G){let H=[];for(let k=0,X=G.length;k<X;k++)G[k].index in L&&H.push(L[G[k].index]);return H},N=function(G){let H=[];return H[0]=[G[0][0],G[0][1],G[0][2]],H[1]=[G[1][0],G[1][1],G[1][2]],H},U=function(G){if(c.volume(G)<c.maxVolume)return[G];var H=G[1][0]-G[0][0],k=G[1][1]-G[0][1],X=G[1][2]-G[0][2],$;H>k&&H>X?$=0:k>H&&k>X?$=1:$=2;var F=N(G),K=N(G),te=(G[1][$]-G[0][$])/2+G[0][$];F[1][$]=te,K[0][$]=te;var re=U(F),le=U(K);return re.concat(le)},V=U(u),W=6;for(let G=0,H=V.length;G<H;G++){let k=N(V[G]);k[0][0]-=W,k[0][1]-=W,k[0][2]-=W,k[1][0]+=W,k[1][1]+=W,k[1][2]+=W;let X=c.getAtomsWithin(m,k),$=c.getAtomsWithin(_,V[G]);D.push({extent:V[G],atoms:P(X),toshow:P($)})}return D}static generateSurfaceMesh(u,m,_){var D=new A.Geometry(!0),L=D.updateGeoGroup(0),P=[];for(let ce=0,xe=u.length;ce<xe;ce++){var N=u[ce];N&&(typeof N.surfaceColor<"u"?P[ce]=N.surfaceColor:N.color&&(P[ce]=T.CC.color(N.color)))}var U=L.vertexArray,V=m.vertices;for(let ce=0,xe=V.length;ce<xe;ce++){let Ne=L.vertices*3;U[Ne]=V[ce].x,U[Ne+1]=V[ce].y,U[Ne+2]=V[ce].z,L.vertices++}var W=L.colorArray;let G=L.atomArray;if(_.voldata&&_.volscheme){var H=_.volscheme,k=_.voldata,X=H.range()||[-1,1];for(let ce=0,xe=V.length;ce<xe;ce++){let Ne=V[ce].atomid,Xe=k.getVal(V[ce].x,V[ce].y,V[ce].z),rt=T.CC.color(H.valueToHex(Xe,X)),nt=ce*3;W[nt]=rt.r,W[nt+1]=rt.g,W[nt+2]=rt.b,G[ce]=u[Ne]}}else if(P.length>0)for(let ce=0,xe=V.length;ce<xe;ce++){let Ne=V[ce].atomid,Xe=ce*3;W[Xe]=P[Ne].r,W[Xe+1]=P[Ne].g,W[Xe+2]=P[Ne].b,G[ce]=u[Ne]}var $=m.faces;L.faceidx=$.length,D.initTypedArrays();var F=L.vertexArray,K=L.normalArray,te,re,le,oe;for(let ce=0,xe=$.length;ce<xe;ce+=3){var ue=$[ce],he=$[ce+1],ge=$[ce+2],Oe=ue*3,Le=he*3,$e=ge*3;te=new w.Vector3(F[Oe],F[Oe+1],F[Oe+2]),re=new w.Vector3(F[Le],F[Le+1],F[Le+2]),le=new w.Vector3(F[$e],F[$e+1],F[$e+2]),le.subVectors(le,re),te.subVectors(te,re),le.cross(te),oe=le,oe.normalize(),K[Oe]+=oe.x,K[Le]+=oe.x,K[$e]+=oe.x,K[Oe+1]+=oe.y,K[Le+1]+=oe.y,K[$e+1]+=oe.y,K[Oe+2]+=oe.z,K[Le+2]+=oe.z,K[$e+2]+=oe.z}L.faceArray=new Uint16Array($);var we=new A.Mesh(D,_);return we}static generateMeshSyncHelper(u,m,_,D,L,P){var N=new E.ProteinSurface;return N.initparm(m,u!==1,P),N.fillvoxels(L,_),N.buildboundary(),(u==E.SurfaceType.SES||u==E.SurfaceType.MS)&&(N.fastdistancemap(),N.boundingatom(!1),N.fillvoxelswaals(L,_)),N.marchingcube(u),N.getFacesAndVertices(D)}static getMatWithStyle(u){let m=null;u.onesided?m=new A.MeshLambertMaterial:m=new A.MeshDoubleLambertMaterial,m.vertexColors=A.Coloring.VertexColors;for(var _ in u)_==="color"||_==="map"||u.hasOwnProperty(_)&&(m[_]=u[_]);return u.opacity!==void 0&&(u.opacity===1?m.transparent=!1:m.transparent=!0),u.wireframe!==void 0&&(m.wireframe=u.wireframe),m}addMesh(u){let m={geo:u.geometry,mat:u.material,done:!0,finished:!1};var _=this.nextSurfID();return this.surfaces[_]=new l([m]),_}static shallowCopy(u){var m=[];let _=u.length;for(let D=0;D<_;D++)m[D]=(0,M.extend)({},u[D]);return m}addSurface(u,m={},_={},D,L,P){let N=this.nextSurfID(),U=null,V=this,W=E.SurfaceType.VDW;typeof u=="string"?c.surfaceTypeMap[u.toUpperCase()]!==void 0?W=c.surfaceTypeMap[u]:console.log("Surface type : "+u+" is not recognized"):typeof u=="number"&&(W=u);var G=null,H=null,k=c.shallowCopy(this.getAtomsFromSel(_));D?G=c.shallowCopy(this.getAtomsFromSel(D)):G=k,(0,M.adjustVolumeStyle)(m);var X=!1,$;for($=0;$<this.models.length;$++)if(this.models[$]){var F=this.models[$].getSymmetries();if(F.length>1||F.length==1&&!F[0].isIdentity()){X=!0;break}}var K=function(ge,Oe,Le){L?H=c.shallowCopy(V.getAtomsFromSel(L)):H=Le;var $e,we=(0,M.getExtent)(Le,!0);if(m.map&&m.map.prop){var ce=m.map.prop;let at=(0,C.getGradient)(m.map.scheme||m.map.gradient||new C.Gradient.RWB),ot=at.range();ot||(ot=(0,M.getPropertyRange)(Le,ce)),m.colorscheme={prop:ce,gradient:at}}for(let at=0,ot=Oe.length;at<ot;at++)$e=Oe[at],$e.surfaceColor=(0,M.getColorFromStyle)($e,m);var xe=c.volume(we),Ne=V.carveUpExtent(we,Oe,Le);if(H&&H.length&&H.length>0){var Xe=(0,M.getExtent)(H,!0),rt=function(at,ot){var J=function(_e,Se){var Pe=_e.extent,Ie=Pe[1][0]-Pe[0][0],Q=Pe[1][1]-Pe[0][1],me=Pe[1][2]-Pe[0][2],be=Ie-Se[2][0];be*=be;var ke=Q-Se[2][1];ke*=ke;var ve=me-Se[2][2];return ve*=ve,be+ke+ve},ne=J(at,Xe),se=J(ot,Xe);return ne-se};Ne.sort(rt)}var nt=[];for(let at=0,ot=Oe.length;at<ot;at++)$e=Oe[at],nt[at]={x:$e.x,y:$e.y,z:$e.z,serial:at,elem:$e.elem};var et=!!E.syncSurface;if((typeof $3Dmol>"u"||typeof $3Dmol.SurfaceWorker>"u")&&(console.log("$3Dmol.SurfaceWorker is not defined, using synchronous surface generation."),et=!0),et){var Ze=function(ot){return new Promise(function(J){for(var ne=c.generateMeshSyncHelper(W,Ne[ot].extent,Ne[ot].atoms,Ne[ot].toshow,nt,xe),se=(0,y.splitMesh)({vertexArr:ne.vertices,faceArr:ne.faces}),_e=0,Se=se.length;_e<Se;_e++){ne={vertices:se[_e].vertexArr,faces:se[_e].faceArr};var Pe=c.generateSurfaceMesh(Oe,ne,U);(0,M.mergeGeos)(ge.geo,Pe)}V.render(),J()})},qe=[];for(let at=0;at<Ne.length;at++)qe.push(Ze(at));return Promise.all(qe).then(function(){return ge.done=!0,V.render(),Promise.resolve(N)})}else{var Ve=[];W<0&&(W=0);for(let at=0,ot=c.numWorkers;at<ot;at++){var Ge=new Worker($3Dmol.SurfaceWorker);Ve.push(Ge),Ge.postMessage({type:-1,atoms:nt,volume:xe})}return new Promise(function(at,ot){var J=0,ne=function(){!Ve||!Ve.length||Ve.forEach(function(Pe){Pe&&Pe.terminate&&Pe.terminate()})},se=function(Pe){for(var Ie=(0,y.splitMesh)({vertexArr:Pe.data.vertices,faceArr:Pe.data.faces}),Q=0,me=Ie.length;Q<me;Q++){var be={vertices:Ie[Q].vertexArr,faces:Ie[Q].faceArr},ke=c.generateSurfaceMesh(Oe,be,U);(0,M.mergeGeos)(ge.geo,ke)}V.render(),J++,J==Ne.length&&(ge.done=!0,ne(),at(N))},_e=function(Pe){ne(),console.log(Pe.message+" ("+Pe.filename+":"+Pe.lineno+")"),ot(Pe)};for(let Pe=0;Pe<Ne.length;Pe++){var Se=Ve[Pe%Ve.length];Se.onmessage=se,Se.onerror=_e,Se.postMessage({type:W,expandedExtent:Ne[Pe].extent,extendedAtoms:Ne[Pe].atoms,atomsToShow:Ne[Pe].toshow})}})}};m=m||{},U=c.getMatWithStyle(m);let te=new l([]);te.style=m,te.atomsel=_,te.allsel=D,te.focus=L;var re=null;if(X){var le={},oe={};for($=0;$<this.models.length;$++)le[$]=[],oe[$]=[];for($=0;$<G.length;$++)le[G[$].model].push(G[$]);for($=0;$<k.length;$++)oe[k[$].model].push(k[$]);var ue=[];for($=0;$<this.models.length;$++)oe[$].length>0&&(te.push({geo:new A.Geometry(!0),mat:U,done:!1,finished:!1,symmetries:this.models[$].getSymmetries()}),ue.push(K(te[te.length-1],le[$],oe[$])));re=Promise.all(ue)}else te.push({geo:new A.Geometry(!0),mat:U,done:!1,finished:!1,symmetries:[new w.Matrix4]}),re=K(te[te.length-1],G,k);return this.surfaces[N]=te,re.surfid=N,P&&typeof P=="function"?(re.then(function(he){P(he)}),N):re}setSurfaceMaterialStyle(u,m){if((0,M.adjustVolumeStyle)(m),this.surfaces[u]){var _=this.surfaces[u];for(let L=0;L<_.length;L++){var D=_[L].mat=c.getMatWithStyle(m);if(_[L].mat.side=A.FrontSide,m.wireframe&&_[L].geo.setUpWireframe(),m.color){_[L].mat.color=T.CC.color(m.color),_[L].geo.colorsNeedUpdate=!0;const P=T.CC.color(m.color);_[L].geo.setColor(P)}else if(D.voldata&&D.volscheme){const P=D.volscheme,N=D.voldata,U=T.CC,V=P.range()||[-1,1];_[L].geo.setColors(function(W,G,H){let k=N.getVal(W,G,H);return U.color(P.valueToHex(k,V))})}else{_[L].geo.colorsNeedUpdate=!0;for(let P of _[L].geo.geometryGroups)for(let N=0;N<P.vertices;N++){let U=(0,M.getColorFromStyle)(P.atomArray[N],m),V=3*N;P.colorArray[V]=U.r,P.colorArray[V+1]=U.g,P.colorArray[V+2]=U.b}}_[L].finished=!1}}return this}getSurface(u){return this.surfaces[u]}removeSurface(u){for(var m=this.surfaces[u],_=0;_<m.length;_++)m[_]&&m[_].lastGL&&(m[_].geo!==void 0&&m[_].geo.dispose(),m[_].mat!==void 0&&m[_].mat.dispose(),this.modelGroup.remove(m[_].lastGL));return delete this.surfaces[u],this.show(),this}removeAllSurfaces(){for(var u in this.surfaces)if(this.surfaces.hasOwnProperty(u)){for(var m=this.surfaces[u],_=0;_<m.length;_++)m[_]&&m[_].lastGL&&(m[_].geo!==void 0&&m[_].geo.dispose(),m[_].mat!==void 0&&m[_].mat.dispose(),this.modelGroup.remove(m[_].lastGL));delete this.surfaces[u]}return this.show(),this}jmolMoveTo(){var u=this.modelGroup.position,m="center { "+-u.x+" "+-u.y+" "+-u.z+" }; ",_=this.rotationGroup.quaternion;return m+="moveto .5 quaternion { "+_.x+" "+_.y+" "+_.z+" "+_.w+" };",m}clear(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}mapAtomProperties(u,m){m=m||{};var _=this.getAtomsFromSel(m);if(typeof u=="function")for(let P=0,N=_.length;P<N;P++){let U=_[P];u(U)}else for(let P=0,N=_.length;P<N;P++){var D=_[P];for(let U=0,V=u.length;U<V;U++){let W=u[U];if(W.props)for(var L in W.props)W.props.hasOwnProperty(L)&&this.atomIsSelected(D,W)&&(D.properties||(D.properties={}),D.properties[L]=W.props[L])}}return this}linkViewer(u){return this.linkedViewers.push(u),this}getPerceivedDistance(){return this.CAMERA_Z-this.rotationGroup.position.z}setPerceivedDistance(u){this.rotationGroup.position.z=this.CAMERA_Z-u}setAutoEyeSeparation(u,m){var _=this.getPerceivedDistance();return m||(m=5),u||this.camera.position.x>0?this.camera.position.x=_*Math.tan(Math.PI/180*m):this.camera.position.x=-_*Math.tan(Math.PI/180*m),this.camera.lookAt(new w.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}setDefaultCartoonQuality(u){this.config.cartoonQuality=u}}c.numWorkers=4,c.maxVolume=64e3,c.surfaceTypeMap={VDW:E.SurfaceType.VDW,MS:E.SurfaceType.MS,SAS:E.SurfaceType.SAS,SES:E.SurfaceType.SES};function g(S,u){if(S=(0,M.getElement)(S),!!S){u=u||{};try{var m=new c(S,u);return m}catch(_){throw"error creating viewer: "+_}}}function v(S,u={},m={}){if(S=(0,M.getElement)(S),!!S){var _=[],D=document.createElement("canvas");m.rows=u.rows,m.cols=u.cols,m.control_all=u.control_all!=null?u.control_all:!1,S.appendChild(D);try{for(var L=0;L<u.rows;L++){for(var P=[],N=0;N<u.cols;N++){m.row=L,m.col=N,m.canvas=D,m.viewers=_,m.control_all=u.control_all;var U=g(S,(0,M.extend)({},m));P.push(U)}_.unshift(P)}}catch(V){throw"error creating viewer grid: "+V}return _}}function b(S){var u=this;if(S=(0,M.getElement)(S),!!S){var m=v(S,{rows:1,cols:2,control_all:!0});this.glviewer1=m[0][0],this.glviewer2=m[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var _=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter(function(L){return typeof u.glviewer1[L]=="function"}),D=0;D<_.length;D++)this[_[D]]=(function(L){return function(){var P=this.glviewer1[L].apply(this.glviewer1,arguments),N=this.glviewer2[L].apply(this.glviewer2,arguments);return[P,N]}})(_[D]);this.setCoordinates=function(L,P,N){for(var U=0;U<L.length;U++)L[U].setCoordinates(P,N)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(L){this.glviewer1.render(),this.glviewer2.render(),L&&L(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}}),"./src/Gradient.ts":((s,i,n)=>{n.r(i),n.d(i,{CustomLinear:()=>x,Gradient:()=>w,GradientType:()=>d,ROYGB:()=>E,RWB:()=>p,Sinebow:()=>R,builtinGradients:()=>A,getGradient:()=>C,normalizeValue:()=>y});var a=n("./src/colors.ts");class d{}function y(T,M,h){return M>=T?(h<T&&(h=T),h>M&&(h=M),{lo:T,hi:M,val:h}):(h>T&&(h=T),h<M&&(h=M),h=T-h+M,{lo:M,hi:T,val:h})}function C(T){if(T instanceof d)return T;if(T.gradient!==void 0&&A[T.gradient]){let M=T.min===void 0?-1:T.min,h=T.max===void 0?1:T.max;return T.mid===void 0?T.colors===void 0?new A[T.gradient](M,h):new A[T.gradient](M,h,T.colors):new A[T.gradient](M,h,T.mid)}else if(typeof T.gradient=="string"&&T.gradient.startsWith("linear_")){let M=T.gradient.split("_");M.shift();let h=T.min===void 0?-1:T.min,l=T.max===void 0?1:T.max;return new x(h,l,M)}return T}class p extends d{constructor(M,h,l){super(),this.gradient="RWB",this.mult=1,this.mid=l,this.min=M,this.max=h,typeof h>"u"&&Array.isArray(M)&&M.length>=2?(this.max=M[1],this.min=M[0]):M&&h&&!Array.isArray(M)&&(this.min=M,this.max=h)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex(M,h){var l,c;if(M=this.mult*M,h?(l=h[0],c=h[1]):(l=this.min,c=this.max),M===void 0)return 16777215;var g=y(l,c,M);l=g.lo,c=g.hi,M=g.val;var v=(c+l)/2;h&&typeof h[2]<"u"?v=h[2]:typeof this.mid<"u"?v=this.mid:v=(l+c)/2;var b,S;return M<v?(b=Math.floor(255*Math.sqrt((M-l)/(v-l))),S=16711680+256*b+b,S):M>v?(b=Math.floor(255*Math.sqrt(1-(M-v)/(c-v))),S=65536*b+256*b+255,S):16777215}}class E extends d{constructor(M,h){super(),this.gradient="ROYGB",this.mult=1,this.min=M,this.max=h,typeof h>"u"&&Array.isArray(M)&&M.length>=2?(this.max=M[1],this.min=M[0]):M&&h&&!Array.isArray(M)&&(this.min=M,this.max=h)}valueToHex(M,h){var l,c;if(M=this.mult*M,h?(l=h[0],c=h[1]):(l=this.min,c=this.max),typeof M>"u")return 16777215;var g=y(l,c,M);l=g.lo,c=g.hi,M=g.val;var v=(l+c)/2,b=(l+v)/2,S=(v+c)/2,u,m;return M<b?(u=Math.floor(255*Math.sqrt((M-l)/(b-l))),m=16711680+256*u+0,m):M<v?(u=Math.floor(255*Math.sqrt(1-(M-b)/(v-b))),m=65536*u+65280+0,m):M<S?(u=Math.floor(255*Math.sqrt((M-v)/(S-v))),m=65280+1*u,m):(u=Math.floor(255*Math.sqrt(1-(M-S)/(c-S))),m=0+256*u+255,m)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class R extends d{constructor(M,h){super(),this.gradient="Sinebow",this.mult=1,this.min=M,this.max=h,typeof h>"u"&&Array.isArray(M)&&M.length>=2&&(this.max=M[1],this.min=M[0]),h<M&&(this.mult=-1,this.min*=-1,this.max*=-1)}valueToHex(M,h){var l,c;if(M=this.mult*M,h?(l=h[0],c=h[1]):(l=this.min,c=this.max),typeof M>"u")return 16777215;var g=w.normalizeValue(l,c,M);l=g.lo,c=g.hi,M=g.val;var v=(M-l)/(c-l),b=5*v/6+.5,S=Math.sin(Math.PI*b);S*=S*255;var u=Math.sin(Math.PI*(b+1/3));u*=u*255;var m=Math.sin(Math.PI*(b+2/3));return m*=m*255,65536*Math.floor(S)+256*Math.floor(m)+1*Math.floor(u)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class x extends d{constructor(M,h,l){super(),this.gradient="linear",this.colors=new Array;var c;if(Array.isArray(M)&&M.length>=2?(this.max=M[1],this.min=M[0],c=h):(this.min=M,this.max=h,c=l),c)for(let g of c)this.colors.push(a.CC.color(g));else this.colors.push(a.CC.color(0))}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex(M,h){var l,c;if(h?(l=h[0],c=h[1]):(l=this.min,c=this.max),M===void 0)return 16777215;var g=y(l,c,M);l=g.lo,c=g.hi,M=g.val;let v=this.colors.length,b=(c-l)/v,S=Math.min(Math.floor((M-l)/b),v-1),u=Math.min(S+1,v-1),m=(M-l-S*b)/b,_=this.colors[S],D=this.colors[u];return new a.Color(_.r+m*(D.r-_.r),_.g+m*(D.g-_.g),_.b+m*(D.b-_.b)).getHex()}}const A={rwb:p,RWB:p,roygb:E,ROYGB:E,sinebow:R,linear:x};class w extends d{valueToHex(M,h){return 0}range(){return null}}w.RWB=p,w.ROYGB=E,w.Sinebow=R,w.CustomLinear=x,w.builtinGradients=A,w.normalizeValue=y,w.getGradient=C}),"./src/Label.ts":((s,i,n)=>{n.r(i),n.d(i,{Label:()=>R,LabelCount:()=>C});var a=n("./src/WebGL/index.ts"),d=n("./src/Gradient.ts"),y=n("./src/colors.ts");let C=0;function p(x,A,w,T,M,h,l){x.beginPath(),x.moveTo(A+h,w),x.lineTo(A+T-h,w),x.quadraticCurveTo(A+T,w,A+T,w+h),x.lineTo(A+T,w+M-h),x.quadraticCurveTo(A+T,w+M,A+T-h,w+M),x.lineTo(A+h,w+M),x.quadraticCurveTo(A,w+M,A,w+M-h),x.lineTo(A,w+h),x.quadraticCurveTo(A,w,A+h,w),x.closePath(),x.fill(),l&&x.stroke()}function E(x,A,w){var T=w;return typeof x<"u"&&(x instanceof y.Color?T=x.scaled():(T=y.CC.color(x),typeof T.scaled<"u"&&(T=T.scaled()))),typeof A<"u"&&(T.a=parseFloat(A)),T}class R{constructor(A,w){this.id=C++,this.stylespec=w||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new a.Sprite,this.text=A,this.frame=this.stylespec.frame}getStyle(){return this.stylespec}hide(){this.sprite&&(this.sprite.visible=!1)}show(){this.sprite&&(this.sprite.visible=!0)}setContext(){var A=this.stylespec,w=typeof A.useScreen>"u"?!1:A.useScreen,T=A.showBackground;(T==="0"||T==="false")&&(T=!1),typeof T>"u"&&(T=!0);var M=A.font?A.font:"sans-serif",h=parseInt(A.fontSize)?parseInt(A.fontSize):18,l=E(A.fontColor,A.fontOpacity,{r:255,g:255,b:255,a:1}),c=A.padding?A.padding:4,g=A.borderThickness?A.borderThickness:0,v=E(A.backgroundColor,A.backgroundOpacity,{r:0,g:0,b:0,a:1}),b=E(A.borderColor,A.borderOpacity,v),S=A.position?A.position:{x:-10,y:1,z:1},u=A.inFront!==void 0?A.inFront:!0;(u==="false"||u==="0")&&(u=!1);var m=A.alignment||a.SpriteAlignment.topLeft;typeof m=="string"&&m in a.SpriteAlignment&&(m=a.SpriteAlignment[m]);var _="";A.bold&&(_="bold "),this.context.font=_+h+"px  "+M;var D=this.context.measureText(this.text),L=D.width;T||(g=0);var P=L+2.5*g+2*c,N=h*1.25+2*g+2*c;if(A.backgroundImage){var U=A.backgroundImage,V=A.backgroundWidth?A.backgroundWidth:U.width,W=A.backgroundHeight?A.backgroundHeight:U.height;V>P&&(P=V),W>N&&(N=W)}if(this.canvas.width=P,this.canvas.height=N,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),_="",A.bold&&(_="bold "),this.context.font=_+h+"px  "+M,this.context.fillStyle="rgba("+v.r+","+v.g+","+v.b+","+v.a+")",this.context.strokeStyle="rgba("+b.r+","+b.g+","+b.b+","+b.a+")",A.backgroundGradient){let H=this.context.createLinearGradient(0,N/2,P,N/2),k=d.Gradient.getGradient(A.backgroundGradient),X=k.range(),$=-1,F=1;X&&($=X[0],F=X[1]);let K=F-$;for(let te=0;te<1.01;te+=.1){let re=E(k.valueToHex($+K*te)),le="rgba("+re.r+","+re.g+","+re.b+","+re.a+")";H.addColorStop(te,le)}this.context.fillStyle=H}this.context.lineWidth=g,T&&p(this.context,g,g,P-2*g,N-2*g,6,g>0),A.backgroundImage&&this.context.drawImage(U,0,0,P,N),this.context.fillStyle="rgba("+l.r+","+l.g+","+l.b+","+l.a+")",this.context.fillText(this.text,g+c,h+g+c,L);var G=new a.Texture(this.canvas);G.needsUpdate=!0,this.sprite.material=new a.SpriteMaterial({map:G,useScreenCoordinates:w,alignment:m,depthTest:!u,screenOffset:A.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set(S.x,S.y,S.z)}dispose(){this.sprite.material.map!==void 0&&this.sprite.material.map.dispose(),this.sprite.material!==void 0&&this.sprite.material.dispose()}}}),"./src/ProteinSurface4.ts":((s,i,n)=>{n.r(i),n.d(i,{MarchingCube:()=>E,MarchingCubeInitializer:()=>p,PointGrid:()=>R,ProteinSurface:()=>x,SurfaceType:()=>d,setSyncSurface:()=>C,syncSurface:()=>y});var a=n("./src/WebGL/math/index.ts"),d;(function(A){A[A.VDW=1]="VDW",A[A.MS=2]="MS",A[A.SAS=3]="SAS",A[A.SES=4]="SES"})(d||(d={}));var y=!1;function C(A){y=A}(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(y=!0);class p{constructor(){this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}march(w,T,M,h){let l=!!h.fulltable,c=h.hasOwnProperty("origin")&&h.origin.hasOwnProperty("x")?h.origin:{x:0,y:0,z:0},g=!!h.voxel,v=h.matrix,b=h.nX||0,S=h.nY||0,u=h.nZ||0,m=h.scale||1,_=null;h.unitCube?_=h.unitCube:_={x:m,y:m,z:m};let D=new Int32Array(b*S*u),L,P;for(L=0,P=D.length;L<P;++L)D[L]=-1;let N=function(G,H,k,X,$,F){let K={x:0,y:0,z:0},te=!!(X&1<<$),re=!!(X&1<<F),le=$;if(!te&&re&&(le=F),le&1&&k++,le&2&&H++,le&4&&G++,v){let ue=new a.Vector3(G,H,k);ue=ue.applyMatrix4(v),K={x:ue.x,y:ue.y,z:ue.z}}else K.x=c.x+_.x*G,K.y=c.y+_.y*H,K.z=c.z+_.z*k;let oe=(S*G+H)*u+k;return g?(T.push(K),T.length-1):(D[oe]<0&&(D[oe]=T.length,T.push(K)),D[oe])},U=new Int32Array(12),V=l?this.edgeTable2:this.edgeTable,W=l?this.triTable2:this.triTable;for(L=0;L<b-1;++L)for(let G=0;G<S-1;++G)for(let H=0;H<u-1;++H){let k=0;for(let F=0;F<8;++F){let K=(S*(L+((F&4)>>2))+G+((F&2)>>1))*u+H+(F&1),te=!!(w[K]&this.ISDONE);k|=te<<F}if(k===0||k===255)continue;let X=V[k];if(X===0)continue;let $=W[k];X&1&&(U[0]=N(L,G,H,k,0,1)),X&2&&(U[1]=N(L,G,H,k,1,3)),X&4&&(U[2]=N(L,G,H,k,3,2)),X&8&&(U[3]=N(L,G,H,k,2,0)),X&16&&(U[4]=N(L,G,H,k,4,5)),X&32&&(U[5]=N(L,G,H,k,5,7)),X&64&&(U[6]=N(L,G,H,k,7,6)),X&128&&(U[7]=N(L,G,H,k,6,4)),X&256&&(U[8]=N(L,G,H,k,0,4)),X&512&&(U[9]=N(L,G,H,k,1,5)),X&1024&&(U[10]=N(L,G,H,k,3,7)),X&2048&&(U[11]=N(L,G,H,k,2,6));for(let F=0;F<$.length;F+=3){let K=U[$[F]],te=U[$[F+1]],re=U[$[F+2]];g&&F>=3&&(T.push(T[K]),K=T.length-1,T.push(T[te]),te=T.length-1,T.push(T[re]),re=T.length-1),M.push(K),M.push(te),M.push(re)}}}laplacianSmooth(w,T,M){let h=new Array(T.length),l,c,g,v,b;for(l=0,c=T.length;l<c;l++)h[l]={x:0,y:0,z:0};let S=new Array(20),u;for(l=0;l<20;l++)S[l]=new Array(T.length);for(l=0,c=T.length;l<c;l++)S[0][l]=0;for(l=0,c=M.length/3;l<c;l++){let D=l*3,L=l*3+1,P=l*3+2;for(u=!0,g=0,v=S[0][M[D]];g<v;g++)if(M[L]==S[g+1][M[D]]){u=!1;break}for(u&&(S[0][M[D]]++,S[S[0][M[D]]][M[D]]=M[L]),u=!0,g=0,v=S[0][M[D]];g<v;g++)if(M[P]==S[g+1][M[D]]){u=!1;break}for(u&&(S[0][M[D]]++,S[S[0][M[D]]][M[D]]=M[P]),u=!0,g=0,v=S[0][M[L]];g<v;g++)if(M[D]==S[g+1][M[L]]){u=!1;break}for(u&&(S[0][M[L]]++,S[S[0][M[L]]][M[L]]=M[D]),u=!0,g=0,v=S[0][M[L]];g<v;g++)if(M[P]==S[g+1][M[L]]){u=!1;break}for(u&&(S[0][M[L]]++,S[S[0][M[L]]][M[L]]=M[P]),u=!0,g=0;g<S[0][M[P]];g++)if(M[D]==S[g+1][M[P]]){u=!1;break}for(u&&(S[0][M[P]]++,S[S[0][M[P]]][M[P]]=M[D]),u=!0,g=0,v=S[0][M[P]];g<v;g++)if(M[L]==S[g+1][M[P]]){u=!1;break}u&&(S[0][M[P]]++,S[S[0][M[P]]][M[P]]=M[L])}let m=1,_=.5;for(b=0;b<w;b++){for(l=0,c=T.length;l<c;l++)if(S[0][l]<3)h[l].x=T[l].x,h[l].y=T[l].y,h[l].z=T[l].z;else if(S[0][l]==3||S[0][l]==4){for(h[l].x=0,h[l].y=0,h[l].z=0,g=0,v=S[0][l];g<v;g++)h[l].x+=T[S[g+1][l]].x,h[l].y+=T[S[g+1][l]].y,h[l].z+=T[S[g+1][l]].z;h[l].x+=_*T[l].x,h[l].y+=_*T[l].y,h[l].z+=_*T[l].z,h[l].x/=_+S[0][l],h[l].y/=_+S[0][l],h[l].z/=_+S[0][l]}else{for(h[l].x=0,h[l].y=0,h[l].z=0,g=0,v=S[0][l];g<v;g++)h[l].x+=T[S[g+1][l]].x,h[l].y+=T[S[g+1][l]].y,h[l].z+=T[S[g+1][l]].z;h[l].x+=m*T[l].x,h[l].y+=m*T[l].y,h[l].z+=m*T[l].z,h[l].x/=m+S[0][l],h[l].y/=m+S[0][l],h[l].z/=m+S[0][l]}for(l=0,c=T.length;l<c;l++)T[l].x=h[l].x,T[l].y=h[l].y,T[l].z=h[l].z}}}let E=new p;class R{constructor(w,T,M){this.data=new Int32Array(w*T*M*3),this.width=T,this.height=M}set(w,T,M,h){let l=((w*this.width+T)*this.height+M)*3;this.data[l]=h.ix,this.data[l+1]=h.iy,this.data[l+2]=h.iz}get(w,T,M){let h=((w*this.width+T)*this.height+M)*3;return{ix:this.data[h],iy:this.data[h+1],iz:this.data[h+2]}}}class x{constructor(){this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])],x.MarchingCube||(x.MarchingCube=new p)}getVDWIndex(w){return!w.elem||typeof this.vdwRadii[w.elem]>"u"?"X":w.elem}getFacesAndVertices(w){let T={};for(let l=0,c=w.length;l<c;l++)T[w[l]]=!0;let M=this.verts;for(let l=0,c=M.length;l<c;l++)M[l].x=M[l].x/this.scaleFactor-this.ptranx,M[l].y=M[l].y/this.scaleFactor-this.ptrany,M[l].z=M[l].z/this.scaleFactor-this.ptranz;let h=[];for(let l=0,c=this.faces.length;l<c;l+=3){let g=this.faces[l],v=this.faces[l+1],b=this.faces[l+2],S=M[g].atomid,u=M[v].atomid,m=M[b].atomid,_=S;u<_&&(_=u),m<_&&(_=m),T[_]&&g!==v&&v!==b&&g!==b&&(h.push(g),h.push(v),h.push(b))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices:M,faces:h}}initparm(w,T,M){M>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);let h=1/this.scaleFactor*5.5;this.pminx=w[0][0],this.pmaxx=w[1][0],this.pminy=w[0][1],this.pmaxy=w[1][1],this.pminz=w[0][2],this.pmaxz=w[1][2],T?(this.pminx-=this.probeRadius+h,this.pminy-=this.probeRadius+h,this.pminz-=this.probeRadius+h,this.pmaxx+=this.probeRadius+h,this.pmaxy+=this.probeRadius+h,this.pmaxz+=this.probeRadius+h):(this.pminx-=h,this.pminy-=h,this.pminz-=h,this.pmaxx+=h,this.pmaxy+=h,this.pmaxz+=h),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(T),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}boundingatom(w){let T={};for(const M in this.vdwRadii){let h=this.vdwRadii[M];w?T[M]=(h+this.probeRadius)*this.scaleFactor+.5:T[M]=h*this.scaleFactor+.5;let l=T[M]*T[M];this.widxz[M]=Math.floor(T[M])+1,this.depty[M]=new Int32Array(this.widxz[M]*this.widxz[M]);let c=0;for(let g=0;g<this.widxz[M];g++)for(let v=0;v<this.widxz[M];v++){let b=g*g+v*v;if(b>l)this.depty[M][c]=-1;else{let S=Math.sqrt(l-b);this.depty[M][c]=Math.floor(S)}c++}}}fillvoxels(w,T){for(let M=0,h=this.vpBits.length;M<h;M++)this.vpBits[M]=0,this.vpDistance[M]=-1,this.vpAtomID[M]=-1;for(let M in T){let h=w[T[M]];h!==void 0&&this.fillAtom(h,w)}for(let M=0,h=this.vpBits.length;M<h;M++)this.vpBits[M]&this.INOUT&&(this.vpBits[M]|=this.ISDONE)}fillAtom(w,T){let M=Math.floor(.5+this.scaleFactor*(w.x+this.ptranx)),h=Math.floor(.5+this.scaleFactor*(w.y+this.ptrany)),l=Math.floor(.5+this.scaleFactor*(w.z+this.ptranz)),c=this.getVDWIndex(w),g=0,v=this.pWidth*this.pHeight;for(let b=0,S=this.widxz[c];b<S;b++)for(let u=0;u<S;u++){if(this.depty[c][g]!=-1){for(let m=-1;m<2;m++)for(let _=-1;_<2;_++)for(let D=-1;D<2;D++)if(m!==0&&_!==0&&D!==0){let L=m*b,P=D*u;for(let N=0;N<=this.depty[c][g];N++){let U=N*_,V=M+L,W=h+U,G=l+P;if(V<0||W<0||G<0||V>=this.pLength||W>=this.pWidth||G>=this.pHeight)continue;let H=V*v+W*this.pHeight+G;if(!(this.vpBits[H]&this.INOUT))this.vpBits[H]|=this.INOUT,this.vpAtomID[H]=w.serial;else{let k=T[this.vpAtomID[H]];if(k.serial!=w.serial){let X=M+L-Math.floor(.5+this.scaleFactor*(k.x+this.ptranx)),$=h+U-Math.floor(.5+this.scaleFactor*(k.y+this.ptrany)),F=l+P-Math.floor(.5+this.scaleFactor*(k.z+this.ptranz));L*L+U*U+P*P<X*X+$*$+F*F&&(this.vpAtomID[H]=w.serial)}}}}}g++}}fillvoxelswaals(w,T){for(let M=0,h=this.vpBits.length;M<h;M++)this.vpBits[M]&=~this.ISDONE;for(let M in T){let h=w[T[M]];h!==void 0&&this.fillAtomWaals(h,w)}}fillAtomWaals(w,T){let M=0,h=Math.floor(.5+this.scaleFactor*(w.x+this.ptranx)),l=Math.floor(.5+this.scaleFactor*(w.y+this.ptrany)),c=Math.floor(.5+this.scaleFactor*(w.z+this.ptranz)),g=this.getVDWIndex(w),v=this.pWidth*this.pHeight;for(let b=0,S=this.widxz[g];b<S;b++)for(let u=0;u<S;u++){if(this.depty[g][M]!=-1){for(let m=-1;m<2;m++)for(let _=-1;_<2;_++)for(let D=-1;D<2;D++)if(m!==0&&_!==0&&D!==0){let L=m*b,P=D*u;for(let N=0;N<=this.depty[g][M];N++){let U=N*_,V=h+L,W=l+U,G=c+P;if(V<0||W<0||G<0||V>=this.pLength||W>=this.pWidth||G>=this.pHeight)continue;let H=V*v+W*this.pHeight+G;if(!(this.vpBits[H]&this.ISDONE))this.vpBits[H]|=this.ISDONE,this.vpAtomID[H]=w.serial;else{let k=T[this.vpAtomID[H]];if(k.serial!=w.serial){let X=h+L-Math.floor(.5+this.scaleFactor*(k.x+this.ptranx)),$=l+U-Math.floor(.5+this.scaleFactor*(k.y+this.ptrany)),F=c+P-Math.floor(.5+this.scaleFactor*(k.z+this.ptranz));L*L+U*U+P*P<X*X+$*$+F*F&&(this.vpAtomID[H]=w.serial)}}}}}M++}}buildboundary(){let w=this.pWidth*this.pHeight;for(let T=0;T<this.pLength;T++)for(let M=0;M<this.pHeight;M++)for(let h=0;h<this.pWidth;h++){let l=T*w+h*this.pHeight+M;if(this.vpBits[l]&this.INOUT){let c=0;for(;c<26;){let g=T+this.nb[c][0],v=M+this.nb[c][2],b=h+this.nb[c][1];if(g>-1&&g<this.pLength&&b>-1&&b<this.pWidth&&v>-1&&v<this.pHeight&&!(this.vpBits[g*w+b*this.pHeight+v]&this.INOUT)){this.vpBits[l]|=this.ISBOUND;break}else c++}}}}fastdistancemap(){let w=new R(this.pLength,this.pWidth,this.pHeight),T=this.pWidth*this.pHeight,M=this.cutRadius*this.cutRadius,h=[],l=[],c;for(let b=0;b<this.pLength;b++)for(let S=0;S<this.pWidth;S++)for(let u=0;u<this.pHeight;u++)if(c=b*T+S*this.pHeight+u,this.vpBits[c]&=~this.ISDONE,this.vpBits[c]&this.INOUT&&this.vpBits[c]&this.ISBOUND){let m={ix:b,iy:S,iz:u};w.set(b,S,u,m),h.push(m),this.vpDistance[c]=0,this.vpBits[c]|=this.ISDONE,this.vpBits[c]&=~this.ISBOUND}do{l=this.fastoneshell(h,w),h=[];for(let b=0,S=l.length;b<S;b++)c=T*l[b].ix+this.pHeight*l[b].iy+l[b].iz,this.vpBits[c]&=~this.ISBOUND,this.vpDistance[c]<=1.0404*M&&h.push({ix:l[b].ix,iy:l[b].iy,iz:l[b].iz})}while(h.length!==0);h=[],l=[],w=null;let g=this.scaleFactor-.5;g<0&&(g=0);let v=M-.5/(.1+g);for(let b=0;b<this.pLength;b++)for(let S=0;S<this.pWidth;S++)for(let u=0;u<this.pHeight;u++)c=b*T+S*this.pHeight+u,this.vpBits[c]&=~this.ISBOUND,this.vpBits[c]&this.INOUT&&(!(this.vpBits[c]&this.ISDONE)||this.vpBits[c]&this.ISDONE&&this.vpDistance[c]>=v)&&(this.vpBits[c]|=this.ISBOUND)}fastoneshell(w,T){let M,h,l,c,g,v,b,S,u,m=[];if(w.length===0)return m;let _={ix:-1,iy:-1,iz:-1},D=this.pWidth*this.pHeight;for(let L=0,P=w.length;L<P;L++){M=w[L].ix,h=w[L].iy,l=w[L].iz,S=T.get(M,h,l);for(let N=0;N<6;N++)_.ix=M+this.nb[N][0],_.iy=h+this.nb[N][1],_.iz=l+this.nb[N][2],_.ix<this.pLength&&_.ix>-1&&_.iy<this.pWidth&&_.iy>-1&&_.iz<this.pHeight&&_.iz>-1&&(u=_.ix*D+this.pHeight*_.iy+_.iz,this.vpBits[u]&this.INOUT&&!(this.vpBits[u]&this.ISDONE)?(T.set(_.ix,_.iy,l+this.nb[N][2],S),c=_.ix-S.ix,g=_.iy-S.iy,v=_.iz-S.iz,b=c*c+g*g+v*v,this.vpDistance[u]=b,this.vpBits[u]|=this.ISDONE,this.vpBits[u]|=this.ISBOUND,m.push({ix:_.ix,iy:_.iy,iz:_.iz})):this.vpBits[u]&this.INOUT&&this.vpBits[u]&this.ISDONE&&(c=_.ix-S.ix,g=_.iy-S.iy,v=_.iz-S.iz,b=c*c+g*g+v*v,b<this.vpDistance[u]&&(T.set(_.ix,_.iy,_.iz,S),this.vpDistance[u]=b,this.vpBits[u]&this.ISBOUND||(this.vpBits[u]|=this.ISBOUND,m.push({ix:_.ix,iy:_.iy,iz:_.iz})))))}for(let L=0,P=w.length;L<P;L++){M=w[L].ix,h=w[L].iy,l=w[L].iz,S=T.get(M,h,l);for(let N=6;N<18;N++)_.ix=M+this.nb[N][0],_.iy=h+this.nb[N][1],_.iz=l+this.nb[N][2],_.ix<this.pLength&&_.ix>-1&&_.iy<this.pWidth&&_.iy>-1&&_.iz<this.pHeight&&_.iz>-1&&(u=_.ix*D+this.pHeight*_.iy+_.iz,this.vpBits[u]&this.INOUT&&!(this.vpBits[u]&this.ISDONE)?(T.set(_.ix,_.iy,l+this.nb[N][2],S),c=_.ix-S.ix,g=_.iy-S.iy,v=_.iz-S.iz,b=c*c+g*g+v*v,this.vpDistance[u]=b,this.vpBits[u]|=this.ISDONE,this.vpBits[u]|=this.ISBOUND,m.push({ix:_.ix,iy:_.iy,iz:_.iz})):this.vpBits[u]&this.INOUT&&this.vpBits[u]&this.ISDONE&&(c=_.ix-S.ix,g=_.iy-S.iy,v=_.iz-S.iz,b=c*c+g*g+v*v,b<this.vpDistance[u]&&(T.set(_.ix,_.iy,_.iz,S),this.vpDistance[u]=b,this.vpBits[u]&this.ISBOUND||(this.vpBits[u]|=this.ISBOUND,m.push({ix:_.ix,iy:_.iy,iz:_.iz})))))}for(let L=0,P=w.length;L<P;L++){M=w[L].ix,h=w[L].iy,l=w[L].iz,S=T.get(M,h,l);for(let N=18;N<26;N++)_.ix=M+this.nb[N][0],_.iy=h+this.nb[N][1],_.iz=l+this.nb[N][2],_.ix<this.pLength&&_.ix>-1&&_.iy<this.pWidth&&_.iy>-1&&_.iz<this.pHeight&&_.iz>-1&&(u=_.ix*D+this.pHeight*_.iy+_.iz,this.vpBits[u]&this.INOUT&&!(this.vpBits[u]&this.ISDONE)?(T.set(_.ix,_.iy,l+this.nb[N][2],S),c=_.ix-S.ix,g=_.iy-S.iy,v=_.iz-S.iz,b=c*c+g*g+v*v,this.vpDistance[u]=b,this.vpBits[u]|=this.ISDONE,this.vpBits[u]|=this.ISBOUND,m.push({ix:_.ix,iy:_.iy,iz:_.iz})):this.vpBits[u]&this.INOUT&&this.vpBits[u]&this.ISDONE&&(c=_.ix-S.ix,g=_.iy-S.iy,v=_.iz-S.iz,b=c*c+g*g+v*v,b<this.vpDistance[u]&&(T.set(_.ix,_.iy,_.iz,S),this.vpDistance[u]=b,this.vpBits[u]&this.ISBOUND||(this.vpBits[u]|=this.ISBOUND,m.push({ix:_.ix,iy:_.iy,iz:_.iz})))))}return m}marchingcubeinit(w){for(let T=0,M=this.vpBits.length;T<M;T++)w==1?this.vpBits[T]&=~this.ISBOUND:w==4?(this.vpBits[T]&=~this.ISDONE,this.vpBits[T]&this.ISBOUND&&(this.vpBits[T]|=this.ISDONE),this.vpBits[T]&=~this.ISBOUND):w==2?this.vpBits[T]&this.ISBOUND&&this.vpBits[T]&this.ISDONE?this.vpBits[T]&=~this.ISBOUND:this.vpBits[T]&this.ISBOUND&&!(this.vpBits[T]&this.ISDONE)&&(this.vpBits[T]|=this.ISDONE):w==3&&(this.vpBits[T]&=~this.ISBOUND)}marchingcube(w){this.marchingcubeinit(w),this.verts=[],this.faces=[],x.MarchingCube.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});let T=this.pWidth*this.pHeight;for(let M=0,h=this.verts.length;M<h;M++)this.verts[M].atomid=this.vpAtomID[this.verts[M].x*T+this.pHeight*this.verts[M].y+this.verts[M].z];x.MarchingCube.laplacianSmooth(1,this.verts,this.faces)}}x.MarchingCube=new p}),"./src/SurfaceWorker.js":(()=>{$3Dmol.workerString=(function(){self.onmessage=function(s){var i=s.data,n=i.type;if(n<0)self.atomData=i.atoms,self.volume=i.volume,self.ps=new ProteinSurface;else{var a=self.ps;a.initparm(i.expandedExtent,n!=1,self.volume),a.fillvoxels(self.atomData,i.extendedAtoms),a.buildboundary(),(n===4||n===2)&&(a.fastdistancemap(),a.boundingatom(!1),a.fillvoxelswaals(self.atomData,i.extendedAtoms)),a.marchingcube(n);var d=a.getFacesAndVertices(i.atomsToShow);self.postMessage(d)}}}).toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+=`;
function _classCallCheck() {};`,$3Dmol.workerString+=`;
`+$3Dmol.Vector3.toString(),$3Dmol.workerString+=`;
`+$3Dmol.MarchingCubeInitializer.toString()+`;

`,$3Dmol.workerString+=`;
`+$3Dmol.PointGrid.toString()+`;
`,$3Dmol.workerString+=`;
var ProteinSurface = `+$3Dmol.ProteinSurface.toString()+`;
`,$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):void 0}),"./src/VolumeData.ts":((s,i,n)=>{n.r(i),n.d(i,{VolumeData:()=>E});var a=n("./src/utilities.ts"),d=n("./src/WebGL/math/index.ts"),y=n("./src/parsers/VASP.ts"),C=n("./src/parsers/CUBE.ts"),p=n("./node_modules/pako/dist/pako.esm.mjs");class E{constructor(x,A,w){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set(["ccp4","CCP4"]),this.getCoordinates=function(c){var g=c/(this.size.y*this.size.z),v=c%(this.size.y*this.size.z),b=c%this.size.z;return g*=this.unit.x,v*=this.unit.y,b*=this.unit.z,g+=this.origin.x,v+=this.origin.y,b+=this.origin.z,{x:g,y:v,z:b}},this.vasp=function(c){var g=c.replace(/^\s+/,"").split(/[\n\r]/),v=(0,y.VASP)(c)[0],b=v.length;if(b==0){console.warn("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),this.data=[];return}var S=1.889725992,u=.036749309,m=parseFloat(g[1]),_;_=g[2].replace(/^\s+/,"").split(/\s+/);var D=new d.Vector3(parseFloat(_[0]),parseFloat(_[1]),parseFloat(_[2])).multiplyScalar(m*S);_=g[3].replace(/^\s+/,"").split(/\s+/);var L=new d.Vector3(parseFloat(_[0]),parseFloat(_[1]),parseFloat(_[2])).multiplyScalar(m*S);_=g[4].replace(/^\s+/,"").split(/\s+/);var P=new d.Vector3(parseFloat(_[0]),parseFloat(_[1]),parseFloat(_[2])).multiplyScalar(m*S),N=D.x*(L.y*P.z-P.y*L.z)-L.x*(D.y*P.z-P.y*D.z)+P.x*(D.y*L.z-L.y*D.z);N=Math.abs(N)/Math.pow(S,3);var U=1/N;g.splice(0,8+b+1);var V=g[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),W=Math.abs(parseFloat(V[0])),G=Math.abs(parseFloat(V[1])),H=Math.abs(parseFloat(V[2])),k=this.origin=new d.Vector3(0,0,0);this.size={x:W,y:G,z:H},this.unit=new d.Vector3(D.x,L.y,P.z),D=D.multiplyScalar(1/(S*W)),L=L.multiplyScalar(1/(S*G)),P=P.multiplyScalar(1/(S*H)),(D.y!=0||D.z!=0||L.x!=0||L.z!=0||P.x!=0||P.y!=0)&&(this.matrix=new d.Matrix4(D.x,L.x,P.x,0,D.y,L.y,P.y,0,D.z,L.z,P.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new d.Matrix4().makeTranslation(k.x,k.y,k.z)),this.origin=new d.Vector3(0,0,0),this.unit=new d.Vector3(1,1,1)),g.splice(0,1);var X=g.join(" ");X=X.replace(/^\s+/,"");var $=X.split(/[\s\r]+/);$.splice(W*G*H+1);for(var F=Float32Array.from($,parseFloat),K=0;K<F.length;K++)F[K]=F[K]*U*u;this.data=F},this.dx=function(c){var g=c.split(/[\n\r]+/),v,b=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,S=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,u=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,m=/data follows/,_=0;for(_=0;_<g.length;_++){var D=g[_];if(v=b.exec(D)){var L=parseInt(v[1]),P=parseInt(v[2]),N=parseInt(v[3]);this.size={x:L,y:P,z:N}}else if(v=u.exec(D)){var U=parseFloat(v[1]);if((parseFloat(v[2])!=0||parseFloat(v[3])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),_+=1,D=g[_],v=u.exec(D),v==null){console.error("Parse error in dx delta matrix");return}var V=parseFloat(v[2]);if((parseFloat(v[1])!=0||parseFloat(v[3])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),_+=1,D=g[_],v=u.exec(D),v==null){console.error("Parse error in dx delta matrix");return}var W=parseFloat(v[3]);(parseFloat(v[1])!=0||parseFloat(v[2])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new d.Vector3(U,V,W)}else if(v=S.exec(D)){var G=parseFloat(v[1]),H=parseFloat(v[2]),k=parseFloat(v[3]);this.origin=new d.Vector3(G,H,k)}else if(v=m.exec(D))break}if(_+=1,!this.size||!this.origin||!this.unit||!this.size){console.error("Error parsing dx format");return}var X=g.splice(_).join(" "),$=X.split(/[\s\r]+/);this.data=Float32Array.from($,parseFloat)},A=A.toLowerCase(),/\.gz$/.test(A)){A=A.replace(/\.gz$/,"");try{this[A]&&this.isbinary.has(A)?(typeof x=="string"&&(x=(0,a.base64ToArray)(x)),x=(0,p.inflate)(x)):x=new TextDecoder("utf-8").decode((0,p.inflate)(x))}catch(c){console.error(c)}}if(this[A]&&(this.isbinary.has(A)&&typeof x=="string"&&(x=(0,a.base64ToArray)(x)),this[A](x)),w){if(w.negate)for(let c=0,g=this.data.length;c<g;c++)this.data[c]=-this.data[c];if(w.normalize){var T=0;for(let c=0,g=this.data.length;c<g;c++)T+=this.data[c];var M=T/this.data.length;T=0;for(let c=0,g=this.data.length;c<g;c++){var h=this.data[c]-M;T+=h*h}var l=T/this.data.length;for(let c=0,g=this.data.length;c<g;c++)this.data[c]=(this.data[c]-M)/l}}}getIndex(x,A,w){if(this.matrix){this.inversematrix==null&&(this.inversematrix=new d.Matrix4().getInverse(this.matrix));var T=new d.Vector3(x,A,w);T=T.applyMatrix4(this.inversematrix),x=T.x,A=T.y,w=T.z}else x-=this.origin.x,A-=this.origin.y,w-=this.origin.z,x/=this.unit.x,A/=this.unit.y,w/=this.unit.z;return x=Math.round(x),A=Math.round(A),w=Math.round(w),x<0||x>=this.size.x||A<0||A>=this.size.y||w<0||w>=this.size.z?-1:x*this.size.y*this.size.z+A*this.size.z+w}getVal(x,A,w){let T=this.getIndex(x,A,w);return T<0?0:this.data[T]}cube(x){var A=x.split(/\r?\n/);if(!(A.length<6)){var w=(0,C.CUBE)(x,{}).modelData[0].cryst,T=A[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),M=parseFloat(T[0]),h=Math.abs(M);this.origin=w.origin,this.size=w.size,this.unit=w.unit,this.matrix=w.matrix4;var l=6;M<0&&l++;var c=A.splice(h+l).join(" ");c=c.replace(/^\s+/,"");var g=c.split(/[\s\r]+/);this.data=Float32Array.from(g,parseFloat)}}ccp4(x){var A={};x=new Int8Array(x);var w=new Int32Array(x.buffer,0,56),T=new Float32Array(x.buffer,0,56),M=new DataView(x.buffer);if(A.MAP=String.fromCharCode(M.getUint8(208),M.getUint8(209),M.getUint8(210),M.getUint8(211)),A.MACHST=[M.getUint8(212),M.getUint8(213)],A.MACHST[0]===17&&A.MACHST[1]===17)for(var h=x.byteLength,l=0;l<h;l+=4)M.setFloat32(l,M.getFloat32(l),!0);A.NX=w[0],A.NY=w[1],A.NZ=w[2],A.MODE=w[3],A.NXSTART=w[4],A.NYSTART=w[5],A.NZSTART=w[6],A.MX=w[7],A.MY=w[8],A.MZ=w[9],A.xlen=T[10],A.ylen=T[11],A.zlen=T[12],A.alpha=T[13],A.beta=T[14],A.gamma=T[15],A.MAPC=w[16],A.MAPR=w[17],A.MAPS=w[18],A.DMIN=T[19],A.DMAX=T[20],A.DMEAN=T[21],A.ISPG=w[22],A.NSYMBT=w[23],A.LSKFLG=w[24],A.originX=T[49],A.originY=T[50],A.originZ=T[51],A.ARMS=T[54];var c=A,g=[c.xlen,0,0],v=[c.ylen*Math.cos(Math.PI/180*c.gamma),c.ylen*Math.sin(Math.PI/180*c.gamma),0],b=[c.zlen*Math.cos(Math.PI/180*c.beta),c.zlen*(Math.cos(Math.PI/180*c.alpha)-Math.cos(Math.PI/180*c.gamma)*Math.cos(Math.PI/180*c.beta))/Math.sin(Math.PI/180*c.gamma),0];b[2]=Math.sqrt(c.zlen*c.zlen*Math.sin(Math.PI/180*c.beta)*Math.sin(Math.PI/180*c.beta)-b[1]*b[1]);var S=[0,g,v,b],u=[0,c.MX,c.MY,c.MZ],m=[0,c.MAPC,c.MAPR,c.MAPS];this.matrix=new d.Matrix4,this.matrix.set(S[m[1]][0]/u[m[1]],S[m[2]][0]/u[m[2]],S[m[3]][0]/u[m[3]],0,S[m[1]][1]/u[m[1]],S[m[2]][1]/u[m[2]],S[m[3]][1]/u[m[3]],0,S[m[1]][2]/u[m[1]],S[m[2]][2]/u[m[2]],S[m[3]][2]/u[m[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new d.Matrix4().makeTranslation(c.NXSTART+c.originX,c.NYSTART+c.originY,c.NZSTART+c.originZ)),this.origin=new d.Vector3(0,0,0),this.unit=new d.Vector3(1,1,1),this.size={x:A.NX,y:A.NY,z:A.NZ},this.dimensionorder=[A.MAPC,A.MAPR,A.MAPS];var _=new Float32Array(x.buffer,1024+A.NSYMBT),D=A.NX,L=A.NY,P=A.NZ;this.data=new Float32Array(D*L*P);for(let N=0;N<D;N++)for(let U=0;U<L;U++)for(let V=0;V<P;V++)this.data[(N*L+U)*P+V]=_[(V*L+U)*D+N]}}}),"./src/VolumetricRender.ts":((s,i,n)=>{n.r(i),n.d(i,{GLVolumetricRender:()=>E});var a=n("./src/WebGL/shapes/index.ts"),d=n("./src/WebGL/math/index.ts"),y=n("./src/WebGL/index.ts"),C=n("./src/colors.ts"),p=n("./src/GLShape.ts");class E{static interpolateArray(x,A){function w(b,S,u){return b+(S-b)*u}var T=[],M=(x.length-1)/(A-1);T[0]=x[0];for(var h=1;h<A-1;h++){var l=h*M,c=Math.floor(l),g=Math.ceil(l),v=l-c;T[h]=w(x[c],x[g],v)}return T[A-1]=x[x.length-1],T}constructor(x,A,w){this.hidden=!1,this.boundingSphere=new a.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,A=A||{};var T=Object.assign([],A.transferfn);this.subsamples=A.subsamples||5;let M=256;T.forEach(function(L){L.value=parseFloat(L.value)}),T.sort(function(L,P){return L.value-P.value}),this.min=T[0].value,T.length==0&&T.push(T[0]),this.max=T[T.length-1].value;var h,l,c,g,v,b,S,u,m,_;for(let L=0;L<T.length-1;L++)if(c=C.CC.color(T[L].color),g=C.CC.color(T[L+1].color),m=T[L].opacity,_=T[L+1].opacity,h=Math.floor((T[L].value-this.min)*M/(this.max-this.min)),l=Math.floor((T[L+1].value-this.min)*M/(this.max-this.min)),h!=l){v=E.interpolateArray([c.r*255,g.r*255],l-h),b=E.interpolateArray([c.g*255,g.g*255],l-h),S=E.interpolateArray([c.b*255,g.b*255],l-h),u=E.interpolateArray([m*255,_*255],l-h);for(let P=0;P<v.length;P++)this.transferfunctionbuffer.push(v[P]),this.transferfunctionbuffer.push(b[P]),this.transferfunctionbuffer.push(S[P]),this.transferfunctionbuffer.push(u[P])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),x.matrix){let L=new d.Vector3(0,0,0),P=new d.Vector3(x.size.x,x.size.y,x.size.z),N=new d.Vector3(1,1,1);L.applyMatrix4(x.matrix),P.applyMatrix4(x.matrix),N.applyMatrix4(x.matrix).sub(L),this.extent=[[L.x,L.y,L.z],[P.x,P.y,P.z]];for(let G=1;G<7;G++)P.x=G&1?x.size.x:0,P.y=G&2?x.size.y:0,P.z=G&4?x.size.z:0,P.applyMatrix4(x.matrix),this.extent[0][0]=Math.min(this.extent[0][0],P.x),this.extent[0][1]=Math.min(this.extent[0][1],P.y),this.extent[0][2]=Math.min(this.extent[0][2],P.z),this.extent[1][0]=Math.max(this.extent[1][0],P.x),this.extent[1][1]=Math.max(this.extent[1][1],P.y),this.extent[1][2]=Math.max(this.extent[1][2],P.z);let U=P.x-L.x,V=P.y-L.y,W=P.z-L.z;this.maxdepth=Math.sqrt(U*U+V*V+W*W),this.minunit=Math.min(Math.min(N.x,N.y),N.z),this.texmatrix=new d.Matrix4().identity().scale({x:x.size.x,y:x.size.y,z:x.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(x.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=new d.Matrix4().identity();let L=x.unit.x*x.size.x,P=x.unit.y*x.size.y,N=x.unit.z*x.size.z;this.texmatrix.makeTranslation(-x.origin.x/L,-x.origin.y/P,-x.origin.z/N),this.texmatrix.scale({x:1/L,y:1/P,z:1/N}),this.minunit=Math.min(Math.min(x.unit.x,x.unit.y),x.unit.z),this.extent=[[x.origin.x,x.origin.y,x.origin.z],[x.origin.x+L,x.origin.y+P,x.origin.z+N]],this.maxdepth=Math.sqrt(L*L+P*P+N*N)}var D=new p.GLShape({});if(D.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=D.finalize(),this.boundingSphere.center=new d.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,A.coords===void 0&&A.selection!==void 0&&(w?A.coords=w.selectedAtoms(A.selection):console.log("Need to provide viewer to volumetric renderer if selection specified.")),A.coords!==void 0&&A.seldist!==void 0){let L=new Uint8Array(x.data.length),P=A.seldist,N=P*P;for(let U=0,V=A.coords.length;U<V;U++){let W=A.coords[U],G=W.x-P,H=W.y-P,k=W.z-P,X=W.x+P,$=W.y+P,F=W.z+P;if(x.getIndex(G,H,k)>=0||x.getIndex(X,$,F)>=0)for(let K=G;K<X;K+=this.minunit)for(let te=H;te<$;te+=this.minunit)for(let re=k;re<F;re+=this.minunit){let le=x.getIndex(K,te,re);le>=0&&!L[le]&&(K-W.x)*(K-W.x)+(te-W.y)*(te-W.y)+(re-W.z)*(re-W.z)<N&&(L[le]=1)}}for(let U=0,V=x.data.length;U<V;U++)L[U]==0&&(x.data[U]=1/0)}this.data=x}globj(x){if(this.renderedShapeObj&&(x.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){this.shapeObj=new y.Object3D;var A=null,w=new y.Texture(this.data,!0),T=new y.Texture(this.transferfunctionbuffer,!1);w.needsUpdate=!0,T.needsUpdate=!0,T.flipY=!1,A=new y.VolumetricMaterial({transferfn:T,transfermin:this.min,transfermax:this.max,map:w,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var M=new y.Mesh(this.geo,A);this.shapeObj.add(M),this.renderedShapeObj=this.shapeObj.clone(),x.add(this.renderedShapeObj)}}removegl(x){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),x.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}}),"./src/WebGL/Camera.ts":((s,i,n)=>{n.r(i),n.d(i,{Camera:()=>y});var a=n("./src/WebGL/core/index.ts"),d=n("./src/WebGL/math/index.ts");class y extends a.Object3D{constructor(p=50,E=1,R=.1,x=2e3,A=!1){super(),this.projectionMatrix=new d.Matrix4,this.projectionMatrixInverse=new d.Matrix4,this.matrixWorldInverse=new d.Matrix4,this.fov=p,this.aspect=E,this.near=R,this.far=x;var w=this.position.z;this.right=w*Math.tan(Math.PI/180*p),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!A,this.updateProjectionMatrix()}lookAt(p){this.matrix.lookAt(this.position,p,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!1&&this.rotation instanceof d.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error("Unimplemented math operation."))}updateProjectionMatrix(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}}),"./src/WebGL/Fog.ts":((s,i,n)=>{n.r(i),n.d(i,{Fog:()=>d});var a=n("./src/colors.ts");class d{constructor(C,p=1,E=1e3){this.name="",this.color=new a.Color(C),this.near=p,this.far=E}clone(){return new d(this.color.getHex(),this.near,this.far)}}}),"./src/WebGL/Renderer.ts":((s,i,n)=>{n.r(i),n.d(i,{Renderer:()=>h});var a=n("./src/WebGL/Camera.ts"),d=n("./src/WebGL/constants/Sides.ts"),y=n("./src/WebGL/constants/TextureConstants.ts"),C=n("./src/WebGL/core/index.ts"),p=n("./src/colors.ts"),E=n("./src/WebGL/materials/index.ts"),R=n("./src/WebGL/math/index.ts"),x=n("./src/WebGL/objects/index.ts"),A=n("./src/WebGL/shaders/index.ts"),w=n("./src/WebGL/SpritePlugin.ts"),T=null,M=null;class h{constructor(c){this.context=null,this.devicePixelRatio=1,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._offscreen=null,this._bitmap=null,this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._vector3=new R.Vector3,this._worldInverse=new R.Matrix4,this._projInverse=new R.Matrix4,this._textureMatrix=new R.Matrix4,this._fullProjModelMatrix=new R.Matrix4,this._fullProjModelMatrixInv=new R.Matrix4,this._direction=new R.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new w.SpritePlugin,this._screenshader=null,this._AOshader=null,this._blurshader=null,this._vertexattribpos=null,this._aovertexattribpos=null,this._blurvertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,this._shadingTexture=null,this._scratchTexture=null,this._upscale=null,this._AOstrength=1,this._AOradius=5,this.SHADE_TEXTURE=3,c=c||{},this.row=c.row,this.col=c.col,this.rows=c.rows,this.cols=c.cols,this._canvas=c.canvas!==void 0?c.canvas:document.createElement("canvas"),this._precision=c.precision!==void 0?c.precision:"highp",this._alpha=c.alpha!==void 0?c.alpha:!0,this._premultipliedAlpha=c.premultipliedAlpha!==void 0?c.premultipliedAlpha:!0,this._antialias=c.antialias!==void 0?c.antialias:!1,this._upscale=c.upscale!==void 0?c.upscale:this._antialias,this._preserveDrawingBuffer=c.preserveDrawingBuffer!==void 0?c.preserveDrawingBuffer:!1,this._clearColor=c.clearColor!==void 0?new p.Color(c.clearColor):new p.Color(0),this._clearAlpha=c.clearAlpha!==void 0?c.clearAlpha:0,this._outlineMaterial=new E.MeshOutlineMaterial(c.outline),this._outlineSphereImposterMaterial=new E.SphereImposterOutlineMaterial(c.outline),this._outlineStickImposterMaterial=new E.StickImposterOutlineMaterial(c.outline),this._outlineEnabled=!!c.outline,this._AOEnabled=!!c.ambientOcclusion,c.ambientOcclusion&&typeof c.ambientOcclusion.strength<"u"&&(this._AOstrength=parseFloat(c.ambientOcclusion.strength)),this._AOstrength==0&&(this._AOEnabled=!1),c.ambientOcclusion&&typeof c.ambientOcclusion.radius<"u"&&(this._AOradius=parseFloat(c.ambientOcclusion.radius)),this.domElement=this._canvas,this._canvas.id=c.id,!(c.containerWidth==0||c.containerHeight==0)&&(this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension("ANGLE_instanced_arrays"):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension("EXT_frag_depth"),this._extFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._extColorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),this.sprites.init(this))}supportedExtensions(){return{supportsAIA:!!this._extInstanced,supportsImposters:!!this._extFragDepth||!this.isWebGL1(),regen:!1}}getContext(){return this._gl}getCanvas(){return this._canvas}isLost(){return this._gl==null||this._gl.isContextLost()}getPrecision(){return this._precision}setClearColorHex(c,g){this._clearColor.setHex(c),this._clearAlpha=g,this.isLost()||this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}enableOutline(c){this._outlineMaterial=new E.MeshOutlineMaterial(c),this._outlineSphereImposterMaterial=new E.SphereImposterOutlineMaterial(c),this._outlineStickImposterMaterial=new E.StickImposterOutlineMaterial(c),this._outlineEnabled=!0}disableOutline(){this._outlineEnabled=!1}enableAmbientOcclusion(c){c&&(c.strength&&(this._AOstrength=c.strength),c.scale&&(this._AOradius=c.scale)),this._AOEnabled=this._AOstrength>0}disableAmbientOcclusion(){this._AOEnabled=!1}setViewport(){if(this._offscreen&&(this._offscreen.width=this._canvas.width,this._offscreen.height=this._canvas.height),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&!this.isLost()){var c=this._gl.drawingBufferWidth/this.cols,g=this._gl.drawingBufferHeight/this.rows;this._viewportWidth=c,this._viewportHeight=g,this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(c*this.col,g*this.row,c,g),this._gl.viewport(c*this.col,g*this.row,c,g)}}setSize(c,g){this.devicePixelRatio=window.devicePixelRatio!==void 0?window.devicePixelRatio:1,this._upscale&&this.devicePixelRatio<2&&(this.devicePixelRatio=2),this._canvas.width=c*this.devicePixelRatio,this._canvas.height=g*this.devicePixelRatio,this._canvas.style.width=c+"px",this._canvas.style.height=g+"px",this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null?(this.isLost()||(this._viewportWidth=this._gl.drawingBufferWidth/this.cols,this._viewportHeight=this._gl.drawingBufferHeight/this.rows),this.setViewport()):(this._viewportWidth=this._canvas.width,this._viewportHeight=this._canvas.height,this.isLost()||this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight)),this.initFrameBuffer()}clear(c,g,v){var b=0;(c===void 0||c)&&(b|=this._gl.COLOR_BUFFER_BIT),(g===void 0||g)&&(b|=this._gl.DEPTH_BUFFER_BIT),(v===void 0||v)&&(b|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(b)}setMaterialFaces(c,g){var v=c.side===d.DoubleSide,b=c.side===d.BackSide;c.imposter||(b=g?!b:b),this._oldDoubleSided!==v&&(v?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=v),this._oldFlipSided!==b&&(b?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=b),this._gl.cullFace(this._gl.BACK)}setDepthTest(c){this._oldDepthTest!==c&&(c?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=c)}setDepthWrite(c){this._oldDepthWrite!==c&&(this._gl.depthMask(c),this._oldDepthWrite=c)}setBlending(c){c?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND)}initMaterial(c,g,v,b){c.addEventListener("dispose",this.onMaterialDispose.bind(this));var S,u;if(u=c.shaderID,u){var m=A.ShaderLib[u];c.vertexShader=m.vertexShader,c.fragmentShader=m.fragmentShader,c.uniforms=A.ShaderUtils.clone(m.uniforms),c.shaded&&c.makeShaded(this.SHADE_TEXTURE)}S={wireframe:c.wireframe,fragdepth:c.imposter,volumetric:c.volumetric,shaded:c.shaded},c.program=this.buildProgram(c.fragmentShader,c.vertexShader,c.uniforms,S)}renderBuffer(c,g,v,b,S,u){if(b.visible){var m,_;if(m=this.setProgram(c,g,v,b,u,this),!!m){_=m.attributes;var D=!1,L=b.wireframe?1:0,P=S.id*16777215+m.id*2+L;P!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=P,D=!0),D&&(this.disableAttributes(),_.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S.__webglVertexBuffer),this.enableAttribute(_.position),this._gl.vertexAttribPointer(_.position,3,this._gl.FLOAT,!1,0,0)),_.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S.__webglColorBuffer),this.enableAttribute(_.color),this._gl.vertexAttribPointer(_.color,3,this._gl.FLOAT,!1,0,0)),_.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S.__webglNormalBuffer),this.enableAttribute(_.normal),this._gl.vertexAttribPointer(_.normal,3,this._gl.FLOAT,!1,0,0)),_.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S.__webglOffsetBuffer),this.enableAttribute(_.offset),this._gl.vertexAttribPointer(_.offset,3,this._gl.FLOAT,!1,0,0)),_.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S.__webglRadiusBuffer),this.enableAttribute(_.radius),this._gl.vertexAttribPointer(_.radius,1,this._gl.FLOAT,!1,0,0)));var N,U;if(u instanceof x.Mesh){if(b.shaderID==="instanced"){var V=b.sphere.geometryGroups[0];D&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,V.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,S.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,V.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,S.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,V.faceArray,this._gl.STATIC_DRAW)),N=V.faceidx,this._extInstanced.vertexAttribDivisorANGLE(_.offset,1),this._extInstanced.vertexAttribDivisorANGLE(_.radius,1),this._extInstanced.vertexAttribDivisorANGLE(_.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,N,this._gl.UNSIGNED_SHORT,0,S.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(_.offset,0),this._extInstanced.vertexAttribDivisorANGLE(_.radius,0),this._extInstanced.vertexAttribDivisorANGLE(_.color,0)}else b.wireframe?(U=S.lineidx,this.setLineWidth(b.wireframeLinewidth),D&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,S.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,U,this._gl.UNSIGNED_SHORT,0)):(N=S.faceidx,D&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,S.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,N,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=N,this.info.render.faces+=N/3}else u instanceof x.Line&&(U=S.vertices,this.setLineWidth(b.linewidth),this._gl.drawArrays(this._gl.LINES,0,U),this.info.render.calls++)}}}clearShading(){this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}setShading(c,g,v){let b=c.__lights,S=c.fog,u=[];for(let D=0,L=c.__webglObjects.length;D<L;D++){let P=c.__webglObjects[D];P.render&&P[v]&&u.push(P)}if(u.length==0)return;this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,null,0),this.renderObjects(c.__webglObjects,!0,v+"Depth",g,b,S,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._scratchTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._AOshader),this._currentProgram=this._AOshader,this.setDepthTest(-1),this.setDepthWrite(-1);let m=this._AOshader.uniforms;this._gl.uniform1f(m.total_strength,this._AOstrength),this._gl.uniform1f(m.radius,this._AOradius),this._fullProjModelMatrix=new R.Matrix4,this._fullProjModelMatrixInv=new R.Matrix4;let _=u[0].object;this._fullProjModelMatrix.multiplyMatrices(g.projectionMatrix,_._modelViewMatrix),this._fullProjModelMatrixInv.getInverse(this._fullProjModelMatrix),this._gl.uniformMatrix4fv(m.projectionMatrix,!1,this._fullProjModelMatrix.elements),this._gl.uniformMatrix4fv(m.projinv,!1,this._fullProjModelMatrixInv.elements),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._aovertexattribpos),this._gl.vertexAttribPointer(this._aovertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._blurshader),this._currentProgram=this._blurshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._blurvertexattribpos),this._gl.vertexAttribPointer(this._blurvertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}render(c,g){if(!(g instanceof a.Camera)){console.error("Renderer.render: camera is not an instance of Camera.");return}var v,b,S,u,m,_=c.__lights,D=c.fog;if(this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&c.updateMatrixWorld(),g.parent===void 0&&g.updateMatrixWorld(),g.matrixWorldInverse.getInverse(g.matrixWorld),this.isLost())return;this.autoUpdateObjects&&this.initWebGLObjects(c),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(!0,!0,!0),m=c.__webglObjects;let L=!1,P=this._AOEnabled;for(v=0,b=m.length;v<b;v++)S=m[v],u=S.object,S.render=!1,u.visible&&(this.setupMatrices(u,g),this.unrollBufferMaterial(S),S.render=!0,S.volumetric&&(L=!0),S.hasAO&&(P=!0));if(this.setBlending(!1),P&&this.setShading(c,g,"opaque"),this.renderObjects(c.__webglObjects,!0,"opaque",g,_,D,!1),P&&this.clearShading(),this.renderSprites(c,g,!1),this.renderObjects(c.__webglObjects,!0,"transparentDepth",g,_,D,!0),this.renderObjects(c.__webglObjects,!1,"transparent",g,_,D,!0),L&&this._fb&&(this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,null,0),this.renderObjects(c.__webglObjects,!1,"volumetric",g,_,D,!0)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(c,g,!0),this._bitmap){const N=this._offscreen.transferToImageBitmap();this._bitmap.transferFromImageBitmap(N),N.close()}}setFrameBuffer(){if(this.isWebGL1()||!this._fb)return;let c=this._viewportWidth,g=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,c,g),this._gl.viewport(0,0,c,g),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,c,g,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,c,g,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._shadingTexture&&(this._gl.deleteTexture(this._shadingTexture),this._shadingTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,c,g,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.deleteTexture(this._scratchTexture),this._scratchTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,c,g,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE)),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.clearDepth(1),this._gl.clear(this._gl.DEPTH_BUFFER_BIT),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}initFrameBuffer(){if(this.isWebGL1())return;let c=this._viewportWidth,g=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,c,g),this._gl.viewport(0,0,c,g),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._shadingTexture=this._gl.createTexture(),this._scratchTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var v=this._antialias?A.ShaderLib.screenaa:A.ShaderLib.screen;this._screenshader=this.buildProgram(v.fragmentShader,v.vertexShader,v.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,"vertexPosition");var b=[1,1,-1,1,-1,-1,-1,-1,1,-1,1,1];this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(b),this._gl.STATIC_DRAW);let S=A.ShaderLib.ssao;this._AOshader=this.buildProgram(S.fragmentShader,S.vertexShader,S.uniforms,{}),this._aovertexattribpos=this._gl.getAttribLocation(this._AOshader,"vertexPosition");let u=A.ShaderLib.blur;this._blurshader=this.buildProgram(u.fragmentShader,u.vertexShader,u.uniforms,{}),this._blurvertexattribpos=this._gl.getAttribLocation(this._blurshader,"vertexPosition")}renderFrameBuffertoScreen(){this.isWebGL1()||this._fb===null||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}initWebGLObjects(c){if(c.__webglObjects||(c.__webglObjects=[],c.__webglObjectsImmediate=[],c.__webglSprites=[],c.__webglFlares=[]),c.__objectsAdded.length){for(;c.__objectsAdded.length;)this.addObject(c.__objectsAdded[0],c),c.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;c.__objectsRemoved.length;)this.removeObject(c.__objectsRemoved[0],c),c.__objectsRemoved.splice(0,1);for(var g=0,v=c.__webglObjects.length;g<v;g++)this.updateObject(c.__webglObjects[g].object)}getYRatio(){return this.rows!==void 0&&this.row!==void 0?this.rows:1}getXRatio(){return this.cols!==void 0&&this.col!==void 0?this.cols:1}getAspect(c,g){(c==null||g==null)&&(c=this._canvas.width,g=this._canvas.height);var v=c/g;if(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var b=c/this.cols,S=g/this.rows;v=b/S}return v}setTexture(c,g,v){if(c.needsUpdate){c.__webglInit||(c.__webglInit=!0,c.addEventListener("dispose",this.onTextureDispose.bind(this)),c.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+g);var b=v?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(b,c.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,c.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,c.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,c.unpackAlignment);var S=this.paramToGL(c.format),u=this.paramToGL(c.type);if(v)this.setTextureParameters(this._gl.TEXTURE_3D,c),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,c.image.size.z,c.image.size.y,c.image.size.x,0,this._gl.RED,this._gl.FLOAT,c.image.data);else{var m=c.image,_=m.width,D=m.height;typeof _>"u"&&(_=m.length,S==this._gl.RGBA&&(_/=4),D=1),this.setTextureParameters(this._gl.TEXTURE_2D,c),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,S,S,u,c.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,S,_,D,0,S,u,c.image)}c.needsUpdate=!1,c.onUpdate&&c.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+g),v?this._gl.bindTexture(this._gl.TEXTURE_3D,c.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,c.__webglTexture)}supportsVolumetric(){return!this.isWebGL1()}enableAttribute(c){this._enabledAttributes[c]||(this._gl.enableVertexAttribArray(c),this._enabledAttributes[c]=!0)}disableAttributes(){for(let c in this._enabledAttributes)this._enabledAttributes[c]&&(this._gl.disableVertexAttribArray(c),this._enabledAttributes[c]=!1)}setPolygonOffset(c,g,v){this._oldPolygonOffset!==c&&(c?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}setLineWidth(c){c!==this._oldLineWidth&&(this._gl.lineWidth(c),this._oldLineWidth=c)}deallocateGeometry(c){if(c.__webglInit=void 0,c.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(c.__webglVertexBuffer),c.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(c.__webglColorBuffer),c.geometryGroups!==void 0)for(var g=0,v=c.groups;g<v;g++){var b=c.geometryGroups[g];b.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(b.__webglVertexBuffer),b.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(b.__webglColorBuffer),b.__webglNormalBuffer!==void 0&&this._gl.deleteBuffer(b.__webglNormalBuffer),b.__webglFaceBuffer!==void 0&&this._gl.deleteBuffer(b.__webglFaceBuffer),b.__webglLineBuffer!==void 0&&this._gl.deleteBuffer(b.__webglLineBuffer)}}deallocateMaterial(c){var g=c.program;if(g!==void 0){c.program=void 0;var v,b,S,u=!1;for(v=0,b=this._programs.length;v<b;v++)if(S=this._programs[v],S.program===g){S.usedTimes--,S.usedTimes===0&&(u=!0);break}if(u===!0){var m=[];for(v=0,b=this._programs.length;v<b;v++)S=this._programs[v],S.program!==g&&m.push(S);this._programs=m,this._gl.deleteProgram(g),this.info.memory.programs--}}}deallocateTexture(c){if(c.image&&c.image.__webglTextureCube)this._gl.deleteTexture(c.image.__webglTextureCube);else{if(!c.__webglInit)return;c.__webglInit=!1,this._gl.deleteTexture(c.__webglTexture)}}onGeometryDispose(c){var g=c.target;g.removeEventListener("dispose",this.onGeometryDispose),this.deallocateGeometry(g),this.info.memory.geometries--}onTextureDispose(c){var g=c.target;g.removeEventListener("dispose",this.onTextureDispose),this.deallocateTexture(g),this.info.memory.textures--}onMaterialDispose(c){var g=c.target;g.removeEventListener("dispose",this.onMaterialDispose),this.deallocateMaterial(g)}getShader(c,g){var v;return!this.isWebGL1()&&!g.startsWith("#version")&&(g=g.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),c=="fragment"?g=g.replace(/varying/g,"in"):g=g.replace(/varying/g,"out"),g=g.replace(/attribute/g,"in"),g=g.replace(/texture2D/g,"texture"),g=g.replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;"),g=g.replace(/gl_FragColor/g,"glFragColor"),g=`#version 300 es
`+g),c==="fragment"?v=this._gl.createShader(this._gl.FRAGMENT_SHADER):c==="vertex"&&(v=this._gl.createShader(this._gl.VERTEX_SHADER)),v==null?null:(this._gl.shaderSource(v,g),this._gl.compileShader(v),this._gl.getShaderParameter(v,this._gl.COMPILE_STATUS)?v:(console.error(this._gl.getShaderInfoLog(v)),console.error("could not initialize shader"),null))}buildProgram(c,g,v,b){var S,u,m,_,D=[];D.push(c),D.push(g);for(S in b)D.push(S),D.push(b[S]);for(_=D.join(),S=0,u=this._programs.length;S<u;S++){var L=this._programs[S];if(L.code===_)return L.usedTimes++,L.program}if(this.isWebGL1()&&b.volumetric)throw new Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");if(m=this._gl.createProgram(),m==null)return null;var P=this._precision,N="precision "+P+" float;",U=[b.volumetric?"#version 300 es":"",N].join(`
`),V=[b.volumetric?"#version 300 es":"",b.fragdepth&&this.isWebGL1()?"#extension GL_EXT_frag_depth: enable":"",b.shaded?"#define SHADED 1":"",b.wireframe?"#define WIREFRAME 1":"",N].join(`
`),W=this.getShader("fragment",V+c),G=this.getShader("vertex",U+g);G!=null&&this._gl.attachShader(m,G),W!=null&&this._gl.attachShader(m,W),this._gl.linkProgram(m),this._gl.getProgramParameter(m,this._gl.LINK_STATUS)||console.error("Could not initialize shader"),m.uniforms={},m.attributes={};var H,k,X;H=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","vWidth","vHeight"];for(k in v)H.push(k);for(X=0;X<H.length;X++){var $=H[X];m.uniforms[$]=this._gl.getUniformLocation(m,$)}for(H=["position","normal","color","lineDistance","offset","radius"],X=0;X<H.length;X++){var F=H[X];m.attributes[F]=this._gl.getAttribLocation(m,F)}return m.id=this._programs_counter++,this._programs.push({program:m,code:_,usedTimes:1}),this.info.memory.programs=this._programs.length,m}setProgram(c,g,v,b,S,u){if(b.needsUpdate&&(b.program&&this.deallocateMaterial(b),this.initMaterial(b,g,v,S),b.needsUpdate=!1),b.program==null)return null;var m=!1,_=b.program,D=_.uniforms,L=b.uniforms;if(_!=this._currentProgram&&(this._gl.useProgram(_),this._currentProgram=_,m=!0),b.id!=this._currentMaterialId&&(this._currentMaterialId=b.id,m=!0),c!=this._currentCamera&&(this._currentCamera=c,m=!0),D.projectionMatrix&&this._gl.uniformMatrix4fv(D.projectionMatrix,!1,c.projectionMatrix.elements),D.modelViewMatrix&&this._gl.uniformMatrix4fv(D.modelViewMatrix,!1,S._modelViewMatrix.elements),D.normalMatrix&&this._gl.uniformMatrix3fv(D.normalMatrix,!1,S._normalMatrix.elements),D.projinv&&(this._projInverse.getInverse(c.projectionMatrix),this._gl.uniformMatrix4fv(D.projinv,!1,this._projInverse.elements)),D.viewMatrix&&this._gl.uniformMatrix4fv(D.viewMatrix,!1,c.matrixWorldInverse.elements),D.vWidth&&this._gl.uniform1f(D.vWidth,this._viewportWidth),D.vHeight&&this._gl.uniform1f(D.vHeight,this._viewportHeight),m){if(L.fogColor.value=v.color,L.fogNear.value=v.near,L.fogFar.value=v.far,b.shaderID.startsWith("lambert")||b.shaderID==="instanced"||b.shaderID.endsWith("imposter"))this._lightsNeedUpdate&&(this.setupLights(_,g),this._lightsNeedUpdate=!1),L.directionalLightColor.value=this._lights.directional.colors,L.directionalLightDirection.value=this._lights.directional.positions;else if(b.shaderID.endsWith("outline"))L.outlineColor.value=b.outlineColor,L.outlineWidth.value=b.outlineWidth,L.outlinePushback.value=b.outlinePushback,L.outlineMaxPixels.value=b.outlineMaxPixels*this.devicePixelRatio;else if(b.shaderID==="volumetric"){S._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse(S._modelViewMatrix),this._projInverse.getInverse(c.projectionMatrix),this._textureMatrix.multiplyMatrices(S.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(D.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(D.projinv,!1,this._projInverse.elements);let P=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);L.step.value=S.material.unit*P,L.maxdepth.value=S.material.maxdepth*P,L.transfermax.value=S.material.transfermax,L.transfermin.value=S.material.transfermin,L.subsamples.value=S.material.subsamples,u.setTexture(S.material.transferfn,4,!1),u.setTexture(S.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}L.opacity.value=b.opacity,this.loadMaterialUniforms(D,L)}return L.shading&&(L.shading.value==3?(this._gl.activeTexture(this._gl.TEXTURE0+this.SHADE_TEXTURE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture)):console.error("Invalid shading textures.")),_}loadMaterialUniforms(c,g){var v,b,S,u;for(v in g)c[v]&&(b=g[v].type,S=g[v].value,u=c[v],b==="f"?this._gl.uniform1f(u,S):b==="i"?this._gl.uniform1i(u,S):b==="fv"?this._gl.uniform3fv(u,S):b==="c"?this._gl.uniform3f(u,S.r,S.g,S.b):b==="f4"&&this._gl.uniform4f(u,S[0],S[1],S[2],S[3]))}addObject(c,g){var v,b,S,u;if(!c.__webglInit&&(c.__webglInit=!0,c._modelViewMatrix=new R.Matrix4,c._normalMatrix=new R.Matrix3,c.geometry!==void 0&&c.geometry.__webglInit===void 0&&(c.geometry.__webglInit=!0,c.geometry.addEventListener("dispose",this.onGeometryDispose.bind(this))),c instanceof x.Mesh||c instanceof x.Line))for(S=c.geometry,v=0,b=S.geometryGroups.length;v<b;v++)u=S.geometryGroups[v],u.id=this._geometryGroupCounter++,u.__webglVertexBuffer||(c instanceof x.Mesh?(this.createMeshBuffers(u),S.elementsNeedUpdate=!0,S.normalsNeedUpdate=!0):c instanceof x.Line&&this.createLineBuffers(u),S.verticesNeedUpdate=!0,S.colorsNeedUpdate=!0);if(!c.__webglActive){if(c instanceof x.Mesh||c instanceof x.Line)for(S=c.geometry,v=0,b=S.geometryGroups.length;v<b;v++)u=S.geometryGroups[v],this.addBuffer(g.__webglObjects,u,c);else c instanceof x.Sprite&&g.__webglSprites.push(c);c.__webglActive=!0}}updateObject(c){var g=c.geometry,v;if(c instanceof x.Mesh||c instanceof x.Line){for(var b=0,S=g.geometryGroups.length;b<S;b++)v=g.geometryGroups[b],(g.verticesNeedUpdate||g.elementsNeedUpdate||g.colorsNeedUpdate||g.normalsNeedUpdate)&&this.setBuffers(v,this._gl.STATIC_DRAW);g.verticesNeedUpdate=!1,g.elementsNeedUpdate=!1,g.normalsNeedUpdate=!1,g.colorsNeedUpdate=!1,g.buffersNeedUpdate=!1}}removeObject(c,g){c instanceof x.Mesh||c instanceof x.Line?this.removeInstances(g.__webglObjects,c):c instanceof x.Sprite&&this.removeInstancesDirect(g.__webglSprites,c),c.__webglActive=!1}removeInstances(c,g){for(var v=c.length-1;v>=0;--v)c[v].object===g&&c.splice(v,1)}removeInstancesDirect(c,g){for(var v=c.length-1;v>=0;--v)c[v]===g&&c.splice(v,1)}unrollBufferMaterial(c){var g=c.object,v=g.material;if(v.volumetric)c.opaque=null,c.transparent=null,c.volumetric=v;else if(v.transparent){if(c.opaque=null,c.volumetric=null,c.transparent=v,!v.wireframe){let b=v.clone();b.opacity=0,c.transparentDepth=b}}else{if(c.opaque=v,c.transparent=null,c.volumetric=null,!v.wireframe){let b=v.clone();b.opacity=0,c.opaqueDepth=b}v.hasAO&&(c.hasAO=!0),(this._AOEnabled||c.hasAO)&&(c.opaqueShaded=v.clone(),c.opaqueShaded.shaded=!0)}}setBuffers(c,g){var v=c.vertexArray,b=c.colorArray;if(c.__webglOffsetBuffer!==void 0?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,c.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,v,g)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,c.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,v,g)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,c.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,b,g),c.normalArray&&c.__webglNormalBuffer!==void 0){var S=c.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,c.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,S,g)}if(c.radiusArray&&c.__webglRadiusBuffer!==void 0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,c.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,c.radiusArray,g)),c.faceArray&&c.__webglFaceBuffer!==void 0){var u=c.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,c.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,u,g)}if(c.lineArray&&c.__webglLineBuffer!==void 0){var m=c.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,c.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,m,g)}}createMeshBuffers(c){c.radiusArray&&(c.__webglRadiusBuffer=this._gl.createBuffer()),c.useOffset&&(c.__webglOffsetBuffer=this._gl.createBuffer()),c.__webglVertexBuffer=this._gl.createBuffer(),c.__webglNormalBuffer=this._gl.createBuffer(),c.__webglColorBuffer=this._gl.createBuffer(),c.__webglFaceBuffer=this._gl.createBuffer(),c.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}createLineBuffers(c){c.__webglVertexBuffer=this._gl.createBuffer(),c.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}addBuffer(c,g,v){c.push({buffer:g,object:v,opaque:null,transparent:null})}setupMatrices(c,g){c._modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,c.matrixWorld),c._normalMatrix.getInverse(c._modelViewMatrix),c._normalMatrix.transpose()}filterFallback(c){return this._gl.LINEAR}setTextureParameters(c,g){c==this._gl.TEXTURE_2D?(this._gl.texParameteri(c,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(c,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(c,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(g.magFilter)),this._gl.texParameteri(c,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(g.minFilter))):(this._gl.texParameteri(c,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(c,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(c,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(c,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(c,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(c,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(c,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}paramToGL(c){return c===y.UnsignedByteType?this._gl.UNSIGNED_BYTE:c===y.RGBAFormat?this._gl.RGBA:c===y.NearestFilter?this._gl.NEAREST:0}setupLights(c,g){var v,b,S,u=0,m=0,_=0,D,L,P=this._lights,N=P.directional.colors,U=P.directional.positions,V=0,W=0;for(v=0,b=g.length;v<b;v++)if(S=g[v],D=S.color,L=S.intensity,S instanceof C.Light){if(this._direction.getPositionFromMatrix(S.matrixWorld),this._vector3.getPositionFromMatrix(S.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),this._direction.x===0&&this._direction.y===0&&this._direction.z===0)continue;U[W]=this._direction.x,U[W+1]=this._direction.y,U[W+2]=this._direction.z,N[W]=D.r*L,N[W+1]=D.g*L,N[W+2]=D.b*L,W+=3,V++}P.ambient[0]=u,P.ambient[1]=m,P.ambient[2]=_,P.directional.length=V}initGL(){try{if(OffscreenCanvas&&!(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null))(M==null||M.isContextLost())&&(T=new OffscreenCanvas(this._canvas.width,this._canvas.height),M=T.getContext("webgl2",{alpha:!0,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})),this._offscreen=T,this._gl=M,this._bitmap=this._canvas.getContext("bitmaprenderer",{alpha:!0});else if(!(this._gl=this._canvas.getContext("webgl2",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("experimental-webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw"Error creating WebGL context.";var c=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(c[6])}catch(g){console.error(g)}}isWebGL1(){return this._webglversion==1}setDefaultGLState(){this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}renderObjects(c,g,v,b,S,u,m){var _,D,L,P,N,U,V;g?(N=c.length-1,U=-1,V=-1):(N=0,U=c.length,V=1);for(var W=N;W!==U;W+=V)if(_=c[W],_.render){if(D=_.object,L=_.buffer,P=_[v],(_.hasAO||this._AOEnabled)&&_[v+"Shaded"]&&(P=_[v+"Shaded"]),!P)continue;this.setBlending(m),this.setDepthTest(P.depthTest),this.setDepthWrite(P.depthWrite),this.setPolygonOffset(P.polygonOffset,P.polygonOffsetFactor,P.polygonOffsetUnits);var G=D._modelViewMatrix.isReflected();if(this.setMaterialFaces(P,G),this.renderBuffer(b,S,u,P,L,D),(this._outlineEnabled||P.outline)&&!P.wireframe&&P.shaderID!=="basic"&&P.opacity!==0){let H=this._outlineMaterial;P.shaderID=="sphereimposter"?H=this._outlineSphereImposterMaterial:P.shaderID=="stickimposter"&&(H=this._outlineStickImposterMaterial),this.renderBuffer(b,S,u,H,L,D)}}}renderSprites(c,g,v){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(c,g,this._currentWidth,this._currentHeight,v),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}}),"./src/WebGL/SpritePlugin.ts":((s,i,n)=>{n.r(i),n.d(i,{SpritePlugin:()=>d});var a=n("./src/WebGL/shaders/index.ts");class d{constructor(){this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}init(p){this.gl=p.context,this.renderer=p,this.precision=p.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var E=0;this.sprite.vertices[E++]=-1,this.sprite.vertices[E++]=-1,this.sprite.vertices[E++]=0,this.sprite.vertices[E++]=0,this.sprite.vertices[E++]=1,this.sprite.vertices[E++]=-1,this.sprite.vertices[E++]=1,this.sprite.vertices[E++]=0,this.sprite.vertices[E++]=1,this.sprite.vertices[E++]=1,this.sprite.vertices[E++]=1,this.sprite.vertices[E++]=1,this.sprite.vertices[E++]=-1,this.sprite.vertices[E++]=1,this.sprite.vertices[E++]=0,this.sprite.vertices[E++]=1,E=0,this.sprite.faces[E++]=0,this.sprite.faces[E++]=1,this.sprite.faces[E++]=2,this.sprite.faces[E++]=0,this.sprite.faces[E++]=2,this.sprite.faces[E++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(a.ShaderLib.sprite,this.precision||1),this.sprite.attributes={};const R={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,"position"),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,"uv"),R.uvOffset=this.gl.getUniformLocation(this.sprite.program,"uvOffset"),R.uvScale=this.gl.getUniformLocation(this.sprite.program,"uvScale"),R.rotation=this.gl.getUniformLocation(this.sprite.program,"rotation"),R.scale=this.gl.getUniformLocation(this.sprite.program,"scale"),R.alignment=this.gl.getUniformLocation(this.sprite.program,"alignment"),R.color=this.gl.getUniformLocation(this.sprite.program,"color"),R.map=this.gl.getUniformLocation(this.sprite.program,"map"),R.opacity=this.gl.getUniformLocation(this.sprite.program,"opacity"),R.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,"useScreenCoordinates"),R.screenPosition=this.gl.getUniformLocation(this.sprite.program,"screenPosition"),R.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,"modelViewMatrix"),R.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,"projectionMatrix"),R.fogNear=this.gl.getUniformLocation(this.sprite.program,"fogNear"),R.fogFar=this.gl.getUniformLocation(this.sprite.program,"fogFar"),R.fogColor=this.gl.getUniformLocation(this.sprite.program,"fogColor"),R.alphaTest=this.gl.getUniformLocation(this.sprite.program,"alphaTest"),this.sprite.uniforms=R}render(p,E,R,x,A){var w,T,M,h,l,c,g,v,b,S;if(!this.gl)throw new Error("WebGLRenderer not initialized");let u=[];(w=p?.__webglSprites)===null||w===void 0||w.forEach($=>{(A&&$.material.depthTest==!1||!A&&$.material.depthTest)&&u.push($)});let m=u.length;if(!m)return;const _=this.sprite.attributes,D=this.sprite.uniforms;if(!D)throw new Error("Uniforms not defined");var L=R*.5,P=x*.5;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(_.position),this.gl.enableVertexAttribArray(_.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(_.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(_.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv(D.projectionMatrix,!1,E.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i(D.map,0);var N=p.fog;N?(this.gl.uniform3f(D.fogColor,N.color.r,N.color.g,N.color.b),this.gl.uniform1f(D.fogNear,N.near),this.gl.uniform1f(D.fogFar,N.far)):(this.gl.uniform1f(D.fogNear,0),this.gl.uniform1f(D.fogFar,0));var U;let V,W,G,H=[];for(U=0;U<m;U++)V=u[U],W=V.material,W&&(W.depthTest==!1&&!A||!V.visible||W.opacity===0||(W.useScreenCoordinates?V.z=-V.position.z:(V._modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,V.matrixWorld),V.z=-V._modelViewMatrix.elements[14])));for(u.sort(y),U=0;U<m;U++)if(V=u[U],W=V.material,!!W&&!(!V.visible||W.opacity===0)&&W.map&&W.map.image&&W.map.image.width){this.gl.uniform1f(D?.alphaTest||null,W.alphaTest);var k=W.map.image.width,X=W.map.image.height;H[0]=k*this.renderer.devicePixelRatio/R,H[1]=X*this.renderer.devicePixelRatio/x,W.useScreenCoordinates===!0?(this.gl.uniform1i(D.useScreenCoordinates,1),this.gl.uniform3f(D.screenPosition,(V.position.x*this.renderer.devicePixelRatio-L)/L,(P-V.position.y*this.renderer.devicePixelRatio)/P,Math.max(0,Math.min(1,V.position.z)))):(this.gl.uniform1i(D.useScreenCoordinates,0),this.gl.uniformMatrix4fv(D.modelViewMatrix,!1,V._modelViewMatrix.elements)),G=1/(W.scaleByViewport?x:1),H[0]*=G*V.scale.x,H[1]*=G*V.scale.y;let $=(T=W?.alignment)===null||T===void 0?void 0:T.x,F=(M=W?.alignment)===null||M===void 0?void 0:M.y;W.screenOffset&&($=($||0)+2*W.screenOffset.x/k,F=(F||0)+2*W.screenOffset.y/X),this.gl.uniform2f(D.uvScale,((h=W?.uvScale)===null||h===void 0?void 0:h.x)||1,((l=W?.uvScale)===null||l===void 0?void 0:l.y)||1),this.gl.uniform2f(D.uvOffset,((c=W?.uvOffset)===null||c===void 0?void 0:c.x)||0,((g=W?.uvOffset)===null||g===void 0?void 0:g.y)||0),this.gl.uniform2f(D.alignment,$||0,F||0),this.gl.uniform1f(D.opacity,W.opacity),this.gl.uniform3f(D.color,((v=W?.color)===null||v===void 0?void 0:v.r)||0,((b=W?.color)===null||b===void 0?void 0:b.g)||0,((S=W?.color)===null||S===void 0?void 0:S.b)||0),this.gl.uniform1f(D.rotation,V.rotation),this.gl.uniform2fv(D.scale,H),this.renderer.setDepthTest(W.depthTest),this.renderer.setDepthWrite(W.depthWrite),this.renderer.setTexture(W.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}createProgram(p,E){if(!this.gl)throw new Error("WebGL Rendering context not found");var R=this.gl.createProgram();if(!R)throw new Error("Error creating webgl program");var x=this.gl.createShader(this.gl.FRAGMENT_SHADER),A=this.gl.createShader(this.gl.VERTEX_SHADER);if(!x)throw new Error("Unable to create fragment shader SpritePlugin.createProgram");if(!A)throw new Error("Unable to create vertex shader SpritePlugin.createProgram");var w="precision "+E+` float;
`;if(this.gl.shaderSource(x,w+p.fragmentShader),this.gl.shaderSource(A,w+p.vertexShader),this.gl.compileShader(x),this.gl.compileShader(A),!this.gl.getShaderParameter(x,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter(A,this.gl.COMPILE_STATUS))throw new Error(`Error compiling shader: 
      ${this.gl.getShaderInfoLog(x)} 
      ${this.gl.getShaderInfoLog(A)}`);return this.gl.attachShader(R,x),this.gl.attachShader(R,A),this.gl.linkProgram(R),this.gl.getProgramParameter(R,this.gl.LINK_STATUS)||console.error("Could not initialize shader"),R}}function y(C,p){return C.z!==p.z?p.z-C.z:p.id-C.id}}),"./src/WebGL/constants/Coloring.ts":((s,i,n)=>{n.r(i),n.d(i,{Coloring:()=>a});var a;(function(d){d[d.NoColors=0]="NoColors",d[d.FaceColors=1]="FaceColors",d[d.VertexColors=2]="VertexColors"})(a||(a={}))}),"./src/WebGL/constants/Shading.ts":((s,i,n)=>{n.r(i),n.d(i,{Shading:()=>a});var a;(function(d){d[d.NoShading=0]="NoShading",d[d.FlatShading=1]="FlatShading",d[d.SmoothShading=2]="SmoothShading"})(a||(a={}))}),"./src/WebGL/constants/Sides.ts":((s,i,n)=>{n.r(i),n.d(i,{BackSide:()=>d,DoubleSide:()=>y,FrontSide:()=>a});const a=0,d=1,y=2}),"./src/WebGL/constants/SpriteAlignment.ts":((s,i,n)=>{n.r(i),n.d(i,{SpriteAlignment:()=>d});var a=n("./src/WebGL/math/index.ts");const d={topLeft:new a.Vector2(1,-1),topCenter:new a.Vector2(0,-1),topRight:new a.Vector2(-1,-1),centerLeft:new a.Vector2(1,0),center:new a.Vector2(0,0),centerRight:new a.Vector2(-1,0),bottomLeft:new a.Vector2(1,1),bottomCenter:new a.Vector2(0,1),bottomRight:new a.Vector2(-1,1)}}),"./src/WebGL/constants/TextureConstants.ts":((s,i,n)=>{n.r(i),n.d(i,{ClampToEdgeWrapping:()=>a,FloatType:()=>E,LinearFilter:()=>d,LinearMipMapLinearFilter:()=>C,NearestFilter:()=>y,R32Format:()=>A,RFormat:()=>x,RGBAFormat:()=>R,UnsignedByteType:()=>p});const a=1001,d=1006,y=1007,C=1008,p=1009,E=1010,R=1021,x=1022,A=1023}),"./src/WebGL/constants/TextureOperations.ts":((s,i,n)=>{n.r(i),n.d(i,{TextureOperations:()=>a});var a;(function(d){d[d.MultiplyOperation=0]="MultiplyOperation",d[d.MixOperation=1]="MixOperation",d[d.AddOperation=2]="AddOperation"})(a||(a={}))}),"./src/WebGL/constants/index.ts":((s,i,n)=>{n.r(i),n.d(i,{BackSide:()=>d.BackSide,ClampToEdgeWrapping:()=>p.ClampToEdgeWrapping,Coloring:()=>a.Coloring,DoubleSide:()=>d.DoubleSide,FloatType:()=>p.FloatType,FrontSide:()=>d.FrontSide,LinearFilter:()=>p.LinearFilter,LinearMipMapLinearFilter:()=>p.LinearMipMapLinearFilter,NearestFilter:()=>p.NearestFilter,R32Format:()=>p.R32Format,RFormat:()=>p.RFormat,RGBAFormat:()=>p.RGBAFormat,Shading:()=>y.Shading,SpriteAlignment:()=>C.SpriteAlignment,TextureOperations:()=>E.TextureOperations,UnsignedByteType:()=>p.UnsignedByteType});var a=n("./src/WebGL/constants/Coloring.ts"),d=n("./src/WebGL/constants/Sides.ts"),y=n("./src/WebGL/constants/Shading.ts"),C=n("./src/WebGL/constants/SpriteAlignment.ts"),p=n("./src/WebGL/constants/TextureConstants.ts"),E=n("./src/WebGL/constants/TextureOperations.ts")}),"./src/WebGL/core/EventDispatcher.ts":((s,i,n)=>{n.r(i),n.d(i,{EventDispatcher:()=>a});class a{constructor(){this.listeners={}}dispatchEvent(y){var C=this.listeners[y.type];if(C!==void 0){y.target=this;for(var p=0,E=C.length;p<E;p++)C[p].call(this,y)}}removeEventListener(y,C){if(!C)this.listeners[y]=[];else{var p=this.listeners[y].indexOf(C);p!==-1&&this.listeners[y].splice(p,1)}}addEventListener(y,C){this.listeners[y]===void 0&&(this.listeners[y]=[]),this.listeners[y].indexOf(C)===-1&&this.listeners[y].push(C)}}}),"./src/WebGL/core/Geometry.ts":((s,i,n)=>{n.r(i),n.d(i,{Geometry:()=>R,GeometryGroup:()=>E,GeometryIDCount:()=>x});var a=n("./src/WebGL/materials/LineBasicMaterial.ts"),d=n("./src/WebGL/core/EventDispatcher.ts"),y=n("./src/WebGL/math/index.ts"),C=n("./src/colors.ts");const p=65535;class E{constructor(w=0){this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.atomArray=Array(),this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=w}setColor(w){var T=this.vertexArray,M=this.colorArray;if(!T)throw new Error("vertex array not initialized");if(!M)throw new Error("color array not initialized");let h=C.CC.color(w);for(var l=0;l<T.length;l+=3)M[l]=h.r,M[l+1]=h.g,M[l+2]=h.b}setColors(w){var T=this.vertexArray,M=this.colorArray;if(!T)throw new Error("vertex array not initialized");if(!M)throw new Error("color array not initialized");if(T.length!=M.length){console.log("Cannot re-color geometry group due to mismatched lengths.");return}for(var h=0;h<T.length;h+=3){var l=w(T[h],T[h+1],T[h+2]);l instanceof C.Color||(l=C.CC.color(l)),M[h]=l.r,M[h+1]=l.g,M[h+2]=l.b}}getNumVertices(){return this.vertices}getVertices(){return this.vertexArray}getCentroid(){if(!this.vertexArray)throw new Error("vertex array not initialized");for(var w=new y.Vector3,T,M,h,l,c=0;c<this.vertices;++c)T=c*3,M=this.vertexArray[T],h=this.vertexArray[T+1],l=this.vertexArray[T+2],w.x+=M,w.y+=h,w.z+=l;return w.divideScalar(this.vertices),w}setNormals(){var w=this.faceArray,T=this.vertexArray,M=this.normalArray;if(!(!this.vertices||!this.faceidx)){if(!w)throw new Error("face array not initialized");if(!T)throw new Error("vertex array not initialized");if(!M)throw new Error("normal array not initialized");for(var h,l,c,g,v,b,S,u=0;u<w.length/3;++u)h=w[u*3]*3,l=w[u*3+1]*3,c=w[u*3+2]*3,g=new y.Vector3(T[h],T[h+1],T[h+2]),v=new y.Vector3(T[l],T[l+1],T[l+2]),b=new y.Vector3(T[c],T[c+1],T[c+2]),g.subVectors(g,v),b.subVectors(b,v),b.cross(g),S=b,S.normalize(),M[h]+=S.x,M[l]+=S.x,M[c]+=S.x,M[h+1]+=S.y,M[l+1]+=S.y,M[c+1]+=S.y,M[h+2]+=S.z,M[l+2]+=S.z,M[c+2]+=S.z}}setLineIndices(){if(this.faceidx&&!(this.lineArray&&this.lineArray.length==this.faceidx*2&&this.lineidx==this.faceidx*2)){var w=this.faceArray,T=this.lineArray=new Uint16Array(this.faceidx*2);if(this.lineidx=this.faceidx*2,!w)throw new Error("face array not initialized");for(var M=0;M<this.faceidx/3;++M){var h=M*3,l=h*2,c=w[h],g=w[h+1],v=w[h+2];T[l]=c,T[l+1]=g,T[l+2]=c,T[l+3]=v,T[l+4]=g,T[l+5]=v}}}vrml(w,T){var M,h,l,c,g,v,b,S,u,m,_,D,L,P,N,U,V,W,G="";if(G+=w+`Shape {
`+w+` appearance Appearance {
`+w+`  material Material {
`+w+"   diffuseColor "+((M=T?.color)===null||M===void 0?void 0:M.r)+" "+((h=T?.color)===null||h===void 0?void 0:h.g)+" "+((l=T?.color)===null||l===void 0?void 0:l.b)+`
`,T.wireframe&&this.colorArray){let k=this.colorArray;G+=w+"    emissiveColor "+k[0]+" "+k[1]+" "+k[2]+`
`}T?.transparent&&(G+=w+"   transparency "+(1-T.opacity)+`
`),G+=w+`  }
`,G+=w+` }
`;var H=w;if(w+=" ",T instanceof a.LineBasicMaterial||T.wireframe){G+=w+`geometry IndexedLineSet {
`+w+` colorPerVertex TRUE
`+w+` coord Coordinate {
`+w+`  point [
`;let k,X,$;for(let F=0;F<this.vertices;++F){let K=F*3;k=(c=this.vertexArray)===null||c===void 0?void 0:c[K],X=(g=this.vertexArray)===null||g===void 0?void 0:g[K+1],$=(v=this.vertexArray)===null||v===void 0?void 0:v[K+2],G+=w+"   "+k+" "+X+" "+$+`,
`}if(G+=w+`  ]
`,G+=w+` }
`,this.colorArray&&!T.wireframe){G+=w+` color Color {
`+w+`  color [
`;for(let F=0;F<this.vertices;++F){let K=F*3;k=this.colorArray[K],X=this.colorArray[K+1],$=this.colorArray[K+2],G+=w+"   "+k+" "+X+" "+$+`,
`}G+=w+`  ]
`,G+=w+` }
`}if(G+=w+` coordIndex [
`,T.wireframe&&this.faceArray)for(let F=0;F<this.faceidx;F+=3)k=(b=this.faceArray)===null||b===void 0?void 0:b[F],X=(S=this.faceArray)===null||S===void 0?void 0:S[F+1],$=(u=this.faceArray)===null||u===void 0?void 0:u[F+2],G+=w+"  "+k+", "+X+", "+$+`, -1,
`;else for(let F=0;F<this.vertices-1;F+=2)G+=w+"  "+F+", "+(F+1)+`, -1,
`;G+=w+` ]
`,G+=w+`}
`}else{G+=w+`geometry IndexedFaceSet {
`+w+` colorPerVertex TRUE
`+w+` normalPerVertex TRUE
`+w+` solid FALSE
`,G+=w+` coord Coordinate {
`+w+`  point [
`;let k,X,$;for(let F=0;F<this.vertices;++F){let K=F*3;k=(m=this.vertexArray)===null||m===void 0?void 0:m[K],X=(_=this.vertexArray)===null||_===void 0?void 0:_[K+1],$=(D=this.vertexArray)===null||D===void 0?void 0:D[K+2],G+=w+"   "+k+" "+X+" "+$+`,
`}G+=w+`  ]
`,G+=w+` }
`,G+=w+` normal Normal {
`+w+`  vector [
`;for(let F=0;F<this.vertices;++F){let K=F*3;k=(L=this.normalArray)===null||L===void 0?void 0:L[K],X=(P=this.normalArray)===null||P===void 0?void 0:P[K+1],$=(N=this.normalArray)===null||N===void 0?void 0:N[K+2],G+=w+"   "+k+" "+X+" "+$+`,
`}if(G+=w+`  ]
`,G+=w+` }
`,this.colorArray){G+=w+` color Color {
`+w+`  color [
`;for(let F=0;F<this.vertices;++F){let K=F*3;k=this.colorArray[K],X=this.colorArray[K+1],$=this.colorArray[K+2],G+=w+"   "+k+" "+X+" "+$+`,
`}G+=w+`  ]
`,G+=w+` }
`}G+=w+` coordIndex [
`;for(let F=0;F<this.faceidx;F+=3)k=(U=this.faceArray)===null||U===void 0?void 0:U[F],X=(V=this.faceArray)===null||V===void 0?void 0:V[F+1],$=(W=this.faceArray)===null||W===void 0?void 0:W[F+2],G+=w+"  "+k+", "+X+", "+$+`, -1,
`;G+=w+` ]
`,G+=w+`}
`}return G+=H+"}",G}truncateArrayBuffers(w=!0,T=!1){var M=this.vertexArray,h=this.colorArray,l=this.normalArray,c=this.faceArray,g=this.lineArray,v=this.radiusArray;this.vertexArray=M?.subarray(0,this.vertices*3)||null,this.colorArray=h?.subarray(0,this.vertices*3)||null,w?(this.normalArray=l?.subarray(0,this.vertices*3)||null,this.faceArray=c?.subarray(0,this.faceidx)||null,this.lineidx>0?this.lineArray=g?.subarray(0,this.lineidx)||null:this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),v&&(this.radiusArray=v.subarray(0,this.vertices)),T&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0}}class R extends d.EventDispatcher{constructor(w=!1,T=!1,M=!1){super(),this.name="",this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.imposter=!1,this.instanced=!1,this.geometryGroups=[],this.groups=0,this.id=x++,this.mesh=w,this.radii=T,this.offset=M}updateGeoGroup(w=0){var T,M=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!M||M.vertices+w>(((T=M?.vertexArray)===null||T===void 0?void 0:T.length)||0)/3)&&(M=this.addGeoGroup()),M}vrml(w,T){for(var M="",h=this.geometryGroups.length,l=0;l<h;l++){var c=this.geometryGroups[l];M+=c.vrml(w,T)+`,
`}return M}addGeoGroup(){var w=new E(this.geometryGroups.length);return this.geometryGroups.push(w),this.groups=this.geometryGroups.length,w.vertexArray=new Float32Array(p*3),w.colorArray=new Float32Array(p*3),this.mesh&&(w.normalArray=new Float32Array(p*3),w.faceArray=new Uint16Array(p*6),w.lineArray=new Uint16Array(p*6)),this.radii&&(w.radiusArray=new Float32Array(p)),w.useOffset=this.offset,w}setUpNormals(...w){for(var T=0;T<this.groups;T++){var M=this.geometryGroups[T];M.setNormals(...w)}}setColors(...w){for(var T=this.geometryGroups.length,M=0;M<T;M++){var h=this.geometryGroups[M];h.setColors(...w)}}setColor(...w){let T=this.geometryGroups.length;for(var M=0;M<T;M++){var h=this.geometryGroups[M];h.setColor(...w)}}setUpWireframe(...w){let T=this.geometryGroups.length;for(var M=0;M<T;M++){var h=this.geometryGroups[M];h.setLineIndices(...w)}}initTypedArrays(){for(var w=0;w<this.groups;w++){var T=this.geometryGroups[w];T.__inittedArrays!==!0&&T.truncateArrayBuffers(this.mesh,!1)}}dispose(){this.dispatchEvent({type:"dispose"})}get vertices(){for(var w=0,T=0;T<this.groups;T++)w+=this.geometryGroups[T].vertices;return w}}let x=0}),"./src/WebGL/core/Object3D.ts":((s,i,n)=>{n.r(i),n.d(i,{Light:()=>E,Object3D:()=>C,Object3DIDCount:()=>y,Scene:()=>p});var a=n("./src/WebGL/math/index.ts"),d=n("./src/colors.ts");let y=0;class C{constructor(){this.id=y++,this.name="",this.children=[],this.position=new a.Vector3,this.rotation=new a.Vector3,this.matrix=new a.Matrix4,this.matrixWorld=new a.Matrix4,this.quaternion=new a.Quaternion,this.eulerOrder="XYZ",this.up=new a.Vector3(0,1,0),this.scale=new a.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}lookAt(x){this.matrix.lookAt(x,this.position,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!0?console.error("Unimplemented math operation."):this.rotation instanceof a.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}add(x){if(x===this){console.error("Can't add $3Dmol.Object3D to itself");return}x.parent=this,this.children.push(x);for(var A=this;A.parent!==void 0;)A=A.parent;A!==void 0&&A instanceof p&&A.__addObject(x)}remove(x){var A=this.children.indexOf(x);if(A!==-1){x.parent=void 0,this.children.splice(A,1);for(var w=this;w.parent!==void 0;)w=w.parent;w!==void 0&&w instanceof p&&w.__removeObject(x)}}vrml(x){x||(x=" ");var A=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),w=0,T=0,M=0;if(A!=0){let c=Math.sin(A/2);w=this.quaternion.x/c,T=this.quaternion.y/c,M=this.quaternion.z/c}var h=x+`Transform {
`+x+" center "+this.position.x+" "+this.position.y+" "+this.position.z+`
`+x+" rotation "+w+" "+T+" "+M+" "+A+`
`+x+` children [
`;this.geometry&&(h+=this.geometry.vrml(x,this.material));for(var l=0;l<this.children.length;l++)h+=this.children[l].vrml(x+" ")+`,
`;return h+=` ]
`,h+="}",h}updateMatrix(){this.matrix.setPosition(this.position),this.useQuaternion===!1&&this.rotation instanceof a.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),(this.scale.x!==1||this.scale.y!==1||this.scale.z!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(x){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||x===!0)&&(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var A=0;A<this.children.length;A++)this.children[A].updateMatrixWorld(!0)}clone(x){x===void 0&&(x=new C),x.name=this.name,x.up.copy(this.up),x.position.copy(this.position),x.rotation instanceof a.Vector3&&this.rotation instanceof a.Vector3?x.rotation.copy(this.rotation):x.rotation=this.rotation,x.eulerOrder=this.eulerOrder,x.scale.copy(this.scale),x.rotationAutoUpdate=this.rotationAutoUpdate,x.matrix.copy(this.matrix),x.matrixWorld.copy(this.matrixWorld),x.quaternion.copy(this.quaternion),x.matrixAutoUpdate=this.matrixAutoUpdate,x.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,x.useQuaternion=this.useQuaternion,x.visible=this.visible;for(var A=0;A<this.children.length;A++){var w=this.children[A];x.add(w.clone())}return x}setVisible(x){this.visible=x;for(var A=0;A<this.children.length;A++){var w=this.children[A];w.setVisible(x)}}}class p extends C{constructor(){super(...arguments),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]}__addObject(x){if(x instanceof E)this.__lights.indexOf(x)===-1&&this.__lights.push(x),x.target&&x.target.parent===void 0&&this.add(x.target);else if(this.__objects.indexOf(x)===-1){this.__objects.push(x),this.__objectsAdded.push(x);var A=this.__objectsRemoved.indexOf(x);A!==-1&&this.__objectsRemoved.splice(A,1)}for(var w=0;w<x.children.length;w++)this.__addObject(x.children[w])}__removeObject(x){var A;if(x instanceof E)A=this.__lights.indexOf(x),A!==-1&&this.__lights.splice(A,1);else if(A=this.__objects.indexOf(x),A!==-1){this.__objects.splice(A,1),this.__objectsRemoved.push(x);var w=this.__objectsAdded.indexOf(x);w!==-1&&this.__objectsAdded.splice(A,1)}for(var T=0;T<x.children.length;T++)this.__removeObject(x.children[T])}}class E extends C{constructor(x,A=1){super(),this.position=new a.Vector3(0,1,0),this.target=new C,this.castShadow=!1,this.onlyShadow=!1,this.color=new d.Color(x),this.intensity=A}}}),"./src/WebGL/core/Projector.ts":((s,i,n)=>{n.r(i),n.d(i,{Projector:()=>y});var a=n("./src/WebGL/math/index.ts");const d=new a.Matrix4;class y{static unprojectVector(p,E){return E.projectionMatrixInverse.getInverse(E.projectionMatrix),d.multiplyMatrices(E.matrixWorld,E.projectionMatrixInverse),p.applyProjection(d)}static projectVector(p,E){return E.matrixWorldInverse.getInverse(E.matrixWorld),d.multiplyMatrices(E.projectionMatrix,E.matrixWorldInverse),p.applyProjection(d)}projectVector(p,E){return y.projectVector(p,E)}unprojectVector(p,E){return y.unprojectVector(p,E)}}}),"./src/WebGL/core/Raycaster.ts":((s,i,n)=>{n.r(i),n.d(i,{Raycaster:()=>p,intersectObject:()=>c});var a=n("./src/WebGL/math/index.ts"),d=n("./src/WebGL/shapes/index.ts");const y=(g,v)=>g.distance-v.distance,C=new a.Matrix4;class p{constructor(v,b,S,u){this.precision=1e-4,this.linePrecision=.2,this.ray=new a.Ray(v,b),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=u||0,this.far=S||1/0}set(v,b){this.ray.set(v,b)}setFromCamera(v,b){b.ortho?(this.ray.origin.set(v.x,v.y,(b.near+b.far)/(b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformDirection(b.matrixWorld)):(this.ray.origin.setFromMatrixPosition(b.matrixWorld),this.ray.direction.set(v.x,v.y,v.z),b.projectionMatrixInverse.getInverse(b.projectionMatrix),C.multiplyMatrices(b.matrixWorld,b.projectionMatrixInverse),this.ray.direction.applyProjection(C),this.ray.direction.sub(this.ray.origin).normalize())}intersectObjects(v,b){for(var S=[],u=0,m=b.length;u<m;u++)c(v,b[u],this,S);return S.sort(y),S}}const E=g=>Math.min(Math.max(g,-1),1);var R=new d.Sphere,x=new d.Cylinder,A=new d.Triangle,w=new a.Vector3,T=new a.Vector3,M=new a.Vector3,h=new a.Vector3,l=new a.Vector3;function c(g,v,b,S){if(l.getPositionFromMatrix(g.matrixWorld),v.intersectionShape===void 0||v.hidden)return S;var u=v.intersectionShape,m=b.linePrecision;m*=g.matrixWorld.getMaxScaleOnAxis();var _=m*m;if(v.boundingSphere!==void 0&&v.boundingSphere instanceof d.Sphere&&(R.copy(v.boundingSphere),R.applyMatrix4(g.matrixWorld),!b.ray.isIntersectionSphere(R)))return S;var D,L,P,N,U,V,W,G,H,k,X,$,F,K;for(D=0,L=u.triangle.length;D<L;D++)if(u.triangle[D]instanceof d.Triangle){if(A.copy(u.triangle[D]),A.applyMatrix4(g.matrixWorld),P=A.getNormal(),N=b.ray.direction.dot(P),N>=0||(w.subVectors(A.a,b.ray.origin),W=P.dot(w)/N,W<0))continue;T.copy(b.ray.direction).multiplyScalar(W).add(b.ray.origin),T.sub(A.a),M.copy(A.b).sub(A.a),h.copy(A.c).sub(A.a);var te=M.dot(h),re=M.lengthSq(),le=h.lengthSq();if($=(re*T.dot(h)-te*T.dot(M))/(re*le-te*te),$<0||$>1||(X=(T.dot(M)-$*te)/re,X<0||X>1||X+$>1))continue;S.push({clickable:v,distance:W})}for(D=0,L=u.cylinder.length;D<L;D++)if(u.cylinder[D]instanceof d.Cylinder){if(x.copy(u.cylinder[D]),x.applyMatrix4(g.matrixWorld),w.subVectors(x.c1,b.ray.origin),U=w.dot(x.direction),V=w.dot(b.ray.direction),N=E(b.ray.direction.dot(x.direction)),H=1-N*N,H===0)continue;F=(N*V-U)/H,K=(V-N*U)/H,T.copy(x.direction).multiplyScalar(F).add(x.c1),M.copy(b.ray.direction).multiplyScalar(K).add(b.ray.origin),G=h.subVectors(T,M).lengthSq();var oe=x.radius*x.radius;if(G<=oe){if(k=(N*U-V)*(N*U-V)-H*(w.lengthSq()-U*U-oe),k<=0?$=W=Math.sqrt(G):$=W=(V-N*U-Math.sqrt(k))/H,X=N*$-U,X<0||X*X>x.lengthSq()||$<0)continue;S.push({clickable:v,distance:W})}}for(D=0,L=u.line.length;D<L;D+=2){T.copy(u.line[D]),T.applyMatrix4(g.matrixWorld),M.copy(u.line[D+1]),M.applyMatrix4(g.matrixWorld),h.subVectors(M,T);var ue=h.lengthSq();h.normalize(),w.subVectors(T,b.ray.origin);var he=w.dot(h);V=w.dot(b.ray.direction),N=E(b.ray.direction.dot(h)),H=1-N*N,H!==0&&(F=(N*V-he)/H,K=(V-N*he)/H,T.add(h.multiplyScalar(F)),M.copy(b.ray.direction).multiplyScalar(K).add(b.ray.origin),G=h.subVectors(M,T).lengthSq(),G<_&&F*F<ue&&S.push({clickable:v,distance:K}))}for(D=0,L=u.sphere.length;D<L;D++)if(u.sphere[D]instanceof d.Sphere&&(R.copy(u.sphere[D]),R.applyMatrix4(g.matrixWorld),b.ray.isIntersectionSphere(R))){T.subVectors(R.center,b.ray.origin);var ge=T.dot(b.ray.direction);if(k=ge*ge-(T.lengthSq()-R.radius*R.radius),ge<0)return S;k<=0?W=ge:W=ge-Math.sqrt(k),S.push({clickable:v,distance:W})}return S}}),"./src/WebGL/core/Texture.ts":((s,i,n)=>{n.r(i),n.d(i,{Texture:()=>p,TextureIdCount:()=>E});var a=n("./src/WebGL/constants/TextureConstants.ts"),d=n("./src/WebGL/math/index.ts"),y=n("./src/WebGL/core/EventDispatcher.ts"),C=n("./src/WebGL/core/UVMapping.ts");class p extends y.EventDispatcher{constructor(x,A){super(),this.id=E++,this.name="",this.image=x,this.mapping=new C.UVMapping,this.wrapS=a.ClampToEdgeWrapping,this.wrapT=a.ClampToEdgeWrapping,this.anisotropy=1,A?(this.format=a.RFormat,this.type=a.FloatType,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=a.NearestFilter,this.minFilter=a.NearestFilter):(this.format=a.RGBAFormat,this.type=a.UnsignedByteType,this.offset=new d.Vector2(0,0),this.repeat=new d.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=a.LinearFilter,this.minFilter=a.LinearMipMapLinearFilter),this.needsUpdate=!1,this.onUpdate=null}clone(x=new p){return x.image=this.image,x.mapping=this.mapping,x.wrapS=this.wrapS,x.wrapT=this.wrapT,x.magFilter=this.magFilter,x.minFilter=this.minFilter,x.anisotropy=this.anisotropy,x.format=this.format,x.type=this.type,x.offset.copy(this.offset),x.repeat.copy(this.repeat),x.premultiplyAlpha=this.premultiplyAlpha,x.flipY=this.flipY,x.unpackAlignment=this.unpackAlignment,x}dispose(){this.dispatchEvent({type:"dispose"})}}let E=0}),"./src/WebGL/core/UVMapping.ts":((s,i,n)=>{n.r(i),n.d(i,{UVMapping:()=>a});class a{}}),"./src/WebGL/core/index.ts":((s,i,n)=>{n.r(i),n.d(i,{EventDispatcher:()=>a.EventDispatcher,Geometry:()=>d.Geometry,GeometryGroup:()=>d.GeometryGroup,GeometryIDCount:()=>d.GeometryIDCount,Light:()=>y.Light,Object3D:()=>y.Object3D,Object3DIDCount:()=>y.Object3DIDCount,Projector:()=>C.Projector,Raycaster:()=>p.Raycaster,Scene:()=>y.Scene,Texture:()=>E.Texture,TextureIdCount:()=>E.TextureIdCount,UVMapping:()=>R.UVMapping,intersectObject:()=>p.intersectObject});var a=n("./src/WebGL/core/EventDispatcher.ts"),d=n("./src/WebGL/core/Geometry.ts"),y=n("./src/WebGL/core/Object3D.ts"),C=n("./src/WebGL/core/Projector.ts"),p=n("./src/WebGL/core/Raycaster.ts"),E=n("./src/WebGL/core/Texture.ts"),R=n("./src/WebGL/core/UVMapping.ts")}),"./src/WebGL/index.ts":((s,i,n)=>{n.r(i),n.d(i,{BackSide:()=>a.BackSide,Camera:()=>x.Camera,ClampToEdgeWrapping:()=>a.ClampToEdgeWrapping,Coloring:()=>a.Coloring,Cylinder:()=>R.Cylinder,DoubleSide:()=>a.DoubleSide,EventDispatcher:()=>d.EventDispatcher,FloatType:()=>a.FloatType,Fog:()=>A.Fog,FrontSide:()=>a.FrontSide,Geometry:()=>d.Geometry,GeometryGroup:()=>d.GeometryGroup,GeometryIDCount:()=>d.GeometryIDCount,ImposterMaterial:()=>y.ImposterMaterial,InstancedMaterial:()=>y.InstancedMaterial,Light:()=>d.Light,Line:()=>p.Line,LineBasicMaterial:()=>y.LineBasicMaterial,LineStyle:()=>p.LineStyle,LinearFilter:()=>a.LinearFilter,LinearMipMapLinearFilter:()=>a.LinearMipMapLinearFilter,Material:()=>y.Material,MaterialIdCount:()=>y.MaterialIdCount,Matrix3:()=>C.Matrix3,Matrix4:()=>C.Matrix4,Mesh:()=>p.Mesh,MeshDoubleLambertMaterial:()=>y.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>y.MeshLambertMaterial,MeshOutlineMaterial:()=>y.MeshOutlineMaterial,NearestFilter:()=>a.NearestFilter,Object3D:()=>d.Object3D,Object3DIDCount:()=>d.Object3DIDCount,Projector:()=>d.Projector,Quaternion:()=>C.Quaternion,R32Format:()=>a.R32Format,RFormat:()=>a.RFormat,RGBAFormat:()=>a.RGBAFormat,Ray:()=>C.Ray,Raycaster:()=>d.Raycaster,Renderer:()=>w.Renderer,Scene:()=>d.Scene,ShaderLib:()=>E.ShaderLib,ShaderUtils:()=>E.ShaderUtils,Shading:()=>a.Shading,Sphere:()=>R.Sphere,SphereImposterMaterial:()=>y.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>y.SphereImposterOutlineMaterial,Sprite:()=>p.Sprite,SpriteAlignment:()=>a.SpriteAlignment,SpriteMaterial:()=>y.SpriteMaterial,SpritePlugin:()=>T.SpritePlugin,StickImposterMaterial:()=>y.StickImposterMaterial,StickImposterOutlineMaterial:()=>y.StickImposterOutlineMaterial,Texture:()=>d.Texture,TextureIdCount:()=>d.TextureIdCount,TextureOperations:()=>a.TextureOperations,Triangle:()=>R.Triangle,UVMapping:()=>d.UVMapping,UnsignedByteType:()=>a.UnsignedByteType,Vector2:()=>C.Vector2,Vector3:()=>C.Vector3,VolumetricMaterial:()=>y.VolumetricMaterial,basic:()=>E.basic,clamp:()=>C.clamp,clone:()=>E.clone,conversionMatrix3:()=>C.conversionMatrix3,degToRad:()=>C.degToRad,instanced:()=>E.instanced,intersectObject:()=>d.intersectObject,lambert:()=>E.lambert,lambertdouble:()=>E.lambertdouble,outline:()=>E.outline,screen:()=>E.screen,screenaa:()=>E.screenaa,sphereimposter:()=>E.sphereimposter,sphereimposteroutline:()=>E.sphereimposteroutline,sprite:()=>E.sprite,stickimposter:()=>E.stickimposter,stickimposteroutline:()=>E.stickimposteroutline,volumetric:()=>E.volumetric});var a=n("./src/WebGL/constants/index.ts"),d=n("./src/WebGL/core/index.ts"),y=n("./src/WebGL/materials/index.ts"),C=n("./src/WebGL/math/index.ts"),p=n("./src/WebGL/objects/index.ts"),E=n("./src/WebGL/shaders/index.ts"),R=n("./src/WebGL/shapes/index.ts"),x=n("./src/WebGL/Camera.ts"),A=n("./src/WebGL/Fog.ts"),w=n("./src/WebGL/Renderer.ts"),T=n("./src/WebGL/SpritePlugin.ts")}),"./src/WebGL/materials/ImposterMaterial.ts":((s,i,n)=>{n.r(i),n.d(i,{ImposterMaterial:()=>E});var a=n("./src/WebGL/constants/Coloring.ts"),d=n("./src/WebGL/constants/Shading.ts"),y=n("./src/colors.ts"),C=n("./src/WebGL/math/index.ts"),p=n("./src/WebGL/materials/Material.ts");class E extends p.Material{constructor(x){super(),this.color=new y.Color(16777215),this.ambient=new y.Color(1048575),this.emissive=new y.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new C.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=d.Shading.SmoothShading,this.shaderID=null,this.vertexColors=a.Coloring.NoColors,this.skinning=!1,this.setValues(x)}clone(x=new E){return super.clone.call(this,x),x.color.copy(this.color),x.ambient.copy(this.ambient),x.emissive.copy(this.emissive),x.wrapAround=this.wrapAround,x.wrapRGB.copy(this.wrapRGB),x.map=this.map,x.lightMap=this.lightMap,x.specularMap=this.specularMap,x.envMap=this.envMap,x.combine=this.combine,x.reflectivity=this.reflectivity,x.refractionRatio=this.refractionRatio,x.fog=this.fog,x.shading=this.shading,x.shaderID=this.shaderID,x.vertexColors=this.vertexColors,x.skinning=this.skinning,x.morphTargets=this.morphTargets,x.morphNormals=this.morphNormals,x}}}),"./src/WebGL/materials/InstancedMaterial.ts":((s,i,n)=>{n.r(i),n.d(i,{InstancedMaterial:()=>E});var a=n("./src/WebGL/constants/Coloring.ts"),d=n("./src/WebGL/constants/Shading.ts"),y=n("./src/colors.ts"),C=n("./src/WebGL/math/index.ts"),p=n("./src/WebGL/materials/Material.ts");class E extends p.Material{constructor(x){super(),this.color=new y.Color(16777215),this.ambient=new y.Color(1048575),this.emissive=new y.Color(0),this.wrapAround=!1,this.wrapRGB=new C.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=d.Shading.SmoothShading,this.shaderID="instanced",this.vertexColors=a.Coloring.NoColors,this.skinning=!1,this.sphere=null,this.setValues(x)}clone(x=new E){return super.clone.call(this,x),x.color.copy(this.color),x.ambient.copy(this.ambient),x.emissive.copy(this.emissive),x.wrapAround=this.wrapAround,x.wrapRGB.copy(this.wrapRGB),x.map=this.map,x.lightMap=this.lightMap,x.specularMap=this.specularMap,x.envMap=this.envMap,x.combine=this.combine,x.reflectivity=this.reflectivity,x.refractionRatio=this.refractionRatio,x.fog=this.fog,x.shading=this.shading,x.shaderID=this.shaderID,x.vertexColors=this.vertexColors,x.skinning=this.skinning,x.morphTargets=this.morphTargets,x.morphNormals=this.morphNormals,x.sphere=this.sphere,x}}}),"./src/WebGL/materials/LineBasicMaterial.ts":((s,i,n)=>{n.r(i),n.d(i,{LineBasicMaterial:()=>y});var a=n("./src/colors.ts"),d=n("./src/WebGL/materials/Material.ts");class y extends d.Material{constructor(p){super(),this.color=new a.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(p)}clone(p=new y){return super.clone.call(this,p),p.color.copy(this.color),p}}}),"./src/WebGL/materials/Material.ts":((s,i,n)=>{n.r(i),n.d(i,{Material:()=>p,MaterialIdCount:()=>E});var a=n("./src/WebGL/constants/Sides.ts"),d=n("./src/WebGL/core/index.ts"),y=n("./src/WebGL/math/index.ts"),C=n("./src/colors.ts");class p extends d.EventDispatcher{constructor(){super(...arguments),this.id=E++,this.name="",this.side=a.FrontSide,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0,this.outline=!1,this.wireframe=!1,this.shaded=!1}setValues(x={}){if(x!==void 0)for(var A in x){var w=x[A];if(w===void 0){console.warn("$3Dmol.Material: '"+A+"' parameter is undefined.");continue}if(A in this){var T=this[A];T instanceof C.Color&&w instanceof C.Color?T.copy(w):T instanceof C.Color?T.set(w):T instanceof y.Vector3&&w instanceof y.Vector3?T.copy(w):this[A]=w}}}clone(x=new p){return x.name=this.name,x.side=this.side,x.opacity=this.opacity,x.transparent=this.transparent,x.depthTest=this.depthTest,x.depthWrite=this.depthWrite,x.polygonOffset=this.polygonOffset,x.polygonOffsetFactor=this.polygonOffsetFactor,x.polygonOffsetUnits=this.polygonOffsetUnits,x.alphaTest=this.alphaTest,x.overdraw=this.overdraw,x.visible=this.visible,x}makeShaded(x){this.shaded=!0,this.uniforms&&(this.uniforms.shading={type:"i",value:x},this.uniforms.vWidth={type:"f",value:1},this.uniforms.vHeight={type:"f",value:1})}dispose(){this.dispatchEvent({type:"dispose"})}}let E=0}),"./src/WebGL/materials/MeshDoubleLambertMaterial.ts":((s,i,n)=>{n.r(i),n.d(i,{MeshDoubleLambertMaterial:()=>y});var a=n("./src/WebGL/constants/Sides.ts"),d=n("./src/WebGL/materials/MeshLambertMaterial.ts");class y extends d.MeshLambertMaterial{constructor(p){super(p),this.shaderID="lambertdouble",this.side=a.DoubleSide,this.outline=!1}clone(p=new y){return super.clone.call(this,p),p}}}),"./src/WebGL/materials/MeshLambertMaterial.ts":((s,i,n)=>{n.r(i),n.d(i,{MeshLambertMaterial:()=>E});var a=n("./src/WebGL/constants/Coloring.ts"),d=n("./src/WebGL/constants/Shading.ts"),y=n("./src/WebGL/materials/Material.ts"),C=n("./src/colors.ts"),p=n("./src/WebGL/math/index.ts");class E extends y.Material{constructor(x){super(),this.color=new C.Color(16777215),this.ambient=new C.Color(1048575),this.emissive=new C.Color(0),this.wrapAround=!1,this.wrapRGB=new p.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=d.Shading.SmoothShading,this.shaderID="lambert",this.vertexColors=a.Coloring.NoColors,this.skinning=!1,this.setValues(x)}clone(x=new E){return super.clone.call(this,x),x.color.copy(this.color),x.ambient.copy(this.ambient),x.emissive.copy(this.emissive),x.wrapAround=this.wrapAround,x.wrapRGB.copy(this.wrapRGB),x.map=this.map,x.lightMap=this.lightMap,x.specularMap=this.specularMap,x.envMap=this.envMap,x.combine=this.combine,x.reflectivity=this.reflectivity,x.refractionRatio=this.refractionRatio,x.fog=this.fog,x.shading=this.shading,x.shaderID=this.shaderID,x.vertexColors=this.vertexColors,x.skinning=this.skinning,x.morphTargets=this.morphTargets,x.morphNormals=this.morphNormals,x}}}),"./src/WebGL/materials/MeshOutlineMaterial.ts":((s,i,n)=>{n.r(i),n.d(i,{MeshOutlineMaterial:()=>y});var a=n("./src/colors.ts"),d=n("./src/WebGL/materials/Material.ts");class y extends d.Material{constructor(p){super(),p=p||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=a.CC.color(p.color||new a.Color(0,0,0)),this.outlineWidth=p.width||.1,this.outlinePushback=p.pushback||1,this.outlineMaxPixels=p.maxpixels||0}clone(p=new y){return super.clone.call(this,p),p.fog=this.fog,p.shaderID=this.shaderID,p.wireframe=this.wireframe,p.outlineColor=this.outlineColor,p.outlineWidth=this.outlineWidth,p.outlinePushback=this.outlinePushback,p.outlineMaxPixels=this.outlineMaxPixels,p}}}),"./src/WebGL/materials/SphereImposterMaterial.ts":((s,i,n)=>{n.r(i),n.d(i,{SphereImposterMaterial:()=>d});var a=n("./src/WebGL/materials/ImposterMaterial.ts");class d extends a.ImposterMaterial{constructor(C){super(C),this.shaderID="sphereimposter",this.setValues(C)}clone(C=new d){return super.clone.call(this,C),C}}}),"./src/WebGL/materials/SphereImposterOutlineMaterial.ts":((s,i,n)=>{n.r(i),n.d(i,{SphereImposterOutlineMaterial:()=>y});var a=n("./src/colors.ts"),d=n("./src/WebGL/materials/ImposterMaterial.ts");class y extends d.ImposterMaterial{constructor(p){super(p),p=p||{},this.shaderID="sphereimposteroutline",this.outlineColor=a.CC.color(p.color||new a.Color(0,0,0)),this.outlineWidth=p.width||.1,this.outlinePushback=p.pushback||1,this.outlineMaxPixels=p.maxpixels||0,this.setValues(p)}clone(p=new y){return super.clone.call(this,p),p.outlineColor=this.outlineColor,p.outlineWidth=this.outlineWidth,p.outlinePushback=this.outlinePushback,p.outlineMaxPixels=this.outlineMaxPixels,p}}}),"./src/WebGL/materials/SpriteMaterial.ts":((s,i,n)=>{n.r(i),n.d(i,{SpriteMaterial:()=>E});var a=n("./src/WebGL/constants/SpriteAlignment.ts"),d=n("./src/WebGL/core/Texture.ts"),y=n("./src/colors.ts"),C=n("./src/WebGL/math/index.ts"),p=n("./src/WebGL/materials/Material.ts");class E extends p.Material{constructor(x){super(),this.color=new y.Color(16777215),this.map=new d.Texture,this.useScreenCoordinates=!0,this.fog=!1,this.uvOffset=new C.Vector2(0,0),this.uvScale=new C.Vector2(1,1),this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.screenOffset=this.screenOffset,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=a.SpriteAlignment.center.clone(),this.setValues(x),x=x||{},x.depthTest===void 0&&(this.depthTest=!this.useScreenCoordinates),x.sizeAttenuation===void 0&&(this.sizeAttenuation=!this.useScreenCoordinates),x.scaleByViewPort===void 0&&(this.scaleByViewPort=!this.sizeAttenuation)}clone(x=new E){return super.clone.call(this,x),x.color.copy(this.color),x.map=this.map,x.useScreenCoordinates=this.useScreenCoordinates,x.screenOffset=this.screenOffset,x.sizeAttenuation=this.sizeAttenuation,x.scaleByViewport=this.scaleByViewPort,x.alignment.copy(this.alignment),x.uvOffset.copy(this.uvOffset),x}}}),"./src/WebGL/materials/StickImposterMaterial.ts":((s,i,n)=>{n.r(i),n.d(i,{StickImposterMaterial:()=>d});var a=n("./src/WebGL/materials/ImposterMaterial.ts");class d extends a.ImposterMaterial{constructor(C){super(C),this.shaderID="stickimposter",this.setValues(C)}clone(C=new d){return super.clone.call(this,C),C}}}),"./src/WebGL/materials/StickImposterOutlineMaterial.ts":((s,i,n)=>{n.r(i),n.d(i,{StickImposterOutlineMaterial:()=>y});var a=n("./src/colors.ts"),d=n("./src/WebGL/materials/ImposterMaterial.ts");class y extends d.ImposterMaterial{constructor(p={}){super(p),this.shaderID="stickimposteroutline",this.outlineColor=new a.Color(0,0,0),this.outlineWidth=.1,this.outlinePushback=1,this.outlineMaxPixels=0,p.color&&(this.outlineColor=a.CC.color(p.color)),p.width&&(this.outlineWidth=p.width),p.pushback&&(this.outlinePushback=p.pushback),p.maxpixels&&(this.outlineMaxPixels=p.maxpixels),this.setValues(p)}clone(p=new y){return super.clone.call(this,p),p.outlineColor=this.outlineColor,p.outlineWidth=this.outlineWidth,p.outlinePushback=this.outlinePushback,p.outlineMaxPixels=this.outlineMaxPixels,p}}}),"./src/WebGL/materials/VolumetricMaterial.ts":((s,i,n)=>{n.r(i),n.d(i,{VolumetricMaterial:()=>C});var a=n("./src/WebGL/constants/Sides.ts"),d=n("./src/colors.ts"),y=n("./src/WebGL/materials/Material.ts");class C extends y.Material{constructor(E){super(),this.transparent=!1,this.volumetric=!0,this.color=new d.Color(16777215),this.transferfn=null,this.map=void 0,this.extent=[],this.maxdepth=100,this.unit=0,this.texmatrix=null,this.transfermin=-1,this.transfermax=1,this.subsamples=5,this.shaderID="volumetric",this.side=a.FrontSide,this.setValues(E)}clone(E=new C){return super.clone.call(this,E),E.transparent=this.transparent,E.volumetric=this.volumetric,E.color=this.color,E.transferfn=this.transferfn,E.map=this.map,E.extent=this.extent,E.maxdepth=this.maxdepth,E.unit=this.unit,E.texmatrix=this.texmatrix,E.transfermin=this.transfermin,E.transfermax=this.transfermax,E.subsamples=this.subsamples,E.shaderID=this.shaderID,E.side=this.side,E}}}),"./src/WebGL/materials/index.ts":((s,i,n)=>{n.r(i),n.d(i,{ImposterMaterial:()=>a.ImposterMaterial,InstancedMaterial:()=>d.InstancedMaterial,LineBasicMaterial:()=>y.LineBasicMaterial,Material:()=>C.Material,MaterialIdCount:()=>C.MaterialIdCount,MeshDoubleLambertMaterial:()=>p.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>E.MeshLambertMaterial,MeshOutlineMaterial:()=>R.MeshOutlineMaterial,SphereImposterMaterial:()=>x.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>A.SphereImposterOutlineMaterial,SpriteMaterial:()=>w.SpriteMaterial,StickImposterMaterial:()=>T.StickImposterMaterial,StickImposterOutlineMaterial:()=>M.StickImposterOutlineMaterial,VolumetricMaterial:()=>h.VolumetricMaterial});var a=n("./src/WebGL/materials/ImposterMaterial.ts"),d=n("./src/WebGL/materials/InstancedMaterial.ts"),y=n("./src/WebGL/materials/LineBasicMaterial.ts"),C=n("./src/WebGL/materials/Material.ts"),p=n("./src/WebGL/materials/MeshDoubleLambertMaterial.ts"),E=n("./src/WebGL/materials/MeshLambertMaterial.ts"),R=n("./src/WebGL/materials/MeshOutlineMaterial.ts"),x=n("./src/WebGL/materials/SphereImposterMaterial.ts"),A=n("./src/WebGL/materials/SphereImposterOutlineMaterial.ts"),w=n("./src/WebGL/materials/SpriteMaterial.ts"),T=n("./src/WebGL/materials/StickImposterMaterial.ts"),M=n("./src/WebGL/materials/StickImposterOutlineMaterial.ts"),h=n("./src/WebGL/materials/VolumetricMaterial.ts")}),"./src/WebGL/math/Quaternion.ts":((s,i,n)=>{n.r(i),n.d(i,{Quaternion:()=>a});class a{constructor(y,C,p,E){this.x=y||0,this.y=C||0,this.z=p||0,this.w=E!==void 0?E:1}set(y,C,p,E){return this.x=y,this.y=C,this.z=p,this.w=E,this}copy(y){return this.x=y.x,this.y=y.y,this.z=y.z,this.w=y.w,this}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}inverse(){return this.conjugate().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthxyz(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let y=this.length();return y===0?(this.x=0,this.y=0,this.z=0,this.w=1):(y=1/y,this.x*=y,this.y*=y,this.z*=y,this.w*=y),this}multiply(y){return this.multiplyQuaternions(this,y)}multiplyScalar(y){return this.x*=y,this.y*=y,this.z*=y,this.w*=y,this}multiplyQuaternions(y,C){const p=y.x,E=y.y,R=y.z,x=y.w,A=C.x,w=C.y,T=C.z,M=C.w;return this.x=p*M+x*A+E*T-R*w,this.y=E*M+x*w+R*A-p*T,this.z=R*M+x*T+p*w-E*A,this.w=x*M-p*A-E*w-R*T,this}sub(y){return this.x-=y.x,this.y-=y.y,this.z-=y.z,this.w-=y.w,this}clone(){return new a(this.x,this.y,this.z,this.w)}setFromEuler(y){const C=Math.cos(y.x/2),p=Math.cos(y.y/2),E=Math.cos(y.z/2),R=Math.sin(y.x/2),x=Math.sin(y.y/2),A=Math.sin(y.z/2);return this.x=R*p*E+C*x*A,this.y=C*x*E-R*p*A,this.z=C*p*A+R*x*E,this.w=C*p*E-R*x*A,this}}}),"./src/WebGL/math/Vector2.ts":((s,i,n)=>{n.r(i),n.d(i,{Vector2:()=>a});class a{constructor(y,C){this.x=y||0,this.y=C||0}set(y,C){return this.x=y,this.y=C,this}subVectors(y,C){return this.x=y.x-C.x,this.y=y.y-C.y,this}copy(y){return this.x=y.x,this.y=y.y,this}clone(){return new a(this.x,this.y)}}}),"./src/WebGL/math/index.ts":((s,i,n)=>{n.r(i),n.d(i,{Matrix3:()=>E.Matrix3,Matrix4:()=>E.Matrix4,Quaternion:()=>a.Quaternion,Ray:()=>E.Ray,Vector2:()=>d.Vector2,Vector3:()=>E.Vector3,clamp:()=>y.clamp,conversionMatrix3:()=>C.conversionMatrix3,degToRad:()=>p.degToRad});var a=n("./src/WebGL/math/Quaternion.ts"),d=n("./src/WebGL/math/Vector2.ts"),y=n("./src/WebGL/math/utils/clamp.ts"),C=n("./src/WebGL/math/utils/conversionMatrix3.ts"),p=n("./src/WebGL/math/utils/degToRad.ts"),E=n("./src/WebGL/math/math.ts")}),"./src/WebGL/math/math.ts":((s,i,n)=>{n.r(i),n.d(i,{Matrix3:()=>w,Matrix4:()=>x,Ray:()=>T,Vector3:()=>A});var a=n("./src/WebGL/math/utils/degToRad.ts"),d=n("./src/WebGL/math/utils/clamp.ts"),y,C,p,E,R;class x{constructor(h=1,l=0,c=0,g=0,v=0,b=1,S=0,u=0,m=0,_=0,D=1,L=0,P=0,N=0,U=0,V=1){typeof h<"u"&&typeof h!="number"?this.elements=new Float32Array(h):(this.elements=new Float32Array(16),this.elements[0]=h,this.elements[4]=l,this.elements[8]=c,this.elements[12]=g,this.elements[1]=v,this.elements[5]=b,this.elements[9]=S,this.elements[13]=u,this.elements[2]=m,this.elements[6]=_,this.elements[10]=D,this.elements[14]=L,this.elements[3]=P,this.elements[7]=N,this.elements[11]=U,this.elements[15]=V)}makeScale(h,l,c){throw new Error("Method not implemented.")}set(h,l,c,g,v,b,S,u,m,_,D,L,P,N,U,V){const W=this.elements;return W[0]=h,W[4]=l,W[8]=c,W[12]=g,W[1]=v,W[5]=b,W[9]=S,W[13]=u,W[2]=m,W[6]=_,W[10]=D,W[14]=L,W[3]=P,W[7]=N,W[11]=U,W[15]=V,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}copy(h){const l=h.elements;return this.set(l[0],l[4],l[8],l[12],l[1],l[5],l[9],l[13],l[2],l[6],l[10],l[14],l[3],l[7],l[11],l[15]),this}matrix3FromTopLeft(){const h=this.elements;return new w(h[0],h[4],h[8],h[1],h[5],h[9],h[2],h[6],h[10])}setRotationFromEuler(h,l){const c=this.elements,{x:g,y:v,z:b}=h,S=Math.cos(g),u=Math.sin(g),m=Math.cos(v),_=Math.sin(v),D=Math.cos(b),L=Math.sin(b);if(l===void 0||l==="XYZ"){const P=S*D,N=S*L,U=u*D,V=u*L;c[0]=m*D,c[4]=-m*L,c[8]=_,c[1]=N+U*_,c[5]=P-V*_,c[9]=-u*m,c[2]=V-P*_,c[6]=U+N*_,c[10]=S*m}else console.error(`Error with matrix4 setRotationFromEuler. Order: ${l}`);return this}setRotationFromQuaternion(h){const l=this.elements,{x:c,y:g,z:v,w:b}=h,S=c+c,u=g+g,m=v+v,_=c*S,D=c*u,L=c*m,P=g*u,N=g*m,U=v*m,V=b*S,W=b*u,G=b*m;return l[0]=1-(P+U),l[4]=D-G,l[8]=L+W,l[1]=D+G,l[5]=1-(_+U),l[9]=N-V,l[2]=L-W,l[6]=N+V,l[10]=1-(_+P),this}multiplyMatrices(h,l){const c=h.elements,g=l.elements,v=this.elements,b=c[0],S=c[4],u=c[8],m=c[12],_=c[1],D=c[5],L=c[9],P=c[13],N=c[2],U=c[6],V=c[10],W=c[14],G=c[3],H=c[7],k=c[11],X=c[15],$=g[0],F=g[4],K=g[8],te=g[12],re=g[1],le=g[5],oe=g[9],ue=g[13],he=g[2],ge=g[6],Oe=g[10],Le=g[14],$e=g[3],we=g[7],ce=g[11],xe=g[15];return v[0]=b*$+S*re+u*he+m*$e,v[4]=b*F+S*le+u*ge+m*we,v[8]=b*K+S*oe+u*Oe+m*ce,v[12]=b*te+S*ue+u*Le+m*xe,v[1]=_*$+D*re+L*he+P*$e,v[5]=_*F+D*le+L*ge+P*we,v[9]=_*K+D*oe+L*Oe+P*ce,v[13]=_*te+D*ue+L*Le+P*xe,v[2]=N*$+U*re+V*he+W*$e,v[6]=N*F+U*le+V*ge+W*we,v[10]=N*K+U*oe+V*Oe+W*ce,v[14]=N*te+U*ue+V*Le+W*xe,v[3]=G*$+H*re+k*he+X*$e,v[7]=G*F+H*le+k*ge+X*we,v[11]=G*K+H*oe+k*Oe+X*ce,v[15]=G*te+H*ue+k*Le+X*xe,this}multiplyScalar(h){const l=this.elements;return l[0]*=h,l[4]*=h,l[8]*=h,l[12]*=h,l[1]*=h,l[5]*=h,l[9]*=h,l[13]*=h,l[2]*=h,l[6]*=h,l[10]*=h,l[14]*=h,l[3]*=h,l[7]*=h,l[11]*=h,l[15]*=h,this}makeTranslation(h,l,c){return this.set(1,0,0,h,0,1,0,l,0,0,1,c,0,0,0,1),this}snap(h){const l=Math.pow(10,4),c=this.elements;for(let g=0;g<16;g++){const v=Math.round(c[g]);v===Math.round(c[g]*l)/l&&(c[g]=v)}return this}transpose(){const h=this.elements;let l;return l=h[1],h[1]=h[4],h[4]=l,l=h[2],h[2]=h[8],h[8]=l,l=h[6],h[6]=h[9],h[9]=l,l=h[3],h[3]=h[12],h[12]=l,l=h[7],h[7]=h[13],h[13]=l,l=h[11],h[11]=h[14],h[14]=l,this}setPosition(h){const l=this.elements;return l[12]=h.x,l[13]=h.y,l[14]=h.z,this}translate(h){const l=this.elements;return l[12]+=h.x,l[13]+=h.y,l[14]+=h.z,this}getInverse(h,l){const c=this.elements,g=h.elements,v=g[0],b=g[4],S=g[8],u=g[12],m=g[1],_=g[5],D=g[9],L=g[13],P=g[2],N=g[6],U=g[10],V=g[14],W=g[3],G=g[7],H=g[11],k=g[15];c[0]=D*V*G-L*U*G+L*N*H-_*V*H-D*N*k+_*U*k,c[4]=u*U*G-S*V*G-u*N*H+b*V*H+S*N*k-b*U*k,c[8]=S*L*G-u*D*G+u*_*H-b*L*H-S*_*k+b*D*k,c[12]=u*D*N-S*L*N-u*_*U+b*L*U+S*_*V-b*D*V,c[1]=L*U*W-D*V*W-L*P*H+m*V*H+D*P*k-m*U*k,c[5]=S*V*W-u*U*W+u*P*H-v*V*H-S*P*k+v*U*k,c[9]=u*D*W-S*L*W-u*m*H+v*L*H+S*m*k-v*D*k,c[13]=S*L*P-u*D*P+u*m*U-v*L*U-S*m*V+v*D*V,c[2]=_*V*W-L*N*W+L*P*G-m*V*G-_*P*k+m*N*k,c[6]=u*N*W-b*V*W-u*P*G+v*V*G+b*P*k-v*N*k,c[10]=b*L*W-u*_*W+u*m*G-v*L*G-b*m*k+v*_*k,c[14]=u*_*P-b*L*P-u*m*N+v*L*N+b*m*V-v*_*V,c[3]=D*N*W-_*U*W-D*P*G+m*U*G+_*P*H-m*N*H,c[7]=b*U*W-S*N*W+S*P*G-v*U*G-b*P*H+v*N*H,c[11]=S*_*W-b*D*W-S*m*G+v*D*G+b*m*H-v*_*H,c[15]=b*D*P-S*_*P+S*m*N-v*D*N-b*m*U+v*_*U;const X=v*c[0]+m*c[4]+P*c[8]+W*c[12];if(X===0){const $="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(l)throw new Error($);return console.warn($),this.identity(),this}return this.multiplyScalar(1/X),this}isReflected(){const h=this.elements,l=h[0],c=h[4],g=h[8],v=h[1],b=h[5],S=h[9],u=h[2],m=h[6],_=h[10];return l*b*_+v*m*g+u*c*S-u*b*g-v*c*_-l*m*S<0}scale(h){const l=this.elements,{x:c}=h,{y:g}=h,{z:v}=h;return l[0]*=c,l[4]*=g,l[8]*=v,l[1]*=c,l[5]*=g,l[9]*=v,l[2]*=c,l[6]*=g,l[10]*=v,l[3]*=c,l[7]*=g,l[11]*=v,this}getMaxScaleOnAxis(){const h=this.elements,l=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],c=h[4]*h[4]+h[5]*h[5]+h[6]*h[6],g=h[8]*h[8]+h[9]*h[9]+h[10]*h[10];return Math.sqrt(Math.max(l,Math.max(c,g)))}makeFrustum(h,l,c,g,v,b){const S=this.elements,u=2*v/(l-h),m=2*v/(g-c),_=(l+h)/(l-h),D=(g+c)/(g-c),L=-(b+v)/(b-v),P=-2*b*v/(b-v);return S[0]=u,S[4]=0,S[8]=_,S[12]=0,S[1]=0,S[5]=m,S[9]=D,S[13]=0,S[2]=0,S[6]=0,S[10]=L,S[14]=P,S[3]=0,S[7]=0,S[11]=-1,S[15]=0,this}makePerspective(h,l,c,g){const v=c*Math.tan((0,a.degToRad)(h*.5)),b=-v,S=b*l,u=v*l;return this.makeFrustum(S,u,b,v,c,g)}makeOrthographic(h,l,c,g,v,b){const S=this.elements,u=1/(l-h),m=1/(c-g),_=1/(b-v),D=(l+h)*u,L=(c+g)*m,P=(b+v)*_;return S[0]=2*u,S[4]=0,S[8]=0,S[12]=-D,S[1]=0,S[5]=2*m,S[9]=0,S[13]=-L,S[2]=0,S[6]=0,S[10]=-2*_,S[14]=-P,S[3]=0,S[7]=0,S[11]=0,S[15]=1,this}isEqual(h){const l=h.elements,c=this.elements;return c[0]===l[0]&&c[4]===l[4]&&c[8]===l[8]&&c[12]===l[12]&&c[1]===l[1]&&c[5]===l[5]&&c[9]===l[9]&&c[13]===l[13]&&c[2]===l[2]&&c[6]===l[6]&&c[10]===l[10]&&c[14]===l[14]&&c[3]===l[3]&&c[7]===l[7]&&c[11]===l[11]&&c[15]===l[15]}clone(){const h=this.elements;return new x(h[0],h[4],h[8],h[12],h[1],h[5],h[9],h[13],h[2],h[6],h[10],h[14],h[3],h[7],h[11],h[15])}isIdentity(){const h=this.elements;return h[0]===1&&h[4]===0&&h[8]===0&&h[12]===0&&h[1]===0&&h[5]===1&&h[9]===0&&h[13]===0&&h[2]===0&&h[6]===0&&h[10]===1&&h[14]===0&&h[3]===0&&h[7]===0&&h[11]===0&&h[15]===1}isNearlyIdentity(h){return this.clone().snap(h).isIdentity()}getScale(h){const l=this.elements;return h=h||new A,p.set(l[0],l[1],l[2]),E.set(l[4],l[5],l[6]),R.set(l[8],l[9],l[10]),h.x=p.length(),h.y=E.length(),h.z=R.length(),h}lookAt(h,l,c){const g=this.elements;return R.subVectors(h,l).normalize(),R.length()===0&&(R.z=1),p.crossVectors(c,R).normalize(),p.length()===0&&(R.x+=1e-4,p.crossVectors(c,R).normalize()),E.crossVectors(R,p),g[0]=p.x,g[4]=E.x,g[8]=R.x,g[1]=p.y,g[5]=E.y,g[9]=R.y,g[2]=p.z,g[6]=E.z,g[10]=R.z,this}compose(h,l,c){const g=this.elements;return y.identity(),y.setRotationFromQuaternion(l),C.makeScale(c.x,c.y,c.z),this.multiplyMatrices(y,C),g[12]=h.x,g[13]=h.y,g[14]=h.z,this}}y=new x,C=new x;class A{constructor(h,l,c){this.x=h||0,this.y=l||0,this.z=c||0,this.atomid=void 0}set(h,l,c){return this.x=h,this.y=l,this.z=c,this}copy(h){return this.x=h.x,this.y=h.y,this.z=h.z,this}add(h){return this.x+=h.x,this.y+=h.y,this.z+=h.z,this}addVectors(h,l){return this.x=h.x+l.x,this.y=h.y+l.y,this.z=h.z+l.z,this}multiplyVectors(h,l){return this.x=h.x*l.x,this.y=h.y*l.y,this.z=h.z*l.z,this}sub(h){return this.x-=h.x,this.y-=h.y,this.z-=h.z,this}subVectors(h,l){return this.x=h.x-l.x,this.y=h.y-l.y,this.z=h.z-l.z,this}multiplyScalar(h){return this.x*=h,this.y*=h,this.z*=h,this}divideScalar(h){return h!==0?(this.x/=h,this.y/=h,this.z/=h):(this.x=0,this.y=0,this.z=0),this}max(h){return this.x=Math.max(this.x,h.x),this.y=Math.max(this.y,h.y),this.z=Math.max(this.z,h.z),this}min(h){return this.x=Math.min(this.x,h.x),this.y=Math.min(this.y,h.y),this.z=Math.min(this.z,h.z),this}distanceTo(h){return Math.sqrt(this.distanceToSquared(h))}distanceToSquared(h){const l=this.x-h.x,c=this.y-h.y,g=this.z-h.z;return l*l+c*c+g*g}applyMatrix3(h){const{x:l}=this,{y:c}=this,{z:g}=this,v=h.elements;return this.x=v[0]*l+v[3]*c+v[6]*g,this.y=v[1]*l+v[4]*c+v[7]*g,this.z=v[2]*l+v[5]*c+v[8]*g,this}applyMatrix4(h){const{x:l}=this,{y:c}=this,{z:g}=this,v=h.elements;return this.x=v[0]*l+v[4]*c+v[8]*g+v[12],this.y=v[1]*l+v[5]*c+v[9]*g+v[13],this.z=v[2]*l+v[6]*c+v[10]*g+v[14],this}applyProjection(h){const{x:l}=this,{y:c}=this,{z:g}=this,v=h.elements,b=v[3]*l+v[7]*c+v[11]*g+v[15];return this.x=(v[0]*l+v[4]*c+v[8]*g+v[12])/b,this.y=(v[1]*l+v[5]*c+v[9]*g+v[13])/b,this.z=(v[2]*l+v[6]*c+v[10]*g+v[14])/b,this}applyQuaternion(h){const{x:l}=this,{y:c}=this,{z:g}=this,v=h.x,b=h.y,S=h.z,u=h.w,m={};m.x=2*(c*S-g*b),m.y=2*(g*v-l*S),m.z=2*(l*b-c*v);const _={};return _.x=m.y*S-m.z*b,_.y=m.z*v-m.x*S,_.z=m.x*b-m.y*v,this.x=l+u*m.x+_.x,this.y=c+u*m.y+_.y,this.z=g+u*m.z+_.z,this}negate(){return this.multiplyScalar(-1)}dot(h){return this.x*h.x+this.y*h.y+this.z*h.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.divideScalar(this.length())}cross(h){const{x:l}=this,{y:c}=this,{z:g}=this;return this.x=c*h.z-g*h.y,this.y=g*h.x-l*h.z,this.z=l*h.y-c*h.x,this}crossVectors(h,l){return this.x=h.y*l.z-h.z*l.y,this.y=h.z*l.x-h.x*l.z,this.z=h.x*l.y-h.y*l.x,this}equals(h){return this.x==h.x&&this.y==h.y&&this.z==h.z}getPositionFromMatrix(h){return this.x=h.elements[12],this.y=h.elements[13],this.z=h.elements[14],this}setEulerFromRotationMatrix(h,l){const c=h.elements,g=c[0],v=c[4],b=c[8],S=c[5],u=c[9],m=c[6],_=c[10];return l===void 0||l==="XYZ"?(this.y=Math.asin((0,d.clamp)(b,-1,1)),Math.abs(b)<.99999?(this.x=Math.atan2(-u,_),this.z=Math.atan2(-v,g)):(this.x=Math.atan2(m,S),this.z=0)):console.error(`Error with vector's setEulerFromRotationMatrix: Unknown order: ${l}`),this}rotateAboutVector(h,l){h.normalize();const c=Math.cos(l),g=Math.sin(l),v=this.clone().multiplyScalar(c),b=h.clone().cross(this).multiplyScalar(g),S=h.clone().multiplyScalar(h.clone().dot(this)).multiplyScalar(1-c),u=v.add(b).add(S);return this.x=u.x,this.y=u.y,this.z=u.z,this}setFromMatrixPosition(h){const l=h.elements;return this.x=l[12],this.y=l[13],this.z=l[14],this}transformDirection(h){const{x:l}=this,{y:c}=this,{z:g}=this,v=h.elements;return this.x=v[0]*l+v[4]*c+v[8]*g,this.y=v[1]*l+v[5]*c+v[9]*g,this.z=v[2]*l+v[6]*c+v[10]*g,this.normalize()}clone(){return new A(this.x,this.y,this.z)}unproject(h){const l=y;return l.multiplyMatrices(h.matrixWorld,l.getInverse(h.projectionMatrix)),this.applyMatrix4(l)}}p=new A,E=new A,R=new A;class w{constructor(h=1,l=0,c=0,g=0,v=1,b=0,S=0,u=0,m=1){this.elements=new Float32Array(9),this.set(h,l,c,g,v,b,S,u,m)}set(h,l,c,g,v,b,S,u,m){const _=this.elements;return _[0]=h,_[3]=l,_[6]=c,_[1]=g,_[4]=v,_[7]=b,_[2]=S,_[5]=u,_[8]=m,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(h){const l=h.elements;this.set(l[0],l[3],l[6],l[1],l[4],l[7],l[2],l[5],l[8])}multiplyScalar(h){const l=this.elements;return l[0]*=h,l[3]*=h,l[6]*=h,l[1]*=h,l[4]*=h,l[7]*=h,l[2]*=h,l[5]*=h,l[8]*=h,this}getInverse3(h){const l=h.elements,c=this.elements;c[0]=l[4]*l[8]-l[5]*l[7],c[3]=l[6]*l[5]-l[3]*l[8],c[6]=l[3]*l[7]-l[6]*l[4],c[1]=l[7]*l[2]-l[1]*l[8],c[4]=l[0]*l[8]-l[6]*l[2],c[7]=l[1]*l[6]-l[0]*l[7],c[2]=l[1]*l[5]-l[2]*l[4],c[5]=l[2]*l[3]-l[0]*l[5],c[8]=l[0]*l[4]-l[1]*l[3];const g=l[0]*c[0]+l[3]*c[1]+l[6]*c[2];return this.multiplyScalar(1/g),this}getInverse(h,l){const c=h.elements,g=this.elements;g[0]=c[10]*c[5]-c[6]*c[9],g[1]=-c[10]*c[1]+c[2]*c[9],g[2]=c[6]*c[1]-c[2]*c[5],g[3]=-c[10]*c[4]+c[6]*c[8],g[4]=c[10]*c[0]-c[2]*c[8],g[5]=-c[6]*c[0]+c[2]*c[4],g[6]=c[9]*c[4]-c[5]*c[8],g[7]=-c[9]*c[0]+c[1]*c[8],g[8]=c[5]*c[0]-c[1]*c[4];const v=c[0]*g[0]+c[1]*g[3]+c[2]*g[6];if(v===0){const b="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(l)throw new Error(b);return console.warn(b),this.identity(),this}return this.multiplyScalar(1/v),this}getDeterminant(){const h=this.elements;return h[0]*h[4]*h[8]+h[1]*h[5]*h[6]+h[2]*h[3]*h[7]-h[2]*h[4]*h[6]-h[1]*h[3]*h[8]-h[0]*h[5]*h[7]}transpose(){let h;const l=this.elements;return h=l[1],l[1]=l[3],l[3]=h,h=l[2],l[2]=l[6],l[6]=h,h=l[5],l[5]=l[7],l[7]=h,this}clone(){const h=this.elements;return new w(h[0],h[3],h[6],h[1],h[4],h[7],h[2],h[5],h[8])}getMatrix4(){const h=this.elements;return new x(h[0],h[3],h[6],0,h[1],h[4],h[7],0,h[2],h[5],h[8],0)}}class T{constructor(h,l){this.origin=h!==void 0?h:new A,this.direction=l!==void 0?l:new A}set(h,l){return this.origin.copy(h),this.direction.copy(l),this}copy(h){return this.origin.copy(h.origin),this.direction.copy(h.direction),this}at(h,l){return(l||new A).copy(this.direction).multiplyScalar(h).add(this.origin)}recast(h){const l=p;return this.origin.copy(this.at(h,l)),this}closestPointToPoint(h,l){const c=l||new A;c.subVectors(h,this.origin);const g=c.dot(this.direction);return c.copy(this.direction).multiplyScalar(g).add(this.origin)}distanceToPoint(h){const l=p,c=l.subVectors(h,this.origin).dot(this.direction);return l.copy(this.direction).multiplyScalar(c).add(this.origin),l.distanceTo(h)}isIntersectionCylinder(){}isIntersectionSphere(h){return this.distanceToPoint(h.center)<=h.radius}isIntersectionPlane(h){return h.normal.dot(this.direction)!==0||h.distanceToPoint(this.origin)===0}distanceToPlane(h){const l=h.normal.dot(this.direction);return l===0?h.distanceToPoint(this.origin)===0?0:void 0:-(this.origin.dot(h.normal)+h.constant)/l}intersectPlane(h,l){const c=this.distanceToPlane(h);if(c!==void 0)return this.at(c,l)}applyMatrix4(h){return this.direction.add(this.origin).applyMatrix4(h),this.origin.applyMatrix4(h),this.direction.sub(this.origin),this}clone(){return new T().copy(this)}}}),"./src/WebGL/math/utils/clamp.ts":((s,i,n)=>{n.r(i),n.d(i,{clamp:()=>a});function a(d,y,C){return Math.min(Math.max(d,y),C)}}),"./src/WebGL/math/utils/conversionMatrix3.ts":((s,i,n)=>{n.r(i),n.d(i,{conversionMatrix3:()=>d});var a=n("./src/WebGL/math/math.ts");function d(y,C,p,E,R,x){E=E*Math.PI/180,R=R*Math.PI/180,x=x*Math.PI/180;const A=c=>c*c,w=Math.cos(E),T=Math.cos(R),M=Math.cos(x),h=Math.sin(x);return new a.Matrix3(y,C*M,p*T,0,C*h,p*(w-T*M)/h,0,0,p*Math.sqrt(1-A(w)-A(T)-A(M)+2*w*T*M)/h)}}),"./src/WebGL/math/utils/degToRad.ts":((s,i,n)=>{n.r(i),n.d(i,{degToRad:()=>d});const a=Math.PI/180;function d(y){return y*a}}),"./src/WebGL/objects/Line.ts":((s,i,n)=>{n.r(i),n.d(i,{Line:()=>C,LineStyle:()=>y});var a=n("./src/WebGL/materials/index.ts"),d=n("./src/WebGL/core/index.ts"),y;(function(p){p[p.LineStrip=0]="LineStrip",p[p.LinePieces=1]="LinePieces"})(y||(y={}));class C extends d.Object3D{constructor(E,R=new a.LineBasicMaterial({color:Math.random()*16777215}),x=y.LineStrip){super(),this.geometry=E,this.material=R,this.type=x}clone(E=new C(this.geometry,this.material,this.type)){return super.clone.call(this,E),E}}}),"./src/WebGL/objects/Mesh.ts":((s,i,n)=>{n.r(i),n.d(i,{Mesh:()=>d});var a=n("./src/WebGL/core/index.ts");class d extends a.Object3D{constructor(C,p){super(),this.geometry=C,this.material=p}clone(C){return C===void 0&&(C=new d(this.geometry,this.material)),super.clone.call(this,C),C}}}),"./src/WebGL/objects/Sprite.ts":((s,i,n)=>{n.r(i),n.d(i,{Sprite:()=>y});var a=n("./src/WebGL/materials/index.ts"),d=n("./src/WebGL/core/index.ts");class y extends d.Object3D{constructor(p=new a.SpriteMaterial){super(),this.material=p,this.rotation3d=this.rotation,this.rotation=0}updateMatrix(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),(this.scale.x!==1||this.scale.y!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}clone(p=new y(this.material)){return d.Object3D.prototype.clone.call(this,p),p}}}),"./src/WebGL/objects/index.ts":((s,i,n)=>{n.r(i),n.d(i,{Line:()=>a.Line,LineStyle:()=>a.LineStyle,Mesh:()=>d.Mesh,Sprite:()=>y.Sprite});var a=n("./src/WebGL/objects/Line.ts"),d=n("./src/WebGL/objects/Mesh.ts"),y=n("./src/WebGL/objects/Sprite.ts")}),"./src/WebGL/shaders/ShaderType.ts":((s,i,n)=>{n.r(i)}),"./src/WebGL/shaders/index.ts":((s,i,n)=>{n.r(i),n.d(i,{ShaderLib:()=>a.ShaderLib,ShaderUtils:()=>d.ShaderUtils,basic:()=>a.basic,clone:()=>d.clone,instanced:()=>a.instanced,lambert:()=>a.lambert,lambertdouble:()=>a.lambertdouble,outline:()=>a.outline,screen:()=>a.screen,screenaa:()=>a.screenaa,sphereimposter:()=>a.sphereimposter,sphereimposteroutline:()=>a.sphereimposteroutline,sprite:()=>a.sprite,stickimposter:()=>a.stickimposter,stickimposteroutline:()=>a.stickimposteroutline,volumetric:()=>a.volumetric});var a=n("./src/WebGL/shaders/lib/index.ts"),d=n("./src/WebGL/shaders/utils/index.ts");n("./src/WebGL/shaders/ShaderType.ts")}),"./src/WebGL/shaders/lib/basic/basic.frag":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`uniform mat4 viewMatrix;
uniform float opacity;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR
void main() {
    gl_FragColor = vec4( vColor, opacity );
    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`}),"./src/WebGL/shaders/lib/basic/basic.vert":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

attribute vec3 position;
attribute vec3 color;

varying vec3 vColor;
varying vec4 mvPosition;

void main() {

    vColor = color;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;

}`}),"./src/WebGL/shaders/lib/basic/index.ts":((s,i,n)=>{n.r(i),n.d(i,{basic:()=>C});var a=n("./src/WebGL/shaders/lib/basic/uniforms.ts"),d=n("./src/WebGL/shaders/lib/basic/basic.frag"),y=n("./src/WebGL/shaders/lib/basic/basic.vert");const C={vertexShader:y.default.replace("#define GLSLIFY 1",""),fragmentShader:d.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/basic/uniforms.ts":((s,i,n)=>{n.r(i),n.d(i,{uniforms:()=>d});var a=n("./src/colors.ts");const d={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}}}),"./src/WebGL/shaders/lib/blur/blur.frag":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`const float INV_TOTAL_SAMPLES_FACTOR = 1.0 / 9.0;
uniform highp sampler2D inTex;
varying highp vec2 vTexCoords;
    
void main() {
 
 vec2 texelSize = 1.0 / vec2(textureSize(inTex,0));
 float blurred_visibility_factor = 0.0f;
 for (int t = -1; t <= 1; ++t) {
  for (int s = -1; s <= 1; ++s) {
   vec2 offset = vec2(float(s), float(t)) * texelSize;
   blurred_visibility_factor += texture2D(inTex, vTexCoords + offset).r;
  }
 }
    
 gl_FragDepthEXT = blurred_visibility_factor * INV_TOTAL_SAMPLES_FACTOR;
 
}`}),"./src/WebGL/shaders/lib/blur/blur.vert":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `}),"./src/WebGL/shaders/lib/blur/index.ts":((s,i,n)=>{n.r(i),n.d(i,{blur:()=>C});var a=n("./src/WebGL/shaders/lib/blur/uniforms.ts"),d=n("./src/WebGL/shaders/lib/blur/blur.frag"),y=n("./src/WebGL/shaders/lib/blur/blur.vert");const C={fragmentShader:d.default,vertexShader:y.default,uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/blur/uniforms.ts":((s,i,n)=>{n.r(i),n.d(i,{uniforms:()=>a});const a={}}),"./src/WebGL/shaders/lib/index.ts":((s,i,n)=>{n.r(i),n.d(i,{ShaderLib:()=>g,basic:()=>a.basic,instanced:()=>d.instanced,lambert:()=>y.lambert,lambertdouble:()=>C.lambertdouble,outline:()=>p.outline,screen:()=>E.screen,screenaa:()=>R.screenaa,sphereimposter:()=>x.sphereimposter,sphereimposteroutline:()=>A.sphereimposteroutline,sprite:()=>w.sprite,stickimposter:()=>T.stickimposter,stickimposteroutline:()=>M.stickimposteroutline,volumetric:()=>h.volumetric});var a=n("./src/WebGL/shaders/lib/basic/index.ts"),d=n("./src/WebGL/shaders/lib/instanced/index.ts"),y=n("./src/WebGL/shaders/lib/lambert/index.ts"),C=n("./src/WebGL/shaders/lib/lambertdouble/index.ts"),p=n("./src/WebGL/shaders/lib/outline/index.ts"),E=n("./src/WebGL/shaders/lib/screen/index.ts"),R=n("./src/WebGL/shaders/lib/screenaa/index.ts"),x=n("./src/WebGL/shaders/lib/sphereimposter/index.ts"),A=n("./src/WebGL/shaders/lib/sphereimposteroutline/index.ts"),w=n("./src/WebGL/shaders/lib/sprite/index.ts"),T=n("./src/WebGL/shaders/lib/stickimposter/index.ts"),M=n("./src/WebGL/shaders/lib/stickimposteroutline/index.ts"),h=n("./src/WebGL/shaders/lib/volumetric/index.ts"),l=n("./src/WebGL/shaders/lib/ssao/index.ts"),c=n("./src/WebGL/shaders/lib/blur/index.ts");const g={basic:a.basic,blur:c.blur,instanced:d.instanced,lambert:y.lambert,lambertdouble:C.lambertdouble,outline:p.outline,screen:E.screen,screenaa:R.screenaa,ssao:l.ssao,sphereimposter:x.sphereimposter,sphereimposteroutline:A.sphereimposteroutline,sprite:w.sprite,stickimposter:T.stickimposter,stickimposteroutline:M.stickimposteroutline,volumetric:h.volumetric}}),"./src/WebGL/shaders/lib/instanced/index.ts":((s,i,n)=>{n.r(i),n.d(i,{instanced:()=>C});var a=n("./src/WebGL/shaders/lib/instanced/uniforms.ts"),d=n("./src/WebGL/shaders/lib/instanced/instanced.frag"),y=n("./src/WebGL/shaders/lib/instanced/instanced.vert");const C={fragmentShader:d.default.replace("#define GLSLIFY 1",""),vertexShader:y.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/instanced/instanced.frag":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`}),"./src/WebGL/shaders/lib/instanced/instanced.vert":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 offset;
attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}

`}),"./src/WebGL/shaders/lib/instanced/uniforms.ts":((s,i,n)=>{n.r(i),n.d(i,{uniforms:()=>d});var a=n("./src/colors.ts");const d={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}}),"./src/WebGL/shaders/lib/lambert/index.ts":((s,i,n)=>{n.r(i),n.d(i,{lambert:()=>C});var a=n("./src/WebGL/shaders/lib/lambert/uniforms.ts"),d=n("./src/WebGL/shaders/lib/lambert/lambert.frag"),y=n("./src/WebGL/shaders/lib/lambert/lambert.vert");const C={fragmentShader:d.default.replace("#define GLSLIFY 1",""),vertexShader:y.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/lambert/lambert.frag":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
varying vec4 mvPosition;


//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}`}),"./src/WebGL/shaders/lib/lambert/lambert.vert":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}`}),"./src/WebGL/shaders/lib/lambert/uniforms.ts":((s,i,n)=>{n.r(i),n.d(i,{uniforms:()=>d});var a=n("./src/colors.ts");const d={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}}),"./src/WebGL/shaders/lib/lambertdouble/index.ts":((s,i,n)=>{n.r(i),n.d(i,{lambertdouble:()=>C});var a=n("./src/WebGL/shaders/lib/lambertdouble/uniforms.ts"),d=n("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag"),y=n("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert");const C={fragmentShader:d.default.replace("#define GLSLIFY 1",""),vertexShader:y.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`
#ifdef SHADED
uniform highp sampler2D shading;
#endif

uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vLightBack;

varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    if ( gl_FrontFacing )
       gl_FragColor.xyz *= vLightFront;
    else
       gl_FragColor.xyz *= vLightBack;
    #endif

    vec3 color = vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( color, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}


`}),"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec3 vLightBack;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );
    vLightBack = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;
    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;

    gl_Position = projectionMatrix * mvPosition;
}

`}),"./src/WebGL/shaders/lib/lambertdouble/uniforms.ts":((s,i,n)=>{n.r(i),n.d(i,{uniforms:()=>d});var a=n("./src/colors.ts");const d={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}}),"./src/WebGL/shaders/lib/outline/index.ts":((s,i,n)=>{n.r(i),n.d(i,{outline:()=>C});var a=n("./src/WebGL/shaders/lib/outline/uniforms.ts"),d=n("./src/WebGL/shaders/lib/outline/outline.frag"),y=n("./src/WebGL/shaders/lib/outline/outline.vert");const C={fragmentShader:d.default.replace("#define GLSLIFY 1",""),vertexShader:y.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/outline/outline.frag":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec4 mvPosition;
//DEFINEFRAGCOLOR

void main() {
    gl_FragColor = vec4( outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`}),"./src/WebGL/shaders/lib/outline/outline.vert":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float vWidth;
uniform float vHeight;
uniform float outlineMaxPixels;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec4 mvPosition;

void main() {

    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    mvPosition.xy += norm.xy*outlineWidth;
    vec4 outpos = projectionMatrix * mvPosition;

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*modelViewMatrix * vec4( position, 1.0 );
        float w = outpos.w;
        //normalize homogeneous coords
        unadjusted /= unadjusted.w;
        outpos /= outpos.w;
        vec2 diff = outpos.xy-unadjusted.xy;
        //put into pixels
        diff.x *= vWidth;
        diff.y *= vHeight;
        if ( length(diff) > outlineMaxPixels) {
            vec2 ndiff = normalize(diff)*outlineMaxPixels;
            ndiff.x /= vWidth;
            ndiff.y /= vHeight;
            outpos.xy = unadjusted.xy;
            outpos.xy += ndiff;
        }
        outpos *= w; //if I don't do this things blow up
    }
    gl_Position = outpos;
    mvPosition.z -= outlinePushback; //go backwards in model space
    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..
    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;
}

`}),"./src/WebGL/shaders/lib/outline/uniforms.ts":((s,i,n)=>{n.r(i),n.d(i,{uniforms:()=>d});var a=n("./src/colors.ts");const d={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new a.Color(0,0,0)},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}}}),"./src/WebGL/shaders/lib/screen/index.ts":((s,i,n)=>{n.r(i),n.d(i,{screen:()=>C});var a=n("./src/WebGL/shaders/lib/screen/uniforms.ts"),d=n("./src/WebGL/shaders/lib/screen/screen.frag"),y=n("./src/WebGL/shaders/lib/screen/screen.vert");const C={fragmentShader:d.default.replace("#define GLSLIFY 1",""),vertexShader:y.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/screen/screen.frag":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = texture2D(colormap, vTexCoords);

   //gl_FragColor.g = gl_FragColor.b =  gl_FragColor.r; //debug shading 
}
        `}),"./src/WebGL/shaders/lib/screen/screen.vert":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `}),"./src/WebGL/shaders/lib/screen/uniforms.ts":((s,i,n)=>{n.r(i),n.d(i,{uniforms:()=>a});const a={}}),"./src/WebGL/shaders/lib/screenaa/index.ts":((s,i,n)=>{n.r(i),n.d(i,{screenaa:()=>C});var a=n("./src/WebGL/shaders/lib/screenaa/uniforms.ts"),d=n("./src/WebGL/shaders/lib/screenaa/screenaa.frag"),y=n("./src/WebGL/shaders/lib/screenaa/screenaa.vert");const C={fragmentShader:d.default.replace("#define GLSLIFY 1",""),vertexShader:y.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/screenaa/screenaa.frag":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`
        
precision highp float;
precision highp int;
precision highp sampler2D;

uniform sampler2D tColor;
varying highp vec2 vTexCoords;

// adapted from https://github.com/kosua20/Rendu
// MIT License Copyright (c) 2017 Simon Rodriguez
// by way of molstar (https://github.com/molstar/molstar/blob/master/src/mol-gl/shader/fxaa.frag.ts)

#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))

float rgb2luma(vec3 rgb){
    return sqrt(dot(rgb, vec3(0.299, 0.587, 0.114)));
}

float sampleLuma(vec2 uv) {
    return rgb2luma(texture2D(tColor, uv).rgb);
}

float sampleLuma(vec2 uv, float uOffset, float vOffset) {
    uv += vec2(uOffset, vOffset);
    return sampleLuma(uv);
}

//DEFINEFRAGCOLOR
void main(void) {
    ivec2 dim = textureSize(tColor,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseScreenSize = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec2 coords = vTexCoords;

    vec4 colorCenter = texture2D(tColor, coords);
    float dEdgeThresholdMin = 0.0312;
    float dEdgeThresholdMax = 0.125;
    int dIterations = 12;
    float dSubpixelQuality = 0.3;

    // Luma at the current fragment
    float lumaCenter = rgb2luma(colorCenter.rgb);

    // Luma at the four direct neighbours of the current fragment.
    float lumaDown = sampleLuma(coords, 0.0, -inverseScreenSize.y);
    float lumaUp = sampleLuma(coords, 0.0, inverseScreenSize.y);
    float lumaLeft = sampleLuma(coords, -inverseScreenSize.x, 0.0);
    float lumaRight = sampleLuma(coords, inverseScreenSize.x, 0.0);

    // Find the maximum and minimum luma around the current fragment.
    float lumaMin = min(lumaCenter, min(min(lumaDown, lumaUp), min(lumaLeft, lumaRight)));
    float lumaMax = max(lumaCenter, max(max(lumaDown, lumaUp), max(lumaLeft, lumaRight)));

    // Compute the delta.
    float lumaRange = lumaMax - lumaMin;

    // If the luma variation is lower that a threshold (or if we are in a really dark area),
    // we are not on an edge, don't perform any AA.
    if (lumaRange < max(dEdgeThresholdMin, lumaMax * dEdgeThresholdMax)) {
        gl_FragColor = colorCenter;
        return;
    }

    // Query the 4 remaining corners lumas.
    float lumaDownLeft = sampleLuma(coords, -inverseScreenSize.x, -inverseScreenSize.y);
    float lumaUpRight = sampleLuma(coords, inverseScreenSize.x, inverseScreenSize.y);
    float lumaUpLeft = sampleLuma(coords, -inverseScreenSize.x, inverseScreenSize.y);
    float lumaDownRight = sampleLuma(coords, inverseScreenSize.x, -inverseScreenSize.y);

    // Combine the four edges lumas (using intermediary variables for future computations
    // with the same values).
    float lumaDownUp = lumaDown + lumaUp;
    float lumaLeftRight = lumaLeft + lumaRight;

    // Same for corners
    float lumaLeftCorners = lumaDownLeft + lumaUpLeft;
    float lumaDownCorners = lumaDownLeft + lumaDownRight;
    float lumaRightCorners = lumaDownRight + lumaUpRight;
    float lumaUpCorners = lumaUpRight + lumaUpLeft;

    // Compute an estimation of the gradient along the horizontal and vertical axis.
    float edgeHorizontal = abs(-2.0 * lumaLeft + lumaLeftCorners) + abs(-2.0 * lumaCenter + lumaDownUp) * 2.0 + abs(-2.0 * lumaRight + lumaRightCorners);
    float edgeVertical = abs(-2.0 * lumaUp + lumaUpCorners) + abs(-2.0 * lumaCenter + lumaLeftRight) * 2.0 + abs(-2.0 * lumaDown + lumaDownCorners);

    // Is the local edge horizontal or vertical ?
    bool isHorizontal = (edgeHorizontal >= edgeVertical);

    // Choose the step size (one pixel) accordingly.
    float stepLength = isHorizontal ? inverseScreenSize.y : inverseScreenSize.x;

    // Select the two neighboring texels lumas in the opposite direction to the local edge.
    float luma1 = isHorizontal ? lumaDown : lumaLeft;
    float luma2 = isHorizontal ? lumaUp : lumaRight;
    // Compute gradients in this direction.
    float gradient1 = luma1 - lumaCenter;
    float gradient2 = luma2 - lumaCenter;

    // Which direction is the steepest ?
    bool is1Steepest = abs(gradient1) >= abs(gradient2);

    // Gradient in the corresponding direction, normalized.
    float gradientScaled = 0.25 * max(abs(gradient1), abs(gradient2));

    // Average luma in the correct direction.
    float lumaLocalAverage = 0.0;
    if(is1Steepest){
        // Switch the direction
        stepLength = -stepLength;
        lumaLocalAverage = 0.5 * (luma1 + lumaCenter);
    } else {
        lumaLocalAverage = 0.5 * (luma2 + lumaCenter);
    }

    // Shift UV in the correct direction by half a pixel.
    vec2 currentUv = coords;
    if(isHorizontal){
        currentUv.y += stepLength * 0.5;
    } else {
        currentUv.x += stepLength * 0.5;
    }

    // Compute offset (for each iteration step) in the right direction.
    vec2 offset = isHorizontal ? vec2(inverseScreenSize.x, 0.0) : vec2(0.0, inverseScreenSize.y);
    // Compute UVs to explore on each side of the edge, orthogonally.
    // The QUALITY allows us to step faster.
    vec2 uv1 = currentUv - offset * QUALITY(0);
    vec2 uv2 = currentUv + offset * QUALITY(0);

    // Read the lumas at both current extremities of the exploration segment,
    // and compute the delta wrt to the local average luma.
    float lumaEnd1 = sampleLuma(uv1);
    float lumaEnd2 = sampleLuma(uv2);
    lumaEnd1 -= lumaLocalAverage;
    lumaEnd2 -= lumaLocalAverage;

    // If the luma deltas at the current extremities is larger than the local gradient,
    // we have reached the side of the edge.
    bool reached1 = abs(lumaEnd1) >= gradientScaled;
    bool reached2 = abs(lumaEnd2) >= gradientScaled;
    bool reachedBoth = reached1 && reached2;

    // If the side is not reached, we continue to explore in this direction.
    if(!reached1){
        uv1 -= offset * QUALITY(1);
    }
    if(!reached2){
        uv2 += offset * QUALITY(1);
    }

    // If both sides have not been reached, continue to explore.
    if(!reachedBoth){
        for(int i = 2; i < dIterations; i++){
            // If needed, read luma in 1st direction, compute delta.
            if(!reached1){
                lumaEnd1 = sampleLuma(uv1);
                lumaEnd1 = lumaEnd1 - lumaLocalAverage;
            }
            // If needed, read luma in opposite direction, compute delta.
            if(!reached2){
                lumaEnd2 = sampleLuma(uv2);
                lumaEnd2 = lumaEnd2 - lumaLocalAverage;
            }
            // If the luma deltas at the current extremities is larger than the local gradient,
            // we have reached the side of the edge.
            reached1 = abs(lumaEnd1) >= gradientScaled;
            reached2 = abs(lumaEnd2) >= gradientScaled;
            reachedBoth = reached1 && reached2;

            // If the side is not reached, we continue to explore in this direction,
            // with a variable quality.
            if(!reached1){
                uv1 -= offset * QUALITY(i);
            }
            if(!reached2){
                uv2 += offset * QUALITY(i);
            }

            // If both sides have been reached, stop the exploration.
            if(reachedBoth){
                break;
            }
        }
    }

    // Compute the distances to each side edge of the edge (!).
    float distance1 = isHorizontal ? (coords.x - uv1.x) : (coords.y - uv1.y);
    float distance2 = isHorizontal ? (uv2.x - coords.x) : (uv2.y - coords.y);

    // In which direction is the side of the edge closer ?
    bool isDirection1 = distance1 < distance2;
    float distanceFinal = min(distance1, distance2);

    // Thickness of the edge.
    float edgeThickness = (distance1 + distance2);

    // Is the luma at center smaller than the local average ?
    bool isLumaCenterSmaller = lumaCenter < lumaLocalAverage;

    // If the luma at center is smaller than at its neighbour,
    // the delta luma at each end should be positive (same variation).
    bool correctVariation1 = (lumaEnd1 < 0.0) != isLumaCenterSmaller;
    bool correctVariation2 = (lumaEnd2 < 0.0) != isLumaCenterSmaller;

    // Only keep the result in the direction of the closer side of the edge.
    bool correctVariation = isDirection1 ? correctVariation1 : correctVariation2;

    // UV offset: read in the direction of the closest side of the edge.
    float pixelOffset = - distanceFinal / edgeThickness + 0.5;

    // If the luma variation is incorrect, do not offset.
    float finalOffset = correctVariation ? pixelOffset : 0.0;

    // Sub-pixel shifting
    // Full weighted average of the luma over the 3x3 neighborhood.
    float lumaAverage = (1.0 / 12.0) * (2.0 * (lumaDownUp + lumaLeftRight) + lumaLeftCorners + lumaRightCorners);
    // Ratio of the delta between the global average and the center luma,
    // over the luma range in the 3x3 neighborhood.
    float subPixelOffset1 = clamp(abs(lumaAverage - lumaCenter) / lumaRange, 0.0, 1.0);
    float subPixelOffset2 = (-2.0 * subPixelOffset1 + 3.0) * subPixelOffset1 * subPixelOffset1;
    // Compute a sub-pixel offset based on this delta.
    float subPixelOffsetFinal = subPixelOffset2 * subPixelOffset2 * float(dSubpixelQuality);

    // Pick the biggest of the two offsets.
    finalOffset = max(finalOffset, subPixelOffsetFinal);

    // Compute the final UV coordinates.
    vec2 finalUv = coords;
    if(isHorizontal){
        finalUv.y += finalOffset * stepLength;
    } else {
        finalUv.x += finalOffset * stepLength;
    }

    // Read the color at the new UV coordinates, and use it.
    gl_FragColor = texture2D(tColor, finalUv);
}        

/* old fxaa implementation
uniform highp sampler2D colormap;
varying highp vec2 vTexCoords;


// Basic FXAA implementation based on the code on geeks3d.com 
#define FXAA_REDUCE_MIN (1.0/ 128.0)
#define FXAA_REDUCE_MUL (1.0 / 8.0)
#define FXAA_SPAN_MAX 8.0


vec4 applyFXAA(vec2 fragCoord, highp sampler2D tex)
{
    vec4 color;
    ivec2 dim = textureSize(tex,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec4 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP);
    vec4 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP);
    vec4 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP);
    vec4 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP);
    vec4 rgbM  = texture2D(tex, fragCoord );
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW.xyz, luma);
    float lumaNE = dot(rgbNE.xyz, luma);
    float lumaSW = dot(rgbSW.xyz, luma);
    float lumaSE = dot(rgbSE.xyz, luma);
    float lumaM  = dot(rgbM.xyz,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * inverseVP;

    vec4 rgbA = 0.5 * (
        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)) +
        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)));
    vec4 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord  + dir * -0.5) +
        texture2D(tex, fragCoord  + dir * 0.5));

    float lumaB = dot(rgbB.xyz, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = rgbA;
    else
        color = rgbB;

    return color;
}


//DEFINEFRAGCOLOR
void main (void) {
    ivec2 dim = textureSize(colormap,0);

  gl_FragColor = applyFXAA(vTexCoords, colormap);
}
        
*/`}),"./src/WebGL/shaders/lib/screenaa/screenaa.vert":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `}),"./src/WebGL/shaders/lib/screenaa/uniforms.ts":((s,i,n)=>{n.r(i),n.d(i,{uniforms:()=>a});const a={}}),"./src/WebGL/shaders/lib/sphereimposter/index.ts":((s,i,n)=>{n.r(i),n.d(i,{sphereimposter:()=>C});var a=n("./src/WebGL/shaders/lib/sphereimposter/uniforms.ts"),d=n("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag"),y=n("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert");const C={vertexShader:y.default.replace("#define GLSLIFY 1",""),fragmentShader:d.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`
uniform mat4 viewMatrix;
uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float uDepth;
uniform vec3 directionalLightColor[ 1 ];

varying vec3 vColor;
varying vec2 mapping;
varying float rval;
varying vec3 vLight;
varying vec3 center;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));
    float dotProduct = dot( norm, vLight );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;
    vec3 color = vLight*vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
     
}

`}),"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying vec3 vColor;
varying float rval;
varying vec3 vLight;
varying vec3 center;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz );
    mapping = normal.xy;
    rval = abs(normal.x);
    gl_Position = projPosition+adjust;

}
`}),"./src/WebGL/shaders/lib/sphereimposter/uniforms.ts":((s,i,n)=>{n.r(i),n.d(i,{uniforms:()=>d});var a=n("./src/colors.ts");const d={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}}),"./src/WebGL/shaders/lib/sphereimposteroutline/index.ts":((s,i,n)=>{n.r(i),n.d(i,{sphereimposteroutline:()=>C});var a=n("./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts"),d=n("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag"),y=n("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert");const C={fragmentShader:d.default.replace("#define GLSLIFY 1",""),vertexShader:y.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform mat4 projectionMatrix;
varying vec2 mapping;
varying float rval;
varying vec3 center;

uniform float outlinePushback;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragColor = vec4(outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`}),"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform float vHeight;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying float rval;
varying vec3 center;

void main() {

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);

    vec4 adjust = projectionMatrix* vec4(norm,normal.z,1.0); 
    mapping = norm.xy;
    rval = abs(norm.x);
    gl_Position = projPosition+vec4(adjust.xy,0.0,0.0);

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*vec4(center.x+normal.x, center.y,center.z,1.0); 
        vec4 ccoord = projectionMatrix*vec4(center.xyz,1.0);
        adjust = projectionMatrix* vec4(center.x+norm.x,center.y,center.z,1.0); 
        //subtract center 
        unadjusted.xyz -= ccoord.xyz;
        adjust.xyz -= ccoord.xyz;
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth;
        if(diff > outlineMaxPixels) {
            
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth;
            //adjsut reval by ratio of lengths
            rval *= fixlen/abs(adjust.x);
        }

    }
}

`}),"./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts":((s,i,n)=>{n.r(i),n.d(i,{uniforms:()=>d});var a=n("./src/colors.ts");const d={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new a.Color(0,0,0)},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}}}),"./src/WebGL/shaders/lib/sprite/index.ts":((s,i,n)=>{n.r(i),n.d(i,{sprite:()=>C});var a=n("./src/WebGL/shaders/lib/sprite/uniforms.ts"),d=n("./src/WebGL/shaders/lib/sprite/sprite.frag"),y=n("./src/WebGL/shaders/lib/sprite/sprite.vert");const C={fragmentShader:d.default.replace("#define GLSLIFY 1",""),vertexShader:y.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/sprite/sprite.frag":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`

uniform vec3 color;
uniform sampler2D map;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;

varying vec2 vUV;
//DEFINEFRAGCOLOR

void main() {

    vec4 texture = texture2D(map, vUV);

    if (texture.a <= alphaTest) discard;

    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);

    if (fogNear != fogFar) {

        float depth = gl_FragCoord.z / gl_FragCoord.w; //probably wrong
        float fogFactor = smoothstep(fogNear, fogFar, depth);        
        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);
    }
}

`}),"./src/WebGL/shaders/lib/sprite/sprite.vert":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`

uniform int useScreenCoordinates;
uniform vec3 screenPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 alignment;
uniform vec2 uvOffset;
uniform vec2 uvScale;

attribute vec2 position;
attribute vec2 uv;

varying vec2 vUV;

void main() {

    vUV = uvOffset + uv * uvScale;

    vec2 alignedPosition = position + alignment;

    vec2 rotatedPosition;
    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;
    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;

    vec4 finalPosition;

    if(useScreenCoordinates != 0) {
        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);
    }

    else {
        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;
        finalPosition.xy += rotatedPosition; 
    }

    gl_Position = finalPosition;

}

`}),"./src/WebGL/shaders/lib/sprite/uniforms.ts":((s,i,n)=>{n.r(i),n.d(i,{uniforms:()=>a});const a={}}),"./src/WebGL/shaders/lib/ssao/index.ts":((s,i,n)=>{n.r(i),n.d(i,{ssao:()=>C});var a=n("./src/WebGL/shaders/lib/ssao/uniforms.ts"),d=n("./src/WebGL/shaders/lib/ssao/ssao.frag"),y=n("./src/WebGL/shaders/lib/ssao/ssao.vert");const C={fragmentShader:d.default,vertexShader:y.default,uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/ssao/ssao.frag":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`uniform sampler2D depthmap;
varying highp vec2 vTexCoords;
uniform float vWidth;
uniform float vHeight;
uniform float total_strength;
uniform float radius;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

//code for pseudorandom vector from chatgpt
float hash(vec3 p) {
    p = fract(p * vec3(0.1031, 0.1030, 0.0973));
    p += dot(p, p.yzx + 33.33);
    return fract((p.x + p.y) * p.z);
}

// Generate a pseudorandom vec3 from a seed vec3
vec3 pseudorandomVec3(vec3 seed) {
    vec3 randomVec;
    randomVec.x = hash(seed);
    randomVec.y = hash(seed + vec3(1.0, 0.0, 17.1));
    randomVec.z = hash(seed + vec3(0.0, 13.23, 0.0));
    return randomVec;
}

void main(void)
{   
   const float base = 0.2;
   const float area = 0.75;
   const int cycles = 1;

   const int samples = 64;
   vec3 sample_sphere[64] = vec3[](
      vec3(0.091258,-0.510164,0.000000),
      vec3(-0.204347,-0.872967,0.187199),
      vec3(0.009690,-0.263696,-0.110414),
      vec3(0.175208,-0.563987,0.228527),
      vec3(-0.001824,-0.003113,-0.000323),
      vec3(0.411134,-0.719869,-0.261530),
      vec3(-0.074272,-0.377368,0.276290),
      vec3(-0.147773,-0.381587,-0.284529),
      vec3(0.173317,-0.199635,0.063295),
      vec3(-0.186452,-0.199460,0.076965),
      vec3(0.143985,-0.308160,-0.307687),
      vec3(0.053194,-0.148286,0.169589),
      vec3(-0.547656,-0.486476,-0.317378),
      vec3(0.020804,-0.015092,-0.004574),
      vec3(-0.038006,-0.043165,0.054059),
      vec3(-0.094795,-0.443908,-0.731525),
      vec3(0.547552,-0.396466,0.461477),
      vec3(-0.176886,-0.089989,0.007315),
      vec3(0.074401,-0.048840,-0.074039),
      vec3(-0.008240,-0.075697,0.178197),
      vec3(-0.307880,-0.185053,-0.368943),
      vec3(0.309520,-0.108483,0.041646),
      vec3(-0.773478,-0.292946,0.538166),
      vec3(0.184487,-0.231594,-0.820065),
      vec3(0.207318,-0.100531,0.361797),
      vec3(-0.173306,-0.037737,-0.055289),
      vec3(0.548102,-0.105342,-0.253237),
      vec3(-0.119342,-0.043907,0.285162),
      vec3(-0.270247,-0.087861,-0.751357),
      vec3(0.449312,-0.039777,0.236146),
      vec3(-0.743773,-0.036095,0.196056),
      vec3(0.148819,-0.004300,-0.231448),
      vec3(0.008773,0.000809,0.051047),
      vec3(-0.461467,0.027390,-0.357386),
      vec3(0.169626,0.013338,-0.014053),
      vec3(-0.043786,0.007095,0.047331),
      vec3(0.004821,0.140371,-0.988260),
      vec3(0.092402,0.023994,0.101860),
      vec3(-0.295335,0.061530,-0.027372),
      vec3(0.024903,0.007537,-0.018901),
      vec3(-0.081463,0.125402,0.447794),
      vec3(-0.397119,0.231805,-0.631062),
      vec3(0.163853,0.059014,0.044905),
      vec3(-0.495220,0.214357,0.254139),
      vec3(0.306123,0.373687,-0.825715),
      vec3(0.021665,0.026737,0.053220),
      vec3(-0.208231,0.117129,-0.098685),
      vec3(0.139749,0.080968,-0.043086),
      vec3(-0.153599,0.182814,0.262090),
      vec3(-0.159673,0.496777,-0.743568),
      vec3(0.134797,0.117152,0.095753),
      vec3(-0.155626,0.120533,0.019395),
      vec3(0.042311,0.054462,-0.049709),
      vec3(0.001257,0.031288,0.034468),
      vec3(-0.002271,0.003199,-0.002304),
      vec3(0.662104,0.717307,0.033854),
      vec3(-0.373100,0.576021,0.308274),
      vec3(0.024233,0.231316,-0.173688),
      vec3(0.161311,0.420217,0.234273),
      vec3(-0.045248,0.078031,-0.010411),
      vec3(0.167453,0.376942,-0.094872),
      vec3(-0.056194,0.433247,0.173218),
      vec3(-0.016224,0.123149,-0.035569),
      vec3(0.067127,0.407641,0.028479)
   );

   float depth = texture2D(depthmap, vTexCoords).r;
   if(depth == 1.0) {
      discard;
   }

   vec4 screen_position = vec4(vTexCoords, depth,1.0);
   vec4 pos = projinv*screen_position;
   pos /= pos.w;
   vec3 position = pos.xyz;

   //approximate the normal from the depth map; I find this simpler
   //than trying to recompute the exact normal within every possible object shader

   //pixel offset positions in screen space
   ivec2 dim = textureSize(depthmap,0);
   vec2 offset1 = vec2(0.0,1.0/float(dim.y));
   vec2 offset2 = vec2(1.0/float(dim.x),0.0);
   float depth1 = texture2D(depthmap, vTexCoords + offset1).r;
   float depth2 = texture2D(depthmap, vTexCoords + offset2).r;
   
   vec3 p1 = vec3(screen_position.xy+offset1, depth1 - depth);
   vec3 p2 = vec3(screen_position.xy+offset2, depth2 - depth);

   //convert to model space
   vec4 pos1 = projinv*vec4(p1,1);
   pos1 /= pos1.w;
   vec4 pos2 = projinv*vec4(p2,1);
   pos2 /= pos2.w;

   vec3 normal = normalize(cross(pos1.xyz-position, pos2.xyz-position)); //model normal, important we normalize in model space

   //pseudo random number

   float occlusion = 0.0;
   for(int c = 0; c < cycles; c++) {
   vec3 random = normalize(pseudorandomVec3(position+float(c)));
   for(int i=0; i < samples; i++) {

      vec3 ray = radius * reflect(sample_sphere[i],random);
      vec3 hemi_ray = position + sign(dot(ray,normal)) * ray; //model space
      vec4 hemi_screen = projectionMatrix*vec4(hemi_ray,1.0);
      hemi_screen /= hemi_screen.w;
      
      float occ_depth = texture2D(depthmap, clamp(hemi_screen.xy,0.0,1.0)).r;
      float difference = hemi_screen.z - occ_depth;
      
      occlusion += step(0.0, difference) * (1.0-smoothstep(0.0, area, difference));
   }
   }
   float ao = 1.0 - total_strength * occlusion * (1.0 / float(cycles*samples));
   gl_FragDepthEXT = clamp(ao+base,0.0,1.0);

}`}),"./src/WebGL/shaders/lib/ssao/ssao.vert":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `}),"./src/WebGL/shaders/lib/ssao/uniforms.ts":((s,i,n)=>{n.r(i),n.d(i,{uniforms:()=>a});const a={total_strength:{type:"f",value:1},radius:{type:"f",value:5},projinv:{type:"mat4",value:[]}}}),"./src/WebGL/shaders/lib/stickimposter/index.ts":((s,i,n)=>{n.r(i),n.d(i,{stickimposter:()=>E});var a=n("./src/WebGL/shaders/lib/stickimposter/uniforms.ts"),d=n("./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"),y=n("./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag"),C=n("./src/WebGL/shaders/lib/stickimposter/stickimposter.vert");const E={fragmentShader:[d.default,y.default].join(`
`),vertexShader:C.default,uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`    float dotProduct = dot( norm, vLight );
    vec3 light = vec3( max( dotProduct, 0.0 ) );
    color *= light;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`}),"./src/WebGL/shaders/lib/stickimposter/stickimposter.vert":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary
    r = abs(radius);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
    bool isperspective = (projectionMatrix[3][3] == 0.0);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       if(isperspective) { //perspective
         vec3 pnorm = normalize(p1);
         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
         mvPosition.xyz = p1+t*pnorm; 
       } else { //orthographic
         mvPosition.xyz = p1;
       }
    } else {
      if(isperspective) { //perspective
         vec3 pnorm = normalize(p2);
         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
         mvPosition.xyz = p2+t*pnorm;
       } else { //orthographic
         mvPosition.xyz = p2;
       } 
       mult *= -1.0;
    }

    if(isperspective) { //perspective
      vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;
      vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;
    } else {
      vec3 cr = normalize(cross(vec3(0.0,0.0,-1.0),norm))*radius;
      vec3 doublecr = normalize(cross(vec3(0.0,0.0,-1.0),cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;     
    }

    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..
}

`}),"./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLight;
varying vec3 vColor;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf
//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl
//with a bit more care (caps) this could be a general cylinder imposter (see also outline)
void main() {
    vec3 color = abs(vColor);
    vec3 pos = cposition;
    vec3 p = pos; //ray point
    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic
    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective
    vec3 pa = p1; //cyl start
    vec3 va = normalize(p2-p1); //cyl norm
    vec3 tmp1 = v-(dot(v,va)*va);
    vec3 deltap = p-pa;
    float A = dot(tmp1,tmp1);
    if(A == 0.0) discard;
    vec3 tmp2 = deltap-(dot(deltap,va)*va);
    float B = 2.0*dot(tmp1, tmp2);
    float C = dot(tmp2,tmp2)-r*r;
//quadratic equation!
    float det = (B*B) - (4.0*A*C);
    if(det < 0.0) discard;
    float sqrtDet = sqrt(det);
    float posT = (-B+sqrtDet)/(2.0*A);
    float negT = (-B-sqrtDet)/(2.0*A);
    float intersectionT = min(posT,negT);
    vec3 qi = p+v*intersectionT;
    float dotp1 = dot(va,qi-p1);
    float dotp2 = dot(va,qi-p2);
    vec3 norm;
    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0
       vec3 cp;
       if( dotp1 < 0.0) {  
//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not
        cp = p1;
       } else {
//          if(vColor.y < 0.0 ) discard;
          cp = p2;
       }
       vec3 diff = p-cp;
       A = dot(v,v);
       B = dot(diff,v)*2.0;
       C = dot(diff,diff)-r*r;
       det = (B*B) - (4.0*C);
       if(det < 0.0) discard;
       sqrtDet = sqrt(det);
       posT = (-B+sqrtDet)/(2.0);
       negT = (-B-sqrtDet)/(2.0);
       float t = min(posT,negT);
       qi = p+v*t; 
       norm = normalize(qi-cp); 
    } else {
       norm = normalize(qi-(dotp1*va + p1));
    }
    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragDepthEXT = depth;`}),"./src/WebGL/shaders/lib/stickimposter/uniforms.ts":((s,i,n)=>{n.r(i),n.d(i,{uniforms:()=>d});var a=n("./src/colors.ts");const d={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}}),"./src/WebGL/shaders/lib/stickimposteroutline/index.ts":((s,i,n)=>{n.r(i),n.d(i,{stickimposteroutline:()=>E});var a=n("./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts"),d=n("./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"),y=n("./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.partial.frag"),C=n("./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert");const E={fragmentShader:d.default+y.default,vertexShader:C.default,uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.partial.frag":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`}),"./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform mat4 projinv;


attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = outlineColor;
    float rad = radius+sign(radius)*outlineWidth;
    r = abs(rad);

    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
//pushback
    float scale = 1.0;
    if(projectionMatrix[3][3] != 0.0) { //orthographic
        to.z -= outlinePushback;
        pt.z -= outlinePushback;
    } else { //perspective
        vec4 midbefore = pt;
        if(length(to.xyz) < length(pt)) {
            midbefore = to;
        }
        vec4 midafter = midbefore;
        midafter.xyz += normalize(midbefore.xyz)*outlinePushback;

        to.xyz += normalize(to.xyz)*outlinePushback;
        pt.xyz += normalize(pt.xyz)*outlinePushback;

        //figure out a scaling factor for radius to account for perspective setback
        vec4 midbeforer = vec4(midbefore.x+rad,midbefore.y, midbefore.z, midbefore.w);
        vec4 midafterr = vec4(midafter.x+rad,midafter.y, midafter.z, midafter.w);

        vec4 mb = projectionMatrix*midbefore;
        vec4 mbr = projectionMatrix*midbeforer;
        vec4 ma = projectionMatrix*midafter;
        vec4 mar = projectionMatrix*midafterr;
        mb /= mb.w;
        mbr /= mbr.w;
        ma /= ma.w;
        mar /= mar.w;
        scale = abs((mbr.x-mb.x)/(mar.x-ma.x));
        rad *= scale;
        r = abs(rad);
    }
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }

    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       vec3 pnorm = normalize(p1);
       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
       mvPosition.xyz = p1+t*pnorm;
    } else {
       vec3 pnorm = normalize(p2);
       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
       mvPosition.xyz = p2+t*pnorm;
       mult *= -1.0;
    }

    if(outlineMaxPixels > 0.0) {
        vec4 cpos = mvPosition;
        vec4 unadjusted = projectionMatrix*vec4(cpos.x+abs(scale*radius), cpos.y,cpos.z,cpos.w); 
        vec4 ccoord = projectionMatrix*cpos;
        vec4 adjust = projectionMatrix*vec4(cpos.x+r,cpos.y,cpos.z,cpos.w); 
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        unadjusted.xyz -= ccoord.xyz/ccoord.w;
        adjust.xyz -= ccoord.xyz/ccoord.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth; //this should now be in pixels
        if(diff > outlineMaxPixels) {
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth; 
            vec4 pcoord = ccoord;
            pcoord.x += fixlen*pcoord.w;
            vec4 altc = projinv*pcoord;
            r= abs(altc.x-cpos.x);
        }
    }

    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;
    mvPosition.xy +=  mult*(cr + doublecr).xy;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vLight = vec3(1.0,1.0,1.0);
}

`}),"./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts":((s,i,n)=>{n.r(i),n.d(i,{uniforms:()=>d});var a=n("./src/colors.ts");const d={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new a.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0},projinv:{type:"mat4",value:[]}}}),"./src/WebGL/shaders/lib/volumetric/index.ts":((s,i,n)=>{n.r(i),n.d(i,{volumetric:()=>C});var a=n("./src/WebGL/shaders/lib/volumetric/uniforms.ts"),d=n("./src/WebGL/shaders/lib/volumetric/volumetric.frag"),y=n("./src/WebGL/shaders/lib/volumetric/volumetric.vert");const C={fragmentShader:d.default.replace("#define GLSLIFY 1",""),vertexShader:y.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/volumetric/uniforms.ts":((s,i,n)=>{n.r(i),n.d(i,{uniforms:()=>d});var a=n("./src/colors.ts");const d={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}}}),"./src/WebGL/shaders/lib/volumetric/volumetric.frag":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`
uniform highp sampler3D data;
uniform highp sampler2D colormap;
uniform highp sampler2D depthmap;


uniform mat4 textmat;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

uniform float step;
uniform float subsamples;
uniform float maxdepth;
uniform float transfermin;
uniform float transfermax;
in  vec4 mvPosition;
out vec4 color;
void main(void) {

   vec4 pos = mvPosition;
   bool seengood = false;
   float i = 0.0;
   color = vec4(1,1,1,0);
   float increment = 1.0/subsamples;
   float maxsteps = (maxdepth*subsamples/step);
//there's probably a better way to do this..
//calculate farthest possible point in model coordinates
   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);
// convert to projection
   maxpos = projectionMatrix*maxpos;
   vec4 startp = projectionMatrix*pos;
// homogonize
   maxpos /= maxpos.w;
   startp /= startp.w;
//take x,y from start and z from max
   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);
//convert back to model space
   maxpos = projinv*maxpos;
   maxpos /= maxpos.w;
   float incr = step/subsamples;
//get depth from depthmap
//startp is apparently [-1,1]
   vec2 tpos = startp.xy/2.0+0.5;
   float depth = texture(depthmap, tpos).r;
//compute vector between start and end
   vec4 direction = maxpos-pos;
   for( i = 0.0; i <= maxsteps; i++) {
      vec4 pt = (pos+(i/maxsteps)*direction);
      vec4 ppt = projectionMatrix*pt;
      float ptdepth = ppt.z/ppt.w;
      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
      if(ptdepth > depth) break;
      pt = textmat*pt;
//       pt /= pt.w;
      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {
         seengood = true;
      } else if(seengood) {
         break;
      }
      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){
          color.a = 0.0;
          continue;
      }
      else {
         float val = texture(data, pt.zyx).r;
         if(isinf(val)) continue; //masked out
         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range
         vec4 val_color = texture(colormap, vec2(cval,0.5));
         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;
         color.a += (1.0 - color.a) * val_color.a; 
         if(color.a > 0.0) color.rgb /= color.a;
//          color = vec4(pt.x, pt.y, pt.z, 1.0);
      }
//       color = vec4(pt.x, pt.y, pt.z, 0.0)
    }
}

        `}),"./src/WebGL/shaders/lib/volumetric/volumetric.vert":((s,i,n)=>{n.r(i),n.d(i,{default:()=>a});const a=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

in vec3 position;
out vec4 mvPosition;
void main() {

    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix*mvPosition;
}
`}),"./src/WebGL/shaders/utils/clone.ts":((s,i,n)=>{n.r(i),n.d(i,{clone:()=>d});var a=n("./src/colors.ts");function d(y){let C={};for(const E in y){C[E]={},C[E].type=y[E].type;var p=y[E].value;p instanceof a.Color?C[E].value=p.clone():typeof p=="number"?C[E].value=p:p instanceof Array?C[E].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return C}}),"./src/WebGL/shaders/utils/index.ts":((s,i,n)=>{n.r(i),n.d(i,{ShaderUtils:()=>d,clone:()=>a.clone});var a=n("./src/WebGL/shaders/utils/clone.ts");const d={clone:a.clone}}),"./src/WebGL/shapes/Cylinder.ts":((s,i,n)=>{n.r(i),n.d(i,{Cylinder:()=>y});var a=n("./src/WebGL/math/index.ts");let d=new a.Vector3;class y{constructor(p=new a.Vector3,E=new a.Vector3,R=0){this.c1=p,this.c2=E,this.radius=R,this.direction=new a.Vector3().subVectors(this.c2,this.c1).normalize()}copy(p){return this.c1.copy(p.c1),this.c2.copy(p.c2),this.direction.copy(p.direction),this.radius=p.radius,this}lengthSq(){return d.subVectors(this.c2,this.c1).lengthSq()}applyMatrix4(p){return this.direction.add(this.c1).applyMatrix4(p),this.c1.applyMatrix4(p),this.c2.applyMatrix4(p),this.direction.sub(this.c1).normalize(),this.radius=this.radius*p.getMaxScaleOnAxis(),this}}}),"./src/WebGL/shapes/Sphere.ts":((s,i,n)=>{n.r(i),n.d(i,{Sphere:()=>d});var a=n("./src/WebGL/math/index.ts");class d{constructor(C={x:0,y:0,z:0},p=0){this.center=new a.Vector3(C.x,C.y,C.z),this.radius=p}set(C,p){return this.center.copy(C),this.radius=p,this}copy(C){return this.center.copy(C.center),this.radius=C.radius,this}applyMatrix4(C){return this.center.applyMatrix4(C),this.radius=this.radius*C.getMaxScaleOnAxis(),this}translate(C){return this.center.add(C),this}equals(C){return C.center.equals(this.center)&&C.radius===this.radius}clone(){return new d().copy(this)}}}),"./src/WebGL/shapes/Triangle.ts":((s,i,n)=>{n.r(i),n.d(i,{Triangle:()=>y});var a=n("./src/WebGL/math/index.ts");const d=new a.Vector3;class y{constructor(p=new a.Vector3,E=new a.Vector3,R=new a.Vector3){this.a=p,this.b=E,this.c=R}copy(p){return this.a.copy(p.a),this.b.copy(p.b),this.c.copy(p.c),this}applyMatrix4(p){return this.a.applyMatrix4(p),this.b.applyMatrix4(p),this.c.applyMatrix4(p),this}getNormal(){var p=this.a.clone();return p.sub(this.b),d.subVectors(this.c,this.b),p.cross(d),p.normalize(),p}}}),"./src/WebGL/shapes/index.ts":((s,i,n)=>{n.r(i),n.d(i,{Cylinder:()=>d.Cylinder,Sphere:()=>a.Sphere,Triangle:()=>y.Triangle});var a=n("./src/WebGL/shapes/Sphere.ts"),d=n("./src/WebGL/shapes/Cylinder.ts"),y=n("./src/WebGL/shapes/Triangle.ts")}),"./src/autoload.ts":((s,i,n)=>{n.r(i),n.d(i,{autoinit:()=>p,autoload:()=>x,processing_autoinit:()=>E,viewers:()=>R});var a=n("./src/GLViewer.ts"),d=n("./src/ProteinSurface4.ts"),y=n("./src/utilities.ts"),C=n("./src/colors.ts"),p=!1,E=!1,R={};function x(A,w){var T,M,h;if(document.querySelector(".viewer_3Dmoljs")!=null&&(p=!0),p){E=!0,A=A??null;var l=0;document.querySelectorAll(".viewer_3Dmoljs").forEach(c=>{var g=[],v=[],b="";c.style.position=="static"&&(c.style.position="relative");var S=null;if(h=null,c.dataset.pdb)g.push("https://files.rcsb.org/view/"+c.dataset.pdb+".pdb"),v.push("pdb");else if(c.dataset.cid)v.push("sdf"),g.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+c.dataset.cid+"/SDF?record_type=3d");else if(c.dataset.href||c.dataset.url){if(c.dataset.href?b=c.dataset.href:b=c.dataset.url,g.push(b),h=b.substring(b.lastIndexOf(".")+1),h=="gz"){let we=b.substring(0,b.lastIndexOf(".")).lastIndexOf(".");h=b.substring(we+1)}v.push(h);var u=b.substring(b.lastIndexOf("/")+1,b.lastIndexOf("."));u=="/"&&(u=b.substring(b.lastIndexOf("/")+1)),c.dataset[v[v.length-1]]=u}let m=c.dataset;for(T in m)T.substring(0,3)==="pdb"&&T!=="pdb"?(g.push("https://files.rcsb.org/view/"+m[T]+".pdb"),v.push("pdb")):T.substring(0,4)==="href"&&T!=="href"?(b=m[T],g.push(b),v.push(b.substring(b.lastIndexOf(".")+1))):T.substring(0,3)==="cid"&&T!=="cid"&&(g.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+m[T]+"/SDF?record_type=3d"),v.push("sdf"));var _={};c.dataset.options&&(_=(0,y.specStringToObject)(c.dataset.options));var D=C.CC.color(c.dataset.backgroundcolor),L=c.dataset.backgroundalpha;L=L==null?1:parseFloat(L);var P={line:{}};c.dataset.style&&(P=(0,y.specStringToObject)(c.dataset.style));var N={};c.dataset.select&&(N=(0,y.specStringToObject)(c.dataset.select));var U=[],V=[],W=[],G={},H=null,k=c.dataset,X=/style(.+)/,$=/surface(.*)/,F=/labelres(.*)/,K=[];for(M in k)Object.prototype.hasOwnProperty.call(k,M)&&K.push(M);for(K.sort(),T=0;T<K.length;T++){M=K[T];var te=X.exec(M),re,le,oe;te&&(re="select"+te[1],le=(0,y.specStringToObject)(k[re]),oe=(0,y.specStringToObject)(k[M]),U.push([le,oe])),te=$.exec(M),te&&(re="select"+te[1],le=(0,y.specStringToObject)(k[re]),oe=(0,y.specStringToObject)(k[M]),V.push([le,oe])),te=F.exec(M),te&&(re="select"+te[1],le=(0,y.specStringToObject)(k[re]),oe=(0,y.specStringToObject)(k[M]),W.push([le,oe])),M=="zoomto"&&(G=(0,y.specStringToObject)(k[M])),M=="spin"&&(H=(0,y.specStringToObject)(k[M]))}var ue=function(we){for(we.setStyle(N,P),S&&S.createSelectionAndStyle(N,P),T=0;T<U.length;T++){let ce=U[T][0]||{},xe=U[T][1]||{line:{}};we.setStyle(ce,xe),S&&S.createSelectionAndStyle(N,P)}for(T=0;T<V.length;T++){let ce=V[T][0]||{},xe=V[T][1]||{};S?we.addSurface(d.SurfaceType.VDW,xe,ce,ce).then(Xe=>{S.loadSurface("VDW",ce,xe,Xe)}):we.addSurface(d.SurfaceType.VDW,xe,ce,ce)}for(T=0;T<W.length;T++){let ce=W[T][0]||{},xe=W[T][1]||{};we.addResLabels(ce,xe)}we.render(),we.zoomTo(G),H&&we.spin(H.axis,H.speed)};let he=A;try{var ge=(0,y.specStringToObject)(c.dataset.config)||{};ge.backgroundColor===void 0&&(ge.backgroundColor=D),ge.backgroundAlpha===void 0&&(ge.backgroundAlpha=L),he==null?he=R[c.id||l++]=(0,a.createViewer)(c,ge):(he.setBackgroundColor(D,L),he.setConfig(ge),S&&S.initiateUI()),c.dataset.ui&&$3Dmol.StateManager&&(S=new $3Dmol.StateManager(he))}catch(we){console.log(we),c.textContent="WebGL appears to be disabled."}if(g.length!=0){let we=0,ce=((xe,Ne)=>function(Xe){b=g[we];var rt=xe.dataset.type||xe.dataset.datatype||v[we];if(Ne.addModel(Xe,rt,_),S){var nt=xe.dataset[v[we]];S.setModelTitle(nt)}we+=1,we<g.length?(0,y.get)(g[we]).then(ce):(ue(Ne),xe.dataset.callback&&(0,y.makeFunction)(xe.dataset.callback)(Ne),E=!1,w&&w(Ne))})(c,he);h&&h.endsWith("gz")?(0,y.getbin)(g[0]).then(ce):(0,y.get)(g[0]).then(ce)}else{if(c.dataset.element){var Oe="#"+c.dataset.element,Le=document.querySelector(Oe),$e=Le?Le.textContent:"";h=c.dataset.type||c.dataset.datatype,he.addModel($e,h,_)}ue(he),c.dataset.callback&&(0,y.makeFunction)(c.dataset.callback)(he),E=!1,w&&w(he)}})}}document.onreadystatechange=()=>{document.readyState==="complete"&&x()}}),"./src/colors.ts":((s,i,n)=>{n.r(i),n.d(i,{CC:()=>d,Color:()=>a,builtinColorSchemes:()=>A,chains:()=>x,elementColors:()=>E,htmlColors:()=>y,residues:()=>R,ssColors:()=>C});class a{constructor(T,M,h){return this.r=0,this.g=0,this.b=0,arguments.length>1&&typeof T=="number"?(this.r=T||0,this.g=M||0,this.b=h||0,this):this.set(T||0)}set(T){return T instanceof a?T.clone():(typeof T=="number"?this.setHex(T):typeof T=="object"&&(this.r=T?.r||0,this.g=T?.g||0,this.b=T?.b||0),this)}setHex(T){return T=Math.floor(T),this.r=(T>>16&255)/255,this.g=(T>>8&255)/255,this.b=(T&255)/255,this}getHex(){var T=Math.round(this.r*255),M=Math.round(this.g*255),h=Math.round(this.b*255);return T<<16|M<<8|h}clone(){return new a(this.r,this.g,this.b)}copy(T){return this.r=T.r,this.g=T.g,this.b=T.b,this}scaled(){var T={};return T.r=Math.round(this.r*255),T.g=Math.round(this.g*255),T.b=Math.round(this.b*255),T.a=1,T}}class d{static color(T){if(!T)return d.cache[0];if(T instanceof a)return T;if(typeof T=="number"&&typeof d.cache[T]<"u")return d.cache[T];if(T&&Array.isArray(T))return T.map(d.color);let M=d.getHex(T),h=new a(M);return d.cache[M]=h,h}static getHex(T){if(Array.isArray(T))return T.map(d.getHex);if(typeof T=="string"){let M=T;if(!isNaN(parseInt(M)))return parseInt(M);if(M=M.trim(),M.length==4&&M[0]=="#"&&(M="#"+M[1]+M[1]+M[2]+M[2]+M[3]+M[3]),M.length==7&&M[0]=="#")return parseInt(M.substring(1),16);let h=d.rgbRegEx.exec(M);if(h){h[1]!=""&&console.log("WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.");let c=0;for(let g=2;g<5;g++){c*=256;let v=h[g].endsWith("%")?255*parseFloat(h[g])/100:parseFloat(h[g]);c+=Math.round(v)}return c}let l=y[M.toLowerCase()];return l!==void 0?l:(console.error("color not found",T.toLowerCase(),y),0)}return T}}d.rgbRegEx=/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,d.cache={0:new a(0)};const y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074,b:255,g:32768,r:16711680,c:49087,m:12517567,y:12566272,k:0,w:16777215},C={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},p={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},E={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol:p,defaultColors:Object.assign({},p),greenCarbon:Object.assign(Object.assign({},p),{C:65280}),cyanCarbon:Object.assign(Object.assign({},p),{C:65535}),magentaCarbon:Object.assign(Object.assign({},p),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},p),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},p),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},p),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},p),{C:8388736}),blueCarbon:Object.assign(Object.assign({},p),{C:255})},R={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},x={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},A={ssPyMol:{prop:"ss",map:C.pyMol},ssJmol:{prop:"ss",map:C.Jmol},Jmol:{prop:"elem",map:E.Jmol},amino:{prop:"resn",map:R.amino},shapely:{prop:"resn",map:R.shapely},nucleic:{prop:"resn",map:R.nucleic},chain:{prop:"chain",map:x.atom},rasmol:{prop:"elem",map:E.rasmol},default:{prop:"elem",map:E.defaultColors},greenCarbon:{prop:"elem",map:E.greenCarbon},chainHetatm:{prop:"chain",map:x.hetatm},cyanCarbon:{prop:"elem",map:E.cyanCarbon},magentaCarbon:{prop:"elem",map:E.magentaCarbon},purpleCarbon:{prop:"elem",map:E.purpleCarbon},whiteCarbon:{prop:"elem",map:E.whiteCarbon},orangeCarbon:{prop:"elem",map:E.orangeCarbon},yellowCarbon:{prop:"elem",map:E.yellowCarbon},blueCarbon:{prop:"elem",map:E.blueCarbon}}}),"./src/exporter.js":(s=>{typeof s.exports=="object"&&(s.exports=window.$3Dmol)}),"./src/glcartoon.ts":((s,i,n)=>{n.r(i),n.d(i,{drawCartoon:()=>N,subdivide_spline:()=>x});var a=n("./src/WebGL/math/index.ts"),d=n("./src/WebGL/shapes/index.ts"),y=n("./src/WebGL/index.ts"),C=n("./src/Gradient.ts"),p=n("./src/colors.ts"),E=n("./src/GLDraw.ts"),R=n("./src/utilities.ts");function x(U,V){var W=[],G=U;G=[],G.push(U[0]);var H,k,X,$,F,K,te,re,le;for(H=1,k=U.length-1;H<k;H++)if(F=U[H],K=U[H+1],F.smoothen){var oe=new a.Vector3((F.x+K.x)/2,(F.y+K.y)/2,(F.z+K.z)/2);oe.atom=F.atom,G.push(oe)}else G.push(F);for(G.push(U[U.length-1]),H=-1,X=G.length;H<=X-3;H++)if($=G[H===-1?0:H],F=G[H+1],K=G[H+2],te=G[H===X-3?X-1:H+3],re=new a.Vector3().subVectors(K,$).multiplyScalar(.5),le=new a.Vector3().subVectors(te,F).multiplyScalar(.5),!K.skip)for(var ue=0;ue<V;ue++){var he=1/V*ue,ge=F.x+he*re.x+he*he*(-3*F.x+3*K.x-2*re.x-le.x)+he*he*he*(2*F.x-2*K.x+re.x+le.x),Oe=F.y+he*re.y+he*he*(-3*F.y+3*K.y-2*re.y-le.y)+he*he*he*(2*F.y-2*K.y+re.y+le.y),Le=F.z+he*re.z+he*he*(-3*F.z+3*K.z-2*re.z-le.z)+he*he*he*(2*F.z-2*K.z+re.z+le.z),$e=new a.Vector3(ge,Oe,Le);ue<V/2?$e.atom=F.atom:$e.atom=K.atom,W.push($e)}return W.push(G[G.length-1]),W}const A=.5,w=1.3,T=.8,M=.4,h=.4;function l(U,V,W,G){for(var H,k,X,$,F=0,K=V.length;F<K;F++){$=Math.round(F*(G.length-1)/K),X=p.CC.color(G[$]);var te=U.updateGeoGroup(2),re=te.vertexArray,le=te.colorArray,oe=te.faceArray;H=te.vertices,k=H*3,re[k]=V[F].x,re[k+1]=V[F].y,re[k+2]=V[F].z,re[k+3]=W[F].x,re[k+4]=W[F].y,re[k+5]=W[F].z;for(var ue=0;ue<6;++ue)le[k+3*ue]=X.r,le[k+1+3*ue]=X.g,le[k+2+3*ue]=X.b;if(F>0){var he=[H,H+1,H-1,H-2],ge=te.faceidx;oe[ge]=he[0],oe[ge+1]=he[1],oe[ge+2]=he[3],oe[ge+3]=he[1],oe[ge+4]=he[2],oe[ge+5]=he[3],te.faceidx+=6}te.vertices+=2}}function c(U,V,W,G,H,k,X){var $,F,K,te;if(K=V.length,K<2||V[0].length<2)return;for($=0;$<K;$++)V[$]=x(V[$],G);if(te=V[0].length,!H)return l(U,V[0],V[K-1],W);var re,le,oe,ue,he,ge,Oe=[],Le=[],$e=[];for(F=0;F<K;F++)Oe.push(.25+1.5*Math.sqrt((K-1)*F-Math.pow(F,2))/(K-1)),Le.push(.5),$e.push(2*(Math.pow(F/K,2)-F/K)+.6);var we=[];for(F=0;F<K*2-1;F++)we[F]=[F,F+1,F+1-2*K,F-2*K];we[K*2-1]=[F,F+1-2*K,F+1-4*K,F-2*K];var ce,xe,Ne,Xe,rt,nt,et,Ze,qe,Ve;let Ge=U.updateGeoGroup();for($=0;$<te;$++){let ne=U.groups,se=!1;Ge=U.updateGeoGroup(2*K),ne!=U.groups&&$>0&&($=$-1,se=!0),nt=Math.round($*(W.length-1)/te),rt=p.CC.color(W[nt]),he=oe,ge=ue,oe=[],ue=[],re=[],V[0][$].atom!==void 0&&(Xe=V[0][$].atom,X==="oval"?le=Oe:X==="rectangle"?le=Le:X==="parabola"&&(le=$e)),le||(le=Le);var at,ot;for(F=0;F<K;F++)$<te-1?at=V[F][$+1].clone().sub(V[F][$]):at=V[F][$-1].clone().sub(V[F][$]).negate(),F<K-1?ot=V[F+1][$].clone().sub(V[F][$]):ot=V[F-1][$].clone().sub(V[F][$]).negate(),re[F]=ot.cross(at).normalize().multiplyScalar(H*le[F]);for(F=0;F<K;F++)oe[F]=V[F][$].clone().add(re[F].clone().negate());for(F=0;F<K;F++)ue[F]=V[F][$].clone().add(re[F]);for(et=Ge.vertexArray,Ze=Ge.colorArray,qe=Ge.faceArray,ce=Ge.vertices,xe=ce*3,F=0;F<K;F++)et[xe+3*F+0]=oe[F].x,et[xe+3*F+1]=oe[F].y,et[xe+3*F+2]=oe[F].z;for(F=0;F<K;F++)et[xe+3*F+0+3*K]=ue[K-1-F].x,et[xe+3*F+1+3*K]=ue[K-1-F].y,et[xe+3*F+2+3*K]=ue[K-1-F].z;for(F=0;F<2*K;++F)Ze[xe+3*F+0]=rt.r,Ze[xe+3*F+1]=rt.g,Ze[xe+3*F+2]=rt.b;if($>0&&!se){for(F=0;F<K*2;F++)Ve=[ce+we[F][0],ce+we[F][1],ce+we[F][2],ce+we[F][3]],Ne=Ge.faceidx,qe[Ne]=Ve[0],qe[Ne+1]=Ve[1],qe[Ne+2]=Ve[3],qe[Ne+3]=Ve[1],qe[Ne+4]=Ve[2],qe[Ne+5]=Ve[3],Ge.faceidx+=6;if(Xe.clickable||Xe.hoverable){var J=[];J.push(new d.Triangle(he[0],oe[0],oe[K-1])),J.push(new d.Triangle(he[0],oe[K-1],he[K-1])),J.push(new d.Triangle(he[K-1],oe[K-1],ue[K-1])),J.push(new d.Triangle(he[K-1],ue[K-1],ge[K-1])),J.push(new d.Triangle(ue[0],ge[0],ge[K-1])),J.push(new d.Triangle(ue[K-1],ue[0],ge[K-1])),J.push(new d.Triangle(oe[0],he[0],ge[0])),J.push(new d.Triangle(ue[0],oe[0],ge[0]));for(F in J)Xe.intersectionShape.triangle.push(J[F])}}Ge.vertices+=2*K}for(et=Ge.vertexArray,Ze=Ge.colorArray,qe=Ge.faceArray,ce=Ge.vertices,xe=ce*3,Ne=Ge.faceidx,$=0;$<K-1;$++)Ve=[$,$+1,2*K-2-$,2*K-1-$],Ne=Ge.faceidx,qe[Ne]=Ve[0],qe[Ne+1]=Ve[1],qe[Ne+2]=Ve[3],qe[Ne+3]=Ve[1],qe[Ne+4]=Ve[2],qe[Ne+5]=Ve[3],Ge.faceidx+=6;for($=0;$<K-1;$++)Ve=[ce-1-$,ce-2-$,ce-2*K+$+1,ce-2*K+$],Ne=Ge.faceidx,qe[Ne]=Ve[0],qe[Ne+1]=Ve[1],qe[Ne+2]=Ve[3],qe[Ne+3]=Ve[1],qe[Ne+4]=Ve[2],qe[Ne+5]=Ve[3],Ge.faceidx+=6}function g(U,V,W,G,H,k){if(!(V.length<2)){var X,$;if(X=V[0],$=V[V.length-1],X=x(X,G),$=x($,G),!H)return l(U,X,$,W);var F=[],K,te,re,le,oe,ue=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]],he,ge,Oe,Le,$e,we,ce,xe,Ne,Xe,rt,nt,et,Ze,qe,Ve,Ge;for(xe=0,Ne=X.length;xe<Ne;xe++){if($e=Math.round(xe*(W.length-1)/Ne),Le=p.CC.color(W[$e]),F.push(te=X[xe]),F.push(te),F.push(re=$[xe]),F.push(re),xe<Ne-1){var at=X[xe+1].clone().sub(X[xe]),ot=$[xe].clone().sub(X[xe]);K=ot.cross(at).normalize().multiplyScalar(H)}for(F.push(le=X[xe].clone().add(K)),F.push(le),F.push(oe=$[xe].clone().add(K)),F.push(oe),te.atom!==void 0&&(we=te.atom),Ze=U.updateGeoGroup(8),qe=Ze.vertexArray,Ve=Ze.colorArray,Ge=Ze.faceArray,he=Ze.vertices,ge=he*3,qe[ge]=te.x,qe[ge+1]=te.y,qe[ge+2]=te.z,qe[ge+3]=te.x,qe[ge+4]=te.y,qe[ge+5]=te.z,qe[ge+6]=re.x,qe[ge+7]=re.y,qe[ge+8]=re.z,qe[ge+9]=re.x,qe[ge+10]=re.y,qe[ge+11]=re.z,qe[ge+12]=le.x,qe[ge+13]=le.y,qe[ge+14]=le.z,qe[ge+15]=le.x,qe[ge+16]=le.y,qe[ge+17]=le.z,qe[ge+18]=oe.x,qe[ge+19]=oe.y,qe[ge+20]=oe.z,qe[ge+21]=oe.x,qe[ge+22]=oe.y,qe[ge+23]=oe.z,Xe=0;Xe<8;++Xe)Ve[ge+3*Xe]=Le.r,Ve[ge+1+3*Xe]=Le.g,Ve[ge+2+3*Xe]=Le.b;if(xe>0){var J=ce!==void 0&&we!==void 0&&ce.serial!==we.serial;for(Xe=0;Xe<4;Xe++){var ne=[he+ue[Xe][0],he+ue[Xe][1],he+ue[Xe][2],he+ue[Xe][3]];if(Oe=Ze.faceidx,Ge[Oe]=ne[0],Ge[Oe+1]=ne[1],Ge[Oe+2]=ne[3],Ge[Oe+3]=ne[1],Ge[Oe+4]=ne[2],Ge[Oe+5]=ne[3],Ze.faceidx+=6,we.clickable||ce.clickable||we.hoverable||ce.hoverable){var se=F[ne[3]].clone(),_e=F[ne[0]].clone(),Se=F[ne[2]].clone(),Pe=F[ne[1]].clone();if(se.atom=F[ne[3]].atom||null,Se.atom=F[ne[2]].atom||null,_e.atom=F[ne[0]].atom||null,Pe.atom=F[ne[1]].atom||null,J){var Ie=se.clone().add(_e).multiplyScalar(.5),Q=Se.clone().add(Pe).multiplyScalar(.5),me=se.clone().add(Pe).multiplyScalar(.5);Xe%2===0?((ce.clickable||ce.hoverable)&&(rt=new d.Triangle(Ie,me,se),nt=new d.Triangle(Q,Se,me),et=new d.Triangle(me,Se,se),ce.intersectionShape.triangle.push(rt),ce.intersectionShape.triangle.push(nt),ce.intersectionShape.triangle.push(et)),(we.clickable||we.hoverable)&&(rt=new d.Triangle(_e,Pe,me),nt=new d.Triangle(Pe,Q,me),et=new d.Triangle(_e,me,Ie),we.intersectionShape.triangle.push(rt),we.intersectionShape.triangle.push(nt),we.intersectionShape.triangle.push(et))):((we.clickable||we.hoverable)&&(rt=new d.Triangle(Ie,me,se),nt=new d.Triangle(Q,Se,me),et=new d.Triangle(me,Se,se),we.intersectionShape.triangle.push(rt),we.intersectionShape.triangle.push(nt),we.intersectionShape.triangle.push(et)),(ce.clickable||ce.hoverable)&&(rt=new d.Triangle(_e,Pe,me),nt=new d.Triangle(Pe,Q,me),et=new d.Triangle(_e,me,Ie),ce.intersectionShape.triangle.push(rt),ce.intersectionShape.triangle.push(nt),ce.intersectionShape.triangle.push(et)))}else(we.clickable||we.hoverable)&&(rt=new d.Triangle(_e,Pe,se),nt=new d.Triangle(Pe,Se,se),we.intersectionShape.triangle.push(rt),we.intersectionShape.triangle.push(nt))}}}Ze.vertices+=8,ce=we}var be=F.length-8;for(Ze=U.updateGeoGroup(8),qe=Ze.vertexArray,Ve=Ze.colorArray,Ge=Ze.faceArray,he=Ze.vertices,ge=he*3,Oe=Ze.faceidx,xe=0;xe<4;xe++){F.push(F[xe*2]),F.push(F[be+xe*2]);var ke=F[xe*2],ve=F[be+xe*2];qe[ge+6*xe]=ke.x,qe[ge+1+6*xe]=ke.y,qe[ge+2+6*xe]=ke.z,qe[ge+3+6*xe]=ve.x,qe[ge+4+6*xe]=ve.y,qe[ge+5+6*xe]=ve.z,Ve[ge+6*xe]=Le.r,Ve[ge+1+6*xe]=Le.g,Ve[ge+2+6*xe]=Le.b,Ve[ge+3+6*xe]=Le.r,Ve[ge+4+6*xe]=Le.g,Ve[ge+5+6*xe]=Le.b}be+=8,rt=[he,he+2,he+6,he+4],nt=[he+1,he+5,he+7,he+3],Ge[Oe]=rt[0],Ge[Oe+1]=rt[1],Ge[Oe+2]=rt[3],Ge[Oe+3]=rt[1],Ge[Oe+4]=rt[2],Ge[Oe+5]=rt[3],Ge[Oe+6]=nt[0],Ge[Oe+7]=nt[1],Ge[Oe+8]=nt[3],Ge[Oe+9]=nt[1],Ge[Oe+10]=nt[2],Ge[Oe+11]=nt[3],Ze.faceidx+=12,Ze.vertices+=8}}function v(U,V,W,G,H,k,X){(!X||X==="default")&&(X="rectangle"),X==="edged"?g(U,V,W,G,H):(X==="rectangle"||X==="oval"||X==="parabola")&&c(U,V,W,G,H,k,X)}function b(U){return U&&U.elem==="C"&&U.atom==="CA"}function S(U,V){if(U&&V&&U.chain===V.chain){if(!U.hetflag&&!V.hetflag&&U.reschain===V.reschain&&(U.resi===V.resi||U.resi===V.resi-1))return!0;if(U.resi<V.resi){var W=U.x-V.x,G=U.y-V.y,H=U.z-V.z,k=W*W+G*G+H*H;if(U.atom=="CA"&&V.atom=="CA"&&k<16)return!0;if((U.atom=="P"||V.atom=="P")&&k<64)return!0}}return!1}function u(U,V,W,G,H){if(!(V==null||V.vertices==0)){H&&(V.initTypedArrays(),V.setUpNormals());var k=new y.MeshDoubleLambertMaterial;k.vertexColors=y.Coloring.FaceColors,typeof W=="number"&&W>=0&&W<1&&(k.transparent=!0,k.opacity=W),k.outline=G;var X=new y.Mesh(V,k);U.add(X)}}function m(U,V,W,G,H,k,X,$,F){var K,te,re,le,oe,ue;if(!(!G||!H||!X)){var he=H.sub(G);he.normalize();var ge=$[F];for(te=F+1;te<$.length&&(ge=$[te],ge.atom!=X.atom);te++);if(ge=ge?new a.Vector3(ge.x,ge.y,ge.z):new a.Vector3(0,0,0),ge.sub(G),X.ss==="arrow start"){var Oe=ge.clone().multiplyScalar(.3).cross(H);G.add(Oe);var Le=ge.clone().cross(he).normalize();he.rotateAboutVector(Le,.43)}for(X.style.cartoon.ribbon?K=X.style.cartoon.thickness||M:X.style.cartoon.width?K=X.style.cartoon.width:X.ss==="c"?X.atom==="P"?K=T:K=A:X.ss==="arrow start"?(K=w,oe=!0):X.ss==="arrow end"||X.ss==="h"&&X.style.cartoon.tubes||X.ss==="tube start"?K=A:K=w,k!=null&&he.dot(k)<0&&he.negate(),he.multiplyScalar(K),te=0;te<V;te++)re=-1+te*2/(V-1),le=new a.Vector3(G.x+re*he.x,G.y+re*he.y,G.z+re*he.z),le.atom=X,X.ss==="s"&&(le.smoothen=!0),U[te].push(le);if(oe)for(he.multiplyScalar(2),te=0;te<V;te++)re=-1+te*2/(V-1),le=new a.Vector3(G.x+re*he.x,G.y+re*he.y,G.z+re*he.z),le.atom=X,le.smoothen=!1,le.skip=!0,U[te].push(le);return ue=X.style.cartoon.style||"default",U.style?U.style!=ue&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),U.style="default"):U.style=ue,(X.ss==="arrow start"||X.ss==="arrow end")&&(X.ss="s"),oe}}const _={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},D={DA:!0,DG:!0,A:!0,G:!0},L={DT:!0,DC:!0,U:!0,C:!0,T:!0},P={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function N(U,V,W,G=10){let H=G,k=G;var X,$,F,K,te,re,le,oe,ue,he,ge,Oe,Le,$e,we,ce,xe,Ne,Xe=new y.Geometry(!0),rt=new y.Geometry(!0),nt=[],et=[],Ze=1,qe=!1,Ve={};for(var Ge in C.Gradient.builtinGradients)C.Gradient.builtinGradients.hasOwnProperty(Ge)&&(Ve[Ge]=new C.Gradient.builtinGradients[Ge](W[1],W[0]));var at=function(Je,j){return W&&j.color==="spectrum"?j.colorscheme in Ve?Ve[j.colorscheme].valueToHex(Je.resi):Ve.sinebow.valueToHex(Je.resi):(0,R.getColorFromStyle)(Je,j).getHex()};for(oe=0;oe<H;oe++)et[oe]=[];var ot=!1,J=!1,ne=[];for(oe in V){if(K=V[oe],K.elem==="C"&&K.atom==="CA"){var se=S(F,K);se&&K.ss==="s"?ot=!0:ot&&(F&&$&&F.style.cartoon.arrows&&$.style.cartoon.arrows&&(F.ss="arrow end",$.ss="arrow start"),ot=!1),se&&(F.ss==="h"||F.ss=="tube start")&&F.style.cartoon.tubes?!J&&F.ss!="tube start"&&K.style.cartoon.tubes&&(K.ss="tube start",J=!0):J&&(F.ss==="tube start"?F.ss="tube end":$&&$.style.cartoon.tubes&&($.ss="tube end"),J=!1),$=F,F=K}K&&K.atom in _&&ne.push(K)}J&&F.style.cartoon.tubes&&(F.ss="tube end",J=!1);var _e=function(Je){et[0].length>0&&v(rt,et,nt,k,le,Ze,et.style);var j=[],Me=null;if(Je){for(oe=0;oe<H;oe++)j[oe]=et[oe][et[oe].length-1];Me=nt[nt.length-1]}for(et=[],oe=0;oe<H;oe++)et[oe]=[];if(nt=[],Je){for(oe=0;oe<H;oe++)et[oe].push(j[oe]);nt.push(Me)}u(U,rt,Ze,qe,!0),u(U,Xe,Ze,qe,!1),rt=new y.Geometry(!0),Xe=new y.Geometry(!0)};F=void 0;let Se=[];for(var Pe=0;Pe<ne.length;Pe++){K=ne[Pe];var Ie=K.resn.trim(),Q=Ie in P;if(Ze=1,X=K.style.cartoon,F&&F.style.cartoon&&(Ze=F.style.cartoon.opacity),F&&F.style.cartoon&&F.style.cartoon.outline&&(qe=F.style.cartoon.outline),F&&F.style.cartoon&&(!K.style.cartoon||F.style.cartoon.opacity!=K.style.cartoon.opacity)&&_e(F.chain==K.chain),F&&K&&!S(F,K)&&F.chain&&F.chain==K.chain&&!F.hetflag&&!K.hetflag&&F.reschain+1==K.reschain&&Se.push([F,K]),X.style==="trace"){if(!K.hetflag){if(K.elem==="C"&&K.atom==="CA"||Q&&K.atom==="P"||K.atom==="BB"){if(re=at(K,X),(0,R.isNumeric)(X.thickness)?le=X.thickness:le=M,S(F,K))if(re==te){var me=p.CC.color(re);E.GLDraw.drawCylinder(Xe,F,K,le,me,2,2)}else{var be=new a.Vector3().addVectors(F,K).multiplyScalar(.5),ke=p.CC.color(te),ve=p.CC.color(re);E.GLDraw.drawCylinder(Xe,F,be,le,ke,2,0),E.GLDraw.drawCylinder(Xe,be,K,le,ve,0,2)}if((K.clickable===!0||K.hoverable)&&K.intersectionShape!==void 0){var ze=new a.Vector3(K.x,K.y,K.z);K.intersectionShape.sphere.push(new d.Sphere(ze,le))}F=K,te=re}}}else{if(b(K)||Q&&(K.atom==="P"||K.atom.indexOf("O5")==0)){if(Ne)if(K.ss==="tube end")Ne=!1,xe=new a.Vector3(K.x,K.y,K.z),E.GLDraw.drawCylinder(Xe,ce,xe,2,p.CC.color(te),1,1),K.ss="h";else if(F.chain!=K.chain||F.ss==="tube end")Ne=!1,F.ss="h",xe=new a.Vector3(F.x,F.y,F.z),E.GLDraw.drawCylinder(Xe,ce,xe,2,p.CC.color(te),1,1);else continue;if(F&&(!S(F,K)||F.ss==="tube start")){for(F.ss==="tube start"&&(Ne=!0,ce=new a.Vector3(F.x,F.y,F.z),F.ss="h"),we&&(Oe?$e=new a.Vector3().addVectors(F,Oe).multiplyScalar(.5):$e=new a.Vector3(F.x,F.y,F.z),E.GLDraw.drawCylinder(Xe,$e,we,h,p.CC.color(we.color),0,2),m(et,H,!0,Oe,Le,ge,F,ne,Pe),nt.push(re),$e=null,we=null),et[0].length>0&&v(rt,et,nt,k,le,Ze,et.style),et=[],oe=0;oe<H;oe++)et[oe]=[];nt=[]}if(F===void 0||F.rescode!=K.rescode||F.resi!=K.resi){if(we&&F!=null){$e=new a.Vector3().addVectors(F,K).multiplyScalar(.5);var q=$e.clone().sub(we).multiplyScalar(.02);$e.add(q),E.GLDraw.drawCylinder(Xe,$e,we,h,p.CC.color(we.color),0,2),$e=null,we=null}re=at(K,X),nt.push(re),(0,R.isNumeric)(X.thickness)?le=X.thickness:le=M,F=K,ue=new a.Vector3(F.x,F.y,F.z),ue.resi=F.resi,te=re}(K.clickable===!0||K.hoverable===!0)&&(K.intersectionShape===void 0||K.intersectionShape.triangle===void 0)&&(K.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else F!=null&&(b(F)&&K.atom==="O"||Q&&F.atom==="P"&&(K.atom==="OP2"||K.atom==="O2P")||Q&&F.atom.indexOf("O5")==0&&K.atom.indexOf("C5")==0)?(he=new a.Vector3(K.x,K.y,K.z),he.resi=K.resi,(K.atom==="OP2"||K.atom==="O2P")&&(Le=new a.Vector3(K.x,K.y,K.z))):Q&&K.atom.indexOf("O3")==0?Oe=new a.Vector3(K.x,K.y,K.z):(K.atom==="N1"&&Ie in D||K.atom==="N3"&&Ie in L)&&(we=new a.Vector3(K.x,K.y,K.z),we.color=(0,R.getColorFromStyle)(K,X).getHex());he&&ue&&he.resi===ue.resi&&(m(et,H,!0,ue,he,ge,F,ne,Pe),ge=he,ue=null,he=null,nt.push(re))}}we&&(Oe?$e=new a.Vector3().addVectors(F,Oe).multiplyScalar(.5):$e=new a.Vector3(F.x,F.y,F.z),E.GLDraw.drawCylinder(Xe,$e,we,h,p.CC.color(we.color),0,2),m(et,H,!0,Oe,Le,ge,F,ne,Pe),nt.push(re)),_e(!1);var He=function(Je,j){if(Je.style.cartoon.gapcutoff&&Je.style.cartoon.gapcutoff==j.style.cartoon.gapcutoff){let Ae=Je.style.cartoon.gapcutoff,ee=j.resi-Je.resi;if(ee>0&&ee<Ae){let pe=.25,De=j.x-Je.x,lt=j.y-Je.y,ct=j.z-Je.z,st=Math.sqrt(De*De+lt*lt+ct*ct),xt=st/(2*ee),Zt=new a.Vector3(Je.x,Je.y,Je.z),St=st/xt,vt=new a.Vector3((j.x-Je.x)/St,(j.y-Je.y)/St,(j.z-Je.z)/St);Zt.add({x:vt.x/2,y:vt.y/2,z:vt.z/2});let yt=Zt.clone().add(vt);vt.multiplyScalar(2);let Gt=(0,R.extend)({},Je);for(var Me=0;Me<ee;Me++){Gt.resi+=1;let Ct=at(Gt,Gt.style.cartoon);E.GLDraw.drawCylinder(Xe,Zt,yt,pe,p.CC.color(Ct),E.CAP.FLAT,E.CAP.FLAT),Zt.add(vt),yt.add(vt)}_e(!1)}}};for(let Je of Se)He(Je[0],Je[1])}}),"./src/index.ts":((s,i,n)=>{n.r(i),n.d(i,{CAP:()=>a.CAP,CC:()=>a.CC,CONTEXTS_PER_VIEWPORT:()=>a.CONTEXTS_PER_VIEWPORT,Color:()=>a.Color,CustomLinear:()=>a.CustomLinear,Cylinder:()=>a.Cylinder,GLDraw:()=>a.GLDraw,GLModel:()=>a.GLModel,GLShape:()=>a.GLShape,GLViewer:()=>a.GLViewer,GLVolumetricRender:()=>a.GLVolumetricRender,Gradient:()=>a.Gradient,GradientType:()=>a.GradientType,Label:()=>a.Label,LabelCount:()=>a.LabelCount,MarchingCube:()=>a.MarchingCube,MarchingCubeInitializer:()=>a.MarchingCubeInitializer,Matrix3:()=>a.Matrix3,Matrix4:()=>a.Matrix4,Parsers:()=>a.Parsers,PausableTimer:()=>a.PausableTimer,PointGrid:()=>a.PointGrid,ProteinSurface:()=>a.ProteinSurface,Quaternion:()=>a.Quaternion,ROYGB:()=>a.ROYGB,RWB:()=>a.RWB,Ray:()=>a.Ray,Sinebow:()=>a.Sinebow,Sphere:()=>a.Sphere,SurfaceType:()=>a.SurfaceType,Triangle:()=>a.Triangle,Vector2:()=>a.Vector2,Vector3:()=>a.Vector3,VolumeData:()=>a.VolumeData,adjustVolumeStyle:()=>a.adjustVolumeStyle,applyPartialCharges:()=>a.applyPartialCharges,autoinit:()=>a.autoinit,autoload:()=>a.autoload,base64ToArray:()=>a.base64ToArray,bondLength:()=>a.bondLength,builtinColorSchemes:()=>a.builtinColorSchemes,builtinGradients:()=>a.builtinGradients,chains:()=>a.chains,clamp:()=>a.clamp,conversionMatrix3:()=>a.conversionMatrix3,createStereoViewer:()=>a.createStereoViewer,createViewer:()=>a.createViewer,createViewerGrid:()=>a.createViewerGrid,deepCopy:()=>a.deepCopy,degToRad:()=>a.degToRad,download:()=>a.download,drawCartoon:()=>a.drawCartoon,elementColors:()=>a.elementColors,extend:()=>a.extend,get:()=>a.get,getAtomProperty:()=>a.getAtomProperty,getColorFromStyle:()=>a.getColorFromStyle,getElement:()=>a.getElement,getExtent:()=>a.getExtent,getGradient:()=>a.getGradient,getPropertyRange:()=>a.getPropertyRange,getbin:()=>a.getbin,htmlColors:()=>a.htmlColors,inflateString:()=>a.inflateString,isEmptyObject:()=>a.isEmptyObject,isNumeric:()=>a.isNumeric,makeFunction:()=>a.makeFunction,mergeGeos:()=>a.mergeGeos,normalizeValue:()=>a.normalizeValue,partialCharges:()=>a.partialCharges,processing_autoinit:()=>a.processing_autoinit,residues:()=>a.residues,setBondLength:()=>a.setBondLength,setSyncSurface:()=>a.setSyncSurface,specStringToObject:()=>a.specStringToObject,splitMesh:()=>a.splitMesh,ssColors:()=>a.ssColors,subdivide_spline:()=>a.subdivide_spline,syncSurface:()=>a.syncSurface,viewers:()=>a.viewers});var a=n("./src/3Dmol.ts");window&&(window.$3Dmol=i)}),"./src/parsers/BCIF.ts":((s,i,n)=>{n.r(i),n.d(i,{BCIF:()=>M});var a=n("./src/utilities.ts"),d=n("./src/parsers/utils/computeSecondaryStructure.ts"),y=n("./src/parsers/utils/processSymmetries.ts"),C=n("./src/parsers/cifutils/category.ts"),p=n("./src/parsers/utils/assignPDBBonds.ts"),E=n("./src/WebGL/index.ts"),R=n("./src/parsers/utils/isEmpty.ts"),x=n("./src/vendor/mmtf.js");class A{constructor(l){if(this.C={},l){let c=l.getField("comp_id"),g=l.getField("atom_id_1"),v=l.getField("atom_id_2"),b=l.getField("value_order");for(let S=0;S<c.length;S++){let u=c[S],m=g[S],_=v[S],D=b[S],L=1;D=="doub"?L=2:D=="trip"&&(L=3),this.C[u]==null&&(this.C[u]={}),this.C[u][m]==null&&(this.C[u][m]={}),this.C[u][_]==null&&(this.C[u][_]={}),this.C[u][m][_]=L,this.C[u][_][m]=L}}}order(l,c,g){return this.C[l]!==void 0&&this.C[l][c]!==void 0&&this.C[l][c][g]!==void 0?this.C[l][c][g]:0}}class w{constructor(l){if(this.C=[],l){let c=l.getField("conn_type_id"),g=l.getField("ptnr1_label_asym_id"),v=l.getField("ptnr1_label_seq_id"),b=l.getField("ptnr1_label_comp_id"),S=l.getField("ptnr1_label_atom_id"),u=l.getField("ptnr2_label_asym_id"),m=l.getField("ptnr2_label_seq_id"),_=l.getField("ptnr2_label_comp_id"),D=l.getField("ptnr2_label_atom_id"),L=l.getField("pdbx_value_order");for(let P=0;P<c.length;P++)if(c[P]=="disulf"||c[P]=="covale"){let N=L?L[P]==""?1:parseInt(L[P]):1;this.C.push([[g[P],v[P],b[P],S[P]],[u[P],m[P],_[P],D[P]],N])}}}}class T{constructor(){this.R={}}add(l){this.R[l.lchain]==null&&(this.R[l.lchain]={}),this.R[l.lchain][l.lresi]==null&&(this.R[l.lchain][l.lresi]={}),this.R[l.lchain][l.lresi][l.lresn]==null&&(this.R[l.lchain][l.lresi][l.lresn]=[]),this.R[l.lchain][l.lresi][l.lresn].push(l),this.R[l.lchain][l.lresi][l.lresn][l.atom]=l}geta([l,c,g,v]){if(this.R[l]!==void 0&&this.R[l][c]!==void 0&&this.R[l][c][g]!==void 0)return this.R[l][c][g][v]}setBonds(l,c){for(let g in this.R)for(let v in this.R[g])for(let b in this.R[g][v]){let S=this.R[g][v][b];for(let u=0;u<S.length;u++)for(let m=u+1;m<S.length;m++){let _=S[u],D=S[m],L=l.order(b,_.atom,D.atom);_.altLoc!=D.altLoc&&_.altLoc!=""&&D.altLoc!=""&&(L=0),L>0&&(_.bonds.push(D.index),D.bonds.push(_.index),_.bondOrder.push(L),D.bondOrder.push(L))}}for(let g of c.C){let v=g[0],b=g[1],S=g[2],u=this.geta(v),m=this.geta(b);u!=null&&m!=null&&(u.bonds.push(m.index),m.bonds.push(u.index),u.bondOrder.push(S),m.bondOrder.push(S))}}}function M(h,l){var c=!l.keepH,g=l.altLoc?l.altLoc:"A",v=!l.noComputeSecondaryStructure;const b=!l.doAssembly,S=l.assignBonds===void 0?!0:l.assignBonds;if(typeof h=="string")try{h=(0,a.base64ToArray)(h)}catch{h=new TextEncoder().encode(h)}else h=new Uint8Array(h);var u=x.decodeMsgpack(h);u==31&&(h=(0,a.inflateString)(h,!1),u=x.decodeMsgpack(h));var m=[],_=m.modelData=[],D=u.dataBlocks.length;if(D==0)return m;l.multimodel||(D=1);for(let L=0;L<D;L++){let P=m.length;const N=[];_.push({symmetries:[]}),m.push([]);const U=u.dataBlocks[L],V=Object.create(null);for(const Ve of U.categories)V[Ve.name.substr(1)]=(0,C.Category)(Ve);let W={},G=V.struct_conf;if(G){let Ve=G.getField("conf_type_id"),Ge=G.getField("beg_label_asym_id"),at=G.getField("beg_label_seq_id"),ot=G.getField("end_label_seq_id");for(let J=0;J<Ve.length;J++)if(Ve[J].startsWith("H")){let ne=Ge[J],se=at[J],_e=ot[J];ne in W||(W[ne]={}),W[ne][se]="h1";for(let Se=se+1;Se<_e;Se++)W[ne][Se]="h";W[ne][_e]="h2"}}let H=V.struct_sheet_range;if(H){let Ve=H.getField("id"),Ge=H.getField("beg_label_asym_id"),at=H.getField("beg_label_seq_id"),ot=H.getField("end_label_seq_id");for(let J=0;J<Ve.length;J++){let ne=Ge[J],se=at[J],_e=ot[J];ne in W||(W[ne]={}),W[ne][se]="s1";for(let Se=se+1;Se<_e;Se++)W[ne][Se]="s";W[ne][_e]="s2"}}let k=V.pdbx_struct_oper_list,X=k.getField("id");if(X&&!b){let Ve=k.getField("matrix[1][1]"),Ge=k.getField("matrix[1][2]"),at=k.getField("matrix[1][3]"),ot=k.getField("matrix[2][1]"),J=k.getField("matrix[2][2]"),ne=k.getField("matrix[2][3]"),se=k.getField("matrix[3][1]"),_e=k.getField("matrix[3][2]"),Se=k.getField("matrix[3][3]"),Pe=k.getField("vector[1]"),Ie=k.getField("vector[2]"),Q=k.getField("vector[3]");for(let me=0;me<X.length;me++){const be=new E.Matrix4(Ve[me],Ge[me],at[me],Pe[me],ot[me],J[me],ne[me],Ie[me],se[me],_e[me],Se[me],Q[me]);_[_.length-1].symmetries.push(be)}}let $=new A(V.chem_comp_bond),F=new T,K=new w(V.struct_conn),te=V.atom_site,re=te.rowCount,le=te.getField("group_PDB"),oe=te.getField("Cartn_x"),ue=te.getField("Cartn_y"),he=te.getField("Cartn_z"),ge=te.getField("auth_asym_id"),Oe=te.getField("label_asym_id"),Le=te.getField("auth_seq_id"),$e=te.getField("label_seq_id"),we=te.getField("auth_comp_id"),ce=te.getField("label_comp_id"),xe=te.getField("auth_atom_id"),Ne=te.getField("label_atom_id"),Xe=te.getField("type_symbol"),rt=te.getField("B_iso_or_equiv"),nt=te.getField("id"),et=te.getField("label_alt_id"),Ze=te.getField("pdbx_PDB_model_num"),qe=Ze?Ze[0]:0;for(let Ve=0;Ve<re;Ve++){if(le!==void 0&&le[Ve]==="TER")continue;if(Ze&&Ze[Ve]!=qe)if(qe=Ze[Ve],l.multimodel)l.onemol||(m.push([]),_.push(_[_.length-1]),qe=Ze[Ve],F.setBonds($,K),F=new T);else break;const Ge={};Ge.x=oe[Ve],Ge.y=ue[Ve],Ge.z=he[Ve],Ge.chain=ge?ge[Ve]:Oe?Oe[Ve]:void 0,Ge.lchain=Oe?Oe[Ve]:void 0,Ge.resi=Le?Le[Ve]:$e?$e[Ve]:void 0,Ge.lresi=$e?$e[Ve]:void 0,Ge.resn=we?we[Ve].trim():ce?ce[Ve].trim():void 0,Ge.lresn=ce?ce[Ve].trim():void 0,Ge.atom=xe?xe[Ve].replace(/"/gm,""):Ne?Ne[Ve].replace(/"/gm,""):void 0,Ge.icode=et?et[Ve]:void 0,Ge.altLoc=Ge.icode,Ge.hetflag=!le||le[Ve]==="HETA"||le[Ve]==="HETATM";let at="X";Xe&&(at=Xe[Ve].replace(/\(?\+?\d+.*/,"")),Ge.elem=at[0].toUpperCase()+at.substring(1,2).toLowerCase(),rt&&(Ge.b=rt[Ve]),!(c&&Ge.elem=="H")&&(Ge.altLoc!=""&&Ge.altLoc!=g&&g!="*"||(Ge.bonds=[],Ge.ss="c",Ge.serial=nt[Ve],Ge.model=qe,Ge.bondOrder=[],Ge.properties={},Ge.index=m[m.length-1].length,N[Ge.serial]=[m.length,Ge.index],m[m.length-1].push(Ge),F.add(Ge)))}if(F.setBonds($,K),!(0,R.isEmpty)(W))for(let Ve=P;Ve<m.length;Ve++){let Ge=m[Ve];for(let at=0;at<Ge.length;at++){const ot=Ge[at];if(ot!==void 0&&ot.lchain in W&&ot.lresi in W[ot.lchain]){const J=W[ot.lchain][ot.lresi];ot.ss=J[0],J.length>1&&(J[1]=="1"?ot.ssbegin=!0:J[1]=="2"&&(ot.ssend=!0))}}}l.multimodel&&L<D-1&&(l.onemol||(m.push([]),_.push({symmetries:[]})))}for(let L=0;L<m.length;L++)S&&!(l.duplicateAssemblyAtoms&&!l.dontConnectDuplicatedAtoms)&&(0,p.assignPDBBonds)(m[L],l),v&&(0,d.computeSecondaryStructure)(m[L],l.hbondCutoff),(0,y.processSymmetries)(_[L].symmetries,m[L],l,_[L].cryst),l.duplicateAssemblyAtoms&&!l.dontConnectDuplicatedAtoms&&S&&(0,p.assignPDBBonds)(m[L],l);return m}}),"./src/parsers/CDJSON.ts":((s,i,n)=>{n.r(i),n.d(i,{CDJSON:()=>a});function a(d,y){var C=[[]];typeof d=="string"&&(d=JSON.parse(d));for(var p=d.m,E=p[0].a,R=p[0].b,x=p[0].s,A=y!==void 0&&y.parseStyle!==void 0?y.parseStyle:x!==void 0,w=C[C.length-1].length,T=0;T<E.length;T++){var M=E[T],h={};h.id=M.i,h.x=M.x,h.y=M.y,h.z=M.z||0,h.bonds=[],h.bondOrder=[];var l=M.l||"C";h.elem=l[0].toUpperCase()+l.substring(1).toLowerCase(),h.serial=C[C.length-1].length,A&&(h.style=x[M.s||0]),C[C.length-1].push(h)}for(let c=0;c<R.length;c++){let g=R[c],v=g.b+w,b=g.e+w,S=g.o||1,u=C[C.length-1][v],m=C[C.length-1][b];u.bonds.push(b),u.bondOrder.push(S),m.bonds.push(v),m.bondOrder.push(S)}return C}}),"./src/parsers/CIF.ts":((s,i,n)=>{n.r(i),n.d(i,{CIF:()=>E});var a=n("./src/parsers/utils/computeSecondaryStructure.ts"),d=n("./src/parsers/utils/processSymmetries.ts"),y=n("./src/WebGL/index.ts"),C=n("./src/parsers/utils/assignPDBBonds.ts");const p=function(R,x,A,w){return new y.Vector3(x,A,w).applyMatrix3(R)};function E(R,x={}){const A=[],w=!x.doAssembly,T=A.modelData=[],M=x.assignBonds===void 0?!0:x.assignBonds;function h(S,u){const m=[];let _=0,D=0;for(;D<S.length;){for(;S.substring(D,D+u.length)!==u&&D<S.length;)if(S[D]==="'"){for(D++;D<S.length&&S[D]!=="'";)D++;for(;S.substring(D,D+u.length)!==u&&D<S.length;)D++}else if(S[D]==='"'){for(D++;D<S.length&&S[D]!=='"';)D++;D++}else D++;m.push(S.substring(_,D)),_=D=D+u.length}return m}const l=R.split(/\r?\n|\r/),c=[];let g=!1;for(let S=0;S<l.length;S++){var v=l[S].split("#")[0];if(g?v[0]===";"&&(g=!1):v[0]===";"&&(g=!0),g||v!==""){if(!g&&(v=v.trim(),v[0]==="_")){const u=v.split(/\s/)[0].indexOf(".");if(u>-1){let m=v.split("");m[u]="_",v=m.join(""),v=v.substring(0,u)+"_"+v.substring(u+1)}}c.push(v)}}let b=0;for(;b<c.length;){for(;!c[b].startsWith("data_")||c[b]==="data_global";)b++;b++;const S={};for(;b<c.length&&!c[b].startsWith("data_");)if(c[b][0]===void 0)b++;else if(c[b][0]==="_"){const D=c[b].split(/\s/)[0].toLowerCase(),L=S[D]=S[D]||[],P=c[b].substring(c[b].indexOf(D)+D.length);if(P==="")if(b++,c[b][0]===";"){let N=c[b].substring(1);for(b++;c[b]!==";";)N=N+`
`+c[b],b++;L.push(N)}else L.push(c[b]);else L.push(P.trim());b++}else if(c[b].substring(0,5)==="loop_"){b++;const D=[];for(;c[b]===""||c[b][0]==="_";){if(c[b]!==""){let P=c[b].split(/\s/)[0].toLowerCase(),N=S[P]=S[P]||[];D.push(N)}b++}let L=0;for(;b<c.length&&c[b][0]!=="_"&&!c[b].startsWith("loop_")&&!c[b].startsWith("data_");){let P=h(c[b]," ");for(let N=0;N<P.length;N++)P[N]!==""&&(D[L].push(P[N]),L=(L+1)%D.length);b++}}else b++;T.push({symmetries:[]}),A.push([]);const u=S._atom_site_id!==void 0?S._atom_site_id.length:S._atom_site_label.length;let m;if(S._cell_length_a!==void 0){const D=parseFloat(S._cell_length_a),L=parseFloat(S._cell_length_b),P=parseFloat(S._cell_length_c),N=parseFloat(S._cell_angle_alpha)||90,U=parseFloat(S._cell_angle_beta)||90,V=parseFloat(S._cell_angle_gamma)||90;m=(0,y.conversionMatrix3)(D,L,P,N,U,V),T[T.length-1].cryst={a:D,b:L,c:P,alpha:N,beta:U,gamma:V}}for(let D=0;D<u;D++){if(S._atom_site_group_pdb!==void 0&&S._atom_site_group_pdb[D]==="TER")continue;const L={};if(S._atom_site_cartn_x!==void 0)L.x=parseFloat(S._atom_site_cartn_x[D]),L.y=parseFloat(S._atom_site_cartn_y[D]),L.z=parseFloat(S._atom_site_cartn_z[D]);else{const N=p(m,parseFloat(S._atom_site_fract_x[D]),parseFloat(S._atom_site_fract_y[D]),parseFloat(S._atom_site_fract_z[D]));L.x=N.x,L.y=N.y,L.z=N.z}L.chain=S._atom_site_auth_asym_id?S._atom_site_auth_asym_id[D]:S._atom_site_label_asym_id?S._atom_site_label_asym_id[D]:void 0,L.lchain=S._atom_site_label_asym_id?S._atom_site_label_asym_id[D]:void 0,L.resi=S._atom_site_auth_seq_id?parseInt(S._atom_site_auth_seq_id[D]):S._atom_site_label_seq_id?S._atom_site_label_seq_id[D]:void 0,L.resn=S._atom_site_auth_comp_id?S._atom_site_auth_comp_id[D].trim():S._atom_site_label_comp_id?S._atom_site_label_comp_id[D].trim():void 0,L.atom=S._atom_site_auth_atom_id?S._atom_site_auth_atom_id[D].replace(/"/gm,""):S._atom_site_label_atom_id?S._atom_site_label_atom_id[D].replace(/"/gm,""):void 0,L.hetflag=!S._atom_site_group_pdb||S._atom_site_group_pdb[D]==="HETA"||S._atom_site_group_pdb[D]==="HETATM",S._atom_site_b_iso_or_equiv&&(L.b=parseFloat(S._atom_site_b_iso_or_equiv[D]));let P="X";S._atom_site_type_symbol?P=S._atom_site_type_symbol[D].replace(/\(?\+?\d+.*/,""):S._atom_site_label&&(P=S._atom_site_label[D].split("_")[0].replace(/\(?\d+.*/,"")),L.elem=P[0].toUpperCase()+P.substring(1,2).toLowerCase(),L.bonds=[],L.ss="c",L.serial=D,L.bondOrder=[],L.properties={},A[A.length-1].push(L)}if(S._pdbx_struct_oper_list_id!==void 0&&!w)for(let D=0;D<S._pdbx_struct_oper_list_id.length;D++){const L=parseFloat(S["_pdbx_struct_oper_list_matrix[1][1]"][D]),P=parseFloat(S["_pdbx_struct_oper_list_matrix[1][2]"][D]),N=parseFloat(S["_pdbx_struct_oper_list_matrix[1][3]"][D]),U=parseFloat(S["_pdbx_struct_oper_list_vector[1]"][D]),V=parseFloat(S["_pdbx_struct_oper_list_matrix[2][1]"][D]),W=parseFloat(S["_pdbx_struct_oper_list_matrix[2][2]"][D]),G=parseFloat(S["_pdbx_struct_oper_list_matrix[2][3]"][D]),H=parseFloat(S["_pdbx_struct_oper_list_vector[2]"][D]),k=parseFloat(S["_pdbx_struct_oper_list_matrix[3][1]"][D]),X=parseFloat(S["_pdbx_struct_oper_list_matrix[3][2]"][D]),$=parseFloat(S["_pdbx_struct_oper_list_matrix[3][3]"][D]),F=parseFloat(S["_pdbx_struct_oper_list_vector[3]"][D]),K=new y.Matrix4(L,P,N,U,V,W,G,H,k,X,$,F);T[T.length-1].symmetries.push(K)}const _=function(D){const L=D.match("-");D=D.replace(/[-xyz]/g,"");const P=D.split("/");let N,U;return P[1]===void 0?U=1:U=parseInt(P[1]),P[0]===""?N=1:N=parseInt(P[0]),N/U*(L?-1:1)};if(S._symmetry_equiv_pos_as_xyz!==void 0&&!w)for(let D=0;D<S._symmetry_equiv_pos_as_xyz.length;D++){const P=S._symmetry_equiv_pos_as_xyz[D].replace(/["' ]/g,"").split(",").map(function(W){return W.replace(/-/g,"+-")});let N=new y.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(let W=0;W<3;W++){const G=P[W].split("+");for(let H=0;H<G.length;H++){const k=G[H];if(k==="")continue;const X=_(k);k.match("x")?N.elements[W+0]=X:k.match("y")?N.elements[W+4]=X:k.match("z")?N.elements[W+8]=X:N.elements[W+12]=X}}const U=m.getMatrix4(),V=new y.Matrix4().getInverse(U,!0);N=new y.Matrix4().multiplyMatrices(N,V),N=new y.Matrix4().multiplyMatrices(U,N),T[T.length-1].symmetries.push(N)}}for(let S=0;S<A.length;S++)M&&!(x.duplicateAssemblyAtoms&&!x.dontConnectDuplicatedAtoms)&&(0,C.assignPDBBonds)(A[S],x),(0,a.computeSecondaryStructure)(A[S],x.hbondCutoff),(0,d.processSymmetries)(T[S].symmetries,A[S],x,T[S].cryst),x.duplicateAssemblyAtoms&&!x.dontConnectDuplicatedAtoms&&M&&(0,C.assignPDBBonds)(A[S],x);return A}}),"./src/parsers/CUBE.ts":((s,i,n)=>{n.r(i),n.d(i,{CUBE:()=>C});var a=n("./src/WebGL/index.ts"),d=n("./src/parsers/utils/assignBonds.ts"),y=n("./src/parsers/utils/anumToSymbol.ts");function C(p,E){E=E||{};const R=[[]];let x=p.split(/\r?\n/);const A=E.assignBonds===void 0?!0:E.assignBonds;if(x.length<6)return R;let w=x[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const T=Math.abs(parseFloat(w[0]));let M={origin:void 0,size:void 0,unit:void 0,matrix4:void 0,matrix:void 0};const h=M.origin=new a.Vector3(parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3]));w=x[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),w=x[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const l=w[0]>0?.529177:1;h.multiplyScalar(l);const c=Math.abs(w[0]),g=new a.Vector3(parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3])).multiplyScalar(l);w=x[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const v=Math.abs(w[0]),b=new a.Vector3(parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3])).multiplyScalar(l);w=x[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const S=Math.abs(w[0]),u=new a.Vector3(parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3])).multiplyScalar(l);if(M.size={x:c,y:v,z:S},M.unit=new a.Vector3(g.x,b.y,u.z),g.y!=0||g.z!=0||b.x!=0||b.z!=0||u.x!=0||u.y!=0){M.matrix4=new a.Matrix4(g.x,b.x,u.x,0,g.y,b.y,u.y,0,g.z,b.z,u.z,0,0,0,0,1);let U=new a.Matrix4().makeTranslation(h.x,h.y,h.z);M.matrix4=M.matrix4.multiplyMatrices(U,M.matrix4),M.matrix=M.matrix4.matrix3FromTopLeft(),M.origin=new a.Vector3(0,0,0),M.unit=new a.Vector3(1,1,1)}R.modelData=[{cryst:M}],x=x.splice(6,T);for(var m=R[R.length-1].length,_=m+x.length,D=m;D<_;++D){var L={};L.serial=D;var P=x[D-m],N=P.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");L.elem=y.anumToSymbol[N[0]],L.x=parseFloat(N[2])*l,L.y=parseFloat(N[3])*l,L.z=parseFloat(N[4])*l,L.hetflag=!0,L.bonds=[],L.bondOrder=[],L.properties={},R[R.length-1].push(L)}if(A)for(let U=0;U<R.length;U++)(0,d.assignBonds)(R[U],E);return R}}),"./src/parsers/GRO.ts":((s,i,n)=>{n.r(i),n.d(i,{GRO:()=>y});var a=n("./src/parsers/utils/assignPDBBonds.ts"),d=n("./src/parsers/utils/atomNameToElem.ts");function y(C,p){const E=[],R=C.split(/\r?\n|\r/);for(;R.length>0;){const x=parseInt(R[1]);if(R.length<3||isNaN(x)||x<=0||R.length<x+3)break;const w=[];E.push(w);let T=2;const M=w.length,h=M+x;for(let l=M;l<h;l++){const c=R[T++],g={};g.serial=l,g.atom=c.slice(10,15).trim(),g.elem=(0,d.atomNameToElem)(g.atom,!0),g.x=10*parseFloat(c.slice(20,28)),g.y=10*parseFloat(c.slice(28,36)),g.z=10*parseFloat(c.slice(36,44)),g.resi=parseInt(c.slice(0,5)),g.resn=c.slice(5,10).trim(),g.bonds=[],g.bondOrder=[],g.properties={},c.length>44&&(g.dx=10*parseFloat(c.slice(44,52)),g.dy=10*parseFloat(c.slice(52,60)),g.dz=10*parseFloat(c.slice(60,68))),w[l]=g}if(R.length<=T+3){const c=R[T++].trim().split(/\s+/);if(c.length===3){for(let g=0;g<3;g++)c[g]=(parseFloat(c[g])*10).toString();E.box=c}}R.splice(0,++T)}for(let x=0;x<E.length;x++)(0,a.assignPDBBonds)(E[x],p);return E}}),"./src/parsers/LAMMPSTRJ.ts":((s,i,n)=>{n.r(i),n.d(i,{LAMMPSTRJ:()=>y});var a=n("./src/parsers/utils/assignBonds.ts");const d={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};function y(C,p){const E=[],R=C.split(/\r?\n|\r/);let x=0,A=0,w=0;for(;w<R.length-9;){for(var T=w;T<R.length;T++)if(R[T].match(/ITEM: NUMBER OF ATOMS/)&&(A=parseInt(R[T+1])),R[T].match(/ITEM: ATOMS/)){x=T+1;break}const M=R[x-1].replace("ITEM: ATOMS ","").split(" ");E.push([]);for(let h=x;h<x+A;h++){const l={},c={},g=R[h].split(" ");for(let v=0;v<g.length;v++){const b=d[M[v]];b!==void 0&&(b==="serial"?l[b]=parseInt(g[v]):b==="x"||b==="y"||b==="z"?l[b]=parseFloat(g[v]):b==="charge"||b==="radius"?c[b]=parseFloat(g[v]):l[b]=g[v]),l.properties=c,l.bonds=[],l.bondOrder=[]}E[E.length-1][h-x]=l}w=x+A-1}if(p.assignBonds)for(let M=0;M<E.length;M++)(0,a.assignBonds)(E[M],p);return E}}),"./src/parsers/MMTF.ts":((s,i,n)=>{n.r(i),n.d(i,{MMTFparser:()=>A});var a=n("./src/utilities.ts"),d=n("./src/WebGL/index.ts"),y=n("./src/parsers/utils/computeSecondaryStructure.ts"),C=n("./src/parsers/utils/processSymmetries.ts"),p=n("./src/vendor/mmtf.js"),E=function(w){return String.fromCharCode.apply(null,w).replace(/\0/g,"")},R=function(w){return w==0||w==2||w==4?"h":w==3?"s":"c"};let x=new Set(["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","NON-POLYMER","OTHER","PEPTIDE-LIKE","SACCHARIDE"]);function A(w,T){var M=!T.keepH,h=T.altLoc?T.altLoc:"A",l=!!T.noSecondaryStructure,c=!T.noComputeSecondaryStructure,g=!T.doAssembly,v=T.assemblyIndex?T.assemblyIndex:0;typeof w=="string"?w=(0,a.base64ToArray)(w):w=new Uint8Array(w);var b=p.decode(w),S=[[]],u=S.modelData=[],m=0,_=0,D=0,L=b.secStructList,P=b.bFactorList,N=b.altLocList,U=b.occupancyList,V=b.bondAtomList,W=b.bondOrderList,G=b.numModels;if(G==0)return S;T.multimodel||(G=1);var H,k,X,$,F,K,te=[];if(!g&&b.bioAssemblyList&&b.bioAssemblyList.length>0){var re=b.bioAssemblyList[v].transformList;for(H=0,K=re.length;H<K;H++){var le=new d.Matrix4(re[H].matrix);le.transpose(),te.push(le)}}var oe=null;if(b.unitCell){var ue=b.unitCell;oe={a:ue[0],b:ue[1],c:ue[2],alpha:ue[3],beta:ue[4],gamma:ue[5]}}let he=[];b.entityList.forEach(Ae=>{Ae.chainIndexList.forEach(ee=>{he[ee]=Ae.type=="polymer"})});var ge=0;for(F=0;F<G;F++){var Oe=b.chainsPerModel[F],Le=S[S.length-1],$e=[];for(u.push({symmetries:te,cryst:oe}),H=0;H<Oe;++H){var we=b.groupsPerChain[m],ce=E(b.chainIdList.subarray(m*4,m*4+4));b.chainNameList&&(ce=E(b.chainNameList.subarray(m*4,m*4+4)));var xe=_,Ne="";for(k=0;k<we;++k){var Xe=b.groupList[b.groupTypeList[_]],rt=Xe.atomNameList.length,nt=0,et=!1,Ze=!1;if(L){nt=L[_];var qe=R(nt);(_==0||qe!=Ne)&&(et=!0),Ne=qe;var Ve=_+1;(Ve>=L.length||R(L[Ve]!=qe))&&(Ze=!0)}var Ge=b.groupIdList[_],at=Xe.groupName;let Ae=Xe.chemCompType;var ot=D;let ee=x.has(Ae)||!he[m];for(X=0;X<rt;++X){var J=Xe.elementList[X];if(M&&J=="H"){D+=1;continue}var ne="";P&&(ne=P[D]);var se="";N&&N[D]&&(se=String.fromCharCode(N[D]));var _e="";if(U&&(_e=U[D]),se!=""&&se!=h&&h!="*"){D+=1;continue}var Se=b.atomIdList[D],Pe=Xe.atomNameList[X],Ie=0;Xe.atomChargeList&&(Ie=Xe.atomChargeList[X]);var Q=b.xCoordList[D],me=b.yCoordList[D],be=b.zCoordList[D];$e[D]=Le.length,Le.push({resn:at,x:Q,y:me,z:be,elem:J,hetflag:ee,chain:ce,resi:Ge,icode:se,rescode:Ge+(se!=" "?"^"+se:""),serial:Se,altLoc:se,index:D,atom:Pe,bonds:[],ss:R(nt),ssbegin:et,ssend:Ze,bondOrder:[],properties:{charge:Ie,occupancy:_e},b:ne}),D+=1}var ke=Xe.bondAtomList;for(X=0,$=Xe.bondOrderList.length;X<$;++X){var ve=ot+ke[X*2],ze=ot+ke[X*2+1],q=Xe.bondOrderList[X],He=$e[ve],Je=$e[ze],j=Le[He],Me=Le[Je];j&&Me&&(j.bonds.push(Je),j.bondOrder.push(q),Me.bonds.push(He),Me.bondOrder.push(q))}_+=1}for(_=xe,k=0;k<we;++k)_+=1;m+=1}if(V)for(let Ae=ge,ee=V.length;Ae<ee;Ae+=2){let pe=V[Ae],De=V[Ae+1],lt=W?W[Ae/2]:1;if(pe>=D){ge=Ae;break}let ct=$e[pe],st=$e[De],xt=Le[ct],Zt=Le[st];xt&&Zt&&(xt.bonds.push(st),xt.bondOrder.push(lt),Zt.bonds.push(ct),Zt.bondOrder.push(lt))}T.multimodel&&(T.onemol||S.push([]))}if(!g)for(let Ae=0;Ae<S.length;Ae++)(0,C.processSymmetries)(u[Ae].symmetries,S[Ae],T,u[Ae].cryst);return c&&!l&&(0,y.computeSecondaryStructure)(S,T.hbondCutoff),S}}),"./src/parsers/MOL2.ts":((s,i,n)=>{n.r(i),n.d(i,{MOL2:()=>d});let a={"C.1":"C",C1:"C","C.2":"C",C2:"C","C.3":"C",C3:"C","C.ar":"C",Car:"C","C.cat":"C",Ccat:"C","H.spc":"H",Hspc:"H","H.t3p":"H",Ht3p:"H","N.1":"N",N1:"N","N.2":"N",N2:"N","N.3":"N",N3:"N","N.4":"N",N4:"N","N.am":"N",Nam:"N","N.ar":"N",Nar:"N","N.p13":"N",Np13:"N","O.2":"O",O2:"O","O.3":"O",O3:"O","O.co2":"O",Oco2:"O","O.spc":"O",Ospc:"O","O.t3p":"O",Ot3p:"O","P.3":"P",P3:"P","S.2":"S",S2:"S","S.3":"S",S3:"S","S.o":"S",So:"S","S.o2":"S",So2:"S"};function d(y,C){var p=[[]],E=!1;typeof C.keepH<"u"&&(E=!C.keepH);var R=y.search(/@<TRIPOS>MOLECULE/),x=y.search(/@<TRIPOS>ATOM/);if(R==-1||x==-1)return p;for(var A=y.substring(R).split(/\r?\n|\r/);A.length>0;){var w=[],T=A[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),M=parseInt(T[0]),h=0;T.length>1&&(h=parseInt(T[1]));var l=4,c;for(c=3;c<A.length;c++)if(A[c]=="@<TRIPOS>ATOM"){l=c+1;break}var g=p[p.length-1].length,v=g+M,b;for(c=g;c<v;c++){b=A[l++],T=b.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var S={},u=T[5];if(a[u]!==void 0?u=a[u]:(u=u.split(".")[0],u=u[0].toUpperCase()+u.substring(1).toLowerCase()),S.atom=T[1],S.elem=u,!(S.elem=="H"&&E)){var m=p[p.length-1].length,_=parseInt(T[0]);S.serial=_,S.x=parseFloat(T[2]),S.y=parseFloat(T[3]),S.z=parseFloat(T[4]),S.atom=T[5];var D=parseFloat(T[8]);S.index=m,S.bonds=[],S.bondOrder=[],S.properties={charge:D,partialCharge:D},w[_]=m,p[p.length-1].push(S)}}for(var L=!1;l<A.length;)if(A[l++]=="@<TRIPOS>BOND"){L=!0;break}if(L&&h)for(c=0;c<h;c++){b=A[l++],T=b.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var P=parseInt(T[1]),N=p[p.length-1][w[P]],U=parseInt(T[2]),V=p[p.length-1][w[U]],W=parseInt(T[3]);isNaN(W)&&(W=1),N!==void 0&&V!==void 0&&(N.bonds.push(w[U]),N.bondOrder.push(W),V.bonds.push(w[P]),V.bondOrder.push(W))}if(C.multimodel){C.onemol||p.push([]),A.splice(0,l),y=A.join(`
`);continue}else break}return p}}),"./src/parsers/PDB.ts":((s,i,n)=>{n.r(i),n.d(i,{PDB:()=>d});var a=n("./src/parsers/utils/getSinglePDB.ts");function d(y,C){C=C||{};var p=[],E={};p.modelData=[];for(var R=y.split(/\r?\n|\r/);R.length>0;){var x=(0,a.getSinglePDB)(R,C,E),A=x[0],w=x[1];if(R=x[2],A.length!=0){if(C.multimodel&&C.onemol&&p.length>0)for(var T=p[0].length,M=0;M<A.length;M++){var h=A[M];h.index=M;for(var l=0;l<h.bonds.length;l++)h.bonds[l]+=T;p[0].push(h)}else p.modelData.push(w),p.push(A);if(!C.multimodel)break}}return p}}),"./src/parsers/PQR.ts":((s,i,n)=>{n.r(i),n.d(i,{PQR:()=>y});var a=n("./src/parsers/utils/assignPDBBonds.ts"),d=n("./src/parsers/utils/computeSecondaryStructure.ts");function y(C,p){var E=[[]],R=!p.noSecondaryStructure;E.modelData=[{symmetries:[]}];var x=[],A=C.split(/\r?\n|\r/),w;for(let L=0;L<A.length;L++){w=A[L].replace(/^\s*/,"");var T=w.substring(0,6);if(T.indexOf("END")==0)if(p.multimodel){p.onemol||E.push([]);continue}else break;else if(T=="ATOM  "||T=="HETATM"){var M;let P=parseInt(w.substring(6,11)),N=w.substring(12,16).replace(/ /g,""),U=w.substring(17,20).trim(),V=w.substring(21,22),W=parseInt(w.substring(22,26));var h=w.substring(30).trim().split(/\s+/),l=parseFloat(h[0]),c=parseFloat(h[1]),g=parseFloat(h[2]),v=parseFloat(h[3]),b=parseFloat(h[4]),S=N[0];N.length>1&&N[1].toUpperCase()!=N[1]&&(S=N.substring(0,2)),w[0]=="H"?M=!0:M=!1,x[P]=E[E.length-1].length,E[E.length-1].push({resn:U,x:l,y:c,z:g,elem:S,hetflag:M,chain:V,resi:W,serial:P,atom:N,bonds:[],ss:"c",bondOrder:[],properties:{charge:v,partialCharge:v,radius:b},pdbline:w})}else if(T=="CONECT"){var u=parseInt(w.substring(6,11)),m=E[E.length-1][x[u]];for(let P=0;P<4;P++){var _=parseInt(w.substring([11,16,21,26][P],[11,16,21,26][P]+5)),D=E[E.length-1][x[_]];m!==void 0&&D!==void 0&&(m.bonds.push(x[_]),m.bondOrder.push(1))}}}for(let L=0;L<E.length;L++)(0,a.assignPDBBonds)(E[L],p),R&&(0,d.computeSecondaryStructure)(E[L],p.hbondCutoff);return E}}),"./src/parsers/PRMTOP.ts":((s,i,n)=>{n.r(i),n.d(i,{PRMTOP:()=>a});function a(d){var y=[],C,p=0,E=d.split(/\r?\n|\r/);if(E.length>0&&E[0].includes("VERSION")){var R=E.filter(function(g){return g.includes("POINTERS")||g.includes("ATOM_NAME")||g.includes("CHARGE")||g.includes("RADII")||g.includes("BONDS_INC_HYDROGEN")||g.includes("BONDS_WITHOUT_HYDROGEN")||g.includes("RESIDUE_LABEL")||g.includes("RESIDUE_POINTER")}),x=h("POINTERS");if(x==-1)return[];var A=l(x),w=parseInt(E[x+1].slice(0,A[1]));let c=parseInt(E[x+2].slice(A[1],A[0]+A[1]));if(isNaN(w)||w<=0)return[];if(x=h("ATOM_NAME"),x==-1)return[];A=l(x);var T=A[0];for(let g=0;g<w/A[0];g++){g==parseInt(w/A[0])&&(T=w%A[0]);for(let v=0;v<T;v++){let b={},S={charge:"",radii:""};b.serial=p,b.x=0,b.y=0,b.z=0,b.atom=E[x+1].slice(A[1]*v,A[1]*(v+1)).trim(),b.elem=E[x+1].slice(A[1]*v,A[1]*v+1).trim(),b.properties=S,b.bonds=[],b.bondOrder=[],b.index=y.length,y.push(b),p++}x++}if(x=h("CHARGE"),x!=-1){A=l(x),p=0,T=A[0];for(let g=0;g<w/A[0];g++){g==parseInt(w/A[0])&&(T=w%A[0]);for(let v=0;v<T;v++)y[p].properties.charge=parseFloat(E[x+1].slice(A[1]*v,A[1]*(v+1))),p++;x++}}x=h("RESIDUE_POINTER");var M=[];if(x!=-1){A=l(x),T=A[0],x+=1;for(let g=0;g<c/A[0];g++){g==parseInt(c/A[0])&&(T=c%A[0]);for(let v=0;v<T;v++)M.push(parseInt(E[x].slice(A[1]*v,A[1]*(v+1))));x++}if(x=h("RESIDUE_LABEL"),x!=-1){let g=[];A=l(x),T=A[0],x+=1;for(let u=0;u<c/A[0];u++){u==parseInt(c/A[0])&&(T=c%A[0]);for(let m=0;m<T;m++)g.push(E[x].slice(A[1]*m,A[1]*(m+1)).trim());x++}let v=0,b=0,S="";M.push(y.length+1);for(let u=0;u<y.length;u++)u+1>=M[v]&&(S=g[v],v+=1,b+=1),y[u].resi=b,y[u].resn=S}}if(x=h("RADII"),x!=-1){A=l(x),p=0,T=A[0];for(let g=0;g<w/A[0];g++){g==parseInt(w/A[0])&&(T=w%A[0]);for(let v=0;v<T;v++)y[p].properties.radii=parseFloat(E[x+1].slice(A[1]*v,A[1]*(v+1))),p++;x++}}if(x=h("BONDS_WITHOUT_HYDROGEN"),x!=-1)for(A=l(x),p=0,T=A[0],x=x+1;!E[x].match(/^%FLAG/);){E[x+1].match(/^%FLAG/)&&(T=w%A[0]);for(let g=0;g<T;g++)p%3==0?C=parseInt(E[x].slice(A[1]*g,A[1]*(g+1))/3):p%3==1&&(y[C].bonds.push(parseInt(E[x].slice(A[1]*g,A[1]*(g+1))/3)),y[C].bondOrder.push(1)),p++;x++}if(x=h("BONDS_INC_HYDROGEN"),x!=-1)for(A=l(x),p=0,T=A[0],x=x+1;!E[x].match(/^%FLAG/);){E[x+1].match(/^%FLAG/)&&(T=w%A[0]);for(let g=0;g<T;g++)p%3==0?C=parseInt(E[x].slice(A[1]*g,A[1]*(g+1))/3):p%3==1&&(y[C].bonds.push(parseInt(E[x].slice(A[1]*g,A[1]*(g+1))/3)),y[C].bonds.push(1)),p++;x++}}else return[];function h(c){var g=E.indexOf(R.filter(function(v){return v.includes(c)})[0]);if(Number.isInteger(g)&&g>0){for(;!E[g].includes("FORMAT");)g++;return g}else return-1}function l(c){var g=E[c].match(/\((\d*)\S*/),v=E[c].match(/[a-zA-Z](\d*)\)\s*/);return v==null&&(v=E[c].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[parseInt(g[1]),parseInt(v[1])]}return[y]}}),"./src/parsers/SDF.ts":((s,i,n)=>{n.r(i),n.d(i,{SDF:()=>y});var a=function(C,p){var E=[[]],R=!1;for(typeof p.keepH<"u"&&(R=!p.keepH);C.length>0&&!(C.length<4);){var x=parseInt(C[3].substring(0,3));if(isNaN(x)||x<=0)break;var A=parseInt(C[3].substring(3,6)),w=4;if(C.length<4+x+A)break;var T=[],M=E[E.length-1].length,h=M+x,l,c;for(l=M;l<h;l++,w++){c=C[w];var g={},v=c.substring(31,34).replace(/ /g,"");g.atom=g.elem=v[0].toUpperCase()+v.substring(1).toLowerCase(),(g.elem!=="H"||!R)&&(g.serial=l,T[l]=E[E.length-1].length,g.x=parseFloat(c.substring(0,10)),g.y=parseFloat(c.substring(10,20)),g.z=parseFloat(c.substring(20,30)),g.hetflag=!0,g.bonds=[],g.bondOrder=[],g.properties={},g.index=E[E.length-1].length,E[E.length-1].push(g))}for(l=0;l<A;l++,w++){c=C[w];var b=T[parseInt(c.substring(0,3))-1+M],S=T[parseInt(c.substring(3,6))-1+M],u=parseFloat(c.substring(6));typeof b<"u"&&typeof S<"u"&&(E[E.length-1][b].bonds.push(S),E[E.length-1][b].bondOrder.push(u),E[E.length-1][S].bonds.push(b),E[E.length-1][S].bondOrder.push(u))}if(p.multimodel){for(p.onemol||E.push([]);C[w]!=="$$$$"&&w<C.length;)w++;C.splice(0,++w)}else break}return E},d=function(C,p){var E=[[]],R=!1;for(typeof p.keepH<"u"&&(R=!p.keepH);C.length>0&&!(C.length<8||!C[4].startsWith("M  V30 BEGIN CTAB")||!C[5].startsWith("M  V30 COUNTS")||C[5].length<14);){var x=C[5].substring(13).match(/\S+/g);if(x.length<2)break;var A=parseInt(x[0]);if(isNaN(A)||A<=0)break;var w=parseInt(x[1]),T=7;if(C.length<8+A+w)break;var M=[],h=E[E.length-1].length,l=h+A,c,g;for(c=h;c<l;c++,T++){g=C[T];var v=g.substring(6).match(/\S+/g);if(v.length>4){var b={},S=v[1].replace(/ /g,"");b.atom=b.elem=S[0].toUpperCase()+S.substring(1).toLowerCase(),(b.elem!=="H"||!R)&&(b.serial=c,M[c]=E[E.length-1].length,b.x=parseFloat(v[2]),b.y=parseFloat(v[3]),b.z=parseFloat(v[4]),b.hetflag=!0,b.bonds=[],b.bondOrder=[],b.properties={},b.index=E[E.length-1].length,E[E.length-1].push(b))}}if(C[T]==="M  V30 END ATOM")T++;else break;if(w!==0&&C[T]==="M  V30 BEGIN BOND")T++;else break;for(c=0;c<w;c++,T++){g=C[T];var u=g.substring(6).match(/\S+/g);if(u.length>3){var m=M[parseInt(u[2])-1+h],_=M[parseInt(u[3])-1+h],D=parseFloat(u[1]);typeof m<"u"&&typeof _<"u"&&(E[E.length-1][m].bonds.push(_),E[E.length-1][m].bondOrder.push(D),E[E.length-1][_].bonds.push(m),E[E.length-1][_].bondOrder.push(D))}}if(p.multimodel){for(p.onemol||E.push([]);C[T]!=="$$$$"&&T<C.length;)T++;C.splice(0,++T)}else break}return E};function y(C,p){var E="V2000",R=C.split(/\r?\n|\r/);return R.length>3&&R[3].length>38&&(E=R[3].substring(34,39)),E==="V2000"?a(R,p):E==="V3000"?d(R,p):[[""]]}}),"./src/parsers/VASP.ts":((s,i,n)=>{n.r(i),n.d(i,{VASP:()=>y});var a=n("./src/WebGL/index.ts"),d=n("./src/parsers/utils/assignBonds.ts");function y(C,p={}){var E=[[]],R={};const x=p.assignBonds===void 0?!0:p.assignBonds;var A=C.replace(/^\s+/,"").split(/\r?\n/);if(A.length<3)return E;if(A[1].match(/\d+/))R.length=parseFloat(A[1]);else return console.log("Warning: second line of the vasp structure file must be a number"),E;if(R.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),E;R.xVec=new Float32Array(A[2].replace(/^\s+/,"").split(/\s+/)),R.yVec=new Float32Array(A[3].replace(/^\s+/,"").split(/\s+/)),R.zVec=new Float32Array(A[4].replace(/^\s+/,"").split(/\s+/));var w=new a.Matrix3(R.xVec[0],R.xVec[1],R.xVec[2],R.yVec[0],R.yVec[1],R.yVec[2],R.zVec[0],R.zVec[1],R.zVec[2]);w.multiplyScalar(R.length),E.modelData=[{symmetries:[],cryst:{matrix:w}}];var T=A[5].trim().split(/\s+/),M=new Int16Array(A[6].trim().split(/\s+/)),h=A[7].trim(),l=!1;if(h.match(/S/)&&(l=!0,h=A[8].trim()),h.toLowerCase()[0]=="c")h="cartesian";else if(h.toLowerCase()[0]=="d")h="direct";else return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),E;if(T.length!=M.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(T),console.log(M),E;l?A.splice(0,9):A.splice(0,8);for(var c=0,g=0,v=T.length;g<v;g++){for(var b=T[g],S=0,u=M[g];S<u;S++){var m=new Float32Array(A[c+S].trim().split(/\s+/)),_={};_.elem=b,h=="cartesian"?(_.x=R.length*m[0],_.y=R.length*m[1],_.z=R.length*m[2]):(_.x=R.length*(m[0]*R.xVec[0]+m[1]*R.yVec[0]+m[2]*R.zVec[0]),_.y=R.length*(m[0]*R.xVec[1]+m[1]*R.yVec[1]+m[2]*R.zVec[1]),_.z=R.length*(m[0]*R.xVec[2]+m[1]*R.yVec[2]+m[2]*R.zVec[2])),_.bonds=[],_.bondOrder=[],E[0].push(_)}c+=M[g]}if(x)for(let D=0;D<E.length;D++)(0,d.assignBonds)(E[D],p);return E}}),"./src/parsers/XYZ.ts":((s,i,n)=>{n.r(i),n.d(i,{XYZ:()=>y});var a=n("./src/WebGL/index.ts"),d=n("./src/parsers/utils/assignBonds.ts");function y(C,p){p=p||{};for(var E=[[]],R=p.assignBonds===void 0?!0:p.assignBonds,x=C.trimStart().split(/\r?\n|\r/);x.length>0&&!(x.length<3);){var A=parseInt(x[0]);if(isNaN(A)||A<=0||x.length<A+2)break;var w=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi,T=w.exec(x[1]);if(T!=null&&T.length>1){var M=new Float32Array(T[1].split(/\s+/)),h=new a.Matrix3(M[0],M[3],M[6],M[1],M[4],M[7],M[2],M[5],M[8]);E.modelData=[{cryst:{matrix:h}}]}for(var l=2,c=E[E.length-1].length,g=c+A,v=c;v<g;v++){var b=x[l++],S=b.trim().split(/\s+/),u={};u.serial=v;var m=S[0];u.atom=u.elem=m[0].toUpperCase()+m.substring(1,2).toLowerCase(),u.x=parseFloat(S[1]),u.y=parseFloat(S[2]),u.z=parseFloat(S[3]),u.hetflag=!0,u.bonds=[],u.bondOrder=[],u.properties={},E[E.length-1][v]=u,S.length>=7&&(u.dx=parseFloat(S[4]),u.dy=parseFloat(S[5]),u.dz=parseFloat(S[6]))}if(p.multimodel)E.push([]),x.splice(0,l);else break}if(R)for(let D=0;D<E.length;D++)(0,d.assignBonds)(E[D],p);if(p.onemol){var _=E;E=[],E.push(_[0]);for(let D=1;D<_.length;D++){let L=E[0].length;for(let P=0;P<_[D].length;P++){let N=_[D][P];for(let U=0;U<N.bonds.length;U++)N.bonds[U]=N.bonds[U]+L;N.index=E[0].length,N.serial=E[0].length,E[0].push(N)}}}return E}}),"./src/parsers/cifutils/category.ts":((s,i,n)=>{n.r(i),n.d(i,{Category:()=>d});var a=n("./src/parsers/cifutils/decoder.ts");function d(y){const C=Object.create(null),p=Object.create(null);for(const E of y.columns)C[E.name]=E;return{rowCount:y.rowCount,name:y.name.substring(1),fieldNames:y.columns.map(E=>E.name),getField(E){const R=C[E];if(R)return p[E]||(p[E]=(0,a.decode)(R.data)),p[E]}}}}),"./src/parsers/cifutils/decoder.ts":((s,i,n)=>{n.r(i),n.d(i,{decode:()=>C});var a=n("./src/parsers/cifutils/encoding.ts");const d=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330;function y(L,P){const N=new ArrayBuffer(L.length),U=new Uint8Array(N);for(let V=0,W=L.length;V<W;V+=P)for(let G=0;G<P;G++)U[V+P-G-1]=L[V+G];return N}function C(L){let P=L.data;for(let N=L.encoding.length-1;N>=0;N--)P=p(P,L.encoding[N]);return P}function p(L,P){switch(P.kind){case"ByteArray":switch(P.type){case a.Encoding.IntDataType.Uint8:return L;case a.Encoding.IntDataType.Int8:return x(L);case a.Encoding.IntDataType.Int16:return w(L);case a.Encoding.IntDataType.Uint16:return T(L);case a.Encoding.IntDataType.Int32:return M(L);case a.Encoding.IntDataType.Uint32:return h(L);case a.Encoding.FloatDataType.Float32:return l(L);case a.Encoding.FloatDataType.Float64:return c(L);default:throw new Error("unreachable")}case"FixedPoint":return g(L,P);case"IntervalQuantization":return v(L,P);case"RunLength":return b(L,P);case"Delta":return S(L,P);case"IntegerPacking":return _(L,P);case"StringArray":return D(L,P)}}function E(L,P){switch(L){case a.Encoding.IntDataType.Int8:return new Int8Array(P);case a.Encoding.IntDataType.Int16:return new Int16Array(P);case a.Encoding.IntDataType.Int32:return new Int32Array(P);case a.Encoding.IntDataType.Uint8:return new Uint8Array(P);case a.Encoding.IntDataType.Uint16:return new Uint16Array(P);case a.Encoding.IntDataType.Uint32:return new Uint32Array(P);default:return new Int32Array(P)}}function R(L,P){switch(L){case a.Encoding.FloatDataType.Float32:return new Float32Array(P);case a.Encoding.FloatDataType.Float64:return new Float64Array(P);default:return new Float64Array(P)}}function x(L){return new Int8Array(L.buffer,L.byteOffset)}function A(L,P,N){return(L.byteOffset!=0||L.byteLength!=L.buffer.byteLength)&&(L=new Uint8Array(L)),d?new N(L.buffer):new N(y(L,P))}function w(L){return A(L,2,Int16Array)}function T(L){return A(L,2,Uint16Array)}function M(L){return A(L,4,Int32Array)}function h(L){return A(L,4,Uint32Array)}function l(L){return A(L,4,Float32Array)}function c(L){return A(L,8,Float64Array)}function g(L,P){const N=L.length,U=R(P.srcType,N),V=1/P.factor;for(let W=0;W<N;W++)U[W]=V*L[W];return U}function v(L,P){const N=L.length,U=R(P.srcType,N),V=(P.max-P.min)/(P.numSteps-1),W=P.min;for(let G=0;G<N;G++)U[G]=W+V*L[G];return U}function b(L,P){const N=E(P.srcType,P.srcSize);let U=0;for(let V=0,W=L.length;V<W;V+=2){const G=L[V],H=L[V+1];for(let k=0;k<H;++k)N[U++]=G}return N}function S(L,P){const N=L.length,U=E(P.srcType,N);if(!N)return L;U[0]=L[0]+(P.origin|0);for(let V=1;V<N;++V)U[V]=L[V]+U[V-1];return U}function u(L,P){const N=P.byteCount===1?127:32767,U=-N-1,V=L.length,W=new Int32Array(P.srcSize);let G=0,H=0;for(;G<V;){let k=0,X=L[G];for(;X===N||X===U;)k+=X,G++,X=L[G];k+=X,W[H]=k,G++,H++}return W}function m(L,P){const N=P.byteCount===1?255:65535,U=L.length,V=new Int32Array(P.srcSize);let W=0,G=0;for(;W<U;){let H=0,k=L[W];for(;k===N;)H+=k,W++,k=L[W];H+=k,V[G]=H,W++,G++}return V}function _(L,P){return L.length===P.srcSize?L:P.isUnsigned?m(L,P):u(L,P)}function D(L,P){const N=C({encoding:P.offsetEncoding,data:P.offsets}),U=C({encoding:P.dataEncoding,data:L}),V=P.stringData,W=new Array(N.length);W[0]="";for(let k=1,X=N.length;k<X;k++)W[k]=V.substring(N[k-1],N[k]);let G=0;const H=new Array(U.length);for(let k=0,X=U.length;k<X;k++)H[G++]=W[U[k]+1];return H}}),"./src/parsers/cifutils/encoding.ts":((s,i,n)=>{n.r(i),n.d(i,{Encoding:()=>d,VERSION:()=>a});const a="0.3.0";var d;(function(y){(function(E){E[E.Int8=1]="Int8",E[E.Int16=2]="Int16",E[E.Int32=3]="Int32",E[E.Uint8=4]="Uint8",E[E.Uint16=5]="Uint16",E[E.Uint32=6]="Uint32"})(y.IntDataType||(y.IntDataType={})),(function(E){E[E.Float32=32]="Float32",E[E.Float64=33]="Float64"})(y.FloatDataType||(y.FloatDataType={}));function C(E){let R;return E instanceof Int8Array?R=y.IntDataType.Int8:E instanceof Int16Array?R=y.IntDataType.Int16:E instanceof Int32Array?R=y.IntDataType.Int32:E instanceof Uint8Array?R=y.IntDataType.Uint8:E instanceof Uint16Array?R=y.IntDataType.Uint16:E instanceof Uint32Array?R=y.IntDataType.Uint32:E instanceof Float32Array?R=y.FloatDataType.Float32:E instanceof Float64Array?R=y.FloatDataType.Float64:R=y.IntDataType.Int32,R}y.getDataType=C;function p(E){if(E instanceof Int8Array||E instanceof Int16Array||E instanceof Int32Array)return!0;for(let R=0,x=E.length;R<x;R++)if(R<0)return!1;return!0}y.isSignedIntegerDataType=p})(d||(d={}))}),"./src/parsers/index.ts":((s,i,n)=>{n.r(i),n.d(i,{Parsers:()=>g,bondLength:()=>c.bondLength,setBondLength:()=>c.setBondLength});var a=n("./src/parsers/VASP.ts"),d=n("./src/parsers/CUBE.ts"),y=n("./src/parsers/XYZ.ts"),C=n("./src/parsers/SDF.ts"),p=n("./src/parsers/CDJSON.ts"),E=n("./src/parsers/CIF.ts"),R=n("./src/parsers/MOL2.ts"),x=n("./src/parsers/PDB.ts"),A=n("./src/parsers/PQR.ts"),w=n("./src/parsers/MMTF.ts"),T=n("./src/parsers/PRMTOP.ts"),M=n("./src/parsers/GRO.ts"),h=n("./src/parsers/LAMMPSTRJ.ts"),l=n("./src/parsers/BCIF.ts"),c=n("./src/parsers/utils/bondLength.ts");const g={vasp:a.VASP,VASP:a.VASP,cube:d.CUBE,CUBE:d.CUBE,xyz:y.XYZ,XYZ:y.XYZ,sdf:C.SDF,SDF:C.SDF,json:p.CDJSON,cdjson:p.CDJSON,CDJSON:p.CDJSON,mcif:E.CIF,cif:E.CIF,CIF:E.CIF,mol2:R.MOL2,MOL2:R.MOL2,pdb:x.PDB,PDB:x.PDB,pdbqt:x.PDB,PDBQT:x.PDB,pqr:A.PQR,PQR:A.PQR,mmtf:w.MMTFparser,MMTF:w.MMTFparser,prmtop:T.PRMTOP,PRMTOP:T.PRMTOP,gro:M.GRO,GRO:M.GRO,lammpstrj:h.LAMMPSTRJ,LAMMPSTRJ:h.LAMMPSTRJ,bcif:l.BCIF,BCIF:l.BCIF}}),"./src/parsers/utils/anumToSymbol.ts":((s,i,n)=>{n.r(i),n.d(i,{anumToSymbol:()=>a});const a={1:"H",2:"He",3:"Li",4:"Be",5:"B",6:"C",7:"N",8:"O",9:"F",10:"Ne",11:"Na",12:"Mg",13:"Al",14:"Si",15:"P",16:"S",17:"Cl",18:"Ar",19:"K",20:"Ca",21:"Sc",22:"Ti",23:"V",24:"Cr",25:"Mn",26:"Fe",27:"Co",28:"Ni",29:"Cu",30:"Zn",31:"Ga",32:"Ge",33:"As",34:"Se",35:"Br",36:"Kr",37:"Rb",38:"Sr",39:"Y",40:"Zr",41:"Nb",42:"Mo",43:"Tc",44:"Ru",45:"Rh",46:"Pd",47:"Ag",48:"Cd",49:"In",50:"Sn",51:"Sb",52:"Te",53:"I",54:"Xe",55:"Cs",56:"Ba",71:"Lu",72:"Hf",73:"Ta",74:"W",75:"Re",76:"Os",77:"Ir",78:"Pt",79:"Au",80:"Hg",81:"Tl",82:"Pb",83:"Bi",84:"Po",85:"At",86:"Rn",87:"Fr",88:"Ra",104:"Rf",105:"Db",106:"Sg",107:"Bh",108:"Hs",109:"Mt",110:"Ds",111:"Rg",112:"Cn",113:"Nh",114:"Fl",115:"Mc",116:"Lv",117:"Ts",118:"Og",57:"La",58:"Ce",59:"Pr",60:"Nd",61:"Pm",62:"Sm",63:"Eu",64:"Gd",65:"Tb",66:"Dy",67:"Ho",68:"Er",69:"Tm",70:"Yb",89:"Ac",90:"Th",91:"Pa",92:"U",93:"Np",94:"Pu",95:"Am",96:"Cm",97:"Bk",98:"Cf",99:"Es",100:"Fm",101:"Md",102:"No"}}),"./src/parsers/utils/areConnected.ts":((s,i,n)=>{n.r(i),n.d(i,{areConnected:()=>y});var a=n("./src/parsers/utils/bondLength.ts");const d=new Set(["Na","K","Ca","Mg","Mn","Sr"]);function y(C,p,E){if(E&&E.unboundCations&&(d.has(C.elem)||d.has(p.elem)))return!1;let R=(0,a.bondLength)(C.elem)+(0,a.bondLength)(p.elem);R+=.25,R*=R;let x=C.x-p.x;if(x*=x,x>R)return!1;let A=C.y-p.y;if(A*=A,A>R)return!1;let w=C.z-p.z;if(w*=w,w>R)return!1;const T=x+A+w;return!(isNaN(T)||T<.5||T>R||C.altLoc!==p.altLoc&&C.altLoc.trim()!==""&&p.altLoc.trim()!=="")}}),"./src/parsers/utils/assignBackboneHBonds.ts":((s,i,n)=>{n.r(i),n.d(i,{assignBackboneHBonds:()=>a});function a(d,y){const C=y||3.2,p=C*C,E=[];for(let R=0,x=d.length;R<x;R++){d[R].index=R;const A=d[R];!A.hetflag&&(A.atom==="N"||A.atom==="O")&&(E.push(A),A.hbondOther=null,A.hbondDistanceSq=Number.POSITIVE_INFINITY)}E.sort(function(R,x){return R.z-x.z});for(let R=0,x=E.length;R<x;R++){const A=E[R];for(let w=R+1;w<x;w++){const T=E[w],M=T.z-A.z;if(M>C)break;if(T.atom==A.atom)continue;const h=Math.abs(T.y-A.y);if(h>C)continue;const l=Math.abs(T.x-A.x);if(l>C)continue;const c=l*l+h*h+M*M;c>p||T.chain==A.chain&&Math.abs(T.resi-A.resi)<4||(c<A.hbondDistanceSq&&(A.hbondOther=T,A.hbondDistanceSq=c),c<T.hbondDistanceSq&&(T.hbondOther=A,T.hbondDistanceSq=c))}}}}),"./src/parsers/utils/assignBonds.ts":((s,i,n)=>{n.r(i),n.d(i,{assignBonds:()=>C});var a=n("./src/parsers/utils/areConnected.ts");const d=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],y=4.95;function C(p,E){for(let A=0,w=p.length;A<w;A++)p[A].index||(p[A].index=A);const R={x:{y:{z:[]}}};for(let A=0;A<p.length;A++){const w=p[A],T=Math.floor(w.x/y),M=Math.floor(w.y/y),h=Math.floor(w.z/y);R[T]||(R[T]={}),R[T][M]||(R[T][M]={}),R[T][M][h]||(R[T][M][h]=[]),R[T][M][h].push(w)}function x(A,w){for(let T=0;T<A.length;T++){const M=A[T];for(let h=0;h<w.length;h++){const l=w[h];if((0,a.areConnected)(M,l,E)){const c=M.bonds.indexOf(l.index),g=l.bonds.indexOf(M.index);c===-1&&g===-1?(M.bonds.push(l.index),M.bondOrder.push(1),l.bonds.push(M.index),l.bondOrder.push(1)):c===-1?(M.bonds.push(l.index),M.bondOrder.push(l.bondOrder[g])):g===-1&&(l.bonds.push(M.index),l.bondOrder.push(M.bondOrder[c]))}}}}for(let A in R){const w=parseInt(A);for(let T in R[w]){const M=parseInt(T);for(let h in R[w][M]){const l=parseInt(h),c=R[w][M][l];for(let g=0;g<c.length;g++){const v=c[g];for(let b=g+1;b<c.length;b++){const S=c[b];(0,a.areConnected)(v,S,E)&&v.bonds.indexOf(S.index)==-1&&(v.bonds.push(S.index),v.bondOrder.push(1),S.bonds.push(v.index),S.bondOrder.push(1))}}for(let g=0;g<d.length;g++){const v=d[g];if(!R[w+v.x]||!R[w+v.x][M+v.y]||!R[w+v.x][M+v.y][l+v.z])continue;const b=R[w+v.x][M+v.y][l+v.z];x(c,b)}}}}}}),"./src/parsers/utils/assignPDBBonds.ts":((s,i,n)=>{n.r(i),n.d(i,{assignPDBBonds:()=>C});var a=n("./src/parsers/utils/areConnected.ts"),d=n("./src/parsers/utils/assignBonds.ts"),y=n("./src/parsers/utils/standardResidues.ts");function C(p,E){const R=[],x=[];for(let M=0,h=p.length;M<h;M++){const l=p[M];l.index=M,l.hetflag||!y.standardResidues.has(l.resn)?x.push(l):R.push(l)}(0,d.assignBonds)(x,E),R.sort(function(M,h){return M.chain!==h.chain?M.chain<h.chain?-1:1:M.resi-h.resi});let A=-1,w=-1,T;for(let M=0,h=R.length;M<h;M++){const l=R[M];l.resi!==A&&(A=l.resi,T||w++,T=!1),l.reschain=w;for(let c=M+1;c<R.length;c++){const g=R[c];if(g.chain!==l.chain||g.resi-l.resi>1)break;(0,a.areConnected)(l,g,E)&&(l.bonds.indexOf(g.index)===-1&&(l.bonds.push(g.index),l.bondOrder.push(1),g.bonds.push(l.index),g.bondOrder.push(1)),l.resi!==g.resi&&(T=!0))}}}}),"./src/parsers/utils/atomNameToElem.ts":((s,i,n)=>{n.r(i),n.d(i,{atomNameToElem:()=>d});var a=n("./src/parsers/utils/bondLength.ts");function d(y,C){let p=y.replace(/ /g,"");return p.length>0&&p[0]==="H"&&p!=="Hg"&&p!=="He"&&p!=="Hf"&&p!=="Hs"&&p!=="Ho"&&(p="H"),p.length>1&&(p=p[0].toUpperCase()+p.substring(1).toLowerCase(),a.bondTable[p]===void 0?p=p[0]:C&&(p==="Ca"||p==="Cd")&&(p="C")),p}}),"./src/parsers/utils/bondLength.ts":((s,i,n)=>{n.r(i),n.d(i,{bondLength:()=>d,bondTable:()=>a,setBondLength:()=>y});let a={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function d(C){return a[C]||1.6}function y(C,p){p<0&&(p=0),a[C]=p}}),"./src/parsers/utils/computeSecondaryStructure.ts":((s,i,n)=>{n.r(i),n.d(i,{computeSecondaryStructure:()=>d});var a=n("./src/parsers/utils/assignBackboneHBonds.ts");function d(y,C){(0,a.assignBackboneHBonds)(y,C);const p={};let E,R,x,A,w,T;for(E=0,R=y.length;E<R;E++)if(w=y[E],p[w.chain]===void 0&&(p[w.chain]=[]),isFinite(w.hbondDistanceSq)){const M=w.hbondOther;p[M.chain]===void 0&&(p[M.chain]=[]),Math.abs(M.resi-w.resi)===4&&(p[w.chain][w.resi]="h")}for(x in p)for(A=1;A<p[x].length-1;A++){const M=p[x][A-1],h=p[x][A+1];T=p[x][A],M=="h"&&M==h&&T!=M&&(p[x][A]=M)}for(E=0,R=y.length;E<R;E++)w=y[E],isFinite(w.hbondDistanceSq)&&p[w.chain][w.resi]!="h"&&w.ss!=="h"&&(p[w.chain][w.resi]="maybesheet");for(let M=0,h=y.length;M<h;M++)if(w=y[M],isFinite(w.hbondDistanceSq)&&p[w.chain][w.resi]=="maybesheet"){let l=w.hbondOther,c=p[l.chain][l.resi];(c=="maybesheet"||c=="s")&&(p[w.chain][w.resi]="s",p[l.chain][l.resi]="s")}for(let M in p){for(let h=1;h<p[M].length-1;h++){const l=p[M][h-1],c=p[M][h+1];T=p[M][h],l=="s"&&l==c&&T!=l&&(p[M][h]=l)}for(let h=0;h<p[M].length;h++){const l=p[M][h];(l=="h"||l=="s")&&p[M][h-1]!=l&&p[M][h+1]!=l&&delete p[M][h]}}for(E=0,R=y.length;E<R;E++)w=y[E],T=p[w.chain][w.resi],delete w.hbondOther,delete w.hbondDistanceSq,!(T===void 0||T==="maybesheet")&&(w.ss=T,p[w.chain][w.resi-1]!=T&&(w.ssbegin=!0),p[w.chain][w.resi+1]!=T&&(w.ssend=!0))}}),"./src/parsers/utils/getSinglePDB.ts":((s,i,n)=>{n.r(i),n.d(i,{getSinglePDB:()=>A});var a=n("./src/WebGL/index.ts"),d=n("./src/parsers/utils/atomNameToElem.ts"),y=n("./src/parsers/utils/bondLength.ts"),C=n("./src/parsers/utils/computeSecondaryStructure.ts"),p=n("./src/parsers/utils/isEmpty.ts"),E=n("./src/parsers/utils/processSymmetries.ts"),R=n("./src/parsers/utils/assignPDBBonds.ts"),x=n("./src/parsers/utils/validateBonds.ts");function A(w,T,M){const h=[],l=T.assignBonds===void 0?!0:T.assignBonds,c=!T.keepH,g=!!T.noSecondaryStructure,v=!T.noComputeSecondaryStructure,b=!T.doAssembly,S=T.altLoc?T.altLoc:"A",u={symmetries:[],cryst:void 0};let m,_=[];const D=[];let L;const P={};for(let N=0;N<w.length;N++){L=w[N].replace(/^\s*/,"");const U=L.substring(0,6);let V,W,G;if(U.indexOf("END")===0){if(_=w.slice(N+1),U==="END")for(const H in M)M.hasOwnProperty(H)&&delete M[H];break}else if(U==="ATOM  "||U==="HETATM"){let H,k,X,$,F,K,te,re,le,oe,ue,he;if(ue=L.substring(16,17),ue!==" "&&ue!==S&&S!=="*"||(oe=parseInt(L.substring(6,11)),m=L.substring(12,16).replace(/ /g,""),H=L.substring(17,20).replace(/ /g,""),k=L.substring(21,22),X=parseInt(L.substring(22,26)),$=L.substring(26,27),F=parseFloat(L.substring(30,38)),K=parseFloat(L.substring(38,46)),te=parseFloat(L.substring(46,54)),he=parseFloat(L.substring(60,68)),le=L.substring(76,78).replace(/ /g,""),le===""||y.bondTable[le]===void 0?le=(0,d.atomNameToElem)(L.substring(12,14),L[0]=="A"):le=le[0].toUpperCase()+le.substring(1).toLowerCase(),le==="H"&&c))continue;U[0]=="H"?re=!0:re=!1,D[oe]=h.length,h.push({resn:H,x:F,y:K,z:te,elem:le,hetflag:re,altLoc:ue,chain:k,resi:X,icode:$,rescode:X+($!==" "?"^"+$:""),serial:oe,atom:m,bonds:[],ss:"c",bondOrder:[],properties:{},b:he,pdbline:L})}else if(U==="SHEET "){V=L.substring(21,22),W=parseInt(L.substring(22,26)),G=parseInt(L.substring(33,37)),V in M||(M[V]={}),M[V][W]="s1";for(let H=W+1;H<G;H++)M[V][H]="s";M[V][G]="s2"}else if(U==="CONECT"){const H=parseInt(L.substring(6,11)),k=D[H],X=h[k],$=[11,16,21,26];for(let F=0;F<4;F++){const K=parseInt(L.substring($[F],$[F]+5)),te=D[K];let re=k+":"+te;const le=h[te];if(X!==void 0&&le!==void 0)if(!P[re])P[re]=1,(X.bonds.length==0||X.bonds[X.bonds.length-1]!==te)&&(X.bonds.push(te),X.bondOrder.push(1));else{P[re]+=1;for(let oe=0;oe<X.bonds.length;oe++)if(X.bonds[oe]==te){const ue=P[re];ue>=4?X.bondOrder[oe]=1:X.bondOrder[oe]=ue}}}}else if(U==="HELIX "){V=L.substring(19,20),W=parseInt(L.substring(21,25)),G=parseInt(L.substring(33,37)),V in M||(M[V]={}),M[V][W]="h1";for(let H=W+1;H<G;H++)M[V][H]="h";M[V][G]="h2"}else if(!b&&U==="REMARK"&&L.substring(13,18)==="BIOMT"){let H,k=new a.Matrix4;for(H=1;H<=3;H++)if(L=w[N].replace(/^\s*/,""),parseInt(L.substring(18,19))==H)k.elements[H-1]=parseFloat(L.substring(23,33)),k.elements[H-1+4]=parseFloat(L.substring(33,43)),k.elements[H-1+8]=parseFloat(L.substring(43,53)),k.elements[H-1+12]=parseFloat(L.substring(53)),N++;else for(;L.substring(13,18)==="BIOMT";)N++,L=w[N].replace(/^\s*/,"");k.elements[3]=0,k.elements[7]=0,k.elements[11]=0,k.elements[15]=1,u.symmetries.push(k),N--}else if(U==="CRYST1"){let H,k,X,$,F,K;H=parseFloat(L.substring(7,15)),k=parseFloat(L.substring(16,24)),X=parseFloat(L.substring(25,33)),$=parseFloat(L.substring(34,40)),F=parseFloat(L.substring(41,47)),K=parseFloat(L.substring(48,54)),u.cryst={a:H,b:k,c:X,alpha:$,beta:F,gamma:K}}else if(U==="ANISOU"){const H=parseInt(L.substring(6,11)),k=D[H],X=h[k];if(X){const $=L.substring(30).trim().split(/\s+/),F={u11:parseInt($[0]),u22:parseInt($[1]),u33:parseInt($[2]),u12:parseInt($[3]),u13:parseInt($[4]),u23:parseInt($[5])};X.uMat=F}}}if((0,x.validateBonds)(h,D),l&&(0,R.assignPDBBonds)(h,T),b||(0,E.processSymmetries)(u.symmetries,h,T,u.cryst),v&&!g&&(0,C.computeSecondaryStructure)(h,T.hbondCutoff),!(0,p.isEmpty)(M))for(let N=0;N<h.length;N++){const U=h[N];if(U!==void 0&&U.chain in M&&U.resi in M[U.chain]){const V=M[U.chain][U.resi];U.ss=V[0],V.length>1&&(V[1]=="1"?U.ssbegin=!0:V[1]=="2"&&(U.ssend=!0))}}return[h,u,_]}}),"./src/parsers/utils/isEmpty.ts":((s,i,n)=>{n.r(i),n.d(i,{isEmpty:()=>a});function a(d){for(const y in d)return!1;return!0}}),"./src/parsers/utils/processSymmetries.ts":((s,i,n)=>{n.r(i),n.d(i,{processSymmetries:()=>d});var a=n("./src/WebGL/index.ts");function d(y,C,p,E){const R=!p.duplicateAssemblyAtoms,x=C.length;let A=x,w=-1,T=null,M=null;(p.normalizeAssembly||p.wrapAtoms)&&E&&(T=(0,a.conversionMatrix3)(E.a,E.b,E.c,E.alpha,E.beta,E.gamma),M=new a.Matrix3,M.getInverse3(T));let h=function(g){let v=g.clone().applyMatrix3(M);const b=[v.x,v.y,v.z],S=[0,0,0];for(let m=0;m<3;m++){for(;b[m]<-.001;)b[m]+=1,S[m]+=1;for(;b[m]>1.001;)b[m]-=1,S[m]-=1}const u=new a.Vector3(S[0],S[1],S[2]);return u.applyMatrix3(T),u};if(p.normalizeAssembly&&E)for(let g=0;g<y.length;g++){const v=new a.Vector3(0,0,0);for(let S=0;S<x;S++){const u=new a.Vector3(C[S].x,C[S].y,C[S].z);u.applyMatrix4(y[g]),v.add(u)}v.divideScalar(x);const b=h(v);y[g].isNearlyIdentity()&&b.lengthSq()>.001&&(w=g),y[g].translate(b)}if(R){if(y.length>1)for(let g=0;g<C.length;g++){var l=[];for(let v=0;v<y.length;v++)if(!y[v].isNearlyIdentity()){var c=new a.Vector3;c.set(C[g].x,C[g].y,C[g].z),c.applyMatrix4(y[v]),l.push(c)}C[g].symmetries=l}}else{for(let g=0;g<x;g++)C[g].sym=-1;for(let g=0;g<y.length;g++)if(!y[g].isNearlyIdentity()&&w!=g){let v=new a.Vector3;for(let b=0;b<x;b++){const S=[];for(let m=0;m<C[b].bonds.length;m++)S.push(C[b].bonds[m]+A);if(v.set(C[b].x,C[b].y,C[b].z),v.applyMatrix4(y[g]),p.wrapAtoms&&E){let m=h(v);v.add(m)}const u={};for(const m in C[b])u[m]=C[b][m];u.x=v.x,u.y=v.y,u.z=v.z,u.bonds=S,u.sym=g,u.index=C.length,C.push(u)}A=C.length}else for(let v=0;v<x;v++)C[v].sym=g;if(p.wrapAtoms&&E){let g=new a.Vector3;for(let v=0;v<x;v++){g.set(C[v].x,C[v].y,C[v].z);let b=h(g);g.add(b),C[v].x=g.x,C[v].y=g.y,C[v].z=g.z}}if(w>=0){const g=new a.Vector3;for(let v=0;v<x;v++)g.set(C[v].x,C[v].y,C[v].z),g.applyMatrix4(y[w]),C[v].x=g.x,C[v].y=g.y,C[v].z=g.z}y.length=0}}}),"./src/parsers/utils/standardResidues.ts":((s,i,n)=>{n.r(i),n.d(i,{standardResidues:()=>a});const a=new Set(["ABU","ACD","ALA","ALB","ALI","ARG","AR0","ASN","ASP","ASX","BAS","CYS","CYH","CYX","CSS","CSH","GLN","GLU","GLX","GLY","HIS","HIE","HID","HIP","HYP","ILE","ILU","LEU","LYS","MET","PCA","PGA","PHE","PR0","PRO","PRZ","SER","THR","TRP","TYR","VAL","A","1MA","C","5MC","OMC","G","1MG","2MG","M2G","7MG","OMG","YG","I","T","U","+U","H2U","5MU","PSU","ACE","F0R","H2O","HOH","WAT"])}),"./src/parsers/utils/validateBonds.ts":((s,i,n)=>{n.r(i),n.d(i,{validateBonds:()=>a});function a(d,y){for(let C=0,p=d.length;C<p;C++){const E=d[C];for(let R=0;R<E.bonds.length;R++){const x=E.bonds[R],A=d[x],w=y[E.serial];A&&w&&A.bonds.indexOf(w)<0&&(A.bonds.push(w),A.bondOrder.push(E.bondOrder[R]))}}}}),"./src/partialCharges.ts":((s,i,n)=>{n.r(i),n.d(i,{applyPartialCharges:()=>d,partialCharges:()=>a});const a={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};function d(y,C){if((!C||typeof y.partialCharge>"u")&&y.resn&&y.atom){var p=y.resn+":"+y.atom;y.properties.partialCharge=a[p]}}}),"./src/specs.ts":((s,i,n)=>{n.r(i)}),"./src/utilities.ts":((__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausableTimer:()=>PausableTimer,adjustVolumeStyle:()=>adjustVolumeStyle,base64ToArray:()=>base64ToArray,deepCopy:()=>deepCopy,download:()=>download,extend:()=>extend,get:()=>get,getAtomProperty:()=>getAtomProperty,getColorFromStyle:()=>getColorFromStyle,getElement:()=>getElement,getExtent:()=>getExtent,getPropertyRange:()=>getPropertyRange,getbin:()=>getbin,inflateString:()=>inflateString,isEmptyObject:()=>isEmptyObject,isNumeric:()=>isNumeric,makeFunction:()=>makeFunction,mergeGeos:()=>mergeGeos,specStringToObject:()=>specStringToObject});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/Gradient.ts"),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/VolumeData.ts"),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/colors.ts"),pako__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/pako/dist/pako.esm.mjs");function extend(s,i){for(var n in i)i.hasOwnProperty(n)&&i[n]!==void 0&&(s[n]=i[n]);return s}function deepCopy(s){let i,n,a;if(s==null)return{};if(typeof s!="object"||s===null)return s;i=Array.isArray(s)?[]:{};for(a in s)n=s[a],i[a]=deepCopy(n);return i}function isNumeric(s){var i=typeof s;return(i==="number"||i==="string")&&!isNaN(s-parseFloat(s))}function isEmptyObject(s){return Object.keys(s).length===0}function makeFunction(callback){return callback&&typeof callback=="string"&&(callback=eval("("+callback+")")),callback&&typeof callback!="function"?(console.warn("Invalid callback provided."),()=>{}):callback}function adjustVolumeStyle(s){s&&(s.volformat&&!(s.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData)&&(s.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(s.voldata,s.volformat)),s.volscheme&&(s.volscheme=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(s.volscheme)))}function getExtent(s,i){var n,a,d,y,C,p,E,R,x,A,w=!i;if(n=a=d=9999,y=C=p=-9999,E=R=x=A=0,s.length===0)return[[0,0,0],[0,0,0],[0,0,0]];for(var T=0;T<s.length;T++){var M=s[T];if(!(typeof M>"u"||!isFinite(M.x)||!isFinite(M.y)||!isFinite(M.z))&&(A++,E+=M.x,R+=M.y,x+=M.z,n=n<M.x?n:M.x,a=a<M.y?a:M.y,d=d<M.z?d:M.z,y=y>M.x?y:M.x,C=C>M.y?C:M.y,p=p>M.z?p:M.z,M.symmetries&&w))for(var h=0;h<M.symmetries.length;h++)A++,E+=M.symmetries[h].x,R+=M.symmetries[h].y,x+=M.symmetries[h].z,n=n<M.symmetries[h].x?n:M.symmetries[h].x,a=a<M.symmetries[h].y?a:M.symmetries[h].y,d=d<M.symmetries[h].z?d:M.symmetries[h].z,y=y>M.symmetries[h].x?y:M.symmetries[h].x,C=C>M.symmetries[h].y?C:M.symmetries[h].y,p=p>M.symmetries[h].z?p:M.symmetries[h].z}return[[n,a,d],[y,C,p],[E/A,R/A,x/A]]}function getPropertyRange(s,i){for(var n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,d=0,y=s.length;d<y;d++){var C=s[d],p=getAtomProperty(C,i);p!=null&&(p<n&&(n=p),p>a&&(a=p))}return!isFinite(n)&&!isFinite(a)?n=a=0:isFinite(n)?isFinite(a)||(a=n):n=a,[n,a]}class PausableTimer{constructor(i,n,a){this.total_time_run=0,this.fn=i,this.arg=a,this.countdown=n,this.start_time=new Date().getTime(),this.ident=setTimeout(i,n,a)}cancel(){clearTimeout(this.ident)}pause(){clearTimeout(this.ident),this.total_time_run=new Date().getTime()-this.start_time}resume(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}function base64ToArray(s){for(var i=window.atob(s),n=i.length,a=new Uint8Array(n),d=0;d<n;d++)a[d]=i.charCodeAt(d);return a}function getAtomProperty(s,i){var n=null;return s.properties&&typeof s.properties[i]<"u"?n=s.properties[i]:typeof s[i]<"u"&&(n=s[i]),n}function mergeGeos(s,i){var n=i.geometry;n!==void 0&&s.geometryGroups.push(n.geometryGroups[0])}function specStringToObject(s){if(typeof s=="object")return s;if(typeof s>"u"||s==null)return s;try{return JSON.parse(s)}catch{}s=s.replace(/%7E/g,"~");var i=function(w){return isNumeric(w)?Math.floor(parseFloat(w))==parseInt(w)||w.indexOf(".")>=0?parseFloat(w):parseInt(w):w==="true"?!0:w==="false"?!1:w},n={};if(s==="all")return n;for(var a=s.split(";"),d=0;d<a.length;d++){var y=a[d].split(":"),C=y[0],p={},E=y[1];if(E)if(E=E.replace(/~/g,"="),E.indexOf("=")!==-1)for(var R=E.split(","),x=0;x<R.length;x++){var A=R[x].split("=",2);p[A[0]]=i(A[1])}else E.indexOf(",")!==-1?p=E.split(","):p=i(E);n[C]=p}return n}function checkStatus(s){if(!s.ok)throw new Error(`HTTP ${s.status} - ${s.statusText}`);return s}function get(s,i){var n=fetch(s).then(checkStatus).then(a=>a.text());return i?n.then(i):n}function getbin(s,i,n,a){var d;return n=="POST"?d=fetch(s,{method:"POST",body:a}).then(y=>checkStatus(y)).then(y=>y.arrayBuffer()):d=fetch(s).then(y=>checkStatus(y)).then(y=>y.arrayBuffer()),i?d.then(i):d}function download(s,i,n,a){var d="",y="",C="",p=null,E=i.addModel();if(s.indexOf(":")<0&&(s.length==4?s="pdb:"+s:isNaN(s)?s="url:"+s:s="cid:"+s),s.substring(0,5)=="mmtf:"&&(console.warn("WARNING: MMTF now deprecated.  Reverting to bcif."),s="bcif:"+s.slice(5)),s.substring(0,5)==="bcif:")s=s.substring(5).toUpperCase(),C="https://models.rcsb.org/"+s+".bcif.gz",n&&typeof n.noComputeSecondaryStructure>"u"&&(n.noComputeSecondaryStructure=!0),p=new Promise(function(x){getbin(C).then(function(A){E.addMolData(A,"bcif.gz",n),i.zoomTo(),i.render(),x(E)},function(){console.error("fetch of "+C+" failed.")})});else{if(s.substring(0,4)==="pdb:"){if(d="bcif",n&&n.format&&(d=n.format),n&&typeof n.noComputeSecondaryStructure>"u"&&(n.noComputeSecondaryStructure=!0),s=s.substring(4).toUpperCase(),!s.match(/^[1-9][A-Za-z0-9]{3}$/)){alert("Wrong PDB ID");return}d=="bcif"?C="https://models.rcsb.org/"+s.toUpperCase()+".bcif.gz":(y=n&&n.pdbUri?n.pdbUri:"https://files.rcsb.org/view/",C=y+s+"."+d)}else if(s.substring(0,4)=="cid:"){if(d="sdf",s=s.substring(4),!s.match(/^[0-9]+$/)){alert("Wrong Compound ID");return}C="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+s+"/SDF?record_type=3d"}else s.substring(0,4)=="url:"&&(C=s.substring(4),d=C);var R=function(x){E.addMolData(x,d,n),i.zoomTo(),i.render()};p=new Promise(function(x){d=="bcif"?getbin(C).then(function(A){R(A),x(E)}).catch(function(){y=n&&n.pdbUri?n.pdbUri:"https://files.rcsb.org/view/",C=y+s+".pdb",d="pdb",console.warn("falling back to pdb format"),get(C).then(function(A){R(A),x(E)}).catch(function(A){R(""),x(E),console.error("fetch of "+C+" failed: "+A.statusText)})}):get(C).then(function(A){R(A),x(E)}).catch(function(A){R(""),x(E),console.error("fetch of "+C+" failed: "+A.statusText)})})}return a?(p.then(function(x){a(x)}),E):p}function getColorFromStyle(s,i){let n=i.colorscheme;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[n]<"u")n=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[n];else if(typeof n=="string"&&n.endsWith("Carbon")){let C=n.substring(0,n.lastIndexOf("Carbon")).toLowerCase();if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[C]<"u"){let p=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);p.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[C],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[n]={prop:"elem",map:p},n=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[n]}}let a=s.color;if(typeof i.color<"u"&&i.color!="spectrum"&&(a=i.color),typeof n<"u"){let C,p;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[n]<"u")n=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[n],typeof n[s[n.prop]]<"u"&&(a=n.map[s[n.prop]]);else if(typeof n[s[n.prop]]<"u")a=n.map[s[n.prop]];else if(typeof n.prop<"u"&&typeof n.gradient<"u"){C=n.prop;var d=n.gradient;d instanceof _Gradient__WEBPACK_IMPORTED_MODULE_0__.GradientType||(d=(0,_Gradient__WEBPACK_IMPORTED_MODULE_0__.getGradient)(n));let E=d.range()||[-1,1];p=getAtomProperty(s,C),p!=null&&(a=d.valueToHex(p,E))}else typeof n.prop<"u"&&typeof n.map<"u"?(C=n.prop,p=getAtomProperty(s,C),typeof n.map[p]<"u"&&(a=n.map[p])):typeof i.colorscheme[s.elem]<"u"?a=i.colorscheme[s.elem]:console.warn("Could not interpret colorscheme "+n)}else typeof i.colorfunc<"u"&&(a=i.colorfunc(s));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(a)}function getElement(s){let i=s;return typeof s=="string"?i=document.querySelector("#"+s):typeof s=="object"&&s.get&&(i=s.get(0)),i}function inflateString(s,i=!0){let n;return typeof s=="string"?n=new TextEncoder().encode(s):n=new Uint8Array(s),(0,pako__WEBPACK_IMPORTED_MODULE_3__.inflate)(n,{to:i?"string":null})}}),"./src/vendor/mmtf.js":(function(s,i){(function(n,a){a(i)})(this,function(n){function a(J,ne,se){for(var _e=(J.byteLength,0),Se=se.length;Se>_e;_e++){var Pe=se.charCodeAt(_e);if(128>Pe)J.setUint8(ne++,Pe>>>0&127|0);else if(2048>Pe)J.setUint8(ne++,Pe>>>6&31|192),J.setUint8(ne++,Pe>>>0&63|128);else if(65536>Pe)J.setUint8(ne++,Pe>>>12&15|224),J.setUint8(ne++,Pe>>>6&63|128),J.setUint8(ne++,Pe>>>0&63|128);else{if(!(1114112>Pe))throw new Error("bad codepoint "+Pe);J.setUint8(ne++,Pe>>>18&7|240),J.setUint8(ne++,Pe>>>12&63|128),J.setUint8(ne++,Pe>>>6&63|128),J.setUint8(ne++,Pe>>>0&63|128)}}}function d(J){for(var ne=0,se=0,_e=J.length;_e>se;se++){var Se=J.charCodeAt(se);if(128>Se)ne+=1;else if(2048>Se)ne+=2;else if(65536>Se)ne+=3;else{if(!(1114112>Se))throw new Error("bad codepoint "+Se);ne+=4}}return ne}function y(J,ne,se){var _e=typeof J;if(_e==="string"){var Se=d(J);if(32>Se)return ne.setUint8(se,160|Se),a(ne,se+1,J),1+Se;if(256>Se)return ne.setUint8(se,217),ne.setUint8(se+1,Se),a(ne,se+2,J),2+Se;if(65536>Se)return ne.setUint8(se,218),ne.setUint16(se+1,Se),a(ne,se+3,J),3+Se;if(4294967296>Se)return ne.setUint8(se,219),ne.setUint32(se+1,Se),a(ne,se+5,J),5+Se}if(J instanceof Uint8Array){var Se=J.byteLength,Pe=new Uint8Array(ne.buffer);if(256>Se)return ne.setUint8(se,196),ne.setUint8(se+1,Se),Pe.set(J,se+2),2+Se;if(65536>Se)return ne.setUint8(se,197),ne.setUint16(se+1,Se),Pe.set(J,se+3),3+Se;if(4294967296>Se)return ne.setUint8(se,198),ne.setUint32(se+1,Se),Pe.set(J,se+5),5+Se}if(_e==="number"){if(!isFinite(J))throw new Error("Number not finite: "+J);if(Math.floor(J)!==J)return ne.setUint8(se,203),ne.setFloat64(se+1,J),9;if(J>=0){if(128>J)return ne.setUint8(se,J),1;if(256>J)return ne.setUint8(se,204),ne.setUint8(se+1,J),2;if(65536>J)return ne.setUint8(se,205),ne.setUint16(se+1,J),3;if(4294967296>J)return ne.setUint8(se,206),ne.setUint32(se+1,J),5;throw new Error("Number too big 0x"+J.toString(16))}if(J>=-32)return ne.setInt8(se,J),1;if(J>=-128)return ne.setUint8(se,208),ne.setInt8(se+1,J),2;if(J>=-32768)return ne.setUint8(se,209),ne.setInt16(se+1,J),3;if(J>=-2147483648)return ne.setUint8(se,210),ne.setInt32(se+1,J),5;throw new Error("Number too small -0x"+(-J).toString(16).substr(1))}if(J===null)return ne.setUint8(se,192),1;if(_e==="boolean")return ne.setUint8(se,J?195:194),1;if(_e==="object"){var Se,me=0,Ie=Array.isArray(J);if(Ie)Se=J.length;else{var Q=Object.keys(J);Se=Q.length}var me;if(16>Se?(ne.setUint8(se,Se|(Ie?144:128)),me=1):65536>Se?(ne.setUint8(se,Ie?220:222),ne.setUint16(se+1,Se),me=3):4294967296>Se&&(ne.setUint8(se,Ie?221:223),ne.setUint32(se+1,Se),me=5),Ie)for(var be=0;Se>be;be++)me+=y(J[be],ne,se+me);else for(var be=0;Se>be;be++){var ke=Q[be];me+=y(ke,ne,se+me),me+=y(J[ke],ne,se+me)}return me}throw new Error("Unknown type "+_e)}function C(J){var ne=typeof J;if(ne==="string"){var se=d(J);if(32>se)return 1+se;if(256>se)return 2+se;if(65536>se)return 3+se;if(4294967296>se)return 5+se}if(J instanceof Uint8Array){var se=J.byteLength;if(256>se)return 2+se;if(65536>se)return 3+se;if(4294967296>se)return 5+se}if(ne==="number"){if(Math.floor(J)!==J)return 9;if(J>=0){if(128>J)return 1;if(256>J)return 2;if(65536>J)return 3;if(4294967296>J)return 5;throw new Error("Number too big 0x"+J.toString(16))}if(J>=-32)return 1;if(J>=-128)return 2;if(J>=-32768)return 3;if(J>=-2147483648)return 5;throw new Error("Number too small -0x"+J.toString(16).substr(1))}if(ne==="boolean"||J===null)return 1;if(ne==="object"){var se,_e=0;if(Array.isArray(J)){se=J.length;for(var Se=0;se>Se;Se++)_e+=C(J[Se])}else{var Pe=Object.keys(J);se=Pe.length;for(var Se=0;se>Se;Se++){var Ie=Pe[Se];_e+=C(Ie)+C(J[Ie])}}if(16>se)return 1+_e;if(65536>se)return 3+_e;if(4294967296>se)return 5+_e;throw new Error("Array or object too long 0x"+se.toString(16))}throw new Error("Unknown type "+ne)}function p(J){var ne=new ArrayBuffer(C(J)),se=new DataView(ne);return y(J,se,0),new Uint8Array(ne)}function E(J,ne,se){return ne?new J(ne.buffer,ne.byteOffset,ne.byteLength/(se||1)):void 0}function R(J){return E(DataView,J)}function x(J){return E(Uint8Array,J)}function A(J){return E(Int8Array,J)}function w(J){return E(Int32Array,J,4)}function T(J){return E(Float32Array,J,4)}function M(J,ne){var se=J.length/2;ne||(ne=new Int16Array(se));for(var _e=0,Se=0;se>_e;++_e,Se+=2)ne[_e]=J[Se]<<8^J[Se+1]<<0;return ne}function h(J,ne){var se=J.length;ne||(ne=new Uint8Array(2*se));for(var _e=R(ne),Se=0;se>Se;++Se)_e.setInt16(2*Se,J[Se]);return x(ne)}function l(J,ne){var se=J.length/4;ne||(ne=new Int32Array(se));for(var _e=0,Se=0;se>_e;++_e,Se+=4)ne[_e]=J[Se]<<24^J[Se+1]<<16^J[Se+2]<<8^J[Se+3]<<0;return ne}function c(J,ne){var se=J.length;ne||(ne=new Uint8Array(4*se));for(var _e=R(ne),Se=0;se>Se;++Se)_e.setInt32(4*Se,J[Se]);return x(ne)}function g(J,ne){var se=J.length;ne||(ne=new Float32Array(se/4));for(var _e=R(ne),Se=R(J),Pe=0,Ie=0,Q=se/4;Q>Pe;++Pe,Ie+=4)_e.setFloat32(Ie,Se.getFloat32(Ie),!0);return ne}function v(J,ne,se){var _e=J.length,Se=1/ne;se||(se=new Float32Array(_e));for(var Pe=0;_e>Pe;++Pe)se[Pe]=J[Pe]*Se;return se}function b(J,ne,se){var _e=J.length;se||(se=new Int32Array(_e));for(var Se=0;_e>Se;++Se)se[Se]=Math.round(J[Se]*ne);return se}function S(J,ne){var se,_e;if(!ne){var Se=0;for(se=0,_e=J.length;_e>se;se+=2)Se+=J[se+1];ne=new J.constructor(Se)}var Pe=0;for(se=0,_e=J.length;_e>se;se+=2)for(var Ie=J[se],Q=J[se+1],me=0;Q>me;++me)ne[Pe]=Ie,++Pe;return ne}function u(J){if(J.length===0)return new Int32Array;var ne,se,_e=2;for(ne=1,se=J.length;se>ne;++ne)J[ne-1]!==J[ne]&&(_e+=2);var Se=new Int32Array(_e),Pe=0,Ie=1;for(ne=1,se=J.length;se>ne;++ne)J[ne-1]!==J[ne]?(Se[Pe]=J[ne-1],Se[Pe+1]=Ie,Ie=1,Pe+=2):++Ie;return Se[Pe]=J[J.length-1],Se[Pe+1]=Ie,Se}function m(J,ne){var se=J.length;ne||(ne=new J.constructor(se)),se&&(ne[0]=J[0]);for(var _e=1;se>_e;++_e)ne[_e]=J[_e]+ne[_e-1];return ne}function _(J,ne){var se=J.length;ne||(ne=new J.constructor(se)),ne[0]=J[0];for(var _e=1;se>_e;++_e)ne[_e]=J[_e]-J[_e-1];return ne}function D(J,ne){var se,_e,Se=J instanceof Int8Array?127:32767,Pe=-Se-1,Ie=J.length;if(!ne){var Q=0;for(se=0;Ie>se;++se)J[se]<Se&&J[se]>Pe&&++Q;ne=new Int32Array(Q)}for(se=0,_e=0;Ie>se;){for(var me=0;J[se]===Se||J[se]===Pe;)me+=J[se],++se;me+=J[se],++se,ne[_e]=me,++_e}return ne}function L(J,ne){var se,_e=32767,Se=-_e-1,Pe=J.length,Ie=0;for(se=0;Pe>se;++se){var Q=J[se];Q===0?++Ie:Q>0?(Ie+=Math.ceil(Q/_e),Q%_e===0&&(Ie+=1)):(Ie+=Math.ceil(Q/Se),Q%Se===0&&(Ie+=1))}var me=new Int16Array(Ie),be=0;for(se=0;Pe>se;++se){var Q=J[se];if(Q>=0)for(;Q>=_e;)me[be]=_e,++be,Q-=_e;else for(;Se>=Q;)me[be]=Se,++be,Q-=Se;me[be]=Q,++be}return me}function P(J,ne){return m(S(J),ne)}function N(J){return u(_(J))}function U(J,ne,se){return v(S(J,w(se)),ne,se)}function V(J,ne){return u(b(J,ne))}function W(J,ne,se){return v(m(J,w(se)),ne,se)}function G(J,ne,se){return _(b(J,ne),se)}function H(J,ne,se){return v(D(J,w(se)),ne,se)}function k(J,ne,se){var _e=D(J,w(se));return W(_e,ne,T(_e))}function X(J,ne,se){return L(G(J,ne))}function $(Pe){var ne=R(Pe),se=ne.getInt32(0),_e=ne.getInt32(4),Se=Pe.subarray(8,12),Pe=Pe.subarray(12);return[se,Pe,_e,Se]}function F(J,ne,se,_e){var Se=new ArrayBuffer(12+_e.byteLength),Pe=new Uint8Array(Se),Ie=new DataView(Se);return Ie.setInt32(0,J),Ie.setInt32(4,ne),se&&Pe.set(se,8),Pe.set(_e,12),Pe}function K(J){var ne=J.length,se=x(J);return F(2,ne,void 0,se)}function te(J){var ne=J.length,se=c(J);return F(4,ne,void 0,se)}function re(J,ne){var se=J.length/ne,_e=c([ne]),Se=x(J);return F(5,se,_e,Se)}function le(J){var ne=J.length,se=c(u(J));return F(6,ne,void 0,se)}function oe(J){var ne=J.length,se=c(N(J));return F(8,ne,void 0,se)}function ue(J,ne){var se=J.length,_e=c([ne]),Se=c(V(J,ne));return F(9,se,_e,Se)}function he(J,ne){var se=J.length,_e=c([ne]),Se=h(X(J,ne));return F(10,se,_e,Se)}function ge(J){var ne={};return et.forEach(function(se){J[se]!==void 0&&(ne[se]=J[se])}),J.bondAtomList&&(ne.bondAtomList=te(J.bondAtomList)),J.bondOrderList&&(ne.bondOrderList=K(J.bondOrderList)),ne.xCoordList=he(J.xCoordList,1e3),ne.yCoordList=he(J.yCoordList,1e3),ne.zCoordList=he(J.zCoordList,1e3),J.bFactorList&&(ne.bFactorList=he(J.bFactorList,100)),J.atomIdList&&(ne.atomIdList=oe(J.atomIdList)),J.altLocList&&(ne.altLocList=le(J.altLocList)),J.occupancyList&&(ne.occupancyList=ue(J.occupancyList,100)),ne.groupIdList=oe(J.groupIdList),ne.groupTypeList=te(J.groupTypeList),J.secStructList&&(ne.secStructList=K(J.secStructList)),J.insCodeList&&(ne.insCodeList=le(J.insCodeList)),J.sequenceIndexList&&(ne.sequenceIndexList=oe(J.sequenceIndexList)),ne.chainIdList=re(J.chainIdList,4),J.chainNameList&&(ne.chainNameList=re(J.chainNameList,4)),ne}function Oe(J){function ne(me){for(var be={},ke=0;me>ke;ke++){var ve=Pe();be[ve]=Pe()}return be}function se(me){var be=J.subarray(Ie,Ie+me);return Ie+=me,be}function _e(me){var be=J.subarray(Ie,Ie+me);Ie+=me;var ke=65535;if(me>ke){for(var ve=[],ze=0;ze<be.length;ze+=ke)ve.push(String.fromCharCode.apply(null,be.subarray(ze,ze+ke)));return ve.join("")}return String.fromCharCode.apply(null,be)}function Se(me){for(var be=new Array(me),ke=0;me>ke;ke++)be[ke]=Pe();return be}function Pe(){var me,be,ke=J[Ie];if((128&ke)===0)return Ie++,ke;if((240&ke)===128)return be=15&ke,Ie++,ne(be);if((240&ke)===144)return be=15&ke,Ie++,Se(be);if((224&ke)===160)return be=31&ke,Ie++,_e(be);if((224&ke)===224)return me=Q.getInt8(Ie),Ie++,me;switch(ke){case 192:return Ie++,null;case 194:return Ie++,!1;case 195:return Ie++,!0;case 196:return be=Q.getUint8(Ie+1),Ie+=2,se(be);case 197:return be=Q.getUint16(Ie+1),Ie+=3,se(be);case 198:return be=Q.getUint32(Ie+1),Ie+=5,se(be);case 202:return me=Q.getFloat32(Ie+1),Ie+=5,me;case 203:return me=Q.getFloat64(Ie+1),Ie+=9,me;case 204:return me=J[Ie+1],Ie+=2,me;case 205:return me=Q.getUint16(Ie+1),Ie+=3,me;case 206:return me=Q.getUint32(Ie+1),Ie+=5,me;case 208:return me=Q.getInt8(Ie+1),Ie+=2,me;case 209:return me=Q.getInt16(Ie+1),Ie+=3,me;case 210:return me=Q.getInt32(Ie+1),Ie+=5,me;case 217:return be=Q.getUint8(Ie+1),Ie+=2,_e(be);case 218:return be=Q.getUint16(Ie+1),Ie+=3,_e(be);case 219:return be=Q.getUint32(Ie+1),Ie+=5,_e(be);case 220:return be=Q.getUint16(Ie+1),Ie+=3,Se(be);case 221:return be=Q.getUint32(Ie+1),Ie+=5,Se(be);case 222:return be=Q.getUint16(Ie+1),Ie+=3,ne(be);case 223:return be=Q.getUint32(Ie+1),Ie+=5,ne(be)}throw new Error("Unknown type 0x"+ke.toString(16))}var Ie=0,Q=new DataView(J.buffer);return Pe()}function Le(J,ne,se,_e){switch(J){case 1:return g(ne);case 2:return A(ne);case 3:return M(ne);case 4:return l(ne);case 5:return x(ne);case 6:return S(l(ne),new Uint8Array(se));case 7:return S(l(ne));case 8:return P(l(ne));case 9:return U(l(ne),l(_e)[0]);case 10:return k(M(ne),l(_e)[0]);case 11:return v(M(ne),l(_e)[0]);case 12:return H(M(ne),l(_e)[0]);case 13:return H(A(ne),l(_e)[0]);case 14:return D(M(ne));case 15:return D(A(ne))}}function $e(J,ne){ne=ne||{};var se=ne.ignoreFields,_e={};return qe.forEach(function(Se){var Pe=se?se.indexOf(Se)!==-1:!1,Ie=J[Se];Pe||Ie===void 0||(Ie instanceof Uint8Array?_e[Se]=Le.apply(null,$(Ie)):_e[Se]=Ie)}),_e}function we(J){return String.fromCharCode.apply(null,J).replace(/\0/g,"")}function ce(J,ne,se){se=se||{};var _e,Se,Pe,Ie,Q,me,be=se.firstModelOnly,ke=ne.onModel,ve=ne.onChain,ze=ne.onGroup,q=ne.onAtom,He=ne.onBond,Je=0,j=0,Me=0,Ae=0,ee=0,pe=-1,De=J.chainNameList,lt=J.secStructList,ct=J.insCodeList,st=J.sequenceIndexList,xt=J.atomIdList,Zt=J.bFactorList,St=J.altLocList,vt=J.occupancyList,yt=J.bondAtomList,Gt=J.bondOrderList;for(_e=0,Se=J.chainsPerModel.length;Se>_e&&!(be&&Je>0);++_e){var Ct=J.chainsPerModel[Je];for(ke&&ke({chainCount:Ct,modelIndex:Je}),Pe=0;Ct>Pe;++Pe){var Lt=J.groupsPerChain[j];if(ve){var Qt=we(J.chainIdList.subarray(4*j,4*j+4)),Bt=null;De&&(Bt=we(De.subarray(4*j,4*j+4))),ve({groupCount:Lt,chainIndex:j,modelIndex:Je,chainId:Qt,chainName:Bt})}for(Ie=0;Lt>Ie;++Ie){var zt=J.groupList[J.groupTypeList[Me]],qt=zt.atomNameList.length;if(ze){var Cn=null;lt&&(Cn=lt[Me]);var yn=null;J.insCodeList&&(yn=String.fromCharCode(ct[Me]));var Pn=null;st&&(Pn=st[Me]),ze({atomCount:qt,groupIndex:Me,chainIndex:j,modelIndex:Je,groupId:J.groupIdList[Me],groupType:J.groupTypeList[Me],groupName:zt.groupName,singleLetterCode:zt.singleLetterCode,chemCompType:zt.chemCompType,secStruct:Cn,insCode:yn,sequenceIndex:Pn})}for(Q=0;qt>Q;++Q){if(q){var Er=null;xt&&(Er=xt[Ae]);var In=null;Zt&&(In=Zt[Ae]);var Gn=null;St&&(Gn=String.fromCharCode(St[Ae]));var dr=null;vt&&(dr=vt[Ae]),q({atomIndex:Ae,groupIndex:Me,chainIndex:j,modelIndex:Je,atomId:Er,element:zt.elementList[Q],atomName:zt.atomNameList[Q],formalCharge:zt.formalChargeList[Q],xCoord:J.xCoordList[Ae],yCoord:J.yCoordList[Ae],zCoord:J.zCoordList[Ae],bFactor:In,altLoc:Gn,occupancy:dr})}Ae+=1}if(He){var $n=zt.bondAtomList;for(Q=0,me=zt.bondOrderList.length;me>Q;++Q)He({atomIndex1:Ae-qt+$n[2*Q],atomIndex2:Ae-qt+$n[2*Q+1],bondOrder:zt.bondOrderList[Q]})}Me+=1}j+=1}if(ee=pe+1,pe=Ae-1,He&&yt)for(Q=0,me=yt.length;me>Q;Q+=2){var hn=yt[Q],Wn=yt[Q+1];(hn>=ee&&pe>=hn||Wn>=ee&&pe>=Wn)&&He({atomIndex1:hn,atomIndex2:Wn,bondOrder:Gt?Gt[Q/2]:null})}Je+=1}}function xe(J){return p(ge(J))}function Ne(J,ne){J instanceof ArrayBuffer&&(J=new Uint8Array(J));var se;return se=J instanceof Uint8Array?Oe(J):J,$e(se,ne)}function Xe(J,ne,se,_e){function Se(){try{var Ie=Ne(Pe.response);se(Ie)}catch(Q){_e(Q)}}var Pe=new XMLHttpRequest;Pe.addEventListener("load",Se,!0),Pe.addEventListener("error",_e,!0),Pe.responseType="arraybuffer",Pe.open("GET",ne+J.toUpperCase()),Pe.send()}function rt(J,ne,se){Xe(J,at,ne,se)}function nt(J,ne,se){Xe(J,ot,ne,se)}var et=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],Ze=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],qe=et.concat(Ze),Ve="v1.0.1",Ge="//mmtf.rcsb.org/v1.0/",at=Ge+"full/",ot=Ge+"reduced/";n.encode=xe,n.decode=Ne,n.traverse=ce,n.fetch=rt,n.fetchReduced=nt,n.version=Ve,n.fetchUrl=at,n.fetchReducedUrl=ot,n.encodeMsgpack=p,n.encodeMmtf=ge,n.decodeMsgpack=Oe,n.decodeMmtf=$e})})},__webpack_module_cache__={};function __webpack_require__(s){var i=__webpack_module_cache__[s];if(i!==void 0)return i.exports;var n=__webpack_module_cache__[s]={exports:{}};return __webpack_modules__[s].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=s=>{var i=s&&s.__esModule?()=>s.default:()=>s;return __webpack_require__.d(i,{a:i}),i},__webpack_require__.d=(s,i)=>{for(var n in i)__webpack_require__.o(i,n)&&!__webpack_require__.o(s,n)&&Object.defineProperty(s,n,{enumerable:!0,get:i[n]})},__webpack_require__.o=(s,i)=>Object.prototype.hasOwnProperty.call(s,i),__webpack_require__.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},__webpack_require__("./src/index.ts"),__webpack_require__("./src/SurfaceWorker.js");var __webpack_exports__=__webpack_require__("./src/exporter.js");return __webpack_exports__})())})(_3Dmol$1)),_3Dmol$1.exports}var _3DmolExports=require_3Dmol();function Molecule3D({molBase64:s}){const i=reactExports.useRef(null),n=reactExports.useRef(null);return reactExports.useEffect(()=>{if(!s||!i.current)return;n.current||(n.current=_3DmolExports.createViewer(i.current,{backgroundColor:"white"}));const a=n.current,d=atob(s);return a.clear(),a.addModel(d,"mol"),a.setStyle({},{stick:{}}),a.zoomTo(),a.render(),()=>{n.current&&n.current.clear()}},[s]),jsxRuntimeExports.jsx("div",{ref:i,style:{width:"100%",height:"100%",position:"relative"}})}function ImageArea({result:s}){return jsxRuntimeExports.jsxs("div",{className:"imageArea",children:[" ",jsxRuntimeExports.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx("p",{style:{fontSize:20,fontWeight:"bold"},children:"2D Image"}),jsxRuntimeExports.jsx(Card,{style:{boxShadow:"none",border:"2px solid #ccc",borderRadius:8},children:jsxRuntimeExports.jsx("img",{src:`data:image/png;base64,${s.images["2d"]}`,alt:"2D",style:{width:"100%"}})})," "]}),jsxRuntimeExports.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx("p",{style:{fontSize:20,fontWeight:"bold"},children:"3D Image"}),jsxRuntimeExports.jsx(Card,{style:{flex:1,boxShadow:"none",border:"2px solid #ccc",borderRadius:8},children:jsxRuntimeExports.jsx(Molecule3D,{molBase64:s.images["3d"]})})]})]})}function useEvent(s){const i=reactExports.useRef(s);return i.current=s,reactExports.useCallback((...a)=>i.current?.(...a),[])}function canUseDom(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}const useInternalLayoutEffect=canUseDom()?reactExports.useLayoutEffect:reactExports.useEffect,useLayoutEffect=(s,i)=>{const n=reactExports.useRef(!0);useInternalLayoutEffect(()=>s(n.current),i),useInternalLayoutEffect(()=>(n.current=!1,()=>{n.current=!0}),[])};function useSafeState(s){const i=reactExports.useRef(!1),[n,a]=reactExports.useState(s);reactExports.useEffect(()=>(i.current=!1,()=>{i.current=!0}),[]);function d(y,C){C&&i.current||a(y)}return[n,d]}function useControlledState(s,i){const[n,a]=reactExports.useState(s),d=i!==void 0?i:n;return useLayoutEffect(y=>{y||a(i)},[i]),[d,a]}var reactIs={exports:{}},reactIs_production_min={};var hasRequiredReactIs_production_min;function requireReactIs_production_min(){if(hasRequiredReactIs_production_min)return reactIs_production_min;hasRequiredReactIs_production_min=1;var s=Symbol.for("react.element"),i=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),C=Symbol.for("react.context"),p=Symbol.for("react.server_context"),E=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),M;M=Symbol.for("react.module.reference");function h(l){if(typeof l=="object"&&l!==null){var c=l.$$typeof;switch(c){case s:switch(l=l.type,l){case n:case d:case a:case R:case x:return l;default:switch(l=l&&l.$$typeof,l){case p:case C:case E:case w:case A:case y:return l;default:return c}}case i:return c}}}return reactIs_production_min.ContextConsumer=C,reactIs_production_min.ContextProvider=y,reactIs_production_min.Element=s,reactIs_production_min.ForwardRef=E,reactIs_production_min.Fragment=n,reactIs_production_min.Lazy=w,reactIs_production_min.Memo=A,reactIs_production_min.Portal=i,reactIs_production_min.Profiler=d,reactIs_production_min.StrictMode=a,reactIs_production_min.Suspense=R,reactIs_production_min.SuspenseList=x,reactIs_production_min.isAsyncMode=function(){return!1},reactIs_production_min.isConcurrentMode=function(){return!1},reactIs_production_min.isContextConsumer=function(l){return h(l)===C},reactIs_production_min.isContextProvider=function(l){return h(l)===y},reactIs_production_min.isElement=function(l){return typeof l=="object"&&l!==null&&l.$$typeof===s},reactIs_production_min.isForwardRef=function(l){return h(l)===E},reactIs_production_min.isFragment=function(l){return h(l)===n},reactIs_production_min.isLazy=function(l){return h(l)===w},reactIs_production_min.isMemo=function(l){return h(l)===A},reactIs_production_min.isPortal=function(l){return h(l)===i},reactIs_production_min.isProfiler=function(l){return h(l)===d},reactIs_production_min.isStrictMode=function(l){return h(l)===a},reactIs_production_min.isSuspense=function(l){return h(l)===R},reactIs_production_min.isSuspenseList=function(l){return h(l)===x},reactIs_production_min.isValidElementType=function(l){return typeof l=="string"||typeof l=="function"||l===n||l===d||l===a||l===R||l===x||l===T||typeof l=="object"&&l!==null&&(l.$$typeof===w||l.$$typeof===A||l.$$typeof===y||l.$$typeof===C||l.$$typeof===E||l.$$typeof===M||l.getModuleId!==void 0)},reactIs_production_min.typeOf=h,reactIs_production_min}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,reactIs.exports=requireReactIs_production_min()),reactIs.exports}var reactIsExports=requireReactIs();function useMemo(s,i,n){const a=reactExports.useRef({});return(!("value"in a.current)||n(a.current.condition,i))&&(a.current.value=s(),a.current.condition=i),a.current.value}const REACT_ELEMENT_TYPE_18=Symbol.for("react.element"),REACT_ELEMENT_TYPE_19=Symbol.for("react.transitional.element"),REACT_FRAGMENT_TYPE=Symbol.for("react.fragment");function isFragment$1(s){return s&&typeof s=="object"&&(s.$$typeof===REACT_ELEMENT_TYPE_18||s.$$typeof===REACT_ELEMENT_TYPE_19)&&s.type===REACT_FRAGMENT_TYPE}const ReactMajorVersion=Number(reactExports.version.split(".")[0]),fillRef=(s,i)=>{typeof s=="function"?s(i):typeof s=="object"&&s&&"current"in s&&(s.current=i)},composeRef=(...s)=>{const i=s.filter(Boolean);return i.length<=1?i[0]:n=>{s.forEach(a=>{fillRef(a,n)})}},useComposeRef=(...s)=>useMemo(()=>composeRef(...s),s,(i,n)=>i.length!==n.length||i.every((a,d)=>a!==n[d])),supportRef=s=>{if(!s)return!1;if(isReactElement(s)&&ReactMajorVersion>=19)return!0;const i=reactIsExports.isMemo(s)?s.type.type:s.type;return!(typeof i=="function"&&!i.prototype?.render&&i.$$typeof!==reactIsExports.ForwardRef||typeof s=="function"&&!s.prototype?.render&&s.$$typeof!==reactIsExports.ForwardRef)};function isReactElement(s){return reactExports.isValidElement(s)&&!isFragment$1(s)}const getNodeRef=s=>{if(s&&isReactElement(s)){const i=s;return i.props.propertyIsEnumerable("ref")?i.props.ref:i.ref}return null};function get(s,i){let n=s;for(let a=0;a<i.length;a+=1){if(n==null)return;n=n[i[a]]}return n}function internalSet(s,i,n,a){if(!i.length)return n;const[d,...y]=i;let C;return!s&&typeof d=="number"?C=[]:Array.isArray(s)?C=[...s]:C={...s},a&&n===void 0&&y.length===1?delete C[d][y[0]]:C[d]=internalSet(C[d],y,n,a),C}function set(s,i,n,a=!1){return i.length&&a&&n===void 0&&!get(s,i.slice(0,-1))?s:internalSet(s,i,n,a)}function isObject(s){return typeof s=="object"&&s!==null&&Object.getPrototypeOf(s)===Object.prototype}function createEmpty(s){return Array.isArray(s)?[]:{}}const keys=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function mergeWith(s,i={}){const{prepareArray:n}=i,a=n||(()=>[]);let d=createEmpty(s[0]);return s.forEach(y=>{function C(p,E){const R=new Set(E),x=get(y,p),A=Array.isArray(x);if(A||isObject(x)){if(!R.has(x)){R.add(x);const w=get(d,p);A?d=set(d,p,a(w,x)):(!w||typeof w!="object")&&(d=set(d,p,createEmpty(x))),keys(x).forEach(T=>{C([...p,T],R)})}}else d=set(d,p,x)}C([])}),d}function merge$1(...s){return mergeWith(s)}let warned={};const preMessage=s=>{};function warning$2(s,i){}function note(s,i){}function resetWarned(){warned={}}function call(s,i,n){!i&&!warned[n]&&(s(!1,n),warned[n]=!0)}function warningOnce(s,i){call(warning$2,s,i)}function noteOnce(s,i){call(note,s,i)}warningOnce.preMessage=preMessage;warningOnce.resetWarned=resetWarned;warningOnce.noteOnce=noteOnce;function omit(s,i){const n=Object.assign({},s);return Array.isArray(i)&&i.forEach(a=>{delete n[a]}),n}function toArray$3(s,i={}){let n=[];return React.Children.forEach(s,a=>{a==null&&!i.keepEmpty||(Array.isArray(a)?n=n.concat(toArray$3(a)):isFragment$1(a)&&a.props?n=n.concat(toArray$3(a.props.children,i)):n.push(a))}),n}function isDOM(s){return s instanceof HTMLElement||s instanceof SVGElement}function getDOM(s){return s&&typeof s=="object"&&isDOM(s.nativeElement)?s.nativeElement:isDOM(s)?s:null}const CollectionContext=reactExports.createContext(null);function Collection({children:s,onBatchResize:i}){const n=reactExports.useRef(0),a=reactExports.useRef([]),d=reactExports.useContext(CollectionContext),y=reactExports.useCallback((C,p,E)=>{n.current+=1;const R=n.current;a.current.push({size:C,element:p,data:E}),Promise.resolve().then(()=>{R===n.current&&(i?.(a.current),a.current=[])}),d?.(C,p,E)},[i,d]);return reactExports.createElement(CollectionContext.Provider,{value:y},s)}const elementListeners=new Map;function onResize(s){s.forEach(i=>{const{target:n}=i;elementListeners.get(n)?.forEach(a=>a(n))})}let observer;function ensureResizeObserver(){return observer||(observer=new ResizeObserver(onResize)),observer}function observe(s,i){elementListeners.has(s)||(elementListeners.set(s,new Set),ensureResizeObserver().observe(s)),elementListeners.get(s).add(i)}function unobserve(s,i){elementListeners.has(s)&&(elementListeners.get(s).delete(i),elementListeners.get(s).size||(ensureResizeObserver().unobserve(s),elementListeners.delete(s)))}function SingleObserver(s,i){const{children:n,disabled:a}=s,d=reactExports.useRef(null),y=reactExports.useContext(CollectionContext),C=typeof n=="function",p=C?n(d):n,E=reactExports.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),R=!C&&reactExports.isValidElement(p)&&supportRef(p),x=R?getNodeRef(p):null,A=useComposeRef(x,d),w=()=>getDOM(d.current);reactExports.useImperativeHandle(i,()=>w());const T=reactExports.useRef(s);T.current=s;const M=reactExports.useCallback(h=>{const{onResize:l,data:c}=T.current,{width:g,height:v}=h.getBoundingClientRect(),{offsetWidth:b,offsetHeight:S}=h,u=Math.floor(g),m=Math.floor(v);if(E.current.width!==u||E.current.height!==m||E.current.offsetWidth!==b||E.current.offsetHeight!==S){const _={width:u,height:m,offsetWidth:b,offsetHeight:S};E.current=_;const D=b===Math.round(g)?g:b,L=S===Math.round(v)?v:S,P={..._,offsetWidth:D,offsetHeight:L};y?.(P,h,c),l&&Promise.resolve().then(()=>{l(P,h)})}},[]);return reactExports.useEffect(()=>{const h=w();return h&&!a&&observe(h,M),()=>unobserve(h,M)},[d.current,a]),R?reactExports.cloneElement(p,{ref:A}):p}const RefSingleObserver=reactExports.forwardRef(SingleObserver);function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},_extends$c.apply(this,arguments)}const INTERNAL_PREFIX_KEY="rc-observer-key";function ResizeObserver$1(s,i){const{children:n}=s;return(typeof n=="function"?[n]:toArray$3(n)).map((d,y)=>{const C=d?.key||`${INTERNAL_PREFIX_KEY}-${y}`;return reactExports.createElement(RefSingleObserver,_extends$c({},s,{key:C,ref:y===0?i:void 0}),d)})}const RefResizeObserver=reactExports.forwardRef(ResizeObserver$1);RefResizeObserver.Collection=Collection;function r(s){var i,n,a="";if(typeof s=="string"||typeof s=="number")a+=s;else if(typeof s=="object")if(Array.isArray(s)){var d=s.length;for(i=0;i<d;i++)s[i]&&(n=r(s[i]))&&(a&&(a+=" "),a+=n)}else for(n in s)s[n]&&(a&&(a+=" "),a+=n);return a}function clsx(){for(var s,i,n=0,a="",d=arguments.length;n<d;n++)(s=arguments[n])&&(i=r(s))&&(a&&(a+=" "),a+=i);return a}function _arrayLikeToArray(s,i){(i==null||i>s.length)&&(i=s.length);for(var n=0,a=Array(i);n<i;n++)a[n]=s[n];return a}function _arrayWithoutHoles(s){if(Array.isArray(s))return _arrayLikeToArray(s)}function _iterableToArray(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function _unsupportedIterableToArray(s,i){if(s){if(typeof s=="string")return _arrayLikeToArray(s,i);var n={}.toString.call(s).slice(8,-1);return n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set"?Array.from(s):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(s,i):void 0}}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray(s){return _arrayWithoutHoles(s)||_iterableToArray(s)||_unsupportedIterableToArray(s)||_nonIterableSpread()}let raf=s=>+setTimeout(s,16),caf=s=>clearTimeout(s);typeof window<"u"&&"requestAnimationFrame"in window&&(raf=s=>window.requestAnimationFrame(s),caf=s=>window.cancelAnimationFrame(s));let rafUUID=0;const rafIds=new Map;function cleanup(s){rafIds.delete(s)}const wrapperRaf=(s,i=1)=>{rafUUID+=1;const n=rafUUID;function a(d){if(d===0)cleanup(n),s();else{const y=raf(()=>{a(d-1)});rafIds.set(n,y)}}return a(i),n};wrapperRaf.cancel=s=>{const i=rafIds.get(s);return cleanup(s),caf(i)};const defaultPrefixCls="ant",defaultIconPrefixCls="anticon",defaultGetPrefixCls=(s,i)=>i||(s?`${defaultPrefixCls}-${s}`:defaultPrefixCls),ConfigContext=reactExports.createContext({getPrefixCls:defaultGetPrefixCls,iconPrefixCls:defaultIconPrefixCls}),{Consumer:ConfigConsumer}=ConfigContext,EMPTY_OBJECT={};function useComponentConfig(s){const i=reactExports.useContext(ConfigContext),{getPrefixCls:n,direction:a,getPopupContainer:d,renderEmpty:y}=i,C=i[s];return{classNames:EMPTY_OBJECT,styles:EMPTY_OBJECT,...C,getPrefixCls:n,direction:a,getPopupContainer:d,renderEmpty:y}}function murmur2(s){for(var i=0,n,a=0,d=s.length;d>=4;++a,d-=4)n=s.charCodeAt(a)&255|(s.charCodeAt(++a)&255)<<8|(s.charCodeAt(++a)&255)<<16|(s.charCodeAt(++a)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,i=(n&65535)*1540483477+((n>>>16)*59797<<16)^(i&65535)*1540483477+((i>>>16)*59797<<16);switch(d){case 3:i^=(s.charCodeAt(a+2)&255)<<16;case 2:i^=(s.charCodeAt(a+1)&255)<<8;case 1:i^=s.charCodeAt(a)&255,i=(i&65535)*1540483477+((i>>>16)*59797<<16)}return i^=i>>>13,i=(i&65535)*1540483477+((i>>>16)*59797<<16),((i^i>>>15)>>>0).toString(36)}function contains(s,i){if(!s)return!1;if(s.contains)return s.contains(i);let n=i;for(;n;){if(n===s)return!0;n=n.parentNode}return!1}const APPEND_ORDER="data-rc-order",APPEND_PRIORITY="data-rc-priority",MARK_KEY="rc-util-key",containerCache=new Map;function getMark({mark:s}={}){return s?s.startsWith("data-")?s:`data-${s}`:MARK_KEY}function getContainer(s){return s.attachTo?s.attachTo:document.querySelector("head")||document.body}function getOrder(s){return s==="queue"?"prependQueue":s?"prepend":"append"}function findStyles(s){return Array.from((containerCache.get(s)||s).children).filter(i=>i.tagName==="STYLE")}function injectCSS(s,i={}){if(!canUseDom())return null;const{csp:n,prepend:a,priority:d=0}=i,y=getOrder(a),C=y==="prependQueue",p=document.createElement("style");p.setAttribute(APPEND_ORDER,y),C&&d&&p.setAttribute(APPEND_PRIORITY,`${d}`),n?.nonce&&(p.nonce=n?.nonce),p.innerHTML=s;const E=getContainer(i),{firstChild:R}=E;if(a){if(C){const x=(i.styles||findStyles(E)).filter(A=>{if(!["prepend","prependQueue"].includes(A.getAttribute(APPEND_ORDER)))return!1;const w=Number(A.getAttribute(APPEND_PRIORITY)||0);return d>=w});if(x.length)return E.insertBefore(p,x[x.length-1].nextSibling),p}E.insertBefore(p,R)}else E.appendChild(p);return p}function findExistNode(s,i={}){let{styles:n}=i;return n||=findStyles(getContainer(i)),n.find(a=>a.getAttribute(getMark(i))===s)}function removeCSS(s,i={}){const n=findExistNode(s,i);n&&getContainer(i).removeChild(n)}function syncRealContainer(s,i){const n=containerCache.get(s);if(!n||!contains(document,n)){const a=injectCSS("",i),{parentNode:d}=a;containerCache.set(s,d),s.removeChild(a)}}function updateCSS(s,i,n={}){const a=getContainer(n),d=findStyles(a),y={...n,styles:d};syncRealContainer(a,y);const C=findExistNode(i,y);if(C)return y.csp?.nonce&&C.nonce!==y.csp?.nonce&&(C.nonce=y.csp?.nonce),C.innerHTML!==s&&(C.innerHTML=s),C;const p=injectCSS(s,y);return p.setAttribute(getMark(y),i),p}function isEqual(s,i,n=!1){const a=new Set;function d(y,C,p=1){const E=a.has(y);if(warningOnce(!E,"Warning: There may be circular references"),E)return!1;if(y===C)return!0;if(n&&p>1)return!1;a.add(y);const R=p+1;if(Array.isArray(y)){if(!Array.isArray(C)||y.length!==C.length)return!1;for(let x=0;x<y.length;x++)if(!d(y[x],C[x],R))return!1;return!0}if(y&&C&&typeof y=="object"&&typeof C=="object"){const x=Object.keys(y);return x.length!==Object.keys(C).length?!1:x.every(A=>d(y[A],C[A],R))}return!1}return d(s,i)}const SPLIT$1="%";function pathKey(s){return s.join(SPLIT$1)}let updateId=0;class Entity{instanceId;constructor(i){this.instanceId=i}cache=new Map;updateTimes=new Map;extracted=new Set;get(i){return this.opGet(pathKey(i))}opGet(i){return this.cache.get(i)||null}update(i,n){return this.opUpdate(pathKey(i),n)}opUpdate(i,n){const a=this.cache.get(i),d=n(a);d===null?(this.cache.delete(i),this.updateTimes.delete(i)):(this.cache.set(i,d),this.updateTimes.set(i,updateId),updateId+=1)}}const ATTR_TOKEN="data-token-hash",ATTR_MARK="data-css-hash",CSS_IN_JS_INSTANCE="__cssinjs_instance__";function createCache(){const s=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){const i=document.body.querySelectorAll(`style[${ATTR_MARK}]`)||[],{firstChild:n}=document.head;Array.from(i).forEach(d=>{d[CSS_IN_JS_INSTANCE]=d[CSS_IN_JS_INSTANCE]||s,d[CSS_IN_JS_INSTANCE]===s&&document.head.insertBefore(d,n)});const a={};Array.from(document.querySelectorAll(`style[${ATTR_MARK}]`)).forEach(d=>{const y=d.getAttribute(ATTR_MARK);a[y]?d[CSS_IN_JS_INSTANCE]===s&&d.parentNode?.removeChild(d):a[y]=!0})}return new Entity(s)}const StyleContext=reactExports.createContext({hashPriority:"low",cache:createCache(),defaultCache:!0,autoPrefix:!1});function sameDerivativeOption(s,i){if(s.length!==i.length)return!1;for(let n=0;n<s.length;n++)if(s[n]!==i[n])return!1;return!0}class ThemeCache{static MAX_CACHE_SIZE=20;static MAX_CACHE_OFFSET=5;cache;keys;cacheCallTimes;constructor(){this.cache=new Map,this.keys=[],this.cacheCallTimes=0}size(){return this.keys.length}internalGet(i,n=!1){let a={map:this.cache};return i.forEach(d=>{a?a=a?.map?.get(d):a=void 0}),a?.value&&n&&(a.value[1]=this.cacheCallTimes++),a?.value}get(i){return this.internalGet(i,!0)?.[0]}has(i){return!!this.internalGet(i)}set(i,n){if(!this.has(i)){if(this.size()+1>ThemeCache.MAX_CACHE_SIZE+ThemeCache.MAX_CACHE_OFFSET){const[d]=this.keys.reduce((y,C)=>{const[,p]=y;return this.internalGet(C)[1]<p?[C,this.internalGet(C)[1]]:y},[this.keys[0],this.cacheCallTimes]);this.delete(d)}this.keys.push(i)}let a=this.cache;i.forEach((d,y)=>{if(y===i.length-1)a.set(d,{value:[n,this.cacheCallTimes++]});else{const C=a.get(d);C?C.map||(C.map=new Map):a.set(d,{map:new Map}),a=a.get(d).map}})}deleteByPath(i,n){const a=i.get(n[0]);if(n.length===1)return a.map?i.set(n[0],{map:a.map}):i.delete(n[0]),a.value?.[0];const d=this.deleteByPath(a.map,n.slice(1));return(!a.map||a.map.size===0)&&!a.value&&i.delete(n[0]),d}delete(i){if(this.has(i))return this.keys=this.keys.filter(n=>!sameDerivativeOption(n,i)),this.deleteByPath(this.cache,i)}}let uuid$2=0;class Theme{derivatives;id;constructor(i){this.derivatives=Array.isArray(i)?i:[i],this.id=uuid$2,i.length===0&&(i.length>0,void 0),uuid$2+=1}getDerivativeToken(i){return this.derivatives.reduce((n,a)=>a(i,n),void 0)}}const cacheThemes=new ThemeCache;function createTheme(s){const i=Array.isArray(s)?s:[s];return cacheThemes.has(i)||cacheThemes.set(i,new Theme(i)),cacheThemes.get(i)}const resultCache=new WeakMap,RESULT_VALUE={};function memoResult(s,i){let n=resultCache;for(let a=0;a<i.length;a+=1){const d=i[a];n.has(d)||n.set(d,new WeakMap),n=n.get(d)}return n.has(RESULT_VALUE)||n.set(RESULT_VALUE,s()),n.get(RESULT_VALUE)}const flattenTokenCache=new WeakMap;function flattenToken(s){let i=flattenTokenCache.get(s)||"";return i||(Object.keys(s).forEach(n=>{const a=s[n];i+=n,a instanceof Theme?i+=a.id:a&&typeof a=="object"?i+=flattenToken(a):i+=a}),i=murmur2(i),flattenTokenCache.set(s,i)),i}function token2key(s,i){return murmur2(`${i}_${flattenToken(s)}`)}const isClientSide=canUseDom();function unit$1(s){return typeof s=="number"?`${s}px`:s}function where(s){const{hashCls:i,hashPriority:n="low"}=s||{};if(!i)return"";const a=`.${i}`;return n==="low"?`:where(${a})`:a}const token2CSSVar=(s,i="")=>`--${i?`${i}-`:""}${s}`.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase(),serializeCSSVar=(s,i,n)=>{const{hashCls:a,hashPriority:d="low"}=n||{};return Object.keys(s).length?`${where({hashCls:a,hashPriority:d})}.${i}${n?.scope?`.${n.scope}`:""}{${Object.entries(s).map(([y,C])=>`${y}:${C};`).join("")}}`:""},transformToken=(s,i,n)=>{const{hashCls:a,hashPriority:d="low",prefix:y,unitless:C,ignore:p,preserve:E}=n||{},R={},x={};return Object.entries(s).forEach(([A,w])=>{if(E?.[A])x[A]=w;else if((typeof w=="string"||typeof w=="number")&&!p?.[A]){const T=token2CSSVar(A,y);R[T]=typeof w=="number"&&!C?.[A]?`${w}px`:String(w),x[A]=`var(${T})`}}),[x,serializeCSSVar(R,i,{scope:n?.scope,hashCls:a,hashPriority:d})]},effectMap=new Map;function useGlobalCache(s,i,n,a,d){const{cache:y}=reactExports.useContext(StyleContext),C=[s,...i],p=pathKey(C),E=A=>{y.opUpdate(p,w=>{const[T=0,M]=w||[void 0,void 0],l=M||n(),c=[T,l];return A?A(c):c})};reactExports.useMemo(()=>{E()},[p]);const x=y.opGet(p)[1];return reactExports.useInsertionEffect(()=>(E(([A,w])=>[A+1,w]),effectMap.has(p)||(d?.(x),effectMap.set(p,!0),Promise.resolve().then(()=>{effectMap.delete(p)})),()=>{y.opUpdate(p,A=>{const[w=0,T]=A||[];return w-1===0?(a?.(T,!1),effectMap.delete(p),null):[w-1,T]})}),[p]),x}const EMPTY_OVERRIDE={},hashPrefix="css",tokenKeys=new Map;function recordCleanToken(s){tokenKeys.set(s,(tokenKeys.get(s)||0)+1)}function removeStyleTags(s,i){typeof document<"u"&&document.querySelectorAll(`style[${ATTR_TOKEN}="${s}"]`).forEach(a=>{a[CSS_IN_JS_INSTANCE]===i&&a.parentNode?.removeChild(a)})}const TOKEN_THRESHOLD=-1;function cleanTokenStyle(s,i){tokenKeys.set(s,(tokenKeys.get(s)||0)-1);const n=new Set;tokenKeys.forEach((a,d)=>{a<=0&&n.add(d)}),tokenKeys.size-n.size>TOKEN_THRESHOLD&&n.forEach(a=>{removeStyleTags(a,i),tokenKeys.delete(a)})}const getComputedToken$1=(s,i,n,a)=>{let y={...n.getDerivativeToken(s),...i};return a&&(y=a(y)),y},TOKEN_PREFIX="token";function useCacheToken(s,i,n){const{cache:{instanceId:a},container:d,hashPriority:y}=reactExports.useContext(StyleContext),{salt:C="",override:p=EMPTY_OVERRIDE,formatToken:E,getComputedToken:R,cssVar:x}=n,A=memoResult(()=>Object.assign({},...i),i),w=flattenToken(A),T=flattenToken(p),M=flattenToken(x);return useGlobalCache(TOKEN_PREFIX,[C,s.id,w,T,M],()=>{const l=R?R(A,p,s):getComputedToken$1(A,p,s,E),c={...l},g=`${C}_${x.prefix}`,v=murmur2(g),b=`${hashPrefix}-${murmur2(g)}`;c._tokenKey=token2key(c,g);const[S,u]=transformToken(l,x.key,{prefix:x.prefix,ignore:x.ignore,unitless:x.unitless,preserve:x.preserve,hashPriority:y,hashCls:x.hashed?b:void 0});return S._hashId=v,recordCleanToken(x.key),[S,b,c,u,x.key]},([,,,,l])=>{cleanTokenStyle(l,a)},([,,,l,c])=>{if(!l)return;const g=updateCSS(l,murmur2(`css-var-${c}`),{mark:ATTR_MARK,prepend:"queue",attachTo:d,priority:-999});g[CSS_IN_JS_INSTANCE]=a,g.setAttribute(ATTR_TOKEN,c)})}var unitlessKeys={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",NAMESPACE="@namespace",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(s,i){return charat(s,0)^45?(((i<<2^charat(s,0))<<2^charat(s,1))<<2^charat(s,2))<<2^charat(s,3):0}function trim(s){return s.trim()}function match(s,i){return(s=i.exec(s))?s[0]:s}function replace(s,i,n){return s.replace(i,n)}function indexof(s,i,n){return s.indexOf(i,n)}function charat(s,i){return s.charCodeAt(i)|0}function substr(s,i,n){return s.slice(i,n)}function strlen(s){return s.length}function sizeof(s){return s.length}function append(s,i){return i.push(s),s}function combine(s,i){return s.map(i).join("")}function filter(s,i){return s.filter(function(n){return!match(n,i)})}var line=1,column=1,length=0,position=0,character=0,characters="";function node(s,i,n,a,d,y,C,p){return{value:s,root:i,parent:n,type:a,props:d,children:y,line,column,length:C,return:"",siblings:p}}function copy(s,i){return assign(node("",null,null,"",null,null,0,s.siblings),s,{length:-s.length},i)}function lift(s){for(;s.root;)s=copy(s.root,{children:[s]});append(s,s.siblings)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(s,i){return substr(characters,s,i)}function token(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(s){return line=column=1,length=strlen(characters=s),position=0,[]}function dealloc(s){return characters="",s}function delimit(s){return trim(slice(position-1,delimiter(s===91?s+2:s===40?s+1:s)))}function whitespace$1(s){for(;(character=peek())&&character<33;)next();return token(s)>2||token(character)>3?"":" "}function escaping(s,i){for(;--i&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(s,caret()+(i<6&&peek()==32&&next()==32))}function delimiter(s){for(;next();)switch(character){case s:return position;case 34:case 39:s!==34&&s!==39&&delimiter(character);break;case 40:s===41&&delimiter(s);break;case 92:next();break}return position}function commenter(s,i){for(;next()&&s+character!==57;)if(s+character===84&&peek()===47)break;return"/*"+slice(i,position-1)+"*"+from(s===47?s:next())}function identifier(s){for(;!token(peek());)next();return slice(s,position)}function compile(s){return dealloc(parse("",null,null,null,[""],s=alloc(s),0,[0],s))}function parse(s,i,n,a,d,y,C,p,E){for(var R=0,x=0,A=C,w=0,T=0,M=0,h=1,l=1,c=1,g=0,v="",b=d,S=y,u=a,m=v;l;)switch(M=g,g=next()){case 40:if(M!=108&&charat(m,A-1)==58){indexof(m+=replace(delimit(g),"&","&\f"),"&\f",abs(R?p[R-1]:0))!=-1&&(c=-1);break}case 34:case 39:case 91:m+=delimit(g);break;case 9:case 10:case 13:case 32:m+=whitespace$1(M);break;case 92:m+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),i,n,E),E),(token(M||1)==5||token(peek()||1)==5)&&strlen(m)&&substr(m,-1,void 0)!==" "&&(m+=" ");break;default:m+="/"}break;case 123*h:p[R++]=strlen(m)*c;case 125*h:case 59:case 0:switch(g){case 0:case 125:l=0;case 59+x:c==-1&&(m=replace(m,/\f/g,"")),T>0&&(strlen(m)-A||h===0&&M===47)&&append(T>32?declaration(m+";",a,n,A-1,E):declaration(replace(m," ","")+";",a,n,A-2,E),E);break;case 59:m+=";";default:if(append(u=ruleset(m,i,n,R,x,d,p,v,b=[],S=[],A,y),y),g===123)if(x===0)parse(m,i,u,u,b,y,A,p,S);else{switch(w){case 99:if(charat(m,3)===110)break;case 108:if(charat(m,2)===97)break;default:x=0;case 100:case 109:case 115:}x?parse(s,u,u,a&&append(ruleset(s,u,u,0,0,d,p,v,d,b=[],A,S),S),d,S,A,p,a?b:S):parse(m,u,u,u,[""],S,0,p,S)}}R=x=T=0,h=c=1,v=m="",A=C;break;case 58:A=1+strlen(m),T=M;default:if(h<1){if(g==123)--h;else if(g==125&&h++==0&&prev()==125)continue}switch(m+=from(g),g*h){case 38:c=x>0?1:(m+="\f",-1);break;case 44:p[R++]=(strlen(m)-1)*c,c=1;break;case 64:peek()===45&&(m+=delimit(next())),w=peek(),x=A=strlen(v=m+=identifier(caret())),g++;break;case 45:M===45&&strlen(m)==2&&(h=0)}}return y}function ruleset(s,i,n,a,d,y,C,p,E,R,x,A){for(var w=d-1,T=d===0?y:[""],M=sizeof(T),h=0,l=0,c=0;h<a;++h)for(var g=0,v=substr(s,w+1,w=abs(l=C[h])),b=s;g<M;++g)(b=trim(l>0?T[g]+" "+v:replace(v,/&\f/g,T[g])))&&(E[c++]=b);return node(s,i,n,d===0?RULESET:p,E,R,x,A)}function comment(s,i,n,a){return node(s,i,n,COMMENT,from(char()),substr(s,2,-2),0,a)}function declaration(s,i,n,a,d){return node(s,i,n,DECLARATION,substr(s,0,a),substr(s,a+1,-1),a,d)}function prefix(s,i,n){switch(hash(s,i)){case 5103:return WEBKIT+"print-"+s+s;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:case 6391:case 5879:case 5623:case 6135:case 4599:return WEBKIT+s+s;case 4855:return WEBKIT+s.replace("add","source-over").replace("substract","source-out").replace("intersect","source-in").replace("exclude","xor")+s;case 4789:return MOZ+s+s;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+s+MOZ+s+MS+s+s;case 5936:switch(charat(s,i+11)){case 114:return WEBKIT+s+MS+replace(s,/[svh]\w+-[tblr]{2}/,"tb")+s;case 108:return WEBKIT+s+MS+replace(s,/[svh]\w+-[tblr]{2}/,"tb-rl")+s;case 45:return WEBKIT+s+MS+replace(s,/[svh]\w+-[tblr]{2}/,"lr")+s}case 6828:case 4268:case 2903:return WEBKIT+s+MS+s+s;case 6165:return WEBKIT+s+MS+"flex-"+s+s;case 5187:return WEBKIT+s+replace(s,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+s;case 5443:return WEBKIT+s+MS+"flex-item-"+replace(s,/flex-|-self/g,"")+(match(s,/flex-|baseline/)?"":MS+"grid-row-"+replace(s,/flex-|-self/g,""))+s;case 4675:return WEBKIT+s+MS+"flex-line-pack"+replace(s,/align-content|flex-|-self/g,"")+s;case 5548:return WEBKIT+s+MS+replace(s,"shrink","negative")+s;case 5292:return WEBKIT+s+MS+replace(s,"basis","preferred-size")+s;case 6060:return WEBKIT+"box-"+replace(s,"-grow","")+WEBKIT+s+MS+replace(s,"grow","positive")+s;case 4554:return WEBKIT+replace(s,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+s;case 6187:return replace(replace(replace(s,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),s,"")+s;case 5495:case 3959:return replace(s,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(s,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/space-between/,"justify")+WEBKIT+s+s;case 4200:if(!match(s,/flex-|baseline/))return MS+"grid-column-align"+substr(s,i)+s;break;case 2592:case 3360:return MS+replace(s,"template-","")+s;case 4384:case 3616:return n&&n.some(function(a,d){return i=d,match(a.props,/grid-\w+-end/)})?~indexof(s+(n=n[i].value),"span",0)?s:MS+replace(s,"-start","")+s+MS+"grid-row-span:"+(~indexof(n,"span",0)?match(n,/\d+/):+match(n,/\d+/)-+match(s,/\d+/))+";":MS+replace(s,"-start","")+s;case 4896:case 4128:return n&&n.some(function(a){return match(a.props,/grid-\w+-start/)})?s:MS+replace(replace(s,"-end","-span"),"span ","")+s;case 4095:case 3583:case 4068:case 2532:return replace(s,/(.+)-inline(.+)/,WEBKIT+"$1$2")+s;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(s)-1-i>6)switch(charat(s,i+1)){case 109:if(charat(s,i+4)!==45)break;case 102:return replace(s,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(s,i+3)==108?"$3":"$2-$3"))+s;case 115:return~indexof(s,"stretch",0)?prefix(replace(s,"stretch","fill-available"),i,n)+s:s}break;case 5152:case 5920:return replace(s,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(a,d,y,C,p,E,R){return MS+d+":"+y+R+(C?MS+d+"-span:"+(p?E:+E-+y)+R:"")+s});case 4949:if(charat(s,i+6)===121)return replace(s,":",":"+WEBKIT)+s;break;case 6444:switch(charat(s,charat(s,14)===45?18:11)){case 120:return replace(s,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+WEBKIT+(charat(s,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+s;case 100:return replace(s,":",":"+MS)+s}break;case 5719:case 2647:case 2135:case 3927:case 2391:return replace(s,"scroll-","scroll-snap-")+s}return s}function serialize(s,i){for(var n="",a=0;a<s.length;a++)n+=i(s[a],a,s,i)||"";return n}function stringify$1(s,i,n,a){switch(s.type){case LAYER:if(s.children.length)break;case IMPORT:case NAMESPACE:case DECLARATION:return s.return=s.return||s.value;case COMMENT:return"";case KEYFRAMES:return s.return=s.value+"{"+serialize(s.children,a)+"}";case RULESET:if(!strlen(s.value=s.props.join(",")))return""}return strlen(n=serialize(s.children,a))?s.return=s.value+"{"+n+"}":""}function middleware(s){var i=sizeof(s);return function(n,a,d,y){for(var C="",p=0;p<i;p++)C+=s[p](n,a,d,y)||"";return C}}function prefixer(s,i,n,a){if(s.length>-1&&!s.return)switch(s.type){case DECLARATION:s.return=prefix(s.value,s.length,n);return;case KEYFRAMES:return serialize([copy(s,{value:replace(s.value,"@","@"+WEBKIT)})],a);case RULESET:if(s.length)return combine(n=s.props,function(d){switch(match(d,a=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":lift(copy(s,{props:[replace(d,/:(read-\w+)/,":"+MOZ+"$1")]})),lift(copy(s,{props:[d]})),assign(s,{props:filter(n,a)});break;case"::placeholder":lift(copy(s,{props:[replace(d,/:(plac\w+)/,":"+WEBKIT+"input-$1")]})),lift(copy(s,{props:[replace(d,/:(plac\w+)/,":"+MOZ+"$1")]})),lift(copy(s,{props:[replace(d,/:(plac\w+)/,MS+"input-$1")]})),lift(copy(s,{props:[d]})),assign(s,{props:filter(n,a)});break}return""})}}const ATTR_CACHE_MAP="data-ant-cssinjs-cache-path",CSS_FILE_STYLE="_FILE_STYLE__";let cachePathMap,fromCSSFile=!0;function prepare(){if(!cachePathMap&&(cachePathMap={},canUseDom())){const s=document.createElement("div");s.className=ATTR_CACHE_MAP,s.style.position="fixed",s.style.visibility="hidden",s.style.top="-9999px",document.body.appendChild(s);let i=getComputedStyle(s).content||"";i=i.replace(/^"/,"").replace(/"$/,""),i.split(";").forEach(a=>{const[d,y]=a.split(":");cachePathMap[d]=y});const n=document.querySelector(`style[${ATTR_CACHE_MAP}]`);n&&(fromCSSFile=!1,n.parentNode?.removeChild(n)),document.body.removeChild(s)}}function existPath(s){return prepare(),!!cachePathMap[s]}function getStyleAndHash(s){const i=cachePathMap[s];let n=null;if(i&&canUseDom())if(fromCSSFile)n=CSS_FILE_STYLE;else{const a=document.querySelector(`style[${ATTR_MARK}="${cachePathMap[s]}"]`);a?n=a.innerHTML:delete cachePathMap[s]}return[n,i]}const SKIP_CHECK="_skip_check_",MULTI_VALUE="_multi_value_";function normalizeStyle(s,i){return(i?serialize(compile(s),middleware([prefixer,stringify$1])):serialize(compile(s),stringify$1)).replace(/\{%%%\:[^;];}/g,";")}function isCompoundCSSProperty(s){return typeof s=="object"&&s&&(SKIP_CHECK in s||MULTI_VALUE in s)}function injectSelectorHash(s,i,n){if(!i)return s;const a=`.${i}`,d=n==="low"?`:where(${a})`:a;return s.split(",").map(C=>{const p=C.trim().split(/\s+/);let E=p[0]||"";const R=E.match(/^\w+/)?.[0]||"";return E=`${R}${d}${E.slice(R.length)}`,[E,...p.slice(1)].join(" ")}).join(",")}const parseStyle=(s,i={},{root:n,injectHash:a,parentSelectors:d}={root:!0,parentSelectors:[]})=>{const{hashId:y,layer:C,path:p,hashPriority:E,transformers:R=[],linters:x=[]}=i;let A="",w={};function T(l){const c=l.getName(y);if(!w[c]){const[g]=parseStyle(l.style,i,{root:!1,parentSelectors:d});w[c]=`@keyframes ${l.getName(y)}${g}`}}function M(l,c=[]){return l.forEach(g=>{Array.isArray(g)?M(g,c):g&&c.push(g)}),c}return M(Array.isArray(s)?s:[s]).forEach(l=>{const c=typeof l=="string"&&!n?{}:l;if(typeof c=="string")A+=`${c}
`;else if(c._keyframe)T(c);else{const g=R.reduce((v,b)=>b?.visit?.(v)||v,c);Object.keys(g).forEach(v=>{const b=g[v];if(typeof b=="object"&&b&&(v!=="animationName"||!b._keyframe)&&!isCompoundCSSProperty(b)){let S=!1,u=v.trim(),m=!1;(n||a)&&y?u.startsWith("@")?S=!0:u==="&"?u=injectSelectorHash("",y,E):u=injectSelectorHash(v,y,E):n&&!y&&(u==="&"||u==="")&&(u="",m=!0);const[_,D]=parseStyle(b,i,{root:m,injectHash:S,parentSelectors:[...d,u]});w={...w,...D},A+=`${u}${_}`}else{let S=function(m,_){const D=m.replace(/[A-Z]/g,P=>`-${P.toLowerCase()}`);let L=_;!unitlessKeys[m]&&typeof L=="number"&&L!==0&&(L=`${L}px`),m==="animationName"&&_?._keyframe&&(T(_),L=_.getName(y)),A+=`${D}:${L};`};const u=b?.value??b;typeof b=="object"&&b?.[MULTI_VALUE]&&Array.isArray(u)?u.forEach(m=>{S(v,m)}):S(v,u)}})}}),n?C&&(A&&(A=`@layer ${C.name} {${A}}`),C.dependencies&&(w[`@layer ${C.name}`]=C.dependencies.map(l=>`@layer ${l}, ${C.name};`).join(`
`))):A=`{${A}}`,[A,w]};function uniqueHash(s,i){return murmur2(`${s.join("%")}${i}`)}const STYLE_PREFIX="style";function useStyleRegister(s,i){const{path:n,hashId:a,layer:d,nonce:y,clientOnly:C,order:p=0}=s,{mock:E,hashPriority:R,container:x,transformers:A,linters:w,cache:T,layer:M,autoPrefix:h}=reactExports.useContext(StyleContext),l=[a||""];M&&l.push("layer"),l.push(...n);let c=isClientSide;useGlobalCache(STYLE_PREFIX,l,()=>{const g=l.join("|");if(existPath(g)){const[_,D]=getStyleAndHash(g);if(_)return[_,D,{},C,p]}const v=i(),[b,S]=parseStyle(v,{hashId:a,hashPriority:R,layer:M?d:void 0,path:n.join("-"),transformers:A,linters:w}),u=normalizeStyle(b,h||!1),m=uniqueHash(l,u);return[u,m,S,C,p]},(g,v)=>{const[,b]=g;v&&isClientSide&&removeCSS(b,{mark:ATTR_MARK,attachTo:x})},g=>{const[v,b,S,,u]=g;if(c&&v!==CSS_FILE_STYLE){const m={mark:ATTR_MARK,prepend:M?!1:"queue",attachTo:x,priority:u},_=typeof y=="function"?y():y;_&&(m.csp={nonce:_});const D=[],L=[];Object.keys(S).forEach(N=>{N.startsWith("@layer")?D.push(N):L.push(N)}),D.forEach(N=>{updateCSS(normalizeStyle(S[N],h||!1),`_layer-${N}`,{...m,prepend:!0})});const P=updateCSS(v,b,m);P[CSS_IN_JS_INSTANCE]=T.instanceId,L.forEach(N=>{updateCSS(normalizeStyle(S[N],h||!1),`_effect-${N}`,m)})}})}const CSS_VAR_PREFIX="cssVar",useCSSVarRegister=(s,i)=>{const{key:n,prefix:a,unitless:d,ignore:y,token:C,hashId:p,scope:E=""}=s,{cache:{instanceId:R},container:x,hashPriority:A}=reactExports.useContext(StyleContext),{_tokenKey:w}=C,T=[...s.path,n,E,w];return useGlobalCache(CSS_VAR_PREFIX,T,()=>{const h=i(),[l,c]=transformToken(h,n,{prefix:a,unitless:d,ignore:y,scope:E,hashPriority:A,hashCls:p}),g=uniqueHash(T,c);return[l,c,g,n]},([,,h])=>{isClientSide&&removeCSS(h,{mark:ATTR_MARK,attachTo:x})},([,h,l])=>{if(!h)return;const c=updateCSS(h,l,{mark:ATTR_MARK,prepend:"queue",attachTo:x,priority:-999});c[CSS_IN_JS_INSTANCE]=R,c.setAttribute(ATTR_TOKEN,n)})};class Keyframe{name;style;constructor(i,n){this.name=i,this.style=n}getName(i=""){return i?`${i}-${this.name}`:this.name}_keyframe=!0}function noSplit(s){return s.notSplit=!0,s}noSplit(["borderTop","borderBottom"]),noSplit(["borderTop"]),noSplit(["borderBottom"]),noSplit(["borderLeft","borderRight"]),noSplit(["borderLeft"]),noSplit(["borderRight"]);function _typeof(s){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof(s)}function _arrayWithHoles(s){if(Array.isArray(s))return s}function _iterableToArrayLimit(s,i){var n=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(n!=null){var a,d,y,C,p=[],E=!0,R=!1;try{if(y=(n=n.call(s)).next,i===0){if(Object(n)!==n)return;E=!1}else for(;!(E=(a=y.call(n)).done)&&(p.push(a.value),p.length!==i);E=!0);}catch(x){R=!0,d=x}finally{try{if(!E&&n.return!=null&&(C=n.return(),Object(C)!==C))return}finally{if(R)throw d}}return p}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray(s,i){return _arrayWithHoles(s)||_iterableToArrayLimit(s,i)||_unsupportedIterableToArray(s,i)||_nonIterableRest()}function toPrimitive(s,i){if(_typeof(s)!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var a=n.call(s,i);if(_typeof(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(s)}function toPropertyKey(s){var i=toPrimitive(s,"string");return _typeof(i)=="symbol"?i:i+""}function _defineProperty(s,i,n){return(i=toPropertyKey(i))in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n,s}function ownKeys(s,i){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);i&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(s,d).enumerable})),n.push.apply(n,a)}return n}function _objectSpread2(s){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?ownKeys(Object(n),!0).forEach(function(a){_defineProperty(s,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(n,a))})}return s}function _classCallCheck(s,i){if(!(s instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(s,i){for(var n=0;n<i.length;n++){var a=i[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,toPropertyKey(a.key),a)}}function _createClass(s,i,n){return i&&_defineProperties(s.prototype,i),Object.defineProperty(s,"prototype",{writable:!1}),s}function _assertThisInitialized(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _setPrototypeOf(s,i){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},_setPrototypeOf(s,i)}function _inherits(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(i&&i.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),i&&_setPrototypeOf(s,i)}function _getPrototypeOf(s){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},_getPrototypeOf(s)}function _isNativeReflectConstruct(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!s})()}function _possibleConstructorReturn(s,i){if(i&&(_typeof(i)=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(s)}function _createSuper(s){var i=_isNativeReflectConstruct();return function(){var n,a=_getPrototypeOf(s);if(i){var d=_getPrototypeOf(this).constructor;n=Reflect.construct(a,arguments,d)}else n=a.apply(this,arguments);return _possibleConstructorReturn(this,n)}}var AbstractCalculator=_createClass(function s(){_classCallCheck(this,s)}),CALC_UNIT="CALC_UNIT",regexp$1=new RegExp(CALC_UNIT,"g");function unit(s){return typeof s=="number"?"".concat(s).concat(CALC_UNIT):s}var CSSCalculator=(function(s){_inherits(n,s);var i=_createSuper(n);function n(a,d){var y;_classCallCheck(this,n),y=i.call(this),_defineProperty(_assertThisInitialized(y),"result",""),_defineProperty(_assertThisInitialized(y),"unitlessCssVar",void 0),_defineProperty(_assertThisInitialized(y),"lowPriority",void 0);var C=_typeof(a);return y.unitlessCssVar=d,a instanceof n?y.result="(".concat(a.result,")"):C==="number"?y.result=unit(a):C==="string"&&(y.result=a),y}return _createClass(n,[{key:"add",value:function(d){return d instanceof n?this.result="".concat(this.result," + ").concat(d.getResult()):(typeof d=="number"||typeof d=="string")&&(this.result="".concat(this.result," + ").concat(unit(d))),this.lowPriority=!0,this}},{key:"sub",value:function(d){return d instanceof n?this.result="".concat(this.result," - ").concat(d.getResult()):(typeof d=="number"||typeof d=="string")&&(this.result="".concat(this.result," - ").concat(unit(d))),this.lowPriority=!0,this}},{key:"mul",value:function(d){return this.lowPriority&&(this.result="(".concat(this.result,")")),d instanceof n?this.result="".concat(this.result," * ").concat(d.getResult(!0)):(typeof d=="number"||typeof d=="string")&&(this.result="".concat(this.result," * ").concat(d)),this.lowPriority=!1,this}},{key:"div",value:function(d){return this.lowPriority&&(this.result="(".concat(this.result,")")),d instanceof n?this.result="".concat(this.result," / ").concat(d.getResult(!0)):(typeof d=="number"||typeof d=="string")&&(this.result="".concat(this.result," / ").concat(d)),this.lowPriority=!1,this}},{key:"getResult",value:function(d){return this.lowPriority||d?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(d){var y=this,C=d||{},p=C.unit,E=!0;return typeof p=="boolean"?E=p:Array.from(this.unitlessCssVar).some(function(R){return y.result.includes(R)})&&(E=!1),this.result=this.result.replace(regexp$1,E?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),n})(AbstractCalculator),genCalc=function s(i,n){var a=CSSCalculator;return function(d){return new a(d,n)}},getCompVarPrefix=function s(i,n){return"".concat([n,i.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function getComponentToken(s,i,n,a){var d=_objectSpread2({},i[s]);if(a!=null&&a.deprecatedTokens){var y=a.deprecatedTokens;y.forEach(function(p){var E=_slicedToArray(p,2),R=E[0],x=E[1];if(d!=null&&d[R]||d!=null&&d[x]){var A;(A=d[x])!==null&&A!==void 0||(d[x]=d?.[R])}})}var C=_objectSpread2(_objectSpread2({},n),d);return Object.keys(C).forEach(function(p){C[p]===i[p]&&delete C[p]}),C}var enableStatistic=typeof CSSINJS_STATISTIC<"u",recording=!0;function merge(){for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];if(!enableStatistic)return Object.assign.apply(Object,[{}].concat(i));recording=!1;var a={};return i.forEach(function(d){if(_typeof(d)==="object"){var y=Object.keys(d);y.forEach(function(C){Object.defineProperty(a,C,{configurable:!0,enumerable:!0,get:function(){return d[C]}})})}}),recording=!0,a}var statistic={};function noop(){}var statisticToken=function s(i){var n,a=i,d=noop;return enableStatistic&&typeof Proxy<"u"&&(n=new Set,a=new Proxy(i,{get:function(C,p){if(recording){var E;(E=n)===null||E===void 0||E.add(p)}return C[p]}}),d=function(C,p){var E;statistic[C]={global:Array.from(n),component:_objectSpread2(_objectSpread2({},(E=statistic[C])===null||E===void 0?void 0:E.component),p)}}),{token:a,keys:n,flush:d}};function getDefaultComponentToken(s,i,n){if(typeof n=="function"){var a;return n(merge(i,(a=i[s])!==null&&a!==void 0?a:{}))}return n??{}}function genMaxMin(s){return{max:function(){for(var n=arguments.length,a=new Array(n),d=0;d<n;d++)a[d]=arguments[d];return"max(".concat(a.map(function(y){return unit$1(y)}).join(","),")")},min:function(){for(var n=arguments.length,a=new Array(n),d=0;d<n;d++)a[d]=arguments[d];return"min(".concat(a.map(function(y){return unit$1(y)}).join(","),")")}}}var BEAT_LIMIT=1e3*60*10,ArrayKeyMap=(function(){function s(){_classCallCheck(this,s),_defineProperty(this,"map",new Map),_defineProperty(this,"objectIDMap",new WeakMap),_defineProperty(this,"nextID",0),_defineProperty(this,"lastAccessBeat",new Map),_defineProperty(this,"accessBeat",0)}return _createClass(s,[{key:"set",value:function(n,a){this.clear();var d=this.getCompositeKey(n);this.map.set(d,a),this.lastAccessBeat.set(d,Date.now())}},{key:"get",value:function(n){var a=this.getCompositeKey(n),d=this.map.get(a);return this.lastAccessBeat.set(a,Date.now()),this.accessBeat+=1,d}},{key:"getCompositeKey",value:function(n){var a=this,d=n.map(function(y){return y&&_typeof(y)==="object"?"obj_".concat(a.getObjectID(y)):"".concat(_typeof(y),"_").concat(y)});return d.join("|")}},{key:"getObjectID",value:function(n){if(this.objectIDMap.has(n))return this.objectIDMap.get(n);var a=this.nextID;return this.objectIDMap.set(n,a),this.nextID+=1,a}},{key:"clear",value:function(){var n=this;if(this.accessBeat>1e4){var a=Date.now();this.lastAccessBeat.forEach(function(d,y){a-d>BEAT_LIMIT&&(n.map.delete(y),n.lastAccessBeat.delete(y))}),this.accessBeat=0}}}]),s})(),uniqueMap=new ArrayKeyMap;function useUniqueMemo(s,i){return React.useMemo(function(){var n=uniqueMap.get(i);if(n)return n;var a=s();return uniqueMap.set(i,a),a},i)}var useDefaultCSP=function s(){return{}};function genStyleUtils(s){var i=s.useCSP,n=i===void 0?useDefaultCSP:i,a=s.useToken,d=s.usePrefix,y=s.getResetStyles,C=s.getCommonStyle,p=s.getCompUnitless;function E(w,T,M,h){var l=Array.isArray(w)?w[0]:w;function c(_){return"".concat(String(l)).concat(_.slice(0,1).toUpperCase()).concat(_.slice(1))}var g=h?.unitless||{},v=typeof p=="function"?p(w):{},b=_objectSpread2(_objectSpread2({},v),{},_defineProperty({},c("zIndexPopup"),!0));Object.keys(g).forEach(function(_){b[c(_)]=g[_]});var S=_objectSpread2(_objectSpread2({},h),{},{unitless:b,prefixToken:c}),u=x(w,T,M,S),m=R(l,M,S);return function(_){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_,L=u(_,D),P=m(D);return[L,P]}}function R(w,T,M){var h=M.unitless,l=M.prefixToken,c=M.ignore;return function(g){var v=a(),b=v.cssVar,S=v.realToken;return useCSSVarRegister({path:[w],prefix:b.prefix,key:b.key,unitless:h,ignore:c,token:S,scope:g},function(){var u=getDefaultComponentToken(w,S,T),m=getComponentToken(w,S,u,{deprecatedTokens:M?.deprecatedTokens});return u&&Object.keys(u).forEach(function(_){m[l(_)]=m[_],delete m[_]}),m}),b?.key}}function x(w,T,M){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=Array.isArray(w)?w:[w,w],c=_slicedToArray(l,1),g=c[0],v=l.join("-"),b=s.layer||{name:"antd"};return function(S){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S,m=a(),_=m.theme,D=m.realToken,L=m.hashId,P=m.token,N=m.cssVar,U=m.zeroRuntime,V=reactExports.useMemo(function(){return U},[]);if(V)return L;var W=d(),G=W.rootPrefixCls,H=W.iconPrefixCls,k=n(),X="css",$=useUniqueMemo(function(){var le=new Set;return Object.keys(h.unitless||{}).forEach(function(oe){le.add(token2CSSVar(oe,N.prefix)),le.add(token2CSSVar(oe,getCompVarPrefix(g,N.prefix)))}),genCalc(X,le)},[X,g,N?.prefix]),F=genMaxMin(),K=F.max,te=F.min,re={theme:_,token:P,hashId:L,nonce:function(){return k.nonce},clientOnly:h.clientOnly,layer:b,order:h.order||-999};return typeof y=="function"&&useStyleRegister(_objectSpread2(_objectSpread2({},re),{},{clientOnly:!1,path:["Shared",G]}),function(){return y(P,{prefix:{rootPrefixCls:G,iconPrefixCls:H},csp:k})}),useStyleRegister(_objectSpread2(_objectSpread2({},re),{},{path:[v,S,H]}),function(){if(h.injectStyle===!1)return[];var le=statisticToken(P),oe=le.token,ue=le.flush,he=getDefaultComponentToken(g,D,M),ge=".".concat(S),Oe=getComponentToken(g,D,he,{deprecatedTokens:h.deprecatedTokens});he&&_typeof(he)==="object"&&Object.keys(he).forEach(function(ce){he[ce]="var(".concat(token2CSSVar(ce,getCompVarPrefix(g,N.prefix)),")")});var Le=merge(oe,{componentCls:ge,prefixCls:S,iconCls:".".concat(H),antCls:".".concat(G),calc:$,max:K,min:te},he),$e=T(Le,{hashId:L,prefixCls:S,rootPrefixCls:G,iconPrefixCls:H});ue(g,Oe);var we=typeof C=="function"?C(Le,S,u,h.resetFont):null;return[h.resetStyle===!1?null:we,$e]}),L}}function A(w,T,M){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=x(w,T,M,_objectSpread2({resetStyle:!1,order:-998},h)),c=function(v){var b=v.prefixCls,S=v.rootCls,u=S===void 0?b:S;return l(b,u),null};return c}return{genStyleHooks:E,genSubStyleComponent:A,genComponentStyleHook:x}}const PresetColors=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"];function getLineHeight(s){return(s+8)/s}function getFontSizes(s){const i=Array.from({length:10}).map((n,a)=>{const d=a-1,y=s*Math.E**(d/5),C=a>1?Math.floor(y):Math.ceil(y);return Math.floor(C/2)*2});return i[1]=s,i.map(n=>({size:n,lineHeight:getLineHeight(n)}))}const version="6.1.1",defaultPresetColors={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},seedToken={...defaultPresetColors,colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0},presetColors={aliceblue:"9ehhb",antiquewhite:"9sgk7",aqua:"1ekf",aquamarine:"4zsno",azure:"9eiv3",beige:"9lhp8",bisque:"9zg04",black:"0",blanchedalmond:"9zhe5",blue:"73",blueviolet:"5e31e",brown:"6g016",burlywood:"8ouiv",cadetblue:"3qba8",chartreuse:"4zshs",chocolate:"87k0u",coral:"9yvyo",cornflowerblue:"3xael",cornsilk:"9zjz0",crimson:"8l4xo",cyan:"1ekf",darkblue:"3v",darkcyan:"rkb",darkgoldenrod:"776yz",darkgray:"6mbhl",darkgreen:"jr4",darkgrey:"6mbhl",darkkhaki:"7ehkb",darkmagenta:"5f91n",darkolivegreen:"3bzfz",darkorange:"9yygw",darkorchid:"5z6x8",darkred:"5f8xs",darksalmon:"9441m",darkseagreen:"5lwgf",darkslateblue:"2th1n",darkslategray:"1ugcv",darkslategrey:"1ugcv",darkturquoise:"14up",darkviolet:"5rw7n",deeppink:"9yavn",deepskyblue:"11xb",dimgray:"442g9",dimgrey:"442g9",dodgerblue:"16xof",firebrick:"6y7tu",floralwhite:"9zkds",forestgreen:"1cisi",fuchsia:"9y70f",gainsboro:"8m8kc",ghostwhite:"9pq0v",goldenrod:"8j4f4",gold:"9zda8",gray:"50i2o",green:"pa8",greenyellow:"6senj",grey:"50i2o",honeydew:"9eiuo",hotpink:"9yrp0",indianred:"80gnw",indigo:"2xcoy",ivory:"9zldc",khaki:"9edu4",lavenderblush:"9ziet",lavender:"90c8q",lawngreen:"4vk74",lemonchiffon:"9zkct",lightblue:"6s73a",lightcoral:"9dtog",lightcyan:"8s1rz",lightgoldenrodyellow:"9sjiq",lightgray:"89jo3",lightgreen:"5nkwg",lightgrey:"89jo3",lightpink:"9z6wx",lightsalmon:"9z2ii",lightseagreen:"19xgq",lightskyblue:"5arju",lightslategray:"4nwk9",lightslategrey:"4nwk9",lightsteelblue:"6wau6",lightyellow:"9zlcw",lime:"1edc",limegreen:"1zcxe",linen:"9shk6",magenta:"9y70f",maroon:"4zsow",mediumaquamarine:"40eju",mediumblue:"5p",mediumorchid:"79qkz",mediumpurple:"5r3rv",mediumseagreen:"2d9ip",mediumslateblue:"4tcku",mediumspringgreen:"1di2",mediumturquoise:"2uabw",mediumvioletred:"7rn9h",midnightblue:"z980",mintcream:"9ljp6",mistyrose:"9zg0x",moccasin:"9zfzp",navajowhite:"9zest",navy:"3k",oldlace:"9wq92",olive:"50hz4",olivedrab:"472ub",orange:"9z3eo",orangered:"9ykg0",orchid:"8iu3a",palegoldenrod:"9bl4a",palegreen:"5yw0o",paleturquoise:"6v4ku",palevioletred:"8k8lv",papayawhip:"9zi6t",peachpuff:"9ze0p",peru:"80oqn",pink:"9z8wb",plum:"8nba5",powderblue:"6wgdi",purple:"4zssg",rebeccapurple:"3zk49",red:"9y6tc",rosybrown:"7cv4f",royalblue:"2jvtt",saddlebrown:"5fmkz",salmon:"9rvci",sandybrown:"9jn1c",seagreen:"1tdnb",seashell:"9zje6",sienna:"6973h",silver:"7ir40",skyblue:"5arjf",slateblue:"45e4t",slategray:"4e100",slategrey:"4e100",snow:"9zke2",springgreen:"1egv",steelblue:"2r1kk",tan:"87yx8",teal:"pds",thistle:"8ggk8",tomato:"9yqfb",turquoise:"2j4r4",violet:"9b10u",wheat:"9ld4j",white:"9zldr",whitesmoke:"9lhpx",yellow:"9zl6o",yellowgreen:"61fzm"},round=Math.round;function splitColorStr(s,i){const n=s.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],a=n.map(d=>parseFloat(d));for(let d=0;d<3;d+=1)a[d]=i(a[d]||0,n[d]||"",d);return n[3]?a[3]=n[3].includes("%")?a[3]/100:a[3]:a[3]=1,a}const parseHSVorHSL=(s,i,n)=>n===0?s:s/100;function limitRange(s,i){const n=i||255;return s>n?n:s<0?0:s}class FastColor{isValid=!0;r=0;g=0;b=0;a=1;_h;_s;_l;_v;_max;_min;_brightness;constructor(i){function n(d){return d[0]in i&&d[1]in i&&d[2]in i}if(i)if(typeof i=="string"){let y=function(C){return d.startsWith(C)};var a=y;const d=i.trim();if(/^#?[A-F\d]{3,8}$/i.test(d))this.fromHexString(d);else if(y("rgb"))this.fromRgbString(d);else if(y("hsl"))this.fromHslString(d);else if(y("hsv")||y("hsb"))this.fromHsvString(d);else{const C=presetColors[d.toLowerCase()];C&&this.fromHexString(parseInt(C,36).toString(16).padStart(6,"0"))}}else if(i instanceof FastColor)this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this._h=i._h,this._s=i._s,this._l=i._l,this._v=i._v;else if(n("rgb"))this.r=limitRange(i.r),this.g=limitRange(i.g),this.b=limitRange(i.b),this.a=typeof i.a=="number"?limitRange(i.a,1):1;else if(n("hsl"))this.fromHsl(i);else if(n("hsv"))this.fromHsv(i);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(i))}setR(i){return this._sc("r",i)}setG(i){return this._sc("g",i)}setB(i){return this._sc("b",i)}setA(i){return this._sc("a",i,1)}setHue(i){const n=this.toHsv();return n.h=i,this._c(n)}getLuminance(){function i(y){const C=y/255;return C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4)}const n=i(this.r),a=i(this.g),d=i(this.b);return .2126*n+.7152*a+.0722*d}getHue(){if(typeof this._h>"u"){const i=this.getMax()-this.getMin();i===0?this._h=0:this._h=round(60*(this.r===this.getMax()?(this.g-this.b)/i+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/i+2:(this.r-this.g)/i+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const i=this.getMax()-this.getMin();i===0?this._s=0:this._s=i/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(i=10){const n=this.getHue(),a=this.getSaturation();let d=this.getLightness()-i/100;return d<0&&(d=0),this._c({h:n,s:a,l:d,a:this.a})}lighten(i=10){const n=this.getHue(),a=this.getSaturation();let d=this.getLightness()+i/100;return d>1&&(d=1),this._c({h:n,s:a,l:d,a:this.a})}mix(i,n=50){const a=this._c(i),d=n/100,y=p=>(a[p]-this[p])*d+this[p],C={r:round(y("r")),g:round(y("g")),b:round(y("b")),a:round(y("a")*100)/100};return this._c(C)}tint(i=10){return this.mix({r:255,g:255,b:255,a:1},i)}shade(i=10){return this.mix({r:0,g:0,b:0,a:1},i)}onBackground(i){const n=this._c(i),a=this.a+n.a*(1-this.a),d=y=>round((this[y]*this.a+n[y]*n.a*(1-this.a))/a);return this._c({r:d("r"),g:d("g"),b:d("b"),a})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(i){return this.r===i.r&&this.g===i.g&&this.b===i.b&&this.a===i.a}clone(){return this._c(this)}toHexString(){let i="#";const n=(this.r||0).toString(16);i+=n.length===2?n:"0"+n;const a=(this.g||0).toString(16);i+=a.length===2?a:"0"+a;const d=(this.b||0).toString(16);if(i+=d.length===2?d:"0"+d,typeof this.a=="number"&&this.a>=0&&this.a<1){const y=round(this.a*255).toString(16);i+=y.length===2?y:"0"+y}return i}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const i=this.getHue(),n=round(this.getSaturation()*100),a=round(this.getLightness()*100);return this.a!==1?`hsla(${i},${n}%,${a}%,${this.a})`:`hsl(${i},${n}%,${a}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(i,n,a){const d=this.clone();return d[i]=limitRange(n,a),d}_c(i){return new this.constructor(i)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(i){const n=i.replace("#","");function a(d,y){return parseInt(n[d]+n[y||d],16)}n.length<6?(this.r=a(0),this.g=a(1),this.b=a(2),this.a=n[3]?a(3)/255:1):(this.r=a(0,1),this.g=a(2,3),this.b=a(4,5),this.a=n[6]?a(6,7)/255:1)}fromHsl({h:i,s:n,l:a,a:d}){if(this._h=i%360,this._s=n,this._l=a,this.a=typeof d=="number"?d:1,n<=0){const w=round(a*255);this.r=w,this.g=w,this.b=w}let y=0,C=0,p=0;const E=i/60,R=(1-Math.abs(2*a-1))*n,x=R*(1-Math.abs(E%2-1));E>=0&&E<1?(y=R,C=x):E>=1&&E<2?(y=x,C=R):E>=2&&E<3?(C=R,p=x):E>=3&&E<4?(C=x,p=R):E>=4&&E<5?(y=x,p=R):E>=5&&E<6&&(y=R,p=x);const A=a-R/2;this.r=round((y+A)*255),this.g=round((C+A)*255),this.b=round((p+A)*255)}fromHsv({h:i,s:n,v:a,a:d}){this._h=i%360,this._s=n,this._v=a,this.a=typeof d=="number"?d:1;const y=round(a*255);if(this.r=y,this.g=y,this.b=y,n<=0)return;const C=i/60,p=Math.floor(C),E=C-p,R=round(a*(1-n)*255),x=round(a*(1-n*E)*255),A=round(a*(1-n*(1-E))*255);switch(p){case 0:this.g=A,this.b=R;break;case 1:this.r=x,this.b=R;break;case 2:this.r=R,this.b=A;break;case 3:this.r=R,this.g=x;break;case 4:this.r=A,this.g=R;break;case 5:default:this.g=R,this.b=x;break}}fromHsvString(i){const n=splitColorStr(i,parseHSVorHSL);this.fromHsv({h:n[0],s:n[1],v:n[2],a:n[3]})}fromHslString(i){const n=splitColorStr(i,parseHSVorHSL);this.fromHsl({h:n[0],s:n[1],l:n[2],a:n[3]})}fromRgbString(i){const n=splitColorStr(i,(a,d)=>d.includes("%")?round(a/100*255):a);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}}const hueStep=2,saturationStep=.16,saturationStep2=.05,brightnessStep1=.05,brightnessStep2=.15,lightColorCount=5,darkColorCount=4,darkColorMap=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function getHue(s,i,n){let a;return Math.round(s.h)>=60&&Math.round(s.h)<=240?a=n?Math.round(s.h)-hueStep*i:Math.round(s.h)+hueStep*i:a=n?Math.round(s.h)+hueStep*i:Math.round(s.h)-hueStep*i,a<0?a+=360:a>=360&&(a-=360),a}function getSaturation(s,i,n){if(s.h===0&&s.s===0)return s.s;let a;return n?a=s.s-saturationStep*i:i===darkColorCount?a=s.s+saturationStep:a=s.s+saturationStep2*i,a>1&&(a=1),n&&i===lightColorCount&&a>.1&&(a=.1),a<.06&&(a=.06),Math.round(a*100)/100}function getValue$1(s,i,n){let a;return n?a=s.v+brightnessStep1*i:a=s.v-brightnessStep2*i,a=Math.max(0,Math.min(1,a)),Math.round(a*100)/100}function generate$1(s,i={}){const n=[],a=new FastColor(s),d=a.toHsv();for(let y=lightColorCount;y>0;y-=1){const C=new FastColor({h:getHue(d,y,!0),s:getSaturation(d,y,!0),v:getValue$1(d,y,!0)});n.push(C)}n.push(a);for(let y=1;y<=darkColorCount;y+=1){const C=new FastColor({h:getHue(d,y),s:getSaturation(d,y),v:getValue$1(d,y)});n.push(C)}return i.theme==="dark"?darkColorMap.map(({index:y,amount:C})=>new FastColor(i.backgroundColor||"#141414").mix(n[y],C).toHexString()):n.map(y=>y.toHexString())}const presetPrimaryColors={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},red=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];red.primary=red[5];const volcano=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];volcano.primary=volcano[5];const orange=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];orange.primary=orange[5];const gold=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];gold.primary=gold[5];const yellow=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];yellow.primary=yellow[5];const lime=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];lime.primary=lime[5];const green=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];green.primary=green[5];const cyan=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];cyan.primary=cyan[5];const blue=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];blue.primary=blue[5];const geekblue=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];geekblue.primary=geekblue[5];const purple=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];purple.primary=purple[5];const magenta=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];magenta.primary=magenta[5];const grey=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];grey.primary=grey[5];const presetPalettes={red,volcano,orange,gold,yellow,lime,green,cyan,blue,geekblue,purple,magenta,grey};function genColorMapToken(s,{generateColorPalettes:i,generateNeutralColorPalettes:n}){const{colorSuccess:a,colorWarning:d,colorError:y,colorInfo:C,colorPrimary:p,colorBgBase:E,colorTextBase:R}=s,x=i(p),A=i(a),w=i(d),T=i(y),M=i(C),h=n(E,R),l=s.colorLink||s.colorInfo,c=i(l),g=new FastColor(T[1]).mix(new FastColor(T[3]),50).toHexString();return{...h,colorPrimaryBg:x[1],colorPrimaryBgHover:x[2],colorPrimaryBorder:x[3],colorPrimaryBorderHover:x[4],colorPrimaryHover:x[5],colorPrimary:x[6],colorPrimaryActive:x[7],colorPrimaryTextHover:x[8],colorPrimaryText:x[9],colorPrimaryTextActive:x[10],colorSuccessBg:A[1],colorSuccessBgHover:A[2],colorSuccessBorder:A[3],colorSuccessBorderHover:A[4],colorSuccessHover:A[4],colorSuccess:A[6],colorSuccessActive:A[7],colorSuccessTextHover:A[8],colorSuccessText:A[9],colorSuccessTextActive:A[10],colorErrorBg:T[1],colorErrorBgHover:T[2],colorErrorBgFilledHover:g,colorErrorBgActive:T[3],colorErrorBorder:T[3],colorErrorBorderHover:T[4],colorErrorHover:T[5],colorError:T[6],colorErrorActive:T[7],colorErrorTextHover:T[8],colorErrorText:T[9],colorErrorTextActive:T[10],colorWarningBg:w[1],colorWarningBgHover:w[2],colorWarningBorder:w[3],colorWarningBorderHover:w[4],colorWarningHover:w[4],colorWarning:w[6],colorWarningActive:w[7],colorWarningTextHover:w[8],colorWarningText:w[9],colorWarningTextActive:w[10],colorInfoBg:M[1],colorInfoBgHover:M[2],colorInfoBorder:M[3],colorInfoBorderHover:M[4],colorInfoHover:M[4],colorInfo:M[6],colorInfoActive:M[7],colorInfoTextHover:M[8],colorInfoText:M[9],colorInfoTextActive:M[10],colorLinkHover:c[4],colorLink:c[6],colorLinkActive:c[7],colorBgMask:new FastColor("#000").setA(.45).toRgbString(),colorWhite:"#fff"}}const genRadius=s=>{let i=s,n=s,a=s,d=s;return s<6&&s>=5?i=s+1:s<16&&s>=6?i=s+2:s>=16&&(i=16),s<7&&s>=5?n=4:s<8&&s>=7?n=5:s<14&&s>=8?n=6:s<16&&s>=14?n=7:s>=16&&(n=8),s<6&&s>=2?a=1:s>=6&&(a=2),s>4&&s<8?d=4:s>=8&&(d=6),{borderRadius:s,borderRadiusXS:a,borderRadiusSM:n,borderRadiusLG:i,borderRadiusOuter:d}};function genCommonMapToken(s){const{motionUnit:i,motionBase:n,borderRadius:a,lineWidth:d}=s;return{motionDurationFast:`${(n+i).toFixed(1)}s`,motionDurationMid:`${(n+i*2).toFixed(1)}s`,motionDurationSlow:`${(n+i*3).toFixed(1)}s`,lineWidthBold:d+1,...genRadius(a)}}const genControlHeight=s=>{const{controlHeight:i}=s;return{controlHeightSM:i*.75,controlHeightXS:i*.5,controlHeightLG:i*1.25}},genFontMapToken=s=>{const i=getFontSizes(s),n=i.map(x=>x.size),a=i.map(x=>x.lineHeight),d=n[1],y=n[0],C=n[2],p=a[1],E=a[0],R=a[2];return{fontSizeSM:y,fontSize:d,fontSizeLG:C,fontSizeXL:n[3],fontSizeHeading1:n[6],fontSizeHeading2:n[5],fontSizeHeading3:n[4],fontSizeHeading4:n[3],fontSizeHeading5:n[2],lineHeight:p,lineHeightLG:R,lineHeightSM:E,fontHeight:Math.round(p*d),fontHeightLG:Math.round(R*C),fontHeightSM:Math.round(E*y),lineHeightHeading1:a[6],lineHeightHeading2:a[5],lineHeightHeading3:a[4],lineHeightHeading4:a[3],lineHeightHeading5:a[2]}};function genSizeMapToken(s){const{sizeUnit:i,sizeStep:n}=s;return{sizeXXL:i*(n+8),sizeXL:i*(n+4),sizeLG:i*(n+2),sizeMD:i*(n+1),sizeMS:i*n,size:i*n,sizeSM:i*(n-1),sizeXS:i*(n-2),sizeXXS:i*(n-3)}}const getAlphaColor$1=(s,i)=>new FastColor(s).setA(i).toRgbString(),getSolidColor=(s,i)=>new FastColor(s).darken(i).toHexString(),generateColorPalettes=s=>{const i=generate$1(s);return{1:i[0],2:i[1],3:i[2],4:i[3],5:i[4],6:i[5],7:i[6],8:i[4],9:i[5],10:i[6]}},generateNeutralColorPalettes=(s,i)=>{const n=s||"#fff",a=i||"#000";return{colorBgBase:n,colorTextBase:a,colorText:getAlphaColor$1(a,.88),colorTextSecondary:getAlphaColor$1(a,.65),colorTextTertiary:getAlphaColor$1(a,.45),colorTextQuaternary:getAlphaColor$1(a,.25),colorFill:getAlphaColor$1(a,.15),colorFillSecondary:getAlphaColor$1(a,.06),colorFillTertiary:getAlphaColor$1(a,.04),colorFillQuaternary:getAlphaColor$1(a,.02),colorBgSolid:getAlphaColor$1(a,1),colorBgSolidHover:getAlphaColor$1(a,.75),colorBgSolidActive:getAlphaColor$1(a,.95),colorBgLayout:getSolidColor(n,4),colorBgContainer:getSolidColor(n,0),colorBgElevated:getSolidColor(n,0),colorBgSpotlight:getAlphaColor$1(a,.85),colorBgBlur:"transparent",colorBorder:getSolidColor(n,15),colorBorderDisabled:getSolidColor(n,15),colorBorderSecondary:getSolidColor(n,6)}};function derivative(s){presetPrimaryColors.pink=presetPrimaryColors.magenta,presetPalettes.pink=presetPalettes.magenta;const i=Object.keys(defaultPresetColors).map(n=>{const a=s[n]===presetPrimaryColors[n]?presetPalettes[n]:generate$1(s[n]);return Array.from({length:10},()=>1).reduce((d,y,C)=>(d[`${n}-${C+1}`]=a[C],d[`${n}${C+1}`]=a[C],d),{})}).reduce((n,a)=>(n={...n,...a},n),{});return{...s,...i,...genColorMapToken(s,{generateColorPalettes,generateNeutralColorPalettes}),...genFontMapToken(s.fontSize),...genSizeMapToken(s),...genControlHeight(s),...genCommonMapToken(s)}}const defaultTheme=createTheme(derivative),defaultConfig={token:seedToken,override:{override:seedToken},hashed:!0},DesignTokenContext=React.createContext(defaultConfig);function isStableColor(s){return s>=0&&s<=255}function getAlphaColor(s,i){const{r:n,g:a,b:d,a:y}=new FastColor(s).toRgb();if(y<1)return s;const{r:C,g:p,b:E}=new FastColor(i).toRgb();for(let R=.01;R<=1;R+=.01){const x=Math.round((n-C*(1-R))/R),A=Math.round((a-p*(1-R))/R),w=Math.round((d-E*(1-R))/R);if(isStableColor(x)&&isStableColor(A)&&isStableColor(w))return new FastColor({r:x,g:A,b:w,a:Math.round(R*100)/100}).toRgbString()}return new FastColor({r:n,g:a,b:d,a:1}).toRgbString()}function formatToken(s){const{override:i,...n}=s,a={...i};Object.keys(seedToken).forEach(w=>{delete a[w]});const d={...n,...a},y=480,C=576,p=768,E=992,R=1200,x=1600;return d.motion===!1&&(d.motionDurationFast="0s",d.motionDurationMid="0s",d.motionDurationSlow="0s"),{...d,colorFillContent:d.colorFillSecondary,colorFillContentHover:d.colorFill,colorFillAlter:d.colorFillQuaternary,colorBgContainerDisabled:d.colorFillTertiary,colorBorderBg:d.colorBgContainer,colorSplit:getAlphaColor(d.colorBorderSecondary,d.colorBgContainer),colorTextPlaceholder:d.colorTextQuaternary,colorTextDisabled:d.colorTextQuaternary,colorTextHeading:d.colorText,colorTextLabel:d.colorTextSecondary,colorTextDescription:d.colorTextTertiary,colorTextLightSolid:d.colorWhite,colorHighlight:d.colorError,colorBgTextHover:d.colorFillSecondary,colorBgTextActive:d.colorFill,colorIcon:d.colorTextTertiary,colorIconHover:d.colorText,colorErrorOutline:getAlphaColor(d.colorErrorBg,d.colorBgContainer),colorWarningOutline:getAlphaColor(d.colorWarningBg,d.colorBgContainer),fontSizeIcon:d.fontSizeSM,lineWidthFocus:d.lineWidth*3,lineWidth:d.lineWidth,controlOutlineWidth:d.lineWidth*2,controlInteractiveSize:d.controlHeight/2,controlItemBgHover:d.colorFillTertiary,controlItemBgActive:d.colorPrimaryBg,controlItemBgActiveHover:d.colorPrimaryBgHover,controlItemBgActiveDisabled:d.colorFill,controlTmpOutline:d.colorFillQuaternary,controlOutline:getAlphaColor(d.colorPrimaryBg,d.colorBgContainer),lineType:d.lineType,borderRadius:d.borderRadius,borderRadiusXS:d.borderRadiusXS,borderRadiusSM:d.borderRadiusSM,borderRadiusLG:d.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:d.sizeXXS,paddingXS:d.sizeXS,paddingSM:d.sizeSM,padding:d.size,paddingMD:d.sizeMD,paddingLG:d.sizeLG,paddingXL:d.sizeXL,paddingContentHorizontalLG:d.sizeLG,paddingContentVerticalLG:d.sizeMS,paddingContentHorizontal:d.sizeMS,paddingContentVertical:d.sizeSM,paddingContentHorizontalSM:d.size,paddingContentVerticalSM:d.sizeXS,marginXXS:d.sizeXXS,marginXS:d.sizeXS,marginSM:d.sizeSM,margin:d.size,marginMD:d.sizeMD,marginLG:d.sizeLG,marginXL:d.sizeXL,marginXXL:d.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:y,screenXSMin:y,screenXSMax:C-1,screenSM:C,screenSMMin:C,screenSMMax:p-1,screenMD:p,screenMDMin:p,screenMDMax:E-1,screenLG:E,screenLGMin:E,screenLGMax:R-1,screenXL:R,screenXLMin:R,screenXLMax:x-1,screenXXL:x,screenXXLMin:x,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new FastColor("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new FastColor("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new FastColor("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)",...a}}const unitless={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},ignore={motionBase:!0,motionUnit:!0},preserve={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},getComputedToken=(s,i,n)=>{const a=n.getDerivativeToken(s),{override:d,...y}=i;let C={...a,override:d};return C=formatToken(C),y&&Object.entries(y).forEach(([p,E])=>{const{theme:R,...x}=E;let A=x;R&&(A=getComputedToken({...C,...x},{override:x},R)),C[p]=A}),C};function useToken(){const{token:s,hashed:i,theme:n,override:a,cssVar:d,zeroRuntime:y}=React.useContext(DesignTokenContext),C={prefix:d?.prefix??"ant",key:d?.key??"css-var-root"},p=`${version}-${i||""}`,E=n||defaultTheme,[R,x,A]=useCacheToken(E,[seedToken,s],{salt:p,override:a,getComputedToken,cssVar:{...C,unitless,ignore,preserve}});return[E,A,i?x:"",R,C,!!y]}const resetComponent=(s,i=!1)=>({boxSizing:"border-box",margin:0,padding:0,color:s.colorText,fontSize:s.fontSize,lineHeight:s.lineHeight,listStyle:"none",fontFamily:i?"inherit":s.fontFamily}),resetIcon=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),genLinkStyle=s=>({a:{color:s.colorLink,textDecoration:s.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${s.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:s.colorLinkHover},"&:active":{color:s.colorLinkActive},"&:active, &:hover":{textDecoration:s.linkHoverDecoration,outline:0},"&:focus":{textDecoration:s.linkFocusDecoration,outline:0},"&[disabled]":{color:s.colorTextDisabled,cursor:"not-allowed"}}}),genCommonStyle=(s,i,n,a)=>{const d=`[class^="${i}"], [class*=" ${i}"]`,y=n?`.${n}`:d,C={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let p={};return a!==!1&&(p={fontFamily:s.fontFamily,fontSize:s.fontSize}),{[y]:{...p,...C,[d]:C}}},genIconStyle=s=>({[`.${s}`]:{...resetIcon(),[`.${s} .${s}-icon`]:{display:"block"}}}),{genStyleHooks}=genStyleUtils({usePrefix:()=>{const{getPrefixCls:s,iconPrefixCls:i}=reactExports.useContext(ConfigContext);return{rootPrefixCls:s(),iconPrefixCls:i}},useToken:()=>{const[s,i,n,a,d,y]=useToken();return{theme:s,realToken:i,hashId:n,token:a,cssVar:d,zeroRuntime:y}},useCSP:()=>{const{csp:s}=reactExports.useContext(ConfigContext);return s??{}},getResetStyles:(s,i)=>{const n=genLinkStyle(s);return[n,{"&":n},genIconStyle(i?.prefix.iconPrefixCls??defaultIconPrefixCls)]},getCommonStyle:genCommonStyle,getCompUnitless:()=>unitless});function genPresetColor(s,i){return PresetColors.reduce((n,a)=>{const d=s[`${a}1`],y=s[`${a}3`],C=s[`${a}6`],p=s[`${a}7`];return{...n,...i(a,{lightColor:d,lightBorderColor:y,darkColor:C,textColor:p})}},{})}var CheckCircleFilled$1={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};const IconContext=reactExports.createContext({});function getRoot(s){return s?.getRootNode?.()}function inShadow(s){return getRoot(s)instanceof ShadowRoot}function getShadowRoot(s){return inShadow(s)?getRoot(s):null}function camelCase(s){return s.replace(/-(.)/g,(i,n)=>n.toUpperCase())}function warning$1(s,i){warningOnce(s,`[@ant-design/icons] ${i}`)}function isIconDefinition(s){return typeof s=="object"&&typeof s.name=="string"&&typeof s.theme=="string"&&(typeof s.icon=="object"||typeof s.icon=="function")}function normalizeAttrs(s={}){return Object.keys(s).reduce((i,n)=>{const a=s[n];switch(n){case"class":i.className=a,delete i.class;break;default:delete i[n],i[camelCase(n)]=a}return i},{})}function generate(s,i,n){return n?React.createElement(s.tag,{key:i,...normalizeAttrs(s.attrs),...n},(s.children||[]).map((a,d)=>generate(a,`${i}-${s.tag}-${d}`))):React.createElement(s.tag,{key:i,...normalizeAttrs(s.attrs)},(s.children||[]).map((a,d)=>generate(a,`${i}-${s.tag}-${d}`)))}function getSecondaryColor(s){return generate$1(s)[0]}function normalizeTwoToneColors(s){return s?Array.isArray(s)?s:[s]:[]}const iconStyles=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
  vertical-align: inherit;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,useInsertStyles=s=>{const{csp:i,prefixCls:n,layer:a}=reactExports.useContext(IconContext);let d=iconStyles;n&&(d=d.replace(/anticon/g,n)),a&&(d=`@layer ${a} {
${d}
}`),reactExports.useEffect(()=>{const y=s.current,C=getShadowRoot(y);updateCSS(d,"@ant-design-icons",{prepend:!a,csp:i,attachTo:C})},[])},twoToneColorPalette={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function setTwoToneColors({primaryColor:s,secondaryColor:i}){twoToneColorPalette.primaryColor=s,twoToneColorPalette.secondaryColor=i||getSecondaryColor(s),twoToneColorPalette.calculated=!!i}function getTwoToneColors(){return{...twoToneColorPalette}}const IconBase=s=>{const{icon:i,className:n,onClick:a,style:d,primaryColor:y,secondaryColor:C,...p}=s,E=reactExports.useRef(null);let R=twoToneColorPalette;if(y&&(R={primaryColor:y,secondaryColor:C||getSecondaryColor(y)}),useInsertStyles(E),warning$1(isIconDefinition(i),`icon should be icon definiton, but got ${i}`),!isIconDefinition(i))return null;let x=i;return x&&typeof x.icon=="function"&&(x={...x,icon:x.icon(R.primaryColor,R.secondaryColor)}),generate(x.icon,`svg-${x.name}`,{className:n,onClick:a,style:d,"data-icon":x.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",...p,ref:E})};IconBase.displayName="IconReact";IconBase.getTwoToneColors=getTwoToneColors;IconBase.setTwoToneColors=setTwoToneColors;function setTwoToneColor(s){const[i,n]=normalizeTwoToneColors(s);return IconBase.setTwoToneColors({primaryColor:i,secondaryColor:n})}function getTwoToneColor(){const s=IconBase.getTwoToneColors();return s.calculated?[s.primaryColor,s.secondaryColor]:s.primaryColor}function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},_extends$b.apply(this,arguments)}setTwoToneColor(blue.primary);const Icon=reactExports.forwardRef((s,i)=>{const{className:n,icon:a,spin:d,rotate:y,tabIndex:C,onClick:p,twoToneColor:E,...R}=s,{prefixCls:x="anticon",rootClassName:A}=reactExports.useContext(IconContext),w=clsx(A,x,{[`${x}-${a.name}`]:!!a.name,[`${x}-spin`]:!!d||a.name==="loading"},n);let T=C;T===void 0&&p&&(T=-1);const M=y?{msTransform:`rotate(${y}deg)`,transform:`rotate(${y}deg)`}:void 0,[h,l]=normalizeTwoToneColors(E);return reactExports.createElement("span",_extends$b({role:"img","aria-label":a.name},R,{ref:i,tabIndex:T,onClick:p,className:w}),reactExports.createElement(IconBase,{icon:a,primaryColor:h,secondaryColor:l,style:M}))});Icon.getTwoToneColor=getTwoToneColor;Icon.setTwoToneColor=setTwoToneColor;function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},_extends$a.apply(this,arguments)}const CheckCircleFilled=(s,i)=>reactExports.createElement(Icon,_extends$a({},s,{ref:i,icon:CheckCircleFilled$1})),RefIcon$3=reactExports.forwardRef(CheckCircleFilled);var CloseCircleFilled$1={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},_extends$9.apply(this,arguments)}const CloseCircleFilled=(s,i)=>reactExports.createElement(Icon,_extends$9({},s,{ref:i,icon:CloseCircleFilled$1})),RefIcon$2=reactExports.forwardRef(CloseCircleFilled);var CloseOutlined$1={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},_extends$8.apply(this,arguments)}const CloseOutlined=(s,i)=>reactExports.createElement(Icon,_extends$8({},s,{ref:i,icon:CloseOutlined$1})),RefIcon$1=reactExports.forwardRef(CloseOutlined),Context$1=reactExports.createContext({});function useSyncState(s){const[,i]=reactExports.useReducer(y=>y+1,0),n=reactExports.useRef(s),a=useEvent(()=>n.current),d=useEvent(y=>{n.current=typeof y=="function"?y(n.current):y,i()});return[a,d]}const STATUS_NONE="none",STATUS_APPEAR="appear",STATUS_ENTER="enter",STATUS_LEAVE="leave",STEP_NONE="none",STEP_PREPARE="prepare",STEP_START="start",STEP_ACTIVE="active",STEP_ACTIVATED="end",STEP_PREPARED="prepared";function makePrefixMap(s,i){const n={};return n[s.toLowerCase()]=i.toLowerCase(),n[`Webkit${s}`]=`webkit${i}`,n[`Moz${s}`]=`moz${i}`,n[`ms${s}`]=`MS${i}`,n[`O${s}`]=`o${i.toLowerCase()}`,n}function getVendorPrefixes(s,i){const n={animationend:makePrefixMap("Animation","AnimationEnd"),transitionend:makePrefixMap("Transition","TransitionEnd")};return s&&("AnimationEvent"in i||delete n.animationend.animation,"TransitionEvent"in i||delete n.transitionend.transition),n}const vendorPrefixes=getVendorPrefixes(canUseDom(),typeof window<"u"?window:{});let style={};canUseDom()&&({style}=document.createElement("div"));const prefixedEventNames={};function getVendorPrefixedEventName(s){if(prefixedEventNames[s])return prefixedEventNames[s];const i=vendorPrefixes[s];if(i){const n=Object.keys(i),a=n.length;for(let d=0;d<a;d+=1){const y=n[d];if(Object.prototype.hasOwnProperty.call(i,y)&&y in style)return prefixedEventNames[s]=i[y],prefixedEventNames[s]}}return""}const internalAnimationEndName=getVendorPrefixedEventName("animationend"),internalTransitionEndName=getVendorPrefixedEventName("transitionend"),supportTransition=!!(internalAnimationEndName&&internalTransitionEndName),animationEndName=internalAnimationEndName||"animationend",transitionEndName=internalTransitionEndName||"transitionend";function getTransitionName$1(s,i){if(!s)return null;if(typeof s=="object"){const n=i.replace(/-\w/g,a=>a[1].toUpperCase());return s[n]}return`${s}-${i}`}const useDomMotionEvents=(s=>{const i=reactExports.useRef();function n(d){d&&(d.removeEventListener(transitionEndName,s),d.removeEventListener(animationEndName,s))}function a(d){i.current&&i.current!==d&&n(i.current),d&&d!==i.current&&(d.addEventListener(transitionEndName,s),d.addEventListener(animationEndName,s),i.current=d)}return reactExports.useEffect(()=>()=>{n(i.current),i.current=null},[]),[a,n]}),useIsomorphicLayoutEffect=canUseDom()?reactExports.useLayoutEffect:reactExports.useEffect,useNextFrame=(()=>{const s=reactExports.useRef(null);function i(){wrapperRaf.cancel(s.current)}function n(a,d=2){i();const y=wrapperRaf(()=>{d<=1?a({isCanceled:()=>y!==s.current}):n(a,d-1)});s.current=y}return reactExports.useEffect(()=>()=>{i()},[]),[n,i]}),FULL_STEP_QUEUE=[STEP_PREPARE,STEP_START,STEP_ACTIVE,STEP_ACTIVATED],SIMPLE_STEP_QUEUE=[STEP_PREPARE,STEP_PREPARED],SkipStep=!1,DoStep=!0;function isActive(s){return s===STEP_ACTIVE||s===STEP_ACTIVATED}const useStepQueue=((s,i,n)=>{const[a,d]=useSafeState(STEP_NONE),[y,C]=useNextFrame();function p(){d(STEP_PREPARE,!0)}const E=i?SIMPLE_STEP_QUEUE:FULL_STEP_QUEUE;return useIsomorphicLayoutEffect(()=>{if(a!==STEP_NONE&&a!==STEP_ACTIVATED){const R=E.indexOf(a),x=E[R+1],A=n(a);A===SkipStep?d(x,!0):x&&y(w=>{function T(){w.isCanceled()||d(x,!0)}A===!0?T():Promise.resolve(A).then(T)})}},[s,a]),reactExports.useEffect(()=>()=>{C()},[]),[p,a]});function useStatus(s,i,n,{motionEnter:a=!0,motionAppear:d=!0,motionLeave:y=!0,motionDeadline:C,motionLeaveImmediately:p,onAppearPrepare:E,onEnterPrepare:R,onLeavePrepare:x,onAppearStart:A,onEnterStart:w,onLeaveStart:T,onAppearActive:M,onEnterActive:h,onLeaveActive:l,onAppearEnd:c,onEnterEnd:g,onLeaveEnd:v,onVisibleChanged:b}){const[S,u]=useSafeState(),[m,_]=useSyncState(STATUS_NONE),[D,L]=useSafeState(null),P=m(),N=reactExports.useRef(!1),U=reactExports.useRef(null);function V(){return n()}const W=reactExports.useRef(!1);function G(){_(STATUS_NONE),L(null,!0)}const H=useEvent(ue=>{const he=m();if(he===STATUS_NONE)return;const ge=V();if(ue&&!ue.deadline&&ue.target!==ge)return;const Oe=W.current;let Le;he===STATUS_APPEAR&&Oe?Le=c?.(ge,ue):he===STATUS_ENTER&&Oe?Le=g?.(ge,ue):he===STATUS_LEAVE&&Oe&&(Le=v?.(ge,ue)),Oe&&Le!==!1&&G()}),[k]=useDomMotionEvents(H),X=ue=>{switch(ue){case STATUS_APPEAR:return{[STEP_PREPARE]:E,[STEP_START]:A,[STEP_ACTIVE]:M};case STATUS_ENTER:return{[STEP_PREPARE]:R,[STEP_START]:w,[STEP_ACTIVE]:h};case STATUS_LEAVE:return{[STEP_PREPARE]:x,[STEP_START]:T,[STEP_ACTIVE]:l};default:return{}}},$=reactExports.useMemo(()=>X(P),[P]),[F,K]=useStepQueue(P,!s,ue=>{if(ue===STEP_PREPARE){const he=$[STEP_PREPARE];return he?he(V()):SkipStep}return K in $&&L($[K]?.(V(),null)||null),K===STEP_ACTIVE&&P!==STATUS_NONE&&(k(V()),C>0&&(clearTimeout(U.current),U.current=setTimeout(()=>{H({deadline:!0})},C))),K===STEP_PREPARED&&G(),DoStep}),te=isActive(K);W.current=te;const re=reactExports.useRef(null);useIsomorphicLayoutEffect(()=>{if(N.current&&re.current===i)return;u(i);const ue=N.current;N.current=!0;let he;!ue&&i&&d&&(he=STATUS_APPEAR),ue&&i&&a&&(he=STATUS_ENTER),(ue&&!i&&y||!ue&&p&&!i&&y)&&(he=STATUS_LEAVE);const ge=X(he);he&&(s||ge[STEP_PREPARE])?(_(he),F()):_(STATUS_NONE),re.current=i},[i]),reactExports.useEffect(()=>{(P===STATUS_APPEAR&&!d||P===STATUS_ENTER&&!a||P===STATUS_LEAVE&&!y)&&_(STATUS_NONE)},[d,a,y]),reactExports.useEffect(()=>()=>{N.current=!1,clearTimeout(U.current)},[]);const le=reactExports.useRef(!1);reactExports.useEffect(()=>{S&&(le.current=!0),S!==void 0&&P===STATUS_NONE&&((le.current||S)&&b?.(S),le.current=!0)},[S,P]);let oe=D;return $[STEP_PREPARE]&&K===STEP_START&&(oe={transition:"none",...oe}),[m,K,oe,S??i]}function genCSSMotion(s){let i=s;typeof s=="object"&&({transitionSupport:i}=s);function n(d,y){return!!(d.motionName&&i&&y!==!1)}const a=reactExports.forwardRef((d,y)=>{const{visible:C=!0,removeOnLeave:p=!0,forceRender:E,children:R,motionName:x,leavedClassName:A,eventProps:w}=d,{motion:T}=reactExports.useContext(Context$1),M=n(d,T),h=reactExports.useRef();function l(){return getDOM(h.current)}const[c,g,v,b]=useStatus(M,C,l,d),S=c(),u=reactExports.useRef(b);b&&(u.current=!0);const m=reactExports.useMemo(()=>{const L={};return Object.defineProperties(L,{nativeElement:{enumerable:!0,get:l},inMotion:{enumerable:!0,get:()=>()=>c()!==STATUS_NONE},enableMotion:{enumerable:!0,get:()=>()=>M}}),L},[]);reactExports.useImperativeHandle(y,()=>m,[]);let _;const D={...w,visible:C};if(!R)_=null;else if(S===STATUS_NONE)b?_=R({...D},h):!p&&u.current&&A?_=R({...D,className:A},h):E||!p&&!A?_=R({...D,style:{display:"none"}},h):_=null;else{let L;g===STEP_PREPARE?L="prepare":isActive(g)?L="active":g===STEP_START&&(L="start");const P=getTransitionName$1(x,`${S}-${L}`);_=R({...D,className:clsx(getTransitionName$1(x,S),{[P]:P&&L,[x]:typeof x=="string"}),style:v},h)}return reactExports.isValidElement(_)&&supportRef(_)&&(getNodeRef(_)||(_=reactExports.cloneElement(_,{ref:h}))),_});return a.displayName="CSSMotion",a}const CSSMotion=genCSSMotion(supportTransition),isNonNullable=s=>s!=null,mergeClassNames=(s,...i)=>{const n=s||{};return i.filter(Boolean).reduce((a,d)=>(Object.keys(d||{}).forEach(y=>{const C=n[y],p=d[y];if(C&&typeof C=="object")if(p&&typeof p=="object")a[y]=mergeClassNames(C,a[y],p);else{const{_default:E}=C;E&&(a[y]=a[y]||{},a[y][E]=clsx(a[y][E],p))}else a[y]=clsx(a[y],p)}),a),{})},useSemanticClassNames=(s,...i)=>reactExports.useMemo(()=>mergeClassNames.apply(void 0,[s].concat(i)),[s].concat(i)),mergeStyles=(...s)=>s.filter(Boolean).reduce((i,n={})=>(Object.keys(n).forEach(a=>{i[a]={...i[a],...n[a]}}),i),{}),useSemanticStyles=(...s)=>reactExports.useMemo(()=>mergeStyles.apply(void 0,s),[].concat(s)),resolveStyleOrClass=(s,i)=>typeof s=="function"?s(i):s,useMergeSemantic=(s,i,n,a)=>{const d=s.map(E=>E?resolveStyleOrClass(E,n):void 0),y=i.map(E=>E?resolveStyleOrClass(E,n):void 0),C=useSemanticClassNames.apply(void 0,[a].concat(_toConsumableArray(d))),p=useSemanticStyles.apply(void 0,_toConsumableArray(y));return reactExports.useMemo(()=>[C,p],[C,p,a])},zIndexContext=React.createContext(void 0),CONTAINER_OFFSET=100,containerBaseZIndexOffset={Modal:CONTAINER_OFFSET,Drawer:CONTAINER_OFFSET,Popover:CONTAINER_OFFSET,Popconfirm:CONTAINER_OFFSET,Tooltip:CONTAINER_OFFSET,Tour:CONTAINER_OFFSET,FloatButton:CONTAINER_OFFSET},consumerBaseZIndexOffset={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1},isContainerType=s=>s in containerBaseZIndexOffset,useZIndex=(s,i)=>{const[,n]=useToken(),a=React.useContext(zIndexContext),d=isContainerType(s);let y;if(i!==void 0)y=[i,i];else{let C=a??0;d?C+=(a?0:n.zIndexPopupBase)+containerBaseZIndexOffset[s]:C+=consumerBaseZIndexOffset[s],y=[a===void 0?i:C,C]}return y};function isFragment(s){return s&&React.isValidElement(s)&&s.type===React.Fragment}const replaceElement=(s,i,n)=>React.isValidElement(s)?React.cloneElement(s,typeof n=="function"?n(s.props||{}):n):i;function cloneElement(s,i){return replaceElement(s,s,i)}const useCSSVarCls=s=>`${s}-css-var`;var reactDomExports=requireReactDom();const OrderContext=reactExports.createContext(null);let inline=!1;function inlineMock(s){return inline}const EMPTY_LIST=[];function useDom(s,i){const[n]=reactExports.useState(()=>canUseDom()?document.createElement("div"):null),a=reactExports.useRef(!1),d=reactExports.useContext(OrderContext),[y,C]=reactExports.useState(EMPTY_LIST),p=d||(a.current?void 0:x=>{C(A=>[x,...A])});function E(){n.parentElement||document.body.appendChild(n),a.current=!0}function R(){n.parentElement?.removeChild(n),a.current=!1}return useLayoutEffect(()=>(s?d?d(E):E():R(),R),[s]),useLayoutEffect(()=>{y.length&&(y.forEach(x=>x()),C(EMPTY_LIST))},[y]),[n,p]}function measureScrollbarSize(s){const i=`rc-scrollbar-measure-${Math.random().toString(36).substring(7)}`,n=document.createElement("div");n.id=i;const a=n.style;a.position="absolute",a.left="0",a.top="0",a.width="100px",a.height="100px",a.overflow="scroll";let d,y;if(s){const E=getComputedStyle(s);a.scrollbarColor=E.scrollbarColor,a.scrollbarWidth=E.scrollbarWidth;const R=getComputedStyle(s,"::-webkit-scrollbar"),x=parseInt(R.width,10),A=parseInt(R.height,10);try{const w=x?`width: ${R.width};`:"",T=A?`height: ${R.height};`:"";updateCSS(`
#${i}::-webkit-scrollbar {
${w}
${T}
}`,i)}catch(w){console.error(w),d=x,y=A}}document.body.appendChild(n);const C=s&&d&&!isNaN(d)?d:n.offsetWidth-n.clientWidth,p=s&&y&&!isNaN(y)?y:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),removeCSS(i),{width:C,height:p}}function getTargetScrollBarSize(s){return typeof document>"u"||!s||!(s instanceof Element)?{width:0,height:0}:measureScrollbarSize(s)}function isBodyOverflowing(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}const UNIQUE_ID=`rc-util-locker-${Date.now()}`;let uuid$1=0;function useScrollLocker(s){const i=!!s,[n]=reactExports.useState(()=>(uuid$1+=1,`${UNIQUE_ID}_${uuid$1}`));useLayoutEffect(()=>{if(i){const a=getTargetScrollBarSize(document.body).width,d=isBodyOverflowing();updateCSS(`
html body {
  overflow-y: hidden;
  ${d?`width: calc(100% - ${a}px);`:""}
}`,n)}else removeCSS(n);return()=>{removeCSS(n)}},[i,n])}const getPortalContainer=s=>s===!1?!1:!canUseDom()||!s?null:typeof s=="string"?document.querySelector(s):typeof s=="function"?s():s,Portal=reactExports.forwardRef((s,i)=>{const{open:n,autoLock:a,getContainer:d,debug:y,autoDestroy:C=!0,children:p}=s,[E,R]=reactExports.useState(n),x=E||n;reactExports.useEffect(()=>{(C||n)&&R(n)},[n,C]);const[A,w]=reactExports.useState(()=>getPortalContainer(d));reactExports.useEffect(()=>{const b=getPortalContainer(d);w(b??null)});const[T,M]=useDom(x&&!A),h=A??T;useScrollLocker(a&&n&&canUseDom()&&(h===T||h===document.body));let l=null;p&&supportRef(p)&&i&&(l=getNodeRef(p));const c=useComposeRef(l,i);if(!x||!canUseDom()||A===void 0)return null;const g=h===!1||inlineMock();let v=p;return i&&(v=reactExports.cloneElement(p,{ref:c})),reactExports.createElement(OrderContext.Provider,{value:M},g?v:reactDomExports.createPortal(v,h))});function getUseId(){return{...React$1}.useId}let uuid=0;const useOriginId=getUseId(),useId=useOriginId?(function s(i){const n=useOriginId();return i||n}):(function s(i){const[n,a]=reactExports.useState("ssr-id");return reactExports.useEffect(()=>{const d=uuid;uuid+=1,a(`rc_unique_${d}`)},[]),i||n});function Arrow(s){const{prefixCls:i,align:n,arrow:a,arrowPos:d}=s,{className:y,content:C,style:p}=a||{},{x:E=0,y:R=0}=d,x=reactExports.useRef(null);if(!n||!n.points)return null;const A={position:"absolute"};if(n.autoArrow!==!1){const w=n.points[0],T=n.points[1],M=w[0],h=w[1],l=T[0],c=T[1];M===l||!["t","b"].includes(M)?A.top=R:M==="t"?A.top=0:A.bottom=0,h===c||!["l","r"].includes(h)?A.left=E:h==="l"?A.left=0:A.right=0}return reactExports.createElement("div",{ref:x,className:clsx(`${i}-arrow`,y),style:{...A,...p}},C)}function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},_extends$7.apply(this,arguments)}function Mask(s){const{prefixCls:i,open:n,zIndex:a,mask:d,motion:y,mobile:C}=s;return d?reactExports.createElement(CSSMotion,_extends$7({},y,{motionAppear:!0,visible:n,removeOnLeave:!0}),({className:p})=>reactExports.createElement("div",{style:{zIndex:a},className:clsx(`${i}-mask`,C&&`${i}-mobile-mask`,p)})):null}const PopupContent=reactExports.memo(({children:s})=>s,(s,i)=>i.cache);function useOffsetStyle(s,i,n,a,d,y,C,p){const E="auto",R=s?{}:{left:"-1000vw",top:"-1000vh",right:E,bottom:E};if(!s&&(i||!n)){const{points:x}=a,A=a.dynamicInset||a._experimental?.dynamicInset,w=A&&x[0][1]==="r",T=A&&x[0][0]==="b";w?(R.right=d,R.left=E):(R.left=C,R.right=E),T?(R.bottom=y,R.top=E):(R.top=p,R.bottom=E)}return R}function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},_extends$6.apply(this,arguments)}const Popup$1=reactExports.forwardRef((s,i)=>{const{popup:n,className:a,prefixCls:d,style:y,target:C,onVisibleChanged:p,open:E,keepDom:R,fresh:x,onClick:A,mask:w,arrow:T,arrowPos:M,align:h,motion:l,maskMotion:c,mobile:g,forceRender:v,getPopupContainer:b,autoDestroy:S,portal:u,children:m,zIndex:_,onMouseEnter:D,onMouseLeave:L,onPointerEnter:P,onPointerDownCapture:N,ready:U,offsetX:V,offsetY:W,offsetR:G,offsetB:H,onAlign:k,onPrepare:X,onResize:$,stretch:F,targetWidth:K,targetHeight:te}=s,re=typeof n=="function"?n():n,le=E||R,oe=!!g,[ue,he,ge]=reactExports.useMemo(()=>g?[g.mask,g.maskMotion,g.motion]:[w,c,l],[g,w,c,l]),Oe=b?.length>0,[Le,$e]=reactExports.useState(!b||!Oe);useLayoutEffect(()=>{!Le&&Oe&&C&&$e(!0)},[Le,Oe,C]);const we=useEvent((Ne,Xe)=>{$?.(Ne,Xe),k()}),ce=useOffsetStyle(oe,U,E,h,G,H,V,W);if(!Le)return null;const xe={};return F&&(F.includes("height")&&te?xe.height=te:F.includes("minHeight")&&te&&(xe.minHeight=te),F.includes("width")&&K?xe.width=K:F.includes("minWidth")&&K&&(xe.minWidth=K)),E||(xe.pointerEvents="none"),reactExports.createElement(u,{open:v||le,getContainer:b&&(()=>b(C)),autoDestroy:S},reactExports.createElement(Mask,{prefixCls:d,open:E,zIndex:_,mask:ue,motion:he,mobile:oe}),reactExports.createElement(RefResizeObserver,{onResize:we,disabled:!E},Ne=>reactExports.createElement(CSSMotion,_extends$6({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:v,leavedClassName:`${d}-hidden`},ge,{onAppearPrepare:X,onEnterPrepare:X,visible:E,onVisibleChanged:Xe=>{l?.onVisibleChanged?.(Xe),p(Xe)}}),({className:Xe,style:rt},nt)=>{const et=clsx(d,Xe,a,{[`${d}-mobile`]:oe});return reactExports.createElement("div",{ref:composeRef(Ne,i,nt),className:et,style:{"--arrow-x":`${M.x||0}px`,"--arrow-y":`${M.y||0}px`,...ce,...xe,...rt,boxSizing:"border-box",zIndex:_,...y},onMouseEnter:D,onMouseLeave:L,onPointerEnter:P,onClick:A,onPointerDownCapture:N},T&&reactExports.createElement(Arrow,{prefixCls:d,arrow:T,arrowPos:M,align:h}),reactExports.createElement(PopupContent,{cache:!E&&!x},re))})),m)}),TriggerContext=reactExports.createContext(null),UniqueContext=reactExports.createContext(null);function toArray$2(s){return s?Array.isArray(s)?s:[s]:[]}function useAction(s,i,n){return reactExports.useMemo(()=>{const a=toArray$2(i??s),d=toArray$2(n??s),y=new Set(a),C=new Set(d);return y.has("hover")&&!y.has("click")&&y.add("touch"),C.has("hover")&&!C.has("click")&&C.add("touch"),[y,C]},[s,i,n])}const isVisible=(s=>{if(!s)return!1;if(s instanceof Element){if(s.offsetParent)return!0;if(s.getBBox){const{width:i,height:n}=s.getBBox();if(i||n)return!0}if(s.getBoundingClientRect){const{width:i,height:n}=s.getBoundingClientRect();if(i||n)return!0}}return!1});function isPointsEq(s=[],i=[],n){return n?s[0]===i[0]:s[0]===i[0]&&s[1]===i[1]}function getAlignPopupClassName(s,i,n,a){const{points:d}=n,y=Object.keys(s);for(let C=0;C<y.length;C+=1){const p=y[C];if(isPointsEq(s[p]?.points,d,a))return`${i}-placement-${p}`}return""}function getWin(s){return s.ownerDocument.defaultView}function collectScroller(s){const i=[];let n=s?.parentElement;const a=["hidden","scroll","clip","auto"];for(;n;){const{overflowX:d,overflowY:y,overflow:C}=getWin(n).getComputedStyle(n);[d,y,C].some(p=>a.includes(p))&&i.push(n),n=n.parentElement}return i}function toNum(s,i=1){return Number.isNaN(s)?i:s}function getPxValue(s){return toNum(parseFloat(s),0)}function getVisibleArea(s,i){const n={...s};return(i||[]).forEach(a=>{if(a instanceof HTMLBodyElement||a instanceof HTMLHtmlElement)return;const{overflow:d,overflowClipMargin:y,borderTopWidth:C,borderBottomWidth:p,borderLeftWidth:E,borderRightWidth:R}=getWin(a).getComputedStyle(a),x=a.getBoundingClientRect(),{offsetHeight:A,clientHeight:w,offsetWidth:T,clientWidth:M}=a,h=getPxValue(C),l=getPxValue(p),c=getPxValue(E),g=getPxValue(R),v=toNum(Math.round(x.width/T*1e3)/1e3),b=toNum(Math.round(x.height/A*1e3)/1e3),S=(T-M-c-g)*v,u=(A-w-h-l)*b,m=h*b,_=l*b,D=c*v,L=g*v;let P=0,N=0;if(d==="clip"){const H=getPxValue(y);P=H*v,N=H*b}const U=x.x+D-P,V=x.y+m-N,W=U+x.width+2*P-D-L-S,G=V+x.height+2*N-m-_-u;n.left=Math.max(n.left,U),n.top=Math.max(n.top,V),n.right=Math.min(n.right,W),n.bottom=Math.min(n.bottom,G)}),n}function getUnitOffset(s,i=0){const n=`${i}`,a=n.match(/^(.*)\%$/);return a?s*(parseFloat(a[1])/100):parseFloat(n)}function getNumberOffset(s,i){const[n,a]=i||[];return[getUnitOffset(s.width,n),getUnitOffset(s.height,a)]}function splitPoints(s=""){return[s[0],s[1]]}function getAlignPoint(s,i){const n=i[0],a=i[1];let d,y;return n==="t"?y=s.y:n==="b"?y=s.y+s.height:y=s.y+s.height/2,a==="l"?d=s.x:a==="r"?d=s.x+s.width:d=s.x+s.width/2,{x:d,y}}function reversePoints(s,i){const n={t:"b",b:"t",l:"r",r:"l"};return s.map((a,d)=>d===i?n[a]||"c":a).join("")}function useAlign(s,i,n,a,d,y,C,p){const[E,R]=reactExports.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:d[a]||{}}),x=reactExports.useRef(0),A=reactExports.useMemo(()=>!i||p?[]:collectScroller(i),[i]),w=reactExports.useRef({});s||(w.current={});const M=useEvent(()=>{if(i&&n&&s&&!p){let be=function(ft,sn,tn=Ne){const nr=W.x+ft,_n=W.y+sn,An=nr+le,Lr=_n+re,Li=Math.max(nr,tn.left),zr=Math.max(_n,tn.top),kr=Math.min(An,tn.right),ut=Math.min(Lr,tn.bottom);return Math.max(0,(kr-Li)*(ut-zr))},Zt=function(){lt=W.y+me,ct=lt+re,st=W.x+Q,xt=st+le};var c=be,g=Zt;const v=i,b=v.ownerDocument,S=getWin(v),{position:u}=S.getComputedStyle(v),m=v.style.left,_=v.style.top,D=v.style.right,L=v.style.bottom,P=v.style.overflow,N={...d[a],...y},U=b.createElement("div");v.parentElement?.appendChild(U),U.style.left=`${v.offsetLeft}px`,U.style.top=`${v.offsetTop}px`,U.style.position=u,U.style.height=`${v.offsetHeight}px`,U.style.width=`${v.offsetWidth}px`,v.style.left="0",v.style.top="0",v.style.right="auto",v.style.bottom="auto",v.style.overflow="hidden";let V;if(Array.isArray(n))V={x:n[0],y:n[1],width:0,height:0};else{const ft=n.getBoundingClientRect();ft.x=ft.x??ft.left,ft.y=ft.y??ft.top,V={x:ft.x,y:ft.y,width:ft.width,height:ft.height}}const W=v.getBoundingClientRect(),{height:G,width:H}=S.getComputedStyle(v);W.x=W.x??W.left,W.y=W.y??W.top;const{clientWidth:k,clientHeight:X,scrollWidth:$,scrollHeight:F,scrollTop:K,scrollLeft:te}=b.documentElement,re=W.height,le=W.width,oe=V.height,ue=V.width,he={left:0,top:0,right:k,bottom:X},ge={left:-te,top:-K,right:$-te,bottom:F-K};let{htmlRegion:Oe}=N;const Le="visible",$e="visibleFirst";Oe!=="scroll"&&Oe!==$e&&(Oe=Le);const we=Oe===$e,ce=getVisibleArea(ge,A),xe=getVisibleArea(he,A),Ne=Oe===Le?xe:ce,Xe=we?xe:Ne;v.style.left="auto",v.style.top="auto",v.style.right="0",v.style.bottom="0";const rt=v.getBoundingClientRect();v.style.left=m,v.style.top=_,v.style.right=D,v.style.bottom=L,v.style.overflow=P,v.parentElement?.removeChild(U);const nt=toNum(Math.round(le/parseFloat(H)*1e3)/1e3),et=toNum(Math.round(re/parseFloat(G)*1e3)/1e3);if(nt===0||et===0||isDOM(n)&&!isVisible(n))return;const{offset:Ze,targetOffset:qe}=N;let[Ve,Ge]=getNumberOffset(W,Ze);const[at,ot]=getNumberOffset(V,qe);V.x-=at,V.y-=ot;const[J,ne]=N.points||[],se=splitPoints(ne),_e=splitPoints(J),Se=getAlignPoint(V,se),Pe=getAlignPoint(W,_e),Ie={...N};let Q=Se.x-Pe.x+Ve,me=Se.y-Pe.y+Ge;const ke=be(Q,me),ve=be(Q,me,xe),ze=getAlignPoint(V,["t","l"]),q=getAlignPoint(W,["t","l"]),He=getAlignPoint(V,["b","r"]),Je=getAlignPoint(W,["b","r"]),j=N.overflow||{},{adjustX:Me,adjustY:Ae,shiftX:ee,shiftY:pe}=j,De=ft=>typeof ft=="boolean"?ft:ft>=0;let lt,ct,st,xt;Zt();const St=De(Ae),vt=_e[0]===se[0];if(St&&_e[0]==="t"&&(ct>Xe.bottom||w.current.bt)){let ft=me;vt?ft-=re-oe:ft=ze.y-Je.y-Ge;const sn=be(Q,ft),tn=be(Q,ft,xe);sn>ke||sn===ke&&(!we||tn>=ve)?(w.current.bt=!0,me=ft,Ge=-Ge,Ie.points=[reversePoints(_e,0),reversePoints(se,0)]):w.current.bt=!1}if(St&&_e[0]==="b"&&(lt<Xe.top||w.current.tb)){let ft=me;vt?ft+=re-oe:ft=He.y-q.y-Ge;const sn=be(Q,ft),tn=be(Q,ft,xe);sn>ke||sn===ke&&(!we||tn>=ve)?(w.current.tb=!0,me=ft,Ge=-Ge,Ie.points=[reversePoints(_e,0),reversePoints(se,0)]):w.current.tb=!1}const yt=De(Me),Gt=_e[1]===se[1];if(yt&&_e[1]==="l"&&(xt>Xe.right||w.current.rl)){let ft=Q;Gt?ft-=le-ue:ft=ze.x-Je.x-Ve;const sn=be(ft,me),tn=be(ft,me,xe);sn>ke||sn===ke&&(!we||tn>=ve)?(w.current.rl=!0,Q=ft,Ve=-Ve,Ie.points=[reversePoints(_e,1),reversePoints(se,1)]):w.current.rl=!1}if(yt&&_e[1]==="r"&&(st<Xe.left||w.current.lr)){let ft=Q;Gt?ft+=le-ue:ft=He.x-q.x-Ve;const sn=be(ft,me),tn=be(ft,me,xe);sn>ke||sn===ke&&(!we||tn>=ve)?(w.current.lr=!0,Q=ft,Ve=-Ve,Ie.points=[reversePoints(_e,1),reversePoints(se,1)]):w.current.lr=!1}Zt();const Ct=ee===!0?0:ee;typeof Ct=="number"&&(st<xe.left&&(Q-=st-xe.left-Ve,V.x+ue<xe.left+Ct&&(Q+=V.x-xe.left+ue-Ct)),xt>xe.right&&(Q-=xt-xe.right-Ve,V.x>xe.right-Ct&&(Q+=V.x-xe.right+Ct)));const Lt=pe===!0?0:pe;typeof Lt=="number"&&(lt<xe.top&&(me-=lt-xe.top-Ge,V.y+oe<xe.top+Lt&&(me+=V.y-xe.top+oe-Lt)),ct>xe.bottom&&(me-=ct-xe.bottom-Ge,V.y>xe.bottom-Lt&&(me+=V.y-xe.bottom+Lt)));const Qt=W.x+Q,Bt=Qt+le,zt=W.y+me,qt=zt+re,Cn=V.x,yn=Cn+ue,Pn=V.y,Er=Pn+oe,In=Math.max(Qt,Cn),Gn=Math.min(Bt,yn),$n=(In+Gn)/2-Qt,hn=Math.max(zt,Pn),Wn=Math.min(qt,Er),Xn=(hn+Wn)/2-zt;C?.(i,Ie);let Vn=rt.right-W.x-(Q+W.width),si=rt.bottom-W.y-(me+W.height);nt===1&&(Q=Math.round(Q),Vn=Math.round(Vn)),et===1&&(me=Math.round(me),si=Math.round(si));const Di={ready:!0,offsetX:Q/nt,offsetY:me/et,offsetR:Vn/nt,offsetB:si/et,arrowX:$n/nt,arrowY:Xn/et,scaleX:nt,scaleY:et,align:Ie};R(Di)}}),h=()=>{x.current+=1;const c=x.current;Promise.resolve().then(()=>{x.current===c&&M()})},l=()=>{R(c=>({...c,ready:!1}))};return useLayoutEffect(l,[a]),useLayoutEffect(()=>{s||l()},[s]),[E.ready,E.offsetX,E.offsetY,E.offsetR,E.offsetB,E.arrowX,E.arrowY,E.scaleX,E.scaleY,E.align,h]}function useDelay(){const s=reactExports.useRef(null),i=()=>{s.current&&(clearTimeout(s.current),s.current=null)},n=(a,d)=>{i(),d===0?a():s.current=setTimeout(()=>{a()},d*1e3)};return reactExports.useEffect(()=>()=>{i()},[]),n}function useWatch$1(s,i,n,a,d){useLayoutEffect(()=>{if(s&&i&&n){let w=function(){a(),d()};var y=w;const C=i,p=n,E=collectScroller(C),R=collectScroller(p),x=getWin(p),A=new Set([x,...E,...R]);return A.forEach(T=>{T.addEventListener("scroll",w,{passive:!0})}),x.addEventListener("resize",w,{passive:!0}),a(),()=>{A.forEach(T=>{T.removeEventListener("scroll",w),x.removeEventListener("resize",w)})}}},[s,i,n])}function useWinClick(s,i,n,a,d,y,C,p){const E=reactExports.useRef(s);E.current=s;const R=reactExports.useRef(!1);reactExports.useEffect(()=>{if(i&&a&&(!d||y)){const A=()=>{R.current=!1},w=h=>{E.current&&!C(h.composedPath?.()?.[0]||h.target)&&!R.current&&p(!1)},T=getWin(a);T.addEventListener("pointerdown",A,!0),T.addEventListener("mousedown",w,!0),T.addEventListener("contextmenu",w,!0);const M=getShadowRoot(n);return M&&(M.addEventListener("mousedown",w,!0),M.addEventListener("contextmenu",w,!0)),()=>{T.removeEventListener("pointerdown",A,!0),T.removeEventListener("mousedown",w,!0),T.removeEventListener("contextmenu",w,!0),M&&(M.removeEventListener("mousedown",w,!0),M.removeEventListener("contextmenu",w,!0))}}},[i,n,a,d,y]);function x(){R.current=!0}return x}function useTargetState(){const[s,i]=React.useState(null),[n,a]=React.useState(!1),[d,y]=React.useState(!1),C=React.useRef(null),p=useEvent(R=>{R===!1?(C.current=null,a(!1)):d&&n?C.current=R:(a(!0),i(R),C.current=null,n||y(!0))}),E=useEvent(R=>{R?(y(!1),C.current&&(i(C.current),C.current=null)):(y(!1),C.current=null)});return[p,n,s,E]}function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},_extends$5.apply(this,arguments)}const UniqueContainer=s=>{const{prefixCls:i,isMobile:n,ready:a,open:d,align:y,offsetR:C,offsetB:p,offsetX:E,offsetY:R,arrowPos:x,popupSize:A,motion:w,uniqueContainerClassName:T,uniqueContainerStyle:M}=s,h=`${i}-unique-container`,[l,c]=React.useState(!1),g=useOffsetStyle(n,a,d,y,C,p,E,R),v=React.useRef(g);a&&(v.current=g);const b={};return A&&(b.width=A.width,b.height=A.height),React.createElement(CSSMotion,_extends$5({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,leavedClassName:`${h}-hidden`},w,{visible:d,onVisibleChanged:S=>{c(S)}}),({className:S,style:u})=>{const m=clsx(h,S,T,{[`${h}-visible`]:l});return React.createElement("div",{className:m,style:{"--arrow-x":`${x?.x||0}px`,"--arrow-y":`${x?.y||0}px`,...v.current,...b,...u,...M}})})},UniqueProvider$1=({children:s,postTriggerProps:i})=>{const[n,a,d,y]=useTargetState(),C=reactExports.useMemo(()=>!d||!i?d:i(d),[d,i]),[p,E]=reactExports.useState(null),[R,x]=reactExports.useState(null),A=reactExports.useRef(null),w=useEvent(k=>{A.current=k,isDOM(k)&&p!==k&&E(k)}),T=reactExports.useRef(null),M=useDelay(),h=useEvent((k,X)=>{T.current=X,M(()=>{n(k)},k.delay)}),l=k=>{M(()=>{T.current?.()||n(!1)},k)},c=useEvent(k=>{y(k)}),[g,v,b,S,u,m,_,,,D,L]=useAlign(a,p,C?.target,C?.popupPlacement,C?.builtinPlacements||{},C?.popupAlign,void 0,!1),P=reactExports.useMemo(()=>{if(!C)return"";const k=getAlignPopupClassName(C.builtinPlacements||{},C.prefixCls||"",D,!1);return clsx(k,C.getPopupClassNameFromAlign?.(D))},[D,C?.getPopupClassNameFromAlign,C?.builtinPlacements,C?.prefixCls]),N=reactExports.useMemo(()=>({show:h,hide:l}),[]);reactExports.useEffect(()=>{L()},[C?.target]);const U=useEvent(()=>(L(),Promise.resolve())),V=reactExports.useRef({}),W=reactExports.useContext(TriggerContext),G=reactExports.useMemo(()=>({registerSubPopup:(k,X)=>{V.current[k]=X,W?.registerSubPopup(k,X)}}),[W]),H=C?.prefixCls;return reactExports.createElement(UniqueContext.Provider,{value:N},s,C&&reactExports.createElement(TriggerContext.Provider,{value:G},reactExports.createElement(Popup$1,{ref:w,portal:Portal,prefixCls:H,popup:C.popup,className:clsx(C.popupClassName,P,`${H}-unique-controlled`),style:C.popupStyle,target:C.target,open:a,keepDom:!0,fresh:!0,autoDestroy:!1,onVisibleChanged:c,ready:g,offsetX:v,offsetY:b,offsetR:S,offsetB:u,onAlign:L,onPrepare:U,onResize:k=>x({width:k.offsetWidth,height:k.offsetHeight}),arrowPos:{x:m,y:_},align:D,zIndex:C.zIndex,mask:C.mask,arrow:C.arrow,motion:C.popupMotion,maskMotion:C.maskMotion,getPopupContainer:C.getPopupContainer},reactExports.createElement(UniqueContainer,{prefixCls:H,isMobile:!1,ready:g,open:a,align:D,offsetR:S,offsetB:u,offsetX:v,offsetY:b,arrowPos:{x:m,y:_},popupSize:R,motion:C.popupMotion,uniqueContainerClassName:clsx(C.uniqueContainerClassName,P),uniqueContainerStyle:C.uniqueContainerStyle}))))};function generateTrigger(s=Portal){return reactExports.forwardRef((n,a)=>{const{prefixCls:d="rc-trigger-popup",children:y,action:C="hover",showAction:p,hideAction:E,popupVisible:R,defaultPopupVisible:x,onOpenChange:A,afterOpenChange:w,onPopupVisibleChange:T,afterPopupVisibleChange:M,mouseEnterDelay:h,mouseLeaveDelay:l=.1,focusDelay:c,blurDelay:g,mask:v,maskClosable:b=!0,getPopupContainer:S,forceRender:u,autoDestroy:m,popup:_,popupClassName:D,uniqueContainerClassName:L,uniqueContainerStyle:P,popupStyle:N,popupPlacement:U,builtinPlacements:V={},popupAlign:W,zIndex:G,stretch:H,getPopupClassNameFromAlign:k,fresh:X,unique:$,alignPoint:F,onPopupClick:K,onPopupAlign:te,arrow:re,popupMotion:le,maskMotion:oe,mobile:ue,...he}=n,ge=m||!1,Oe=R===void 0,Le=!!ue,$e=reactExports.useRef({}),we=reactExports.useContext(TriggerContext),ce=reactExports.useMemo(()=>({registerSubPopup:(ut,Kt)=>{$e.current[ut]=Kt,we?.registerSubPopup(ut,Kt)}}),[we]),xe=reactExports.useContext(UniqueContext),Ne=useId(),[Xe,rt]=reactExports.useState(null),nt=reactExports.useRef(null),et=useEvent(ut=>{nt.current=ut,isDOM(ut)&&Xe!==ut&&rt(ut),we?.registerSubPopup(Ne,ut)}),[Ze,qe]=reactExports.useState(null),Ve=reactExports.useRef(null),Ge=useEvent(ut=>{isDOM(ut)&&Ze!==ut&&(qe(ut),Ve.current=ut)}),at={},ot=useEvent(ut=>{const Kt=Ze;return Kt?.contains(ut)||getShadowRoot(Kt)?.host===ut||ut===Kt||Xe?.contains(ut)||getShadowRoot(Xe)?.host===ut||ut===Xe||Object.values($e.current).some($t=>$t?.contains(ut)||ut===$t)}),J=re?{...re!==!0?re:{}}:null,[ne,se]=useControlledState(x||!1,R),_e=ne||!1,Se=reactExports.useMemo(()=>{const ut=typeof y=="function"?y({open:_e}):y;return reactExports.Children.only(ut)},[y,_e]),Pe=Se?.props||{},Ie=useEvent(()=>_e),Q=useEvent((ut=0)=>({popup:_,target:Ze,delay:ut,prefixCls:d,popupClassName:D,uniqueContainerClassName:L,uniqueContainerStyle:P,popupStyle:N,popupPlacement:U,builtinPlacements:V,popupAlign:W,zIndex:G,mask:v,maskClosable:b,popupMotion:le,maskMotion:oe,arrow:J,getPopupContainer:S,getPopupClassNameFromAlign:k,id:Ne}));useLayoutEffect(()=>{xe&&$&&Ze&&!Oe&&!we&&(_e?xe.show(Q(h),Ie):xe.hide(l))},[_e,Ze]);const me=reactExports.useRef(_e);me.current=_e;const be=reactExports.useRef([]);be.current=[];const ke=useEvent(ut=>{se(ut),(be.current[be.current.length-1]??_e)!==ut&&(be.current.push(ut),A?.(ut),T?.(ut))}),ve=useDelay(),ze=(ut,Kt=0)=>{if(R!==void 0){ve(()=>{ke(ut)},Kt);return}if(xe&&$&&Oe&&!we){ut?xe.show(Q(Kt),Ie):xe.hide(Kt);return}ve(()=>{ke(ut)},Kt)},[q,He]=reactExports.useState(!1);useLayoutEffect(ut=>{(!ut||_e)&&He(!0)},[_e]);const[Je,j]=reactExports.useState(null),[Me,Ae]=reactExports.useState(null),ee=ut=>{Ae([ut.clientX,ut.clientY])},[pe,De,lt,ct,st,xt,Zt,St,vt,yt,Gt]=useAlign(_e,Xe,F&&Me!==null?Me:Ze,U,V,W,te,Le),[Ct,Lt]=useAction(C,p,E),Qt=Ct.has("click"),Bt=Lt.has("click")||Lt.has("contextMenu"),zt=useEvent(()=>{q||Gt()});useWatch$1(_e,Ze,Xe,zt,()=>{me.current&&F&&Bt&&ze(!1)}),useLayoutEffect(()=>{zt()},[Me,U]),useLayoutEffect(()=>{_e&&!V?.[U]&&zt()},[JSON.stringify(W)]);const Cn=reactExports.useMemo(()=>{const ut=getAlignPopupClassName(V,d,yt,F);return clsx(ut,k?.(yt))},[yt,k,V,d,F]);reactExports.useImperativeHandle(a,()=>({nativeElement:Ve.current,popupElement:nt.current,forceAlign:zt}));const[yn,Pn]=reactExports.useState(0),[Er,In]=reactExports.useState(0),Gn=()=>{if(H&&Ze){const ut=Ze.getBoundingClientRect();Pn(ut.width),In(ut.height)}},dr=()=>{Gn(),zt()},$n=ut=>{He(!1),Gt(),w?.(ut),M?.(ut)},hn=()=>new Promise(ut=>{Gn(),j(()=>ut)});useLayoutEffect(()=>{Je&&(Gt(),Je(),j(null))},[Je]);function Wn(ut,Kt,$t,Sr,gr){at[ut]=(mr,...Kr)=>{(!gr||!gr())&&(Sr?.(mr),ze(Kt,$t)),Pe[ut]?.(mr,...Kr)}}const Hr=Ct.has("touch"),Xn=Lt.has("touch"),Vn=reactExports.useRef(!1);(Hr||Xn)&&(at.onTouchStart=(...ut)=>{Vn.current=!0,me.current&&Xn?ze(!1):!me.current&&Hr&&ze(!0),Pe.onTouchStart?.(...ut)}),(Qt||Bt)&&(at.onClick=(ut,...Kt)=>{me.current&&Bt?ze(!1):!me.current&&Qt&&(ee(ut),ze(!0)),Pe.onClick?.(ut,...Kt),Vn.current=!1});const si=useWinClick(_e,Bt||Xn,Ze,Xe,v,b,ot,ze),Di=Ct.has("hover"),ft=Lt.has("hover");let sn,tn;const nr=()=>Vn.current;if(Di){const ut=Kt=>{ee(Kt)};Wn("onMouseEnter",!0,h,ut,nr),Wn("onPointerEnter",!0,h,ut,nr),sn=Kt=>{(_e||q)&&Xe?.contains(Kt.target)&&ze(!0,h)},F&&(at.onMouseMove=Kt=>{Pe.onMouseMove?.(Kt)})}ft&&(Wn("onMouseLeave",!1,l,void 0,nr),Wn("onPointerLeave",!1,l,void 0,nr),tn=()=>{ze(!1,l)}),Ct.has("focus")&&Wn("onFocus",!0,c),Lt.has("focus")&&Wn("onBlur",!1,g),Ct.has("contextMenu")&&(at.onContextMenu=(ut,...Kt)=>{me.current&&Lt.has("contextMenu")?ze(!1):(ee(ut),ze(!0)),ut.preventDefault(),Pe.onContextMenu?.(ut,...Kt)});const _n=reactExports.useRef(!1);_n.current||=u||_e||q;const An={...Pe,...at},Lr={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach(ut=>{he[ut]&&(Lr[ut]=(...Kt)=>{An[ut]?.(...Kt),he[ut](...Kt)})});const zr={x:xt,y:Zt},kr=reactExports.cloneElement(Se,{...An,...Lr});return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(RefResizeObserver,{disabled:!_e,ref:Ge,onResize:dr},kr),_n.current&&(!xe||!$)&&reactExports.createElement(TriggerContext.Provider,{value:ce},reactExports.createElement(Popup$1,{portal:s,ref:et,prefixCls:d,popup:_,className:clsx(D,!Le&&Cn),style:N,target:Ze,onMouseEnter:sn,onMouseLeave:tn,onPointerEnter:sn,zIndex:G,open:_e,keepDom:q,fresh:X,onClick:K,onPointerDownCapture:si,mask:v,motion:le,maskMotion:oe,onVisibleChanged:$n,onPrepare:hn,forceRender:u,autoDestroy:ge,getPopupContainer:S,align:yt,arrow:J,arrowPos:zr,ready:pe,offsetX:De,offsetY:lt,offsetR:ct,offsetB:st,onAlign:zt,stretch:H,targetWidth:yn/St,targetHeight:Er/vt,mobile:ue})))})}const Trigger=generateTrigger(Portal),MotionContent=({children:s})=>{const{getPrefixCls:i}=React.useContext(ConfigContext),n=i();return React.isValidElement(s)?React.createElement(CSSMotion,{visible:!0,motionName:`${n}-fade`,motionAppear:!0,motionEnter:!0,motionLeave:!1,removeOnLeave:!1},({style:a,className:d})=>{const{className:y,style:C}=s.props,p={...C,...a};return React.cloneElement(s,{className:clsx(y,d),style:p})}):s},cachedPlacements=[null,null];function uniqueBuiltinPlacements(s){if(cachedPlacements[0]!==s){const i={};Object.keys(s).forEach(n=>{i[n]={...s[n],dynamicInset:!1}}),cachedPlacements[0]=s,cachedPlacements[1]=i}return cachedPlacements[1]}const UniqueProvider=({children:s})=>{const i=n=>{const a=typeof n.popup=="function"?n.popup():n.popup,{id:d,builtinPlacements:y}=n,C=uniqueBuiltinPlacements(y);return{...n,getPopupContainer:null,arrow:!1,popup:React.createElement(MotionContent,{key:d},a),builtinPlacements:C}};return React.createElement(UniqueProvider$1,{postTriggerProps:i},s)},getTransitionName=(s,i,n)=>n!==void 0?n:`${s}-${i}`,SpaceCompactItemContext=reactExports.createContext(null),NoCompactStyle=s=>{const{children:i}=s;return reactExports.createElement(SpaceCompactItemContext.Provider,{value:null},i)},getRoundNumber=s=>Math.round(Number(s||0)),convertHsb2Hsv=s=>{if(s instanceof FastColor)return s;if(s&&typeof s=="object"&&"h"in s&&"b"in s){const{b:i,...n}=s;return{...n,v:i}}return typeof s=="string"&&/hsb/.test(s)?s.replace(/hsb/,"hsv"):s};class Color extends FastColor{constructor(i){super(convertHsb2Hsv(i))}toHsbString(){const i=this.toHsb(),n=getRoundNumber(i.s*100),a=getRoundNumber(i.b*100),d=getRoundNumber(i.h),y=i.a,C=`hsb(${d}, ${n}%, ${a}%)`,p=`hsba(${d}, ${n}%, ${a}%, ${y.toFixed(y===0?0:2)})`;return y===1?C:p}toHsb(){const{v:i,...n}=this.toHsv();return{...n,b:i,a:this.a}}}const generateColor$1=s=>s instanceof Color?s:new Color(s);generateColor$1("#1677ff");const toHexFormat=(s,i)=>s?.replace(/[^\w/]/g,"").slice(0,i?8:6)||"",getHex=(s,i)=>s?toHexFormat(s,i):"";let AggregationColor=(function(){function s(i){if(_classCallCheck(this,s),this.cleared=!1,i instanceof s){this.metaColor=i.metaColor.clone(),this.colors=i.colors?.map(a=>({color:new s(a.color),percent:a.percent})),this.cleared=i.cleared;return}const n=Array.isArray(i);n&&i.length?(this.colors=i.map(({color:a,percent:d})=>({color:new s(a),percent:d})),this.metaColor=new Color(this.colors[0].color.metaColor)):this.metaColor=new Color(n?"":i),(!i||n&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return _createClass(s,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return getHex(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:n}=this;return n?`linear-gradient(90deg, ${n.map(d=>`${d.color.toRgbString()} ${d.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(n){return!n||this.isGradient()!==n.isGradient()?!1:this.isGradient()?this.colors.length===n.colors.length&&this.colors.every((a,d)=>{const y=n.colors[d];return a.percent===y.percent&&a.color.equals(y.color)}):this.toHexString()===n.toHexString()}}])})();const initMotionCommon=s=>({animationDuration:s,animationFillMode:"both"}),initMotionCommonLeave=s=>({animationDuration:s,animationFillMode:"both"}),initMotion=(s,i,n,a,d=!1)=>{const y=d?"&":"";return{[`
      ${y}${s}-enter,
      ${y}${s}-appear
    `]:{...initMotionCommon(a),animationPlayState:"paused"},[`${y}${s}-leave`]:{...initMotionCommonLeave(a),animationPlayState:"paused"},[`
      ${y}${s}-enter${s}-enter-active,
      ${y}${s}-appear${s}-appear-active
    `]:{animationName:i,animationPlayState:"running"},[`${y}${s}-leave${s}-leave-active`]:{animationName:n,animationPlayState:"running",pointerEvents:"none"}}},fadeIn=new Keyframe("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),fadeOut=new Keyframe("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),initFadeMotion=(s,i=!1)=>{const{antCls:n}=s,a=`${n}-fade`,d=i?"&":"";return[initMotion(a,fadeIn,fadeOut,s.motionDurationMid,i),{[`
        ${d}${a}-enter,
        ${d}${a}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${d}${a}-leave`]:{animationTimingFunction:"linear"}}]},zoomIn=new Keyframe("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),zoomOut=new Keyframe("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),zoomBigIn=new Keyframe("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),zoomBigOut=new Keyframe("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),zoomUpIn=new Keyframe("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),zoomUpOut=new Keyframe("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),zoomLeftIn=new Keyframe("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),zoomLeftOut=new Keyframe("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),zoomRightIn=new Keyframe("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),zoomRightOut=new Keyframe("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),zoomDownIn=new Keyframe("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),zoomDownOut=new Keyframe("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),zoomMotion={zoom:{inKeyframes:zoomIn,outKeyframes:zoomOut},"zoom-big":{inKeyframes:zoomBigIn,outKeyframes:zoomBigOut},"zoom-big-fast":{inKeyframes:zoomBigIn,outKeyframes:zoomBigOut},"zoom-left":{inKeyframes:zoomLeftIn,outKeyframes:zoomLeftOut},"zoom-right":{inKeyframes:zoomRightIn,outKeyframes:zoomRightOut},"zoom-up":{inKeyframes:zoomUpIn,outKeyframes:zoomUpOut},"zoom-down":{inKeyframes:zoomDownIn,outKeyframes:zoomDownOut}},initZoomMotion=(s,i)=>{const{antCls:n}=s,a=`${n}-${i}`,{inKeyframes:d,outKeyframes:y}=zoomMotion[i];return[initMotion(a,d,y,s.motionDurationFast),{[`
        ${a}-enter,
        ${a}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:s.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${a}-leave`]:{animationTimingFunction:s.motionEaseInOutCirc}}]},generateColor=s=>s instanceof AggregationColor?s:new AggregationColor(s),HOOK_MARK="RC_FORM_INTERNAL_HOOKS",warningFunc=()=>{warningOnce(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Context=reactExports.createContext({getFieldValue:warningFunc,getFieldsValue:warningFunc,getFieldError:warningFunc,getFieldWarning:warningFunc,getFieldsError:warningFunc,isFieldsTouched:warningFunc,isFieldTouched:warningFunc,isFieldValidating:warningFunc,isFieldsValidating:warningFunc,resetFields:warningFunc,setFields:warningFunc,setFieldValue:warningFunc,setFieldsValue:warningFunc,validateFields:warningFunc,submit:warningFunc,getInternalHooks:()=>(warningFunc(),{dispatch:warningFunc,initEntityValue:warningFunc,registerField:warningFunc,useSubscribe:warningFunc,setInitialValues:warningFunc,destroyForm:warningFunc,setCallbacks:warningFunc,registerWatch:warningFunc,getFields:warningFunc,setValidateMessages:warningFunc,setPreserve:warningFunc,getInitialValue:warningFunc,setBatchUpdate:warningFunc})}),ListContext=reactExports.createContext(null);function toArray$1(s){return s==null?[]:Array.isArray(s)?s:[s]}function isFormInstance(s){return s&&!!s._init}function newMessages(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var i=JSON.parse(JSON.stringify(this));return i.clone=this.clone,i}}}var messages=newMessages();function _isNativeFunction(s){try{return Function.toString.call(s).indexOf("[native code]")!==-1}catch{return typeof s=="function"}}function _construct(s,i,n){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var a=[null];a.push.apply(a,i);var d=new(s.bind.apply(s,a));return n&&_setPrototypeOf(d,n.prototype),d}function _wrapNativeSuper(s){var i=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(a){if(a===null||!_isNativeFunction(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(a))return i.get(a);i.set(a,d)}function d(){return _construct(a,arguments,_getPrototypeOf(this).constructor)}return d.prototype=Object.create(a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(d,a)},_wrapNativeSuper(s)}var formatRegExp=/%[sdj%]/g,warning=function s(){};function convertFieldsError(s){if(!s||!s.length)return null;var i={};return s.forEach(function(n){var a=n.field;i[a]=i[a]||[],i[a].push(n)}),i}function format(s){for(var i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];var d=0,y=n.length;if(typeof s=="function")return s.apply(null,n);if(typeof s=="string"){var C=s.replace(formatRegExp,function(p){if(p==="%%")return"%";if(d>=y)return p;switch(p){case"%s":return String(n[d++]);case"%d":return Number(n[d++]);case"%j":try{return JSON.stringify(n[d++])}catch{return"[Circular]"}break;default:return p}});return C}return s}function isNativeStringType(s){return s==="string"||s==="url"||s==="hex"||s==="email"||s==="date"||s==="pattern"}function isEmptyValue(s,i){return!!(s==null||i==="array"&&Array.isArray(s)&&!s.length||isNativeStringType(i)&&typeof s=="string"&&!s)}function asyncParallelArray(s,i,n){var a=[],d=0,y=s.length;function C(p){a.push.apply(a,_toConsumableArray(p||[])),d++,d===y&&n(a)}s.forEach(function(p){i(p,C)})}function asyncSerialArray(s,i,n){var a=0,d=s.length;function y(C){if(C&&C.length){n(C);return}var p=a;a=a+1,p<d?i(s[p],y):n([])}y([])}function flattenObjArr(s){var i=[];return Object.keys(s).forEach(function(n){i.push.apply(i,_toConsumableArray(s[n]||[]))}),i}var AsyncValidationError=(function(s){_inherits(n,s);var i=_createSuper(n);function n(a,d){var y;return _classCallCheck(this,n),y=i.call(this,"Async Validation Error"),_defineProperty(_assertThisInitialized(y),"errors",void 0),_defineProperty(_assertThisInitialized(y),"fields",void 0),y.errors=a,y.fields=d,y}return _createClass(n)})(_wrapNativeSuper(Error));function asyncMap(s,i,n,a,d){if(i.first){var y=new Promise(function(w,T){var M=function(c){return a(c),c.length?T(new AsyncValidationError(c,convertFieldsError(c))):w(d)},h=flattenObjArr(s);asyncSerialArray(h,n,M)});return y.catch(function(w){return w}),y}var C=i.firstFields===!0?Object.keys(s):i.firstFields||[],p=Object.keys(s),E=p.length,R=0,x=[],A=new Promise(function(w,T){var M=function(l){if(x.push.apply(x,l),R++,R===E)return a(x),x.length?T(new AsyncValidationError(x,convertFieldsError(x))):w(d)};p.length||(a(x),w(d)),p.forEach(function(h){var l=s[h];C.indexOf(h)!==-1?asyncSerialArray(l,n,M):asyncParallelArray(l,n,M)})});return A.catch(function(w){return w}),A}function isErrorObj(s){return!!(s&&s.message!==void 0)}function getValue(s,i){for(var n=s,a=0;a<i.length;a++){if(n==null)return n;n=n[i[a]]}return n}function complementError(s,i){return function(n){var a;return s.fullFields?a=getValue(i,s.fullFields):a=i[n.field||s.fullField],isErrorObj(n)?(n.field=n.field||s.fullField,n.fieldValue=a,n):{message:typeof n=="function"?n():n,fieldValue:a,field:n.field||s.fullField}}}function deepMerge(s,i){if(i){for(var n in i)if(i.hasOwnProperty(n)){var a=i[n];_typeof(a)==="object"&&_typeof(s[n])==="object"?s[n]=_objectSpread2(_objectSpread2({},s[n]),a):s[n]=a}}return s}var ENUM$1="enum",enumerable$1=function s(i,n,a,d,y){i[ENUM$1]=Array.isArray(i[ENUM$1])?i[ENUM$1]:[],i[ENUM$1].indexOf(n)===-1&&d.push(format(y.messages[ENUM$1],i.fullField,i[ENUM$1].join(", ")))},pattern$2=function s(i,n,a,d,y){if(i.pattern){if(i.pattern instanceof RegExp)i.pattern.lastIndex=0,i.pattern.test(n)||d.push(format(y.messages.pattern.mismatch,i.fullField,n,i.pattern));else if(typeof i.pattern=="string"){var C=new RegExp(i.pattern);C.test(n)||d.push(format(y.messages.pattern.mismatch,i.fullField,n,i.pattern))}}},range=function s(i,n,a,d,y){var C=typeof i.len=="number",p=typeof i.min=="number",E=typeof i.max=="number",R=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,x=n,A=null,w=typeof n=="number",T=typeof n=="string",M=Array.isArray(n);if(w?A="number":T?A="string":M&&(A="array"),!A)return!1;M&&(x=n.length),T&&(x=n.replace(R,"_").length),C?x!==i.len&&d.push(format(y.messages[A].len,i.fullField,i.len)):p&&!E&&x<i.min?d.push(format(y.messages[A].min,i.fullField,i.min)):E&&!p&&x>i.max?d.push(format(y.messages[A].max,i.fullField,i.max)):p&&E&&(x<i.min||x>i.max)&&d.push(format(y.messages[A].range,i.fullField,i.min,i.max))},required$1=function s(i,n,a,d,y,C){i.required&&(!a.hasOwnProperty(i.field)||isEmptyValue(n,C||i.type))&&d.push(format(y.messages.required,i.fullField))},urlReg;const getUrlRegex=(function(){if(urlReg)return urlReg;var s="[a-fA-F\\d:]",i=function(u){return u&&u.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(s,")|(?<=").concat(s,")(?=\\s|$))"):""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",d=["(?:".concat(a,":){7}(?:").concat(a,"|:)"),"(?:".concat(a,":){6}(?:").concat(n,"|:").concat(a,"|:)"),"(?:".concat(a,":){5}(?::").concat(n,"|(?::").concat(a,"){1,2}|:)"),"(?:".concat(a,":){4}(?:(?::").concat(a,"){0,1}:").concat(n,"|(?::").concat(a,"){1,3}|:)"),"(?:".concat(a,":){3}(?:(?::").concat(a,"){0,2}:").concat(n,"|(?::").concat(a,"){1,4}|:)"),"(?:".concat(a,":){2}(?:(?::").concat(a,"){0,3}:").concat(n,"|(?::").concat(a,"){1,5}|:)"),"(?:".concat(a,":){1}(?:(?::").concat(a,"){0,4}:").concat(n,"|(?::").concat(a,"){1,6}|:)"),"(?::(?:(?::".concat(a,"){0,5}:").concat(n,"|(?::").concat(a,"){1,7}|:))")],y="(?:%[0-9a-zA-Z]{1,})?",C="(?:".concat(d.join("|"),")").concat(y),p=new RegExp("(?:^".concat(n,"$)|(?:^").concat(C,"$)")),E=new RegExp("^".concat(n,"$")),R=new RegExp("^".concat(C,"$")),x=function(u){return u&&u.exact?p:new RegExp("(?:".concat(i(u)).concat(n).concat(i(u),")|(?:").concat(i(u)).concat(C).concat(i(u),")"),"g")};x.v4=function(S){return S&&S.exact?E:new RegExp("".concat(i(S)).concat(n).concat(i(S)),"g")},x.v6=function(S){return S&&S.exact?R:new RegExp("".concat(i(S)).concat(C).concat(i(S)),"g")};var A="(?:(?:[a-z]+:)?//)",w="(?:\\S+(?::\\S*)?@)?",T=x.v4().source,M=x.v6().source,h="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",l="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",c="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",g="(?::\\d{2,5})?",v='(?:[/?#][^\\s"]*)?',b="(?:".concat(A,"|www\\.)").concat(w,"(?:localhost|").concat(T,"|").concat(M,"|").concat(h).concat(l).concat(c,")").concat(g).concat(v);return urlReg=new RegExp("(?:^".concat(b,"$)"),"i"),urlReg});var pattern$1={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},types={integer:function s(i){return types.number(i)&&parseInt(i,10)===i},float:function s(i){return types.number(i)&&!types.integer(i)},array:function s(i){return Array.isArray(i)},regexp:function s(i){if(i instanceof RegExp)return!0;try{return!!new RegExp(i)}catch{return!1}},date:function s(i){return typeof i.getTime=="function"&&typeof i.getMonth=="function"&&typeof i.getYear=="function"&&!isNaN(i.getTime())},number:function s(i){return isNaN(i)?!1:typeof i=="number"},object:function s(i){return _typeof(i)==="object"&&!types.array(i)},method:function s(i){return typeof i=="function"},email:function s(i){return typeof i=="string"&&i.length<=320&&!!i.match(pattern$1.email)},url:function s(i){return typeof i=="string"&&i.length<=2048&&!!i.match(getUrlRegex())},hex:function s(i){return typeof i=="string"&&!!i.match(pattern$1.hex)}},type$1=function s(i,n,a,d,y){if(i.required&&n===void 0){required$1(i,n,a,d,y);return}var C=["integer","float","array","regexp","object","method","email","number","date","url","hex"],p=i.type;C.indexOf(p)>-1?types[p](n)||d.push(format(y.messages.types[p],i.fullField,i.type)):p&&_typeof(n)!==i.type&&d.push(format(y.messages.types[p],i.fullField,i.type))},whitespace=function s(i,n,a,d,y){(/^\s+$/.test(n)||n==="")&&d.push(format(y.messages.whitespace,i.fullField))};const rules={required:required$1,whitespace,type:type$1,range,enum:enumerable$1,pattern:pattern$2};var any=function s(i,n,a,d,y){var C=[],p=i.required||!i.required&&d.hasOwnProperty(i.field);if(p){if(isEmptyValue(n)&&!i.required)return a();rules.required(i,n,d,C,y)}a(C)},array=function s(i,n,a,d,y){var C=[],p=i.required||!i.required&&d.hasOwnProperty(i.field);if(p){if(n==null&&!i.required)return a();rules.required(i,n,d,C,y,"array"),n!=null&&(rules.type(i,n,d,C,y),rules.range(i,n,d,C,y))}a(C)},boolean=function s(i,n,a,d,y){var C=[],p=i.required||!i.required&&d.hasOwnProperty(i.field);if(p){if(isEmptyValue(n)&&!i.required)return a();rules.required(i,n,d,C,y),n!==void 0&&rules.type(i,n,d,C,y)}a(C)},date=function s(i,n,a,d,y){var C=[],p=i.required||!i.required&&d.hasOwnProperty(i.field);if(p){if(isEmptyValue(n,"date")&&!i.required)return a();if(rules.required(i,n,d,C,y),!isEmptyValue(n,"date")){var E;n instanceof Date?E=n:E=new Date(n),rules.type(i,E,d,C,y),E&&rules.range(i,E.getTime(),d,C,y)}}a(C)},ENUM="enum",enumerable=function s(i,n,a,d,y){var C=[],p=i.required||!i.required&&d.hasOwnProperty(i.field);if(p){if(isEmptyValue(n)&&!i.required)return a();rules.required(i,n,d,C,y),n!==void 0&&rules[ENUM](i,n,d,C,y)}a(C)},floatFn=function s(i,n,a,d,y){var C=[],p=i.required||!i.required&&d.hasOwnProperty(i.field);if(p){if(isEmptyValue(n)&&!i.required)return a();rules.required(i,n,d,C,y),n!==void 0&&(rules.type(i,n,d,C,y),rules.range(i,n,d,C,y))}a(C)},integer=function s(i,n,a,d,y){var C=[],p=i.required||!i.required&&d.hasOwnProperty(i.field);if(p){if(isEmptyValue(n)&&!i.required)return a();rules.required(i,n,d,C,y),n!==void 0&&(rules.type(i,n,d,C,y),rules.range(i,n,d,C,y))}a(C)},method=function s(i,n,a,d,y){var C=[],p=i.required||!i.required&&d.hasOwnProperty(i.field);if(p){if(isEmptyValue(n)&&!i.required)return a();rules.required(i,n,d,C,y),n!==void 0&&rules.type(i,n,d,C,y)}a(C)},number=function s(i,n,a,d,y){var C=[],p=i.required||!i.required&&d.hasOwnProperty(i.field);if(p){if(n===""&&(n=void 0),isEmptyValue(n)&&!i.required)return a();rules.required(i,n,d,C,y),n!==void 0&&(rules.type(i,n,d,C,y),rules.range(i,n,d,C,y))}a(C)},object=function s(i,n,a,d,y){var C=[],p=i.required||!i.required&&d.hasOwnProperty(i.field);if(p){if(isEmptyValue(n)&&!i.required)return a();rules.required(i,n,d,C,y),n!==void 0&&rules.type(i,n,d,C,y)}a(C)},pattern=function s(i,n,a,d,y){var C=[],p=i.required||!i.required&&d.hasOwnProperty(i.field);if(p){if(isEmptyValue(n,"string")&&!i.required)return a();rules.required(i,n,d,C,y),isEmptyValue(n,"string")||rules.pattern(i,n,d,C,y)}a(C)},regexp=function s(i,n,a,d,y){var C=[],p=i.required||!i.required&&d.hasOwnProperty(i.field);if(p){if(isEmptyValue(n)&&!i.required)return a();rules.required(i,n,d,C,y),isEmptyValue(n)||rules.type(i,n,d,C,y)}a(C)},required=function s(i,n,a,d,y){var C=[],p=Array.isArray(n)?"array":_typeof(n);rules.required(i,n,d,C,y,p),a(C)},string=function s(i,n,a,d,y){var C=[],p=i.required||!i.required&&d.hasOwnProperty(i.field);if(p){if(isEmptyValue(n,"string")&&!i.required)return a();rules.required(i,n,d,C,y,"string"),isEmptyValue(n,"string")||(rules.type(i,n,d,C,y),rules.range(i,n,d,C,y),rules.pattern(i,n,d,C,y),i.whitespace===!0&&rules.whitespace(i,n,d,C,y))}a(C)},type=function s(i,n,a,d,y){var C=i.type,p=[],E=i.required||!i.required&&d.hasOwnProperty(i.field);if(E){if(isEmptyValue(n,C)&&!i.required)return a();rules.required(i,n,d,p,y,C),isEmptyValue(n,C)||rules.type(i,n,d,p,y)}a(p)};const validators={string,method,number,boolean,regexp,integer,float:floatFn,array,object,enum:enumerable,pattern,date,url:type,hex:type,email:type,required,any};var Schema=(function(){function s(i){_classCallCheck(this,s),_defineProperty(this,"rules",null),_defineProperty(this,"_messages",messages),this.define(i)}return _createClass(s,[{key:"define",value:function(n){var a=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(_typeof(n)!=="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(d){var y=n[d];a.rules[d]=Array.isArray(y)?y:[y]})}},{key:"messages",value:function(n){return n&&(this._messages=deepMerge(newMessages(),n)),this._messages}},{key:"validate",value:function(n){var a=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},C=n,p=d,E=y;if(typeof p=="function"&&(E=p,p={}),!this.rules||Object.keys(this.rules).length===0)return E&&E(null,C),Promise.resolve(C);function R(M){var h=[],l={};function c(v){if(Array.isArray(v)){var b;h=(b=h).concat.apply(b,_toConsumableArray(v))}else h.push(v)}for(var g=0;g<M.length;g++)c(M[g]);h.length?(l=convertFieldsError(h),E(h,l)):E(null,C)}if(p.messages){var x=this.messages();x===messages&&(x=newMessages()),deepMerge(x,p.messages),p.messages=x}else p.messages=this.messages();var A={},w=p.keys||Object.keys(this.rules);w.forEach(function(M){var h=a.rules[M],l=C[M];h.forEach(function(c){var g=c;typeof g.transform=="function"&&(C===n&&(C=_objectSpread2({},C)),l=C[M]=g.transform(l),l!=null&&(g.type=g.type||(Array.isArray(l)?"array":_typeof(l)))),typeof g=="function"?g={validator:g}:g=_objectSpread2({},g),g.validator=a.getValidationMethod(g),g.validator&&(g.field=M,g.fullField=g.fullField||M,g.type=a.getType(g),A[M]=A[M]||[],A[M].push({rule:g,value:l,source:C,field:M}))})});var T={};return asyncMap(A,p,function(M,h){var l=M.rule,c=(l.type==="object"||l.type==="array")&&(_typeof(l.fields)==="object"||_typeof(l.defaultField)==="object");c=c&&(l.required||!l.required&&M.value),l.field=M.field;function g(m,_){return _objectSpread2(_objectSpread2({},_),{},{fullField:"".concat(l.fullField,".").concat(m),fullFields:l.fullFields?[].concat(_toConsumableArray(l.fullFields),[m]):[m]})}function v(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],_=Array.isArray(m)?m:[m];!p.suppressWarning&&_.length&&s.warning("async-validator:",_),_.length&&l.message!==void 0&&(_=[].concat(l.message));var D=_.map(complementError(l,C));if(p.first&&D.length)return T[l.field]=1,h(D);if(!c)h(D);else{if(l.required&&!M.value)return l.message!==void 0?D=[].concat(l.message).map(complementError(l,C)):p.error&&(D=[p.error(l,format(p.messages.required,l.field))]),h(D);var L={};l.defaultField&&Object.keys(M.value).map(function(U){L[U]=l.defaultField}),L=_objectSpread2(_objectSpread2({},L),M.rule.fields);var P={};Object.keys(L).forEach(function(U){var V=L[U],W=Array.isArray(V)?V:[V];P[U]=W.map(g.bind(null,U))});var N=new s(P);N.messages(p.messages),M.rule.options&&(M.rule.options.messages=p.messages,M.rule.options.error=p.error),N.validate(M.value,M.rule.options||p,function(U){var V=[];D&&D.length&&V.push.apply(V,_toConsumableArray(D)),U&&U.length&&V.push.apply(V,_toConsumableArray(U)),h(V.length?V:null)})}}var b;if(l.asyncValidator)b=l.asyncValidator(l,M.value,v,M.source,p);else if(l.validator){try{b=l.validator(l,M.value,v,M.source,p)}catch(m){var S,u;(S=(u=console).error)===null||S===void 0||S.call(u,m),p.suppressValidatorError||setTimeout(function(){throw m},0),v(m.message)}b===!0?v():b===!1?v(typeof l.message=="function"?l.message(l.fullField||l.field):l.message||"".concat(l.fullField||l.field," fails")):b instanceof Array?v(b):b instanceof Error&&v(b.message)}b&&b.then&&b.then(function(){return v()},function(m){return v(m)})},function(M){R(M)},C)}},{key:"getType",value:function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!validators.hasOwnProperty(n.type))throw new Error(format("Unknown rule type %s",n.type));return n.type||"string"}},{key:"getValidationMethod",value:function(n){if(typeof n.validator=="function")return n.validator;var a=Object.keys(n),d=a.indexOf("message");return d!==-1&&a.splice(d,1),a.length===1&&a[0]==="required"?validators.required:validators[this.getType(n)]||void 0}}]),s})();_defineProperty(Schema,"register",function s(i,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");validators[i]=n});_defineProperty(Schema,"warning",warning);_defineProperty(Schema,"messages",messages);_defineProperty(Schema,"validators",validators);const typeTemplate="'${name}' is not a valid ${type}",defaultValidateMessages={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:typeTemplate,method:typeTemplate,array:typeTemplate,object:typeTemplate,number:typeTemplate,date:typeTemplate,boolean:typeTemplate,integer:typeTemplate,float:typeTemplate,regexp:typeTemplate,email:typeTemplate,url:typeTemplate,hex:typeTemplate},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},AsyncValidator=Schema;function replaceMessage(s,i){return s.replace(/\\?\$\{\w+\}/g,n=>{if(n.startsWith("\\"))return n.slice(1);const a=n.slice(2,-1);return i[a]})}const CODE_LOGIC_ERROR="CODE_LOGIC_ERROR";async function validateRule(s,i,n,a,d){const y={...n};if(delete y.ruleIndex,AsyncValidator.warning=()=>{},y.validator){const w=y.validator;y.validator=(...T)=>{try{return w(...T)}catch(M){return console.error(M),Promise.reject(CODE_LOGIC_ERROR)}}}let C=null;y&&y.type==="array"&&y.defaultField&&(C=y.defaultField,delete y.defaultField);const p=new AsyncValidator({[s]:[y]}),E=merge$1(defaultValidateMessages,a.validateMessages);p.messages(E);let R=[];try{await Promise.resolve(p.validate({[s]:i},{...a}))}catch(w){w.errors&&(R=w.errors.map(({message:T},M)=>{const h=T===CODE_LOGIC_ERROR?E.default:T;return reactExports.isValidElement(h)?reactExports.cloneElement(h,{key:`error_${M}`}):h}))}if(!R.length&&C&&Array.isArray(i)&&i.length>0)return(await Promise.all(i.map((T,M)=>validateRule(`${s}.${M}`,T,C,a,d)))).reduce((T,M)=>[...T,...M],[]);const x={...n,name:s,enum:(n.enum||[]).join(", "),...d};return R.map(w=>typeof w=="string"?replaceMessage(w,x):w)}function validateRules(s,i,n,a,d,y){const C=s.join("."),p=n.map((R,x)=>{const A=R.validator,w={...R,ruleIndex:x};return A&&(w.validator=(T,M,h)=>{let l=!1;const g=A(T,M,(...v)=>{Promise.resolve().then(()=>{warningOnce(!l,"Your validator function has already return a promise. `callback` will be ignored."),l||h(...v)})});l=g&&typeof g.then=="function"&&typeof g.catch=="function",warningOnce(l,"`callback` is deprecated. Please return a promise instead."),l&&g.then(()=>{h()}).catch(v=>{h(v||" ")})}),w}).sort(({warningOnly:R,ruleIndex:x},{warningOnly:A,ruleIndex:w})=>!!R==!!A?x-w:R?1:-1);let E;if(d===!0)E=new Promise(async(R,x)=>{for(let A=0;A<p.length;A+=1){const w=p[A],T=await validateRule(C,i,w,a,y);if(T.length){x([{errors:T,rule:w}]);return}}R([])});else{const R=p.map(x=>validateRule(C,i,x,a,y).then(A=>({errors:A,rule:x})));E=(d?finishOnFirstFailed(R):finishOnAllFailed(R)).then(x=>Promise.reject(x))}return E.catch(R=>R),E}async function finishOnAllFailed(s){return Promise.all(s).then(i=>[].concat(...i))}async function finishOnFirstFailed(s){let i=0;return new Promise(n=>{s.forEach(a=>{a.then(d=>{d.errors.length&&n([d]),i+=1,i===s.length&&n([])})})})}function getNamePath(s){return toArray$1(s)}function cloneByNamePathList(s,i){let n={};return i.forEach(a=>{const d=get(s,a);n=set(n,a,d)}),n}function containsNamePath(s,i,n=!1){return s&&s.some(a=>matchNamePath(i,a,n))}function matchNamePath(s,i,n=!1){return!s||!i||!n&&s.length!==i.length?!1:i.every((a,d)=>s[d]===a)}function isSimilar(s,i){if(s===i)return!0;if(!s&&i||s&&!i||!s||!i||typeof s!="object"||typeof i!="object")return!1;const n=Object.keys(s),a=Object.keys(i);return[...new Set([...n,...a])].every(y=>{const C=s[y],p=i[y];return typeof C=="function"&&typeof p=="function"?!0:C===p})}function defaultGetValueFromEvent(s,...i){const n=i[0];return n&&n.target&&typeof n.target=="object"&&s in n.target?n.target[s]:n}function move(s,i,n){const{length:a}=s;if(i<0||i>=a||n<0||n>=a)return s;const d=s[i],y=i-n;return y>0?[...s.slice(0,n),d,...s.slice(n,i),...s.slice(i+1,a)]:y<0?[...s.slice(0,i),...s.slice(i+1,n+1),d,...s.slice(n+1,a)]:s}function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},_extends$4.apply(this,arguments)}const EMPTY_ERRORS=[],EMPTY_WARNINGS=[];function requireUpdate(s,i,n,a,d,y){return typeof s=="function"?s(i,n,"source"in y?{source:y.source}:{}):a!==d}class Field extends reactExports.Component{static contextType=Context;state={resetCount:0};cancelRegisterFunc=null;mounted=!1;touched=!1;dirty=!1;validatePromise;prevValidating;errors=EMPTY_ERRORS;warnings=EMPTY_WARNINGS;constructor(i){if(super(i),i.fieldContext){const{getInternalHooks:n}=i.fieldContext,{initEntityValue:a}=n(HOOK_MARK);a(this)}}componentDidMount(){const{shouldUpdate:i,fieldContext:n}=this.props;if(this.mounted=!0,n){const{getInternalHooks:a}=n,{registerField:d}=a(HOOK_MARK);this.cancelRegisterFunc=d(this)}i===!0&&this.reRender()}componentWillUnmount(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}cancelRegister=()=>{const{preserve:i,isListField:n,name:a}=this.props;this.cancelRegisterFunc&&this.cancelRegisterFunc(n,i,getNamePath(a)),this.cancelRegisterFunc=null};getNamePath=()=>{const{name:i,fieldContext:n}=this.props,{prefixName:a=[]}=n;return i!==void 0?[...a,...i]:[]};getRules=()=>{const{rules:i=[],fieldContext:n}=this.props;return i.map(a=>typeof a=="function"?a(n):a)};reRender(){this.mounted&&this.forceUpdate()}refresh=()=>{this.mounted&&this.setState(({resetCount:i})=>({resetCount:i+1}))};metaCache=null;triggerMetaEvent=i=>{const{onMetaChange:n}=this.props;if(n){const a={...this.getMeta(),destroy:i};isEqual(this.metaCache,a)||n(a),this.metaCache=a}else this.metaCache=null};onStoreChange=(i,n,a)=>{const{shouldUpdate:d,dependencies:y=[],onReset:C}=this.props,{store:p}=a,E=this.getNamePath(),R=this.getValue(i),x=this.getValue(p),A=n&&containsNamePath(n,E);switch(a.type==="valueUpdate"&&a.source==="external"&&!isEqual(R,x)&&(this.touched=!0,this.dirty=!0,this.validatePromise=null,this.errors=EMPTY_ERRORS,this.warnings=EMPTY_WARNINGS,this.triggerMetaEvent()),a.type){case"reset":if(!n||A){this.touched=!1,this.dirty=!1,this.validatePromise=void 0,this.errors=EMPTY_ERRORS,this.warnings=EMPTY_WARNINGS,this.triggerMetaEvent(),C?.(),this.refresh();return}break;case"remove":{if(d&&requireUpdate(d,i,p,R,x,a)){this.reRender();return}break}case"setField":{const{data:w}=a;if(A){"touched"in w&&(this.touched=w.touched),"validating"in w&&!("originRCField"in w)&&(this.validatePromise=w.validating?Promise.resolve([]):null),"errors"in w&&(this.errors=w.errors||EMPTY_ERRORS),"warnings"in w&&(this.warnings=w.warnings||EMPTY_WARNINGS),this.dirty=!0,this.triggerMetaEvent(),this.reRender();return}else if("value"in w&&containsNamePath(n,E,!0)){this.reRender();return}if(d&&!E.length&&requireUpdate(d,i,p,R,x,a)){this.reRender();return}break}case"dependenciesUpdate":{if(y.map(getNamePath).some(T=>containsNamePath(a.relatedFields,T))){this.reRender();return}break}default:if(A||(!y.length||E.length||d)&&requireUpdate(d,i,p,R,x,a)){this.reRender();return}break}d===!0&&this.reRender()};validateRules=i=>{const n=this.getNamePath(),a=this.getValue(),{triggerName:d,validateOnly:y=!1}=i||{},C=Promise.resolve().then(async()=>{if(!this.mounted)return[];const{validateFirst:p=!1,messageVariables:E,validateDebounce:R}=this.props;let x=this.getRules();if(d&&(x=x.filter(w=>w).filter(w=>{const{validateTrigger:T}=w;return T?toArray$1(T).includes(d):!0})),R&&d&&(await new Promise(w=>{setTimeout(w,R)}),this.validatePromise!==C))return[];const A=validateRules(n,a,x,i,p,E);return A.catch(w=>w).then((w=EMPTY_ERRORS)=>{if(this.validatePromise===C){this.validatePromise=null;const T=[],M=[];w.forEach?.(({rule:{warningOnly:h},errors:l=EMPTY_ERRORS})=>{h?M.push(...l):T.push(...l)}),this.errors=T,this.warnings=M,this.triggerMetaEvent(),this.reRender()}}),A});return y||(this.validatePromise=C,this.dirty=!0,this.errors=EMPTY_ERRORS,this.warnings=EMPTY_WARNINGS,this.triggerMetaEvent(),this.reRender()),C};isFieldValidating=()=>!!this.validatePromise;isFieldTouched=()=>this.touched;isFieldDirty=()=>{if(this.dirty||this.props.initialValue!==void 0)return!0;const{fieldContext:i}=this.props,{getInitialValue:n}=i.getInternalHooks(HOOK_MARK);return n(this.getNamePath())!==void 0};getErrors=()=>this.errors;getWarnings=()=>this.warnings;isListField=()=>this.props.isListField;isList=()=>this.props.isList;isPreserve=()=>this.props.preserve;getMeta=()=>(this.prevValidating=this.isFieldValidating(),{touched:this.isFieldTouched(),validating:this.prevValidating,errors:this.errors,warnings:this.warnings,name:this.getNamePath(),validated:this.validatePromise===null});getOnlyChild=i=>{if(typeof i=="function"){const a=this.getMeta();return{...this.getOnlyChild(i(this.getControlled(),a,this.props.fieldContext)),isFunction:!0}}const n=toArray$3(i);return n.length!==1||!reactExports.isValidElement(n[0])?{child:n,isFunction:!1}:{child:n[0],isFunction:!1}};getValue=i=>{const{getFieldsValue:n}=this.props.fieldContext,a=this.getNamePath();return get(i||n(!0),a)};getControlled=(i={})=>{const{name:n,trigger:a="onChange",validateTrigger:d,getValueFromEvent:y,normalize:C,valuePropName:p="value",getValueProps:E,fieldContext:R}=this.props,x=d!==void 0?d:R.validateTrigger,A=this.getNamePath(),{getInternalHooks:w,getFieldsValue:T}=R,{dispatch:M}=w(HOOK_MARK),h=this.getValue(),l=E||(S=>({[p]:S})),c=i[a],g=n!==void 0?l(h):{},v={...i,...g};return v[a]=(...S)=>{this.touched=!0,this.dirty=!0,this.triggerMetaEvent();let u;y?u=y(...S):u=defaultGetValueFromEvent(p,...S),C&&(u=C(u,h,T(!0))),u!==h&&M({type:"updateValue",namePath:A,value:u}),c&&c(...S)},toArray$1(x||[]).forEach(S=>{const u=v[S];v[S]=(...m)=>{u&&u(...m);const{rules:_}=this.props;_&&_.length&&M({type:"validateField",namePath:A,triggerName:S})}}),v};render(){const{resetCount:i}=this.state,{children:n}=this.props,{child:a,isFunction:d}=this.getOnlyChild(n);let y;return d?y=a:reactExports.isValidElement(a)?y=reactExports.cloneElement(a,this.getControlled(a.props)):(warningOnce(!a,"`children` of Field is not validate ReactElement."),y=a),reactExports.createElement(reactExports.Fragment,{key:i},y)}}function WrapperField({name:s,...i}){const n=reactExports.useContext(Context),a=reactExports.useContext(ListContext),d=s!==void 0?getNamePath(s):void 0,y=i.isListField??!!a;let C="keep";return y||(C=`_${(d||[]).join("_")}`),reactExports.createElement(Field,_extends$4({key:C,name:d,isListField:y},i,{fieldContext:n}))}function List({name:s,initialValue:i,children:n,rules:a,validateTrigger:d,isListField:y}){const C=reactExports.useContext(Context),p=reactExports.useContext(ListContext),R=reactExports.useRef({keys:[],id:0}).current,x=reactExports.useMemo(()=>[...getNamePath(C.prefixName)||[],...getNamePath(s)],[C.prefixName,s]),A=reactExports.useMemo(()=>({...C,prefixName:x}),[C,x]),w=reactExports.useMemo(()=>({getKey:M=>{const h=x.length,l=M[h];return[R.keys[l],M.slice(h+1)]}}),[R,x]);if(typeof n!="function")return warningOnce(!1,"Form.List only accepts function as children."),null;const T=(M,h,{source:l})=>l==="internal"?!1:M!==h;return reactExports.createElement(ListContext.Provider,{value:w},reactExports.createElement(Context.Provider,{value:A},reactExports.createElement(WrapperField,{name:[],shouldUpdate:T,rules:a,validateTrigger:d,initialValue:i,isList:!0,isListField:y??!!p},({value:M=[],onChange:h},l)=>{const{getFieldValue:c}=C,g=()=>c(x||[])||[],v={add:(S,u)=>{const m=g();u>=0&&u<=m.length?(R.keys=[...R.keys.slice(0,u),R.id,...R.keys.slice(u)],h([...m.slice(0,u),S,...m.slice(u)])):(R.keys=[...R.keys,R.id],h([...m,S])),R.id+=1},remove:S=>{const u=g(),m=new Set(Array.isArray(S)?S:[S]);m.size<=0||(R.keys=R.keys.filter((_,D)=>!m.has(D)),h(u.filter((_,D)=>!m.has(D))))},move(S,u){if(S===u)return;const m=g();S<0||S>=m.length||u<0||u>=m.length||(R.keys=move(R.keys,S,u),h(move(m,S,u)))}};let b=M||[];return Array.isArray(b)||(b=[]),n(b.map((S,u)=>{let m=R.keys[u];return m===void 0&&(R.keys[u]=R.id,m=R.keys[u],R.id+=1),{name:u,key:m,isListField:!0}}),v,l)})))}function allPromiseFinish(s){let i=!1,n=s.length;const a=[];return s.length?new Promise((d,y)=>{s.forEach((C,p)=>{C.catch(E=>(i=!0,E)).then(E=>{n-=1,a[p]=E,!(n>0)&&(i&&y(a),d(a))})})}):Promise.resolve([])}const SPLIT="__@field_split__";function normalize(s){return s.map(i=>`${typeof i}:${i}`).join(SPLIT)}class NameMap{kvs=new Map;set(i,n){this.kvs.set(normalize(i),n)}get(i){return this.kvs.get(normalize(i))}update(i,n){const a=this.get(i),d=n(a);d?this.set(i,d):this.delete(i)}delete(i){this.kvs.delete(normalize(i))}map(i){return[...this.kvs.entries()].map(([n,a])=>{const d=n.split(SPLIT);return i({key:d.map(y=>{const[,C,p]=y.match(/^([^:]*):(.*)$/);return C==="number"?Number(p):p}),value:a})})}toJSON(){const i={};return this.map(({key:n,value:a})=>(i[n.join(".")]=a,null)),i}}class FormStore{formHooked=!1;forceRootUpdate;subscribable=!0;store={};fieldEntities=[];initialValues={};callbacks={};validateMessages=null;preserve=null;lastValidatePromise=null;constructor(i){this.forceRootUpdate=i}getForm=()=>({getFieldValue:this.getFieldValue,getFieldsValue:this.getFieldsValue,getFieldError:this.getFieldError,getFieldWarning:this.getFieldWarning,getFieldsError:this.getFieldsError,isFieldsTouched:this.isFieldsTouched,isFieldTouched:this.isFieldTouched,isFieldValidating:this.isFieldValidating,isFieldsValidating:this.isFieldsValidating,resetFields:this.resetFields,setFields:this.setFields,setFieldValue:this.setFieldValue,setFieldsValue:this.setFieldsValue,validateFields:this.validateFields,submit:this.submit,_init:!0,getInternalHooks:this.getInternalHooks});getInternalHooks=i=>i===HOOK_MARK?(this.formHooked=!0,{dispatch:this.dispatch,initEntityValue:this.initEntityValue,registerField:this.registerField,useSubscribe:this.useSubscribe,setInitialValues:this.setInitialValues,destroyForm:this.destroyForm,setCallbacks:this.setCallbacks,setValidateMessages:this.setValidateMessages,getFields:this.getFields,setPreserve:this.setPreserve,getInitialValue:this.getInitialValue,registerWatch:this.registerWatch,setBatchUpdate:this.setBatchUpdate}):(warningOnce(!1,"`getInternalHooks` is internal usage. Should not call directly."),null);useSubscribe=i=>{this.subscribable=i};prevWithoutPreserves=null;setInitialValues=(i,n)=>{if(this.initialValues=i||{},n){let a=merge$1(i,this.store);this.prevWithoutPreserves?.map(({key:d})=>{a=set(a,d,get(i,d))}),this.prevWithoutPreserves=null,this.updateStore(a)}};destroyForm=i=>{if(i)this.updateStore({});else{const n=new NameMap;this.getFieldEntities(!0).forEach(a=>{this.isMergedPreserve(a.isPreserve())||n.set(a.getNamePath(),!0)}),this.prevWithoutPreserves=n}};getInitialValue=i=>{const n=get(this.initialValues,i);return i.length?merge$1(n):n};setCallbacks=i=>{this.callbacks=i};setValidateMessages=i=>{this.validateMessages=i};setPreserve=i=>{this.preserve=i};watchList=[];registerWatch=i=>(this.watchList.push(i),()=>{this.watchList=this.watchList.filter(n=>n!==i)});notifyWatch=(i=[])=>{if(this.watchList.length){const n=this.getFieldsValue(),a=this.getFieldsValue(!0);this.watchList.forEach(d=>{d(n,a,i)})}};notifyWatchNamePathList=[];batchNotifyWatch=i=>{this.notifyWatchNamePathList.push(i),this.batch("notifyWatch",()=>{this.notifyWatch(this.notifyWatchNamePathList),this.notifyWatchNamePathList=[]})};batchUpdate;setBatchUpdate=i=>{this.batchUpdate=i};batch=(i,n)=>{this.batchUpdate(i,n)};timeoutId=null;warningUnhooked=()=>{};updateStore=i=>{this.store=i};getFieldEntities=(i=!1)=>i?this.fieldEntities.filter(n=>n.getNamePath().length):this.fieldEntities;getFieldsMap=(i=!1)=>{const n=new NameMap;return this.getFieldEntities(i).forEach(a=>{const d=a.getNamePath();n.set(d,a)}),n};getFieldEntitiesForNamePathList=i=>{if(!i)return this.getFieldEntities(!0);const n=this.getFieldsMap(!0);return i.map(a=>{const d=getNamePath(a);return n.get(d)||{INVALIDATE_NAME_PATH:getNamePath(a)}})};getFieldsValue=(i,n)=>{this.warningUnhooked();let a,d;if(i===!0||Array.isArray(i)?(a=i,d=n):i&&typeof i=="object"&&(d=i.filter),a===!0&&!d)return this.store;const y=this.getFieldEntitiesForNamePathList(Array.isArray(a)?a:null),C=[],p=[];y.forEach(R=>{const x=R.INVALIDATE_NAME_PATH||R.getNamePath();if(R.isList?.()){p.push(x);return}if(!d)C.push(x);else{const A="getMeta"in R?R.getMeta():null;d(A)&&C.push(x)}});let E=cloneByNamePathList(this.store,C.map(getNamePath));return p.forEach(R=>{get(E,R)||(E=set(E,R,[]))}),E};getFieldValue=i=>{this.warningUnhooked();const n=getNamePath(i);return get(this.store,n)};getFieldsError=i=>(this.warningUnhooked(),this.getFieldEntitiesForNamePathList(i).map((a,d)=>a&&!a.INVALIDATE_NAME_PATH?{name:a.getNamePath(),errors:a.getErrors(),warnings:a.getWarnings()}:{name:getNamePath(i[d]),errors:[],warnings:[]}));getFieldError=i=>{this.warningUnhooked();const n=getNamePath(i);return this.getFieldsError([n])[0].errors};getFieldWarning=i=>{this.warningUnhooked();const n=getNamePath(i);return this.getFieldsError([n])[0].warnings};isFieldsTouched=(...i)=>{this.warningUnhooked();const[n,a]=i;let d,y=!1;i.length===0?d=null:i.length===1?Array.isArray(n)?(d=n.map(getNamePath),y=!1):(d=null,y=n):(d=n.map(getNamePath),y=a);const C=this.getFieldEntities(!0),p=A=>A.isFieldTouched();if(!d)return y?C.every(A=>p(A)||A.isList()):C.some(p);const E=new NameMap;d.forEach(A=>{E.set(A,[])}),C.forEach(A=>{const w=A.getNamePath();d.forEach(T=>{T.every((M,h)=>w[h]===M)&&E.update(T,M=>[...M,A])})});const R=A=>A.some(p),x=E.map(({value:A})=>A);return y?x.every(R):x.some(R)};isFieldTouched=i=>(this.warningUnhooked(),this.isFieldsTouched([i]));isFieldsValidating=i=>{this.warningUnhooked();const n=this.getFieldEntities();if(!i)return n.some(d=>d.isFieldValidating());const a=i.map(getNamePath);return n.some(d=>{const y=d.getNamePath();return containsNamePath(a,y)&&d.isFieldValidating()})};isFieldValidating=i=>(this.warningUnhooked(),this.isFieldsValidating([i]));resetWithFieldInitialValue=(i={})=>{const n=new NameMap,a=this.getFieldEntities(!0);a.forEach(C=>{const{initialValue:p}=C.props,E=C.getNamePath();if(p!==void 0){const R=n.get(E)||new Set;R.add({entity:C,value:p}),n.set(E,R)}});const d=C=>{C.forEach(p=>{const{initialValue:E}=p.props;if(E!==void 0){const R=p.getNamePath();if(this.getInitialValue(R)!==void 0)warningOnce(!1,`Form already set 'initialValues' with path '${R.join(".")}'. Field can not overwrite it.`);else{const A=n.get(R);if(A&&A.size>1)warningOnce(!1,`Multiple Field with path '${R.join(".")}' set 'initialValue'. Can not decide which one to pick.`);else if(A){const w=this.getFieldValue(R);!p.isListField()&&(!i.skipExist||w===void 0)&&this.updateStore(set(this.store,R,[...A][0].value))}}}})};let y;i.entities?y=i.entities:i.namePathList?(y=[],i.namePathList.forEach(C=>{const p=n.get(C);p&&y.push(...[...p].map(E=>E.entity))})):y=a,d(y)};resetFields=i=>{this.warningUnhooked();const n=this.store;if(!i){this.updateStore(merge$1(this.initialValues)),this.resetWithFieldInitialValue(),this.notifyObservers(n,null,{type:"reset"}),this.notifyWatch();return}const a=i.map(getNamePath);a.forEach(d=>{const y=this.getInitialValue(d);this.updateStore(set(this.store,d,y))}),this.resetWithFieldInitialValue({namePathList:a}),this.notifyObservers(n,a,{type:"reset"}),this.notifyWatch(a)};setFields=i=>{this.warningUnhooked();const n=this.store,a=[];i.forEach(d=>{const{name:y,...C}=d,p=getNamePath(y);a.push(p),"value"in C&&this.updateStore(set(this.store,p,C.value)),this.notifyObservers(n,[p],{type:"setField",data:d})}),this.notifyWatch(a)};getFields=()=>this.getFieldEntities(!0).map(a=>{const d=a.getNamePath(),C={...a.getMeta(),name:d,value:this.getFieldValue(d)};return Object.defineProperty(C,"originRCField",{value:!0}),C});initEntityValue=i=>{const{initialValue:n}=i.props;if(n!==void 0){const a=i.getNamePath();get(this.store,a)===void 0&&this.updateStore(set(this.store,a,n))}};isMergedPreserve=i=>(i!==void 0?i:this.preserve)??!0;registerField=i=>{this.fieldEntities.push(i);const n=i.getNamePath();if(this.batchNotifyWatch(n),i.props.initialValue!==void 0){const a=this.store;this.resetWithFieldInitialValue({entities:[i],skipExist:!0}),this.notifyObservers(a,[i.getNamePath()],{type:"valueUpdate",source:"internal"})}return(a,d,y=[])=>{if(this.fieldEntities=this.fieldEntities.filter(C=>C!==i),!this.isMergedPreserve(d)&&(!a||y.length>1)){const C=a?void 0:this.getInitialValue(n);if(n.length&&this.getFieldValue(n)!==C&&this.fieldEntities.every(p=>!matchNamePath(p.getNamePath(),n))){const p=this.store;this.updateStore(set(p,n,C,!0)),this.notifyObservers(p,[n],{type:"remove"}),this.triggerDependenciesUpdate(p,n)}}this.batchNotifyWatch(n)}};dispatch=i=>{switch(i.type){case"updateValue":{const{namePath:n,value:a}=i;this.updateValue(n,a);break}case"validateField":{const{namePath:n,triggerName:a}=i;this.validateFields([n],{triggerName:a});break}}};notifyObservers=(i,n,a)=>{if(this.subscribable){const d={...a,store:this.getFieldsValue(!0)};this.getFieldEntities().forEach(({onStoreChange:y})=>{y(i,n,d)})}else this.forceRootUpdate()};triggerDependenciesUpdate=(i,n)=>{const a=this.getDependencyChildrenFields(n);return a.length&&this.validateFields(a),this.notifyObservers(i,a,{type:"dependenciesUpdate",relatedFields:[n,...a]}),a};updateValue=(i,n)=>{const a=getNamePath(i),d=this.store;this.updateStore(set(this.store,a,n)),this.notifyObservers(d,[a],{type:"valueUpdate",source:"internal"}),this.notifyWatch([a]);const y=this.triggerDependenciesUpdate(d,a),{onValuesChange:C}=this.callbacks;if(C){const p=this.getFieldsMap(!0).get(a),E=cloneByNamePathList(this.store,[a]),R=this.getFieldsValue(),x=mergeWith([R,E],{prepareArray:A=>p?.isList()?[]:[...A||[]]});C(E,x)}this.triggerOnFieldsChange([a,...y])};setFieldsValue=i=>{this.warningUnhooked();const n=this.store;if(i){const a=merge$1(this.store,i);this.updateStore(a)}this.notifyObservers(n,null,{type:"valueUpdate",source:"external"}),this.notifyWatch()};setFieldValue=(i,n)=>{this.setFields([{name:i,value:n,errors:[],warnings:[],touched:!0}])};getDependencyChildrenFields=i=>{const n=new Set,a=[],d=new NameMap;this.getFieldEntities().forEach(C=>{const{dependencies:p}=C.props;(p||[]).forEach(E=>{const R=getNamePath(E);d.update(R,(x=new Set)=>(x.add(C),x))})});const y=C=>{(d.get(C)||new Set).forEach(E=>{if(!n.has(E)){n.add(E);const R=E.getNamePath();E.isFieldDirty()&&R.length&&(a.push(R),y(R))}})};return y(i),a};triggerOnFieldsChange=(i,n)=>{const{onFieldsChange:a}=this.callbacks;if(a){const d=this.getFields();if(n){const C=new NameMap;n.forEach(({name:p,errors:E})=>{C.set(p,E)}),d.forEach(p=>{p.errors=C.get(p.name)||p.errors})}const y=d.filter(({name:C})=>containsNamePath(i,C));y.length&&a(y,d)}};validateFields=(i,n)=>{this.warningUnhooked();let a,d;Array.isArray(i)||typeof i=="string"||typeof n=="string"?(a=i,d=n):d=i;const y=!!a,C=y?a.map(getNamePath):[],p=[...C],E=[],R=String(Date.now()),x=new Set,{recursive:A,dirty:w}=d||{};this.getFieldEntities(!0).forEach(l=>{const c=l.getNamePath();if(y||((!l.isList()||!C.some(g=>matchNamePath(g,c,!0)))&&p.push(c),C.push(c)),!(!l.props.rules||!l.props.rules.length)&&!(w&&!l.isFieldDirty())&&(x.add(c.join(R)),!y||containsNamePath(C,c,A))){const g=l.validateRules({validateMessages:{...defaultValidateMessages,...this.validateMessages},...d});E.push(g.then(()=>({name:c,errors:[],warnings:[]})).catch(v=>{const b=[],S=[];return v.forEach?.(({rule:{warningOnly:u},errors:m})=>{u?S.push(...m):b.push(...m)}),b.length?Promise.reject({name:c,errors:b,warnings:S}):{name:c,errors:b,warnings:S}}))}});const T=allPromiseFinish(E);this.lastValidatePromise=T,T.catch(l=>l).then(l=>{const c=l.map(({name:g})=>g);this.notifyObservers(this.store,c,{type:"validateFinish"}),this.triggerOnFieldsChange(c,l)});const M=T.then(()=>this.lastValidatePromise===T?Promise.resolve(this.getFieldsValue(p)):Promise.reject([])).catch(l=>{const c=l.filter(v=>v&&v.errors.length),g=c[0]?.errors?.[0];return Promise.reject({message:g,values:this.getFieldsValue(C),errorFields:c,outOfDate:this.lastValidatePromise!==T})});M.catch(l=>l);const h=C.filter(l=>x.has(l.join(R)));return this.triggerOnFieldsChange(h),M};submit=()=>{this.warningUnhooked(),this.validateFields().then(i=>{const{onFinish:n}=this.callbacks;if(n)try{n(i)}catch(a){console.error(a)}}).catch(i=>{const{onFinishFailed:n}=this.callbacks;n&&n(i)})}}function useForm(s){const i=reactExports.useRef(null),[,n]=reactExports.useState({});if(!i.current)if(s)i.current=s;else{const a=()=>{n({})},d=new FormStore(a);i.current=d.getForm()}return[i.current]}const FormContext=reactExports.createContext({triggerFormChange:()=>{},triggerFormFinish:()=>{},registerForm:()=>{},unregisterForm:()=>{}}),FormProvider=({validateMessages:s,onFormChange:i,onFormFinish:n,children:a})=>{const d=reactExports.useContext(FormContext),y=reactExports.useRef({});return reactExports.createElement(FormContext.Provider,{value:{...d,validateMessages:{...d.validateMessages,...s},triggerFormChange:(C,p)=>{i&&i(C,{changedFields:p,forms:y.current}),d.triggerFormChange(C,p)},triggerFormFinish:(C,p)=>{n&&n(C,{values:p,forms:y.current}),d.triggerFormFinish(C,p)},registerForm:(C,p)=>{C&&(y.current={...y.current,[C]:p}),d.registerForm(C,p)},unregisterForm:C=>{const p={...y.current};delete p[C],y.current=p,d.unregisterForm(C)}}},a)},BatchUpdate=reactExports.forwardRef((s,i)=>{const[n,a]=reactExports.useState({});return reactExports.useLayoutEffect(()=>{const d=Object.keys(n);d.length&&(d.forEach(y=>{n[y]?.()}),a({}))},[n]),reactExports.useImperativeHandle(i,()=>({batch:(d,y)=>{a(C=>({...C,[d]:y}))}})),null});function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},_extends$3.apply(this,arguments)}const Form=({name:s,initialValues:i,fields:n,form:a,preserve:d,children:y,component:C="form",validateMessages:p,validateTrigger:E="onChange",onValuesChange:R,onFieldsChange:x,onFinish:A,onFinishFailed:w,clearOnDestroy:T,...M},h)=>{const l=reactExports.useRef(null),c=reactExports.useContext(FormContext),[g]=useForm(a),{useSubscribe:v,setInitialValues:b,setCallbacks:S,setValidateMessages:u,setPreserve:m,destroyForm:_,setBatchUpdate:D}=g.getInternalHooks(HOOK_MARK);reactExports.useImperativeHandle(h,()=>({...g,nativeElement:l.current})),reactExports.useEffect(()=>(c.registerForm(s,g),()=>{c.unregisterForm(s)}),[c,g,s]),u({...c.validateMessages,...p}),S({onValuesChange:R,onFieldsChange:(F,...K)=>{c.triggerFormChange(s,F),x&&x(F,...K)},onFinish:F=>{c.triggerFormFinish(s,F),A&&A(F)},onFinishFailed:w}),m(d);const L=reactExports.useRef(null);b(i,!L.current),L.current||(L.current=!0);const P=reactExports.useRef(null),N=reactExports.useRef([]),U=()=>{P.current&&(N.current.forEach(([F,K])=>{P.current.batch(F,K)}),N.current=[])},V=reactExports.useCallback(F=>{P.current=F,U()},[]);D((F,K)=>{N.current.push([F,K]),U()}),reactExports.useEffect(()=>()=>_(T),[]);let G;const H=typeof y=="function";if(H){const F=g.getFieldsValue(!0);G=y(F,g)}else G=y;v(!H);const k=reactExports.useRef(null);reactExports.useEffect(()=>{isSimilar(k.current||[],n||[])||g.setFields(n||[]),k.current=n},[n,g]);const X=reactExports.useMemo(()=>({...g,validateTrigger:E}),[g,E]),$=reactExports.createElement(ListContext.Provider,{value:null},reactExports.createElement(Context.Provider,{value:X},G),reactExports.createElement(BatchUpdate,{ref:V}));return C===!1?$:reactExports.createElement(C,_extends$3({},M,{ref:l,onSubmit:F=>{F.preventDefault(),F.stopPropagation(),g.submit()},onReset:F=>{F.preventDefault(),g.resetFields(),M.onReset?.(F)}}),$)};function stringify(s){try{return JSON.stringify(s)}catch{return Math.random()}}function useWatch(...s){const[i,n={}]=s,a=isFormInstance(n)?{form:n}:n,d=a.form,[y,C]=reactExports.useState(()=>typeof i=="function"?i({}):void 0),p=reactExports.useMemo(()=>stringify(y),[y]),E=reactExports.useRef(p);E.current=p;const R=reactExports.useContext(Context),x=d||R,A=x&&x._init,{getFieldsValue:w,getInternalHooks:T}=x,{registerWatch:M}=T(HOOK_MARK),h=useEvent((c,g)=>{const v=a.preserve?g??w(!0):c??w(),b=typeof i=="function"?i(v):get(v,getNamePath(i));stringify(y)!==stringify(b)&&C(b)}),l=typeof i=="function"?i:JSON.stringify(i);return reactExports.useEffect(()=>{A&&h()},[A,l]),reactExports.useEffect(()=>A?M((g,v)=>{h(g,v)}):void 0,[A]),y}const InternalForm=reactExports.forwardRef(Form),RefForm=InternalForm;RefForm.FormProvider=FormProvider;RefForm.Field=WrapperField;RefForm.List=List;RefForm.useForm=useForm;RefForm.useWatch=useWatch;const FormItemInputContext=reactExports.createContext({}),NoFormStyle=({children:s,status:i,override:n})=>{const a=reactExports.useContext(FormItemInputContext),d=reactExports.useMemo(()=>{const y={...a};return n&&delete y.isFormItemInput,i&&(delete y.status,delete y.hasFeedback,delete y.feedbackIcon),y},[i,n,a]);return reactExports.createElement(FormItemInputContext.Provider,{value:d},s)},ContextIsolator=s=>{const{space:i,form:n,children:a}=s;if(!isNonNullable(a))return null;let d=a;return n&&(d=React.createElement(NoFormStyle,{override:!0,status:!0},d)),i&&(d=React.createElement(NoCompactStyle,null,d)),d};var CheckOutlined$1={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},_extends$2.apply(this,arguments)}const CheckOutlined=(s,i)=>reactExports.createElement(Icon,_extends$2({},s,{ref:i,icon:CheckOutlined$1})),RefIcon=reactExports.forwardRef(CheckOutlined),Popup=s=>{const{children:i,prefixCls:n,id:a,classNames:d,styles:y,className:C,style:p}=s;return reactExports.createElement("div",{id:a,className:clsx(`${n}-container`,d?.container,C),style:{...y?.container,...p},role:"tooltip"},typeof i=="function"?i():i)},autoAdjustOverflowTopBottom={shiftX:64,adjustY:1},autoAdjustOverflowLeftRight={adjustX:1,shiftY:!0},targetOffset=[0,0],placements={left:{points:["cr","cl"],overflow:autoAdjustOverflowLeftRight,offset:[-4,0],targetOffset},right:{points:["cl","cr"],overflow:autoAdjustOverflowLeftRight,offset:[4,0],targetOffset},top:{points:["bc","tc"],overflow:autoAdjustOverflowTopBottom,offset:[0,-4],targetOffset},bottom:{points:["tc","bc"],overflow:autoAdjustOverflowTopBottom,offset:[0,4],targetOffset},topLeft:{points:["bl","tl"],overflow:autoAdjustOverflowTopBottom,offset:[0,-4],targetOffset},leftTop:{points:["tr","tl"],overflow:autoAdjustOverflowLeftRight,offset:[-4,0],targetOffset},topRight:{points:["br","tr"],overflow:autoAdjustOverflowTopBottom,offset:[0,-4],targetOffset},rightTop:{points:["tl","tr"],overflow:autoAdjustOverflowLeftRight,offset:[4,0],targetOffset},bottomRight:{points:["tr","br"],overflow:autoAdjustOverflowTopBottom,offset:[0,4],targetOffset},rightBottom:{points:["bl","br"],overflow:autoAdjustOverflowLeftRight,offset:[4,0],targetOffset},bottomLeft:{points:["tl","bl"],overflow:autoAdjustOverflowTopBottom,offset:[0,4],targetOffset},leftBottom:{points:["br","bl"],overflow:autoAdjustOverflowLeftRight,offset:[-4,0],targetOffset}};function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},_extends$1.apply(this,arguments)}const Tooltip$1=reactExports.forwardRef((s,i)=>{const{trigger:n=["hover"],mouseEnterDelay:a=0,mouseLeaveDelay:d=.1,prefixCls:y="rc-tooltip",children:C,onVisibleChange:p,afterVisibleChange:E,motion:R,placement:x="right",align:A={},destroyOnHidden:w=!1,defaultVisible:T,getTooltipContainer:M,arrowContent:h,overlay:l,id:c,showArrow:g=!0,classNames:v,styles:b,...S}=s,u=useId(c),m=reactExports.useRef(null);reactExports.useImperativeHandle(i,()=>m.current);const _={...S};"visible"in s&&(_.popupVisible=s.visible);const D=reactExports.useMemo(()=>{if(!g)return!1;const P=g===!0?{}:g;return{...P,className:clsx(P.className,v?.arrow),style:{...P.style,...b?.arrow},content:P.content??h}},[g,v?.arrow,b?.arrow,h]),L=({open:P})=>{const N=reactExports.Children.only(C),U={"aria-describedby":l&&P?u:void 0};return reactExports.cloneElement(N,U)};return reactExports.createElement(Trigger,_extends$1({popupClassName:v?.root,prefixCls:y,popup:reactExports.createElement(Popup,{key:"content",prefixCls:y,id:u,classNames:v,styles:b},l),action:n,builtinPlacements:placements,popupPlacement:x,ref:m,popupAlign:A,getPopupContainer:M,onOpenChange:p,afterOpenChange:E,popupMotion:R,defaultPopupVisible:T,autoDestroy:w,mouseLeaveDelay:d,popupStyle:b?.root,mouseEnterDelay:a,arrow:D,uniqueContainerClassName:v?.uniqueContainer,uniqueContainerStyle:b?.uniqueContainer},_),L)});function getArrowToken(s){const{sizePopupArrow:i,borderRadiusXS:n,borderRadiusOuter:a}=s,d=i/2,y=0,C=d,p=a*1/Math.sqrt(2),E=d-a*(1-1/Math.sqrt(2)),R=d-n*(1/Math.sqrt(2)),x=a*(Math.sqrt(2)-1)+n*(1/Math.sqrt(2)),A=2*d-R,w=x,T=2*d-p,M=E,h=2*d-y,l=C,c=d*Math.sqrt(2)+a*(Math.sqrt(2)-2),g=a*(Math.sqrt(2)-1),v=`polygon(${g}px 100%, 50% ${g}px, ${2*d-g}px 100%, ${g}px 100%)`,b=`path('M ${y} ${C} A ${a} ${a} 0 0 0 ${p} ${E} L ${R} ${x} A ${n} ${n} 0 0 1 ${A} ${w} L ${T} ${M} A ${a} ${a} 0 0 0 ${h} ${l} Z')`;return{arrowShadowWidth:c,arrowPath:b,arrowPolygon:v}}const genRoundedArrow=(s,i,n)=>{const{sizePopupArrow:a,arrowPolygon:d,arrowPath:y,arrowShadowWidth:C,borderRadiusXS:p,calc:E}=s;return{pointerEvents:"none",width:a,height:a,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:a,height:E(a).div(2).equal(),background:i,clipPath:{_multi_value_:!0,value:[d,y]},content:'""'},"&::after":{content:'""',position:"absolute",width:C,height:C,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${unit$1(p)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:n,zIndex:0,background:"transparent"}}},MAX_VERTICAL_CONTENT_RADIUS=8;function getArrowOffsetToken(s){const{contentRadius:i,limitVerticalRadius:n}=s,a=i>12?i+2:12;return{arrowOffsetHorizontal:a,arrowOffsetVertical:n?MAX_VERTICAL_CONTENT_RADIUS:a}}function isInject(s,i){return s?i:{}}function getArrowStyle(s,i,n){const{componentCls:a,boxShadowPopoverArrow:d,arrowOffsetVertical:y,arrowOffsetHorizontal:C}=s,{arrowDistance:p=0,arrowPlacement:E={left:!0,right:!0,top:!0,bottom:!0}}={};return{[a]:{[`${a}-arrow`]:[{position:"absolute",zIndex:1,display:"block",...genRoundedArrow(s,i,d),"&:before":{background:i}}],...isInject(!!E.top,{[[`&-placement-top > ${a}-arrow`,`&-placement-topLeft > ${a}-arrow`,`&-placement-topRight > ${a}-arrow`].join(",")]:{bottom:p,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${a}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":C,[`> ${a}-arrow`]:{left:{_skip_check_:!0,value:C}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${unit$1(C)})`,[`> ${a}-arrow`]:{right:{_skip_check_:!0,value:C}}}}),...isInject(!!E.bottom,{[[`&-placement-bottom > ${a}-arrow`,`&-placement-bottomLeft > ${a}-arrow`,`&-placement-bottomRight > ${a}-arrow`].join(",")]:{top:p,transform:"translateY(-100%)"},[`&-placement-bottom > ${a}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":C,[`> ${a}-arrow`]:{left:{_skip_check_:!0,value:C}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${unit$1(C)})`,[`> ${a}-arrow`]:{right:{_skip_check_:!0,value:C}}}}),...isInject(!!E.left,{[[`&-placement-left > ${a}-arrow`,`&-placement-leftTop > ${a}-arrow`,`&-placement-leftBottom > ${a}-arrow`].join(",")]:{right:{_skip_check_:!0,value:p},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${a}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${a}-arrow`]:{top:y},[`&-placement-leftBottom > ${a}-arrow`]:{bottom:y}}),...isInject(!!E.right,{[[`&-placement-right > ${a}-arrow`,`&-placement-rightTop > ${a}-arrow`,`&-placement-rightBottom > ${a}-arrow`].join(",")]:{left:{_skip_check_:!0,value:p},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${a}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${a}-arrow`]:{top:y},[`&-placement-rightBottom > ${a}-arrow`]:{bottom:y}})}}}function getOverflowOptions(s,i,n,a){if(a===!1)return{adjustX:!1,adjustY:!1};const d=a&&typeof a=="object"?a:{},y={};switch(s){case"top":case"bottom":y.shiftX=i.arrowOffsetHorizontal*2+n,y.shiftY=!0,y.adjustY=!0;break;case"left":case"right":y.shiftY=i.arrowOffsetVertical*2+n,y.shiftX=!0,y.adjustX=!0;break}const C={...y,...d};return C.shiftX||(C.adjustX=!0),C.shiftY||(C.adjustY=!0),C}const PlacementAlignMap={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},ArrowCenterPlacementAlignMap={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},DisableAutoArrowList=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function getPlacements(s){const{arrowWidth:i,autoAdjustOverflow:n,arrowPointAtCenter:a,offset:d,borderRadius:y}=s,C=i/2,p={},E=getArrowOffsetToken({contentRadius:y,limitVerticalRadius:!0});return Object.keys(PlacementAlignMap).forEach(R=>{const A={...a&&ArrowCenterPlacementAlignMap[R]||PlacementAlignMap[R],offset:[0,0],dynamicInset:!0};switch(p[R]=A,DisableAutoArrowList.has(R)&&(A.autoArrow=!1),R){case"top":case"topLeft":case"topRight":A.offset[1]=-C-d;break;case"bottom":case"bottomLeft":case"bottomRight":A.offset[1]=C+d;break;case"left":case"leftTop":case"leftBottom":A.offset[0]=-C-d;break;case"right":case"rightTop":case"rightBottom":A.offset[0]=C+d;break}if(a)switch(R){case"topLeft":case"bottomLeft":A.offset[0]=-E.arrowOffsetHorizontal-C;break;case"topRight":case"bottomRight":A.offset[0]=E.arrowOffsetHorizontal+C;break;case"leftTop":case"rightTop":A.offset[1]=-E.arrowOffsetHorizontal*2+C;break;case"leftBottom":case"rightBottom":A.offset[1]=E.arrowOffsetHorizontal*2-C;break}A.overflow=getOverflowOptions(R,E,i,n),A.htmlRegion="visibleFirst"}),p}const useMergedArrow=(s,i)=>{const n=a=>typeof a=="boolean"?{show:a}:a||{};return React.useMemo(()=>{const a=n(s),d=n(i);return{...d,...a,show:a.show??d.show??!0}},[s,i])},genTooltipStyle=s=>{const{calc:i,componentCls:n,tooltipMaxWidth:a,tooltipColor:d,tooltipBg:y,tooltipBorderRadius:C,zIndexPopup:p,controlHeight:E,boxShadowSecondary:R,paddingSM:x,paddingXS:A,arrowOffsetHorizontal:w,sizePopupArrow:T}=s,M=i(C).add(T).add(w).equal(),l={minWidth:i(C).mul(2).add(T).equal(),minHeight:E,padding:`${unit$1(s.calc(x).div(2).equal())} ${unit$1(A)}`,color:`var(--ant-tooltip-color, ${d})`,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:y,borderRadius:C,boxShadow:R,boxSizing:"border-box"},c={"--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" ")};return[{[n]:{...resetComponent(s),position:"absolute",zIndex:p,display:"block",width:"max-content",maxWidth:a,visibility:"visible",...c,"&-hidden":{display:"none"},"--antd-arrow-background-color":y,[`${n}-container`]:[l,initFadeMotion(s,!0)],[`&:has(~ ${n}-unique-container)`]:{[`${n}-container`]:{border:"none",background:"transparent",boxShadow:"none"}},[["&-placement-topLeft","&-placement-topRight","&-placement-bottomLeft","&-placement-bottomRight"].join(",")]:{minWidth:M},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${n}-inner`]:{borderRadius:s.min(C,MAX_VERTICAL_CONTENT_RADIUS)}},[`${n}-content`]:{position:"relative"},...genPresetColor(s,(g,{darkColor:v})=>({[`&${n}-${g}`]:{[`${n}-container`]:{backgroundColor:v},[`${n}-arrow`]:{"--antd-arrow-background-color":v}}})),"&-rtl":{direction:"rtl"}}},getArrowStyle(s,"var(--antd-arrow-background-color)"),{[`${n}-pure`]:{position:"relative",maxWidth:"none",margin:s.sizePopupArrow}},{[`${n}-unique-container`]:{...l,...c,position:"absolute",zIndex:i(p).sub(1).equal(),"&-hidden":{display:"none"},"&-visible":{transition:`all ${s.motionDurationSlow}`}}}]},prepareComponentToken$1=s=>({zIndexPopup:s.zIndexPopupBase+70,...getArrowOffsetToken({contentRadius:s.borderRadius,limitVerticalRadius:!0}),...getArrowToken(merge(s,{borderRadiusOuter:Math.min(s.borderRadiusOuter,4)}))}),useStyle$1=(s,i,n=!0)=>genStyleHooks("Tooltip",d=>{const{borderRadius:y,colorTextLightSolid:C,colorBgSpotlight:p}=d,E=merge(d,{tooltipMaxWidth:250,tooltipColor:C,tooltipBorderRadius:y,tooltipBg:p});return[genTooltipStyle(E),initZoomMotion(d,"zoom-big-fast")]},prepareComponentToken$1,{resetStyle:!1,injectStyle:n})(s,i),inverseColors=PresetColors.map(s=>`${s}-inverse`);function isPresetColor(s,i=!0){return i?[].concat(_toConsumableArray(inverseColors),_toConsumableArray(PresetColors)).includes(s):PresetColors.includes(s)}function parseColor(s,i){const n=isPresetColor(i),a=clsx({[`${s}-${i}`]:i&&n}),d={},y={},C=generateColor(i).toRgb(),E=(.299*C.r+.587*C.g+.114*C.b)/255<.5?"#FFF":"#000";return i&&!n&&(d.background=i,d["--ant-tooltip-color"]=E,y["--antd-arrow-background-color"]=i),{className:a,overlayStyle:d,arrowStyle:y}}const PurePanel=s=>{const{prefixCls:i,className:n,placement:a="top",title:d,color:y,overlayInnerStyle:C,classNames:p,styles:E}=s,{getPrefixCls:R}=reactExports.useContext(ConfigContext),x=R("tooltip",i),A=useCSSVarCls(x),[w,T]=useStyle$1(x,A),M=parseColor(x,y),h=M.arrowStyle,l=reactExports.useMemo(()=>({container:{...C,...M.overlayStyle}}),[C,M.overlayStyle]),c={...s,placement:a},[g,v]=useMergeSemantic([p],[l,E],{props:c}),b=clsx(A,w,T,x,`${x}-pure`,`${x}-placement-${a}`,n,M.className);return reactExports.createElement("div",{className:b,style:h},reactExports.createElement("div",{className:`${x}-arrow`}),reactExports.createElement(Popup,{...s,className:w,prefixCls:x,classNames:g,styles:v},d))},InternalTooltip=reactExports.forwardRef((s,i)=>{const{prefixCls:n,openClassName:a,getTooltipContainer:d,color:y,children:C,afterOpenChange:p,arrow:E,destroyTooltipOnHide:R,destroyOnHidden:x,title:A,overlay:w,trigger:T,builtinPlacements:M,autoAdjustOverflow:h=!0,motion:l,getPopupContainer:c,placement:g="top",mouseEnterDelay:v=.1,mouseLeaveDelay:b=.1,rootClassName:S,styles:u,classNames:m,onOpenChange:_,overlayInnerStyle:D,overlayStyle:L,overlayClassName:P,...N}=s,[,U]=useToken(),{getPopupContainer:V,getPrefixCls:W,direction:G,className:H,style:k,classNames:X,styles:$,arrow:F,trigger:K}=useComponentConfig("tooltip"),te=useMergedArrow(E,F),re=te.show,le=T||K||"hover",oe=reactExports.useRef(null),ue=()=>{oe.current?.forceAlign()};reactExports.useImperativeHandle(i,()=>({forceAlign:ue,nativeElement:oe.current?.nativeElement,popupElement:oe.current?.popupElement}));const[he,ge]=useControlledState(s.defaultOpen??!1,s.open),Oe=!A&&!w&&A!==0,Le=be=>{ge(Oe?!1:be),!Oe&&_&&_(be)},$e=reactExports.useMemo(()=>M||getPlacements({arrowPointAtCenter:te?.pointAtCenter??!1,autoAdjustOverflow:h,arrowWidth:re?U.sizePopupArrow:0,borderRadius:U.borderRadius,offset:U.marginXXS}),[te,M,U,re,h]),we=reactExports.useMemo(()=>A===0?A:w||A||"",[w,A]),ce=reactExports.createElement(ContextIsolator,{space:!0},typeof we=="function"?we():we),xe={...s,trigger:le,color:y,placement:g,builtinPlacements:M,openClassName:a,arrow:E,autoAdjustOverflow:h,getPopupContainer:c,children:C,destroyTooltipOnHide:R,destroyOnHidden:x},[Ne,Xe]=useMergeSemantic([X,m],[$,u],{props:xe}),rt=W("tooltip",n),nt=W(),et=s["data-popover-inject"];let Ze=he;!("open"in s)&&Oe&&(Ze=!1);const qe=reactExports.isValidElement(C)&&!isFragment(C)?C:reactExports.createElement("span",null,C),Ve=qe.props,Ge=!Ve.className||typeof Ve.className=="string"?clsx(Ve.className,a||`${rt}-open`):Ve.className,at=useCSSVarCls(rt),[ot,J]=useStyle$1(rt,at,!et),ne=parseColor(rt,y),se=ne.arrowStyle,_e=clsx(at,ot,J),Se=clsx(P,{[`${rt}-rtl`]:G==="rtl"},ne.className,S,_e,H,Ne.root),[Pe,Ie]=useZIndex("Tooltip",N.zIndex),Q={...Xe.container,...D,...ne.overlayStyle},me=reactExports.createElement(Tooltip$1,{unique:!0,...N,trigger:le,zIndex:Pe,showArrow:re,placement:g,mouseEnterDelay:v,mouseLeaveDelay:b,prefixCls:rt,classNames:{root:Se,container:Ne.container,arrow:Ne.arrow,uniqueContainer:clsx(_e,Ne.container)},styles:{root:{...se,...Xe.root,...k,...L},container:Q,uniqueContainer:Q,arrow:Xe.arrow},getTooltipContainer:c||d||V,ref:oe,builtinPlacements:$e,overlay:ce,visible:Ze,onVisibleChange:Le,afterVisibleChange:p,arrowContent:reactExports.createElement("span",{className:`${rt}-arrow-content`}),motion:{motionName:getTransitionName(nt,"zoom-big-fast",typeof l?.motionName=="string"?l?.motionName:void 0),motionDeadline:1e3},destroyOnHidden:x??!!R},Ze?cloneElement(qe,{className:Ge}):qe);return reactExports.createElement(zIndexContext.Provider,{value:Ie},me)}),Tooltip=InternalTooltip;Tooltip._InternalPanelDoNotUseOrYouWillBeFired=PurePanel;Tooltip.UniqueProvider=UniqueProvider;const defaultProps={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,railColor:"#D9D9D9",railWidth:1,gapPosition:"bottom",loading:!1},useTransitionDuration=()=>{const s=reactExports.useRef([]),i=reactExports.useRef(null);return reactExports.useEffect(()=>{const n=Date.now();let a=!1;s.current.forEach(d=>{if(!d)return;a=!0;const y=d.style;y.transitionDuration=".3s, .3s, .3s, .06s",i.current&&n-i.current<100&&(y.transitionDuration="0s, 0s")}),a&&(i.current=Date.now())}),s.current},Block=({bg:s,children:i})=>reactExports.createElement("div",{style:{width:"100%",height:"100%",background:s}},i);function getPtgColors(s,i){return Object.keys(s).map(n=>{const a=parseFloat(n),d=`${Math.floor(a*i)}%`;return`${s[n]} ${d}`})}const PtgCircle=reactExports.forwardRef((s,i)=>{const{prefixCls:n,color:a,gradientId:d,radius:y,className:C,style:p,ptg:E,strokeLinecap:R,strokeWidth:x,size:A,gapDegree:w}=s,T=a&&typeof a=="object",M=T?"#FFF":void 0,h=A/2,l=reactExports.createElement("circle",{className:clsx(`${n}-circle-path`,C),r:y,cx:h,cy:h,stroke:M,strokeLinecap:R,strokeWidth:x,opacity:E===0?0:1,style:p,ref:i});if(!T)return l;const c=`${d}-conic`,g=w?`${180+w/2}deg`:"0deg",v=getPtgColors(a,(360-w)/360),b=getPtgColors(a,1),S=`conic-gradient(from ${g}, ${v.join(", ")})`,u=`linear-gradient(to ${w?"bottom":"top"}, ${b.join(", ")})`;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("mask",{id:c},l),reactExports.createElement("foreignObject",{x:0,y:0,width:A,height:A,mask:`url(#${c})`},reactExports.createElement(Block,{bg:u},reactExports.createElement(Block,{bg:S}))))}),VIEW_BOX_SIZE=100,getCircleStyle=(s,i,n,a,d,y,C,p,E,R,x=0)=>{const A=n/100*360*((360-y)/360),w=y===0?0:{bottom:0,top:180,left:90,right:-90}[C];let T=(100-a)/100*i;E==="round"&&a!==100&&(T+=R/2,T>=i&&(T=i-.01));const M=VIEW_BOX_SIZE/2;return{stroke:typeof p=="string"?p:void 0,strokeDasharray:`${i}px ${s}`,strokeDashoffset:T+x,transform:`rotate(${d+A+w}deg)`,transformOrigin:`${M}px ${M}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},getIndeterminateCircle=(({id:s,loading:i})=>{if(!i)return{indeterminateStyleProps:{},indeterminateStyleAnimation:null};const n=`${s}-indeterminate-animate`;return{indeterminateStyleProps:{transform:"rotate(0deg)",animation:`${n} 1s linear infinite`},indeterminateStyleAnimation:React.createElement("style",null,`@keyframes ${n} {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }`)}});function _extends(){return _extends=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},_extends.apply(this,arguments)}function toArray(s){const i=s??[];return Array.isArray(i)?i:[i]}const Circle$1=s=>{const{id:i,prefixCls:n,classNames:a={},styles:d={},steps:y,strokeWidth:C,railWidth:p,gapDegree:E=0,gapPosition:R,railColor:x,strokeLinecap:A,style:w,className:T,strokeColor:M,percent:h,loading:l,...c}={...defaultProps,...s},g=VIEW_BOX_SIZE/2,v=useId(i),b=`${v}-gradient`,S=g-C/2,u=Math.PI*2*S,m=E>0?90+E/2:-90,_=u*((360-E)/360),{count:D,gap:L}=typeof y=="object"?y:{count:y,gap:2},P=toArray(h),N=toArray(M),U=N.find(K=>K&&typeof K=="object"),W=U&&typeof U=="object"?"butt":A,{indeterminateStyleProps:G,indeterminateStyleAnimation:H}=getIndeterminateCircle({id:v,loading:l}),k=getCircleStyle(u,_,0,100,m,E,R,x,W,C),X=useTransitionDuration(),$=()=>{let K=0;return P.map((te,re)=>{const le=N[re]||N[N.length-1],oe=getCircleStyle(u,_,K,te,m,E,R,le,W,C);return K+=te,reactExports.createElement(PtgCircle,{key:re,color:le,ptg:te,radius:S,prefixCls:n,gradientId:b,className:a.track,style:{...oe,...G,...d.track},strokeLinecap:W,strokeWidth:C,gapDegree:E,ref:ue=>{X[re]=ue},size:VIEW_BOX_SIZE})}).reverse()},F=()=>{const K=Math.round(D*(P[0]/100)),te=100/D;let re=0;return new Array(D).fill(null).map((le,oe)=>{const ue=oe<=K-1?N[0]:x,he=ue&&typeof ue=="object"?`url(#${b})`:void 0,ge=getCircleStyle(u,_,re,te,m,E,R,ue,"butt",C,L);return re+=(_-ge.strokeDashoffset+L)*100/_,reactExports.createElement("circle",{key:oe,className:clsx(`${n}-circle-path`,a.track),r:S,cx:g,cy:g,stroke:he,strokeWidth:C,opacity:1,style:{...ge,...d.track},ref:Oe=>{X[oe]=Oe}})})};return reactExports.createElement("svg",_extends({className:clsx(`${n}-circle`,a.root,T),viewBox:`0 0 ${VIEW_BOX_SIZE} ${VIEW_BOX_SIZE}`,style:{...d.root,...w},id:i,role:"presentation"},c),!D&&reactExports.createElement("circle",{className:clsx(`${n}-circle-rail`,a.rail),r:S,cx:g,cy:g,stroke:x,strokeLinecap:W,strokeWidth:p||C,style:{...k,...d.rail}}),D?F():$(),H)};function validProgress(s){return!s||s<0?0:s>100?100:s}function getSuccessPercent({success:s}){let i;return s&&"percent"in s&&(i=s.percent),i}const getPercentage=({percent:s,success:i})=>{const n=validProgress(getSuccessPercent({success:i}));return[n,validProgress(validProgress(s)-n)]},getStrokeColor=({success:s={},strokeColor:i})=>{const{strokeColor:n}=s;return[n||presetPrimaryColors.green,i||null]},getSize=(s,i,n)=>{let a=-1,d=-1;if(i==="step"){const y=n.steps,C=n.strokeWidth;typeof s=="string"||typeof s>"u"?(a=s==="small"?2:14,d=C??8):typeof s=="number"?[a,d]=[s,s]:[a=14,d=8]=Array.isArray(s)?s:[s.width,s.height],a*=y}else if(i==="line"){const y=n?.strokeWidth;typeof s=="string"||typeof s>"u"?d=y||(s==="small"?6:8):typeof s=="number"?[a,d]=[s,s]:[a=-1,d=8]=Array.isArray(s)?s:[s.width,s.height]}else(i==="circle"||i==="dashboard")&&(typeof s=="string"||typeof s>"u"?[a,d]=s==="small"?[60,60]:[120,120]:typeof s=="number"?[a,d]=[s,s]:Array.isArray(s)&&(a=s[0]??s[1]??120,d=s[0]??s[1]??120));return[a,d]},CIRCLE_MIN_STROKE_WIDTH=3,getMinPercent=s=>CIRCLE_MIN_STROKE_WIDTH/s*100,OMIT_SEMANTIC_NAMES=["root","body","indicator"],Circle=s=>{const{prefixCls:i,classNames:n,styles:a,railColor:d,trailColor:y,strokeLinecap:C="round",gapPosition:p,gapPlacement:E,gapDegree:R,width:x=120,type:A,children:w,success:T,size:M=x,steps:h}=s,{direction:l}=useComponentConfig("progress"),c=d??y,[g,v]=getSize(M,"circle");let{strokeWidth:b}=s;b===void 0&&(b=Math.max(getMinPercent(g),6));const S={width:g,height:v,fontSize:g*.15+6},u=reactExports.useMemo(()=>{if(R||R===0)return R;if(A==="dashboard")return 75},[R,A]),m=getPercentage(s),_=reactExports.useMemo(()=>{const W=(E??p)||A==="dashboard"&&"bottom"||void 0,G=l==="rtl";switch(W){case"start":return G?"right":"left";case"end":return G?"left":"right";default:return W}},[l,E,p,A]),D=Object.prototype.toString.call(s.strokeColor)==="[object Object]",L=getStrokeColor({success:T,strokeColor:s.strokeColor}),P=clsx(`${i}-body`,{[`${i}-circle-gradient`]:D},n.body),N=reactExports.createElement(Circle$1,{steps:h,percent:h?m[1]:m,strokeWidth:b,railWidth:b,strokeColor:h?L[1]:L,strokeLinecap:C,railColor:c,prefixCls:i,gapDegree:u,gapPosition:_,classNames:omit(n,OMIT_SEMANTIC_NAMES),styles:omit(a,OMIT_SEMANTIC_NAMES)}),U=g<=20,V=reactExports.createElement("div",{className:P,style:{...S,...a.body}},N,!U&&w);return U?reactExports.createElement(Tooltip,{title:w},V):V},LineStrokeColorVar="--progress-line-stroke-color",genAntProgressActive=s=>{const i="-100%";return new Keyframe("antProgressLTRActive",{"0%":{transform:`translateX(${i}) scaleX(0)`,opacity:.1},"20%":{transform:`translateX(${i}) scaleX(0)`,opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}})},genBaseStyle=s=>{const{componentCls:i,iconCls:n}=s;return{[i]:{...resetComponent(s),display:"inline-flex","&-rtl":{direction:"rtl"},[`${i}-indicator`]:{color:s.colorText,lineHeight:1,whiteSpace:"nowrap",verticalAlign:"middle",wordBreak:"normal",[n]:{fontSize:s.fontSize}},[`&${i}-status-exception`]:{[`${i}-indicator`]:{color:s.colorError}},[`&${i}-status-success`]:{[`${i}-indicator`]:{color:s.colorSuccess}}}}},genLineStyle=s=>{const{componentCls:i}=s;return{[`${i}-line`]:{position:"relative",width:"100%",fontSize:s.fontSize,[`${i}-body`]:{display:"inline-flex",alignItems:"center",width:"100%",gap:s.marginXS},[`${i}-rail`]:{flex:"auto",background:s.remainingColor,borderRadius:s.lineBorderRadius,position:"relative",width:"100%"},[`&${i}-status-active`]:{[`${i}-track:after`]:{content:'""',position:"absolute",inset:0,backgroundColor:s.colorBgContainer,borderRadius:"inherit",opacity:0,animationName:genAntProgressActive(),animationDuration:s.progressActiveMotionDuration,animationTimingFunction:s.motionEaseOutQuint,animationIterationCount:"infinite"}},[`${i}-track`]:{position:"absolute",insetInlineStart:0,insetBlock:0,borderRadius:"inherit",background:s.defaultColor,transition:`all ${s.motionDurationSlow} ${s.motionEaseInOutCirc}`,minWidth:"max-content",display:"flex",alignItems:"center","&-success":{background:s.colorSuccess}},[`&${i}-status-exception`]:{[`${i}-track`]:{background:s.colorError}},[`&${i}-status-success`]:{[`${i}-track`]:{background:s.colorSuccess}},[`${i}-indicator-outer`]:{[`&${i}-indicator-start`]:{order:-1}},[`${i}-body-layout-bottom`]:{flexDirection:"column",alignItems:"center",gap:s.marginXXS},[`${i}-indicator${i}-indicator-inner`]:{color:s.colorWhite,paddingInline:s.paddingXXS,width:"100%",display:"flex",justifyContent:"center",[`&${i}-indicator-end`]:{justifyContent:"end"},[`&${i}-indicator-start`]:{justifyContent:"start"},[`&${i}-indicator-bright`]:{color:"rgba(0, 0, 0, 0.45)"}}}}},genCircleStyle=s=>{const{componentCls:i,iconCls:n}=s;return{[`${i}-circle`]:{[`${i}-circle-rail`]:{stroke:s.remainingColor},[`${i}-body:not(${i}-circle-gradient)`]:{[`${i}-circle-path`]:{stroke:s.defaultColor}},[`${i}-body`]:{position:"relative",lineHeight:1,backgroundColor:"transparent"},[`${i}-indicator`]:{position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:s.circleTextColor,fontSize:s.circleTextFontSize,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)",[n]:{fontSize:s.circleIconFontSize}},[`&${i}-status-exception`]:{[`${i}-body:not(${i}-circle-gradient)`]:{[`${i}-circle-path`]:{stroke:s.colorError}}},[`&${i}-status-success`]:{[`${i}-body:not(${i}-circle-gradient)`]:{[`${i}-circle-path`]:{stroke:s.colorSuccess}}}},[`${i}-inline-circle`]:{lineHeight:1,[`${i}-inner`]:{verticalAlign:"bottom"}}}},genStepStyle=s=>{const{componentCls:i}=s;return{[i]:{[`${i}-steps`]:{display:"inline-block","&-body":{display:"flex",flexDirection:"row",alignItems:"center",gap:s.progressStepMarginInlineEnd,[`${i}-indicator`]:{marginInlineStart:s.marginXS}},"&-item":{flexShrink:0,minWidth:s.progressStepMinWidth,backgroundColor:s.remainingColor,transition:`all ${s.motionDurationSlow}`,"&-active":{backgroundColor:s.defaultColor}}}}}},genSmallLine=s=>{const{componentCls:i,iconCls:n}=s;return{[i]:{[`${i}-small&-line, ${i}-small&-line ${i}-indicator ${n}`]:{fontSize:s.fontSizeSM}}}},prepareComponentToken=s=>({circleTextColor:s.colorText,defaultColor:s.colorInfo,remainingColor:s.colorFillSecondary,lineBorderRadius:100,circleTextFontSize:"1em",circleIconFontSize:`${s.fontSize/s.fontSizeSM}em`}),useStyle=genStyleHooks("Progress",s=>{const i=s.calc(s.marginXXS).div(2).equal(),n=merge(s,{progressStepMarginInlineEnd:i,progressStepMinWidth:i,progressActiveMotionDuration:"2.4s"});return[genBaseStyle(n),genLineStyle(n),genCircleStyle(n),genStepStyle(n),genSmallLine(n)]},prepareComponentToken),sortGradient=s=>{let i=[];return Object.keys(s).forEach(n=>{const a=Number.parseFloat(n.replace(/%/g,""));Number.isNaN(a)||i.push({key:a,value:s[n]})}),i=i.sort((n,a)=>n.key-a.key),i.map(({key:n,value:a})=>`${a} ${n}%`).join(", ")},handleGradient=(s,i)=>{const{from:n=presetPrimaryColors.blue,to:a=presetPrimaryColors.blue,direction:d=i==="rtl"?"to left":"to right",...y}=s;if(Object.keys(y).length!==0){const p=sortGradient(y),E=`linear-gradient(${d}, ${p})`;return{background:E,[LineStrokeColorVar]:E}}const C=`linear-gradient(${d}, ${n}, ${a})`;return{background:C,[LineStrokeColorVar]:C}},Line=s=>{const{prefixCls:i,classNames:n,styles:a,direction:d,percent:y,size:C,strokeWidth:p,strokeColor:E,strokeLinecap:R="round",children:x,railColor:A,trailColor:w,percentPosition:T,success:M}=s,{align:h,type:l}=T,c=A??w,g=R==="square"||R==="butt"?0:void 0,v=C??[-1,p||(C==="small"?6:8)],[b,S]=getSize(v,"line",{strokeWidth:p}),u={backgroundColor:c||void 0,borderRadius:g,height:S},m=`${i}-track`,_=E&&typeof E!="string"?handleGradient(E,d):{[LineStrokeColorVar]:E,background:E},D={width:`${validProgress(y)}%`,height:S,borderRadius:g,..._},L=getSuccessPercent(s),P={width:`${validProgress(L)}%`,height:S,borderRadius:g,backgroundColor:M?.strokeColor};return reactExports.createElement("div",{className:clsx(`${i}-body`,n.body,{[`${i}-body-layout-bottom`]:h==="center"&&l==="outer"}),style:{width:b>0?b:"100%",...a.body}},reactExports.createElement("div",{className:clsx(`${i}-rail`,n.rail),style:{...u,...a.rail}},reactExports.createElement("div",{className:clsx(m,n.track),style:{...D,...a.track}},l==="inner"&&x),L!==void 0&&reactExports.createElement("div",{className:clsx(m,`${m}-success`,n.track),style:{...P,...a.track}})),l==="outer"&&x)},Steps=s=>{const{classNames:i,styles:n,size:a,steps:d,rounding:y=Math.round,percent:C=0,strokeWidth:p=8,strokeColor:E,railColor:R,trailColor:x,prefixCls:A,children:w}=s,T=y(d*(C/100)),h=a??[a==="small"?2:14,p],[l,c]=getSize(h,"step",{steps:d,strokeWidth:p}),g=l/d,v=Array.from({length:d}),b=R??x;for(let S=0;S<d;S++){const u=Array.isArray(E)?E[S]:E;v[S]=reactExports.createElement("div",{key:S,className:clsx(`${A}-steps-item`,{[`${A}-steps-item-active`]:S<=T-1},i.track),style:{backgroundColor:S<=T-1?u:b,width:g,height:c,...n.track}})}return reactExports.createElement("div",{className:clsx(`${A}-steps-body`,i.body),style:n.body},v,w)},ProgressStatuses=["normal","exception","active","success"],Progress=reactExports.forwardRef((s,i)=>{const{prefixCls:n,className:a,rootClassName:d,classNames:y,styles:C,steps:p,strokeColor:E,percent:R=0,size:x="default",showInfo:A=!0,type:w="line",status:T,format:M,style:h,percentPosition:l={},...c}=s,{align:g="end",type:v="outer"}=l,b=Array.isArray(E)?E[0]:E,S=typeof E=="string"||Array.isArray(E)?E:void 0,u=reactExports.useMemo(()=>{if(b){const ue=typeof b=="string"?b:Object.values(b)[0];return new FastColor(ue).isLight()}return!1},[E]),m=reactExports.useMemo(()=>{const ue=getSuccessPercent(s);return Number.parseInt(ue!==void 0?(ue??0)?.toString():(R??0)?.toString(),10)},[R,s.success]),_=reactExports.useMemo(()=>!ProgressStatuses.includes(T)&&m>=100?"success":T||"normal",[T,m]),{getPrefixCls:D,direction:L,className:P,style:N,classNames:U,styles:V}=useComponentConfig("progress"),W=D("progress",n),[G,H]=useStyle(W),k={...s,percent:R,type:w,size:x,showInfo:A,percentPosition:l},[X,$]=useMergeSemantic([U,y],[V,C],{props:k}),F=w==="line",K=F&&!p,te=reactExports.useMemo(()=>{if(!A)return null;const ue=getSuccessPercent(s);let he;const ge=M||(Le=>`${Le}%`),Oe=F&&u&&v==="inner";return v==="inner"||M||_!=="exception"&&_!=="success"?he=ge(validProgress(R),validProgress(ue)):_==="exception"?he=F?reactExports.createElement(RefIcon$2,null):reactExports.createElement(RefIcon$1,null):_==="success"&&(he=F?reactExports.createElement(RefIcon$3,null):reactExports.createElement(RefIcon,null)),reactExports.createElement("span",{className:clsx(`${W}-indicator`,{[`${W}-indicator-bright`]:Oe,[`${W}-indicator-${g}`]:K,[`${W}-indicator-${v}`]:K},X.indicator),style:$.indicator,title:typeof he=="string"?he:void 0},he)},[A,R,m,_,w,W,M,F,u,v,g,K,X.indicator,$.indicator]),re={...s,classNames:X,styles:$};let le;w==="line"?le=p?reactExports.createElement(Steps,{...re,strokeColor:S,prefixCls:W,steps:typeof p=="object"?p.count:p},te):reactExports.createElement(Line,{...re,strokeColor:b,prefixCls:W,direction:L,percentPosition:{align:g,type:v}},te):(w==="circle"||w==="dashboard")&&(le=reactExports.createElement(Circle,{...re,strokeColor:b,prefixCls:W,progressStatus:_},te));const oe=clsx(W,`${W}-status-${_}`,{[`${W}-${w==="dashboard"&&"circle"||w}`]:w!=="line",[`${W}-inline-circle`]:w==="circle"&&getSize(x,"circle")[0]<=20,[`${W}-line`]:K,[`${W}-line-align-${g}`]:K,[`${W}-line-position-${v}`]:K,[`${W}-steps`]:p,[`${W}-show-info`]:A,[`${W}-${x}`]:typeof x=="string",[`${W}-rtl`]:L==="rtl"},P,a,d,X.root,G,H);return reactExports.createElement("div",{ref:i,style:{...N,...$.root,...h},className:oe,role:"progressbar","aria-valuenow":m,"aria-valuemin":0,"aria-valuemax":100,...omit(c,["railColor","trailColor","strokeWidth","width","gapDegree","gapPosition","gapPlacement","strokeLinecap","success"])},le)});function Assessment({result:s}){const i=s.binary_toxicity.probability,n=Math.round(i*100);let a="",d="",y="",C={},p=null;return i<.2?(a="Nguy c thp",d="#91F1B7",y=d,p=CircleCheckBig,C={border:"2px solid #91F1B7",background:"#F0FDF4"}):i<=.5?(a="Nguy c trung bnh",d="#FADB14",y=d,p=Info,C={border:"2px solid #FADB14",background:"#FFFBE6"}):(a="Nguy c cao",d="#FF4D4F",y=d,p=OctagonAlert,C={border:"2px solid #FF4D4F",background:"#FFF1F0"}),jsxRuntimeExports.jsxs(Card,{style:C,children:[jsxRuntimeExports.jsx(TitleCard,{Icon:p,title:"nh gi c tnh d on",subtitle:"(Da trn cng thc SMILES)",iconSize:"100%",iconStyle:{color:`${y}`,width:"150px"},titleStyle:{background:"none"}}),jsxRuntimeExports.jsx("hr",{style:{border:`1px solid ${y}`}}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:30},children:[jsxRuntimeExports.jsx("span",{children:"Nguy c c tnh tng qut"}),jsxRuntimeExports.jsxs("span",{children:[n,"%"]})]}),jsxRuntimeExports.jsx(Progress,{percent:n,strokeColor:d}),jsxRuntimeExports.jsxs("p",{className:"text-sm mt-2",children:["Mc  nh gi: ",jsxRuntimeExports.jsx("strong",{children:a})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted mt-1",children:" Xc sut phn t c t nht mt c tnh c tnh theo m hnh d on"})]})]})}const ToxicityProgress=({name:s,probability:i})=>{const n=Math.round(i*100);let a="#52c41a";return n>=70?a="#ff4d4f":n>=40&&(a="#faad14"),jsxRuntimeExports.jsxs("div",{style:{marginBottom:12},children:[jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"space-between"},children:jsxRuntimeExports.jsx("span",{children:s})}),jsxRuntimeExports.jsx(Progress,{percent:n,strokeColor:a})]})},OrganCard=({result:s})=>{const[i,n]=reactExports.useState(null),a={"Hepatobiliary disorders":"Hepatobiliary disorders (Ri lon gan mt)","Metabolism and nutrition disorders":"Metabolism and nutrition disorders (Ri lon chuyn ha v dinh dng)","Eye disorders":"Eye disorders (Ri lon mt)","Musculoskeletal and connective tissue disorders":"Musculoskeletal and connective tissue disorders (Ri lon c xng v m lin kt)","Gastrointestinal disorders":"Gastrointestinal disorders (Ri lon tiu ha)","Immune system disorders":"Immune system disorders (Ri lon h min dch)","Reproductive system and breast disorders":"Reproductive system and breast disorders (Ri lon h sinh sn v tuyn v)","General disorders and administration site conditions":"General disorders and administration site conditions (Ri lon ton thn v ti v tr dng thuc)","Endocrine disorders":"Endocrine disorders (Ri lon ni tit)","Vascular disorders":"Vascular disorders (Ri lon mch mu)","Blood and lymphatic system disorders":"Blood and lymphatic system disorders (Ri lon mu v h bch huyt)","Skin and subcutaneous tissue disorders":"Skin and subcutaneous tissue disorders (Ri lon da v m di da)","Congenital, familial and genetic disorders":"Congenital, familial and genetic disorders (Ri lon bm sinh, gia nh v di truyn)","Respiratory, thoracic and mediastinal disorders":"Respiratory, thoracic and mediastinal disorders (Ri lon h hp, lng ngc v trung tht)","Psychiatric disorders":"Psychiatric disorders (Ri lon tm thn)","Renal and urinary disorders":"Renal and urinary disorders (Ri lon thn v tit niu)","Ear and labyrinth disorders":"Ear and labyrinth disorders (Ri lon tai v m o)","Cardiac disorders":"Cardiac disorders (Ri lon tim mch)","Nervous system disorders":"Nervous system disorders (Ri lon h thn kinh)"},d=()=>{n(i===null?"desc":i==="desc"?"asc":"desc")},y=reactExports.useMemo(()=>{const C=Object.entries(s.organ_toxicity);return i===null?C:[...C].sort(([,p],[,E])=>i==="desc"?E-p:p-E)},[s.organ_toxicity,i]);return jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(TitleCard,{Icon:FlaskConical,title:"Kt qu d on c tnh theo c quan",subtitle:"Gi tr biu th xc sut hoc mc  c tnh d on cho tng h c quan",onSort:d,sortDirection:i}),jsxRuntimeExports.jsx("hr",{}),y.map(([C,p])=>{const E=C.replace("sider_","");return jsxRuntimeExports.jsx(ToxicityProgress,{name:a[E]||E,probability:p},C)})]})};function Result({result:s,error:i}){return i?jsxRuntimeExports.jsxs("p",{style:{color:"red"},children:[" ",i]}):s?jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:30},children:[jsxRuntimeExports.jsx("h3",{style:{fontSize:30,display:"flex",justifyContent:"center",alignItems:"center",marginTop:30,marginBottom:0},children:"Result "}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(TitleCard,{Icon:Image,title:s.smiles}),jsxRuntimeExports.jsx("hr",{})," ",jsxRuntimeExports.jsx(ImageArea,{result:s})]}),jsxRuntimeExports.jsx(Assessment,{result:s}),jsxRuntimeExports.jsx(OrganCard,{result:s})]}):null}function App(){const[s,i]=reactExports.useState(null),[n,a]=reactExports.useState(null);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsxs("div",{className:"app-content",children:[jsxRuntimeExports.jsx(MoleculeInput,{onResult:i,onError:a}),jsxRuntimeExports.jsx(Result,{result:s,error:n})]}),jsxRuntimeExports.jsx(Footer,{})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
